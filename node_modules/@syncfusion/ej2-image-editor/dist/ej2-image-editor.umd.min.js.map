{"version":3,"file":"ej2-image-editor.umd.min.js","sources":["../src/image-editor/action/crop.js","../src/image-editor/action/draw.js","../src/image-editor/action/export.js","../src/image-editor/action/filter.js","../src/image-editor/action/freehand-draw.js","../src/image-editor/action/selection.js","../src/image-editor/action/shape.js","../src/image-editor/action/transform.js","../src/image-editor/action/undo-redo.js","../src/image-editor/base/image-editor.js","../src/image-editor/base/enum.js","../src/image-editor/renderer/toolbar.js"],"sourcesContent":["import { extend, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nvar Crop = /** @class */ (function () {\n    function Crop(parent) {\n        this.croppedDegree = 0; // Specifies the degree when crop is performed\n        this.cropDestPoints = { startX: 0, startY: 0, width: 0, height: 0 }; // To redraw old image when navigate to crop tab\n        this.tempFlipPanPoint = { x: 0, y: 0 };\n        this.isPreventScaling = false;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Crop.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Crop.prototype.addEventListener = function () {\n        this.parent.on('crop', this.cropping, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Crop.prototype.removeEventListener = function () {\n        this.parent.off('crop', this.crop);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Crop.prototype.cropping = function (args) {\n        this.updateCropPvtVar();\n        switch (args.prop) {\n            case 'cropImg':\n                this.cropImg(args.value['isRotateCrop']);\n                break;\n            case 'cropCircle':\n                this.cropCircle(args.value['context'], args.value['isSave'], args.value['isFlip']);\n                break;\n            case 'setCurrSelPoints':\n                this.setCurrSelPoints(args.value['isSetDimension']);\n                break;\n            case 'updateRotatePan':\n                this.updateRotatePan();\n                break;\n            case 'crop':\n                this.crop(args.value['obj']);\n                break;\n            case 'calcRatio':\n                this.calcRatio(args.value['obj']);\n                break;\n            case 'isObjInImage':\n                this.isObjInImage(args.value['obj'], args.value['object']);\n                break;\n            case 'getCurrFlipState':\n                this.getCurrFlipState(args.value['panObj']);\n                break;\n            case 'setPreviousCropCurrentObj':\n                this.prevCropCurrObj = args.value['obj'];\n                break;\n            case 'setCropDestPoints':\n                this.cropDestPoints = args.value['point'];\n                break;\n            case 'getTempFlipPanPoint':\n                args.value['obj']['point'] = this.tempFlipPanPoint;\n                break;\n            case 'setTempFlipPanPoint':\n                if (isNullOrUndefined(args.value['isAdd'])) {\n                    this.tempFlipPanPoint = args.value['point'];\n                }\n                else {\n                    this.tempFlipPanPoint.x += args.value['point'].x;\n                    this.tempFlipPanPoint.y += args.value['point'].y;\n                }\n                break;\n            case 'getPreventScaling':\n                args.value['obj']['bool'] = this.isPreventScaling;\n                break;\n            case 'reset':\n                this.reset();\n                break;\n        }\n    };\n    Crop.prototype.getModuleName = function () {\n        return 'crop';\n    };\n    Crop.prototype.updateCropPvtVar = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n        if (parent.upperCanvas) {\n            this.upperContext = parent.upperCanvas.getContext('2d');\n        }\n    };\n    Crop.prototype.reset = function () {\n        this.prevCropCurrObj = null;\n        this.croppedDegree = 0;\n        this.cropDestPoints = { startX: 0, startY: 0, width: 0, height: 0 };\n        this.tempFlipPanPoint = { x: 0, y: 0 };\n        this.isPreventScaling = false;\n    };\n    Crop.prototype.cropImg = function (isRotateCrop) {\n        var parent = this.parent;\n        var isNullCrop = isNullOrUndefined(isRotateCrop);\n        var actPoint = parent.activeObj.activePoint;\n        parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n        if (isNullCrop) {\n            this.croppedDegree = parent.transform.degree;\n        }\n        if (isNullCrop && parent.transform.degree !== 0) {\n            this.updateCropObj();\n            var point = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                height: parent.img.destHeight };\n            parent.notify('transform', { prop: 'setCurrDestinationPoint', onPropertyChange: false, value: { point: point } });\n            this.rotateCrop();\n        }\n        else if (isNullCrop && parent.transform.currFlipState !== '') {\n            this.updateCropObj();\n            var point = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                height: parent.img.destHeight };\n            parent.notify('transform', { prop: 'setCurrDestinationPoint', onPropertyChange: false, value: { point: point } });\n            this.flipCrop();\n        }\n        else {\n            parent.notify('draw', { prop: 'setTempZoomFactor', onPropertyChange: false, value: { tempZoomFactor: parent.transform.zoomFactor } });\n            var ratio = this.calcRatio();\n            if (isNullCrop || !isRotateCrop) { // isRotateCrop is NULL or False\n                this.updateCropObj();\n                parent.notify('draw', { prop: 'resetPanPoints', onPropertyChange: false });\n                parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                var point = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                    height: parent.img.destHeight };\n                parent.notify('transform', { prop: 'setCurrDestinationPoint', onPropertyChange: false, value: { point: point } });\n                parent.currSelectionPoint = extend({}, parent.activeObj, {}, true);\n                this.cropDestPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                    height: parent.img.destHeight };\n            }\n            var obj = { width: 0, height: 0 };\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n                value: { width: actPoint.width * ratio.width,\n                    height: actPoint.height * ratio.height, obj: obj } });\n            var maxDimension = obj;\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            parent.img.srcLeft = (actPoint.startX * ratio.width) - (parent.img.destLeft * ratio.width);\n            parent.img.srcTop = (actPoint.startY * ratio.height) - (parent.img.destTop * ratio.height);\n            parent.img.srcWidth = (actPoint.width * ratio.width);\n            parent.img.srcHeight = (actPoint.height * ratio.height);\n            parent.img.destLeft = (parent.lowerCanvas.clientWidth - maxDimension.width) / 2;\n            parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.height) / 2;\n            parent.img.destWidth = maxDimension.width;\n            parent.img.destHeight = maxDimension.height;\n            var temp = this.lowerContext.filter;\n            parent.notify('finetune', { prop: 'updateBrightFilter', onPropertyChange: false });\n            this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n            this.lowerContext.filter = 'none';\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            this.cropObjColl();\n            parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                if (this.isObjInImage(parent.objColl[i])) {\n                    parent.notify('shape', { prop: 'apply', onPropertyChange: false,\n                        value: { shape: parent.objColl[i].shape, obj: parent.objColl[i], canvas: null } });\n                    parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                }\n            }\n            parent.activeObj = activeObj;\n            this.cropFreehandDrawColl();\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n            if (parent.currSelectionPoint.shape === 'crop-circle') {\n                this.cropCircle(this.lowerContext);\n            }\n            else {\n                parent.isCircleCrop = false;\n            }\n            this.lowerContext.filter = temp;\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.currObjType.isCustomCrop = false;\n            parent.pan(false);\n            parent.transform.defaultZoomFactor = 0;\n        }\n    };\n    Crop.prototype.updateCropObj = function () {\n        this.parent.afterCropActions = [];\n        var object = { currObj: {} };\n        this.parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var obj = object['currObj'];\n        this.parent.cropObj = extend({}, obj, {}, true);\n    };\n    Crop.prototype.rotateCrop = function () {\n        var parent = this.parent;\n        var shape = parent.activeObj.shape || '';\n        var tempDegree = parent.transform.degree;\n        parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n        parent.currSelectionPoint = extend({}, parent.activeObj, {}, true);\n        parent.objColl.push(parent.activeObj);\n        parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n        parent.notify('draw', { prop: 'setClientTransDim', onPropertyChange: false,\n            value: { isPreventDimension: null } });\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.transform.degree = 0;\n        var temp = this.lowerContext.filter;\n        parent.notify('finetune', { prop: 'updateBrightFilter', onPropertyChange: false });\n        this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n        this.lowerContext.filter = temp;\n        var length = 0;\n        if (tempDegree === 90 || tempDegree === -270) {\n            length = 3;\n        }\n        else if (tempDegree === 180 || tempDegree === -180) {\n            length = 2;\n        }\n        else if (tempDegree === 270 || tempDegree === -90) {\n            length = 1;\n        }\n        for (var i = 0; i < length; i++) {\n            parent.notify('shape', { prop: 'rotateObjColl', onPropertyChange: false });\n            parent.notify('freehand-draw', { prop: 'rotateFhdColl', onPropertyChange: false });\n        }\n        var activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        if (parent.transform.currFlipState !== '') {\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                parent.objColl[i].shapeFlip = '';\n            }\n            for (var i = 0; i < parent.freehandCounter; i++) {\n                parent.pointColl[i].shapeFlip = '';\n            }\n            parent.transform.degree = tempDegree;\n            var flipState = this.getCurrCropState('initial');\n            parent.transform.degree = 0;\n            parent.notify('shape', { prop: 'redrawObj', onPropertyChange: false, value: { degree: flipState } });\n            parent.notify('freehand-draw', { prop: 'flipFHDColl', onPropertyChange: false,\n                value: { value: flipState } });\n        }\n        parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n        parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: activeObj } });\n        parent.objColl.pop();\n        parent.transform.degree = 0;\n        this.cropImg(true);\n        parent.notify('transform', { prop: 'setReverseRotate', onPropertyChange: false, value: { bool: true } });\n        this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n        parent.transform.degree = tempDegree;\n        parent.notify('draw', { prop: 'setDestPoints', onPropertyChange: false });\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, context: null, isPreventCircleCrop: null } });\n        parent.notify('finetune', { prop: 'updateBrightFilter', onPropertyChange: false });\n        this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: null, context: null, isPreventCircleCrop: null } });\n        length = 0;\n        if (tempDegree === 90 || tempDegree === -270) {\n            length = 1;\n        }\n        else if (tempDegree === 180 || tempDegree === -180) {\n            length = 2;\n        }\n        else if (tempDegree === 270 || tempDegree === -90) {\n            length = 3;\n        }\n        for (var i = 0; i < length; i++) {\n            parent.notify('shape', { prop: 'rotateObjColl', onPropertyChange: false });\n            parent.notify('freehand-draw', { prop: 'rotateFhdColl', onPropertyChange: false });\n        }\n        if (this.getCurrFlipState() !== '') {\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                parent.objColl[i].shapeFlip = '';\n            }\n            for (var i = 0; i < parent.freehandCounter; i++) {\n                parent.pointColl[i].shapeFlip = '';\n            }\n            var flipState = this.getCurrCropState('reverse');\n            parent.notify('shape', { prop: 'redrawObj', onPropertyChange: false, value: { degree: flipState } });\n            parent.notify('freehand-draw', { prop: 'flipFHDColl', onPropertyChange: false,\n                value: { value: flipState } });\n        }\n        parent.notify('transform', { prop: 'setReverseRotate', onPropertyChange: false, value: { bool: false } });\n        this.lowerContext.filter = 'none';\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            if (this.isObjInImage(parent.objColl[i])) {\n                parent.notify('shape', { prop: 'apply', onPropertyChange: false,\n                    value: { shape: parent.objColl[i].shape, obj: parent.objColl[i], canvas: null } });\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            }\n        }\n        parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n        if (shape === 'crop-circle') {\n            this.cropCircle(this.lowerContext);\n        }\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('draw', { prop: 'resetPanPoints', onPropertyChange: false });\n    };\n    Crop.prototype.flipCrop = function () {\n        var parent = this.parent;\n        parent.notify('transform', { prop: 'setReverseFlip', onPropertyChange: false, value: { isReverseFlip: true } });\n        parent.panPoint.totalPannedPoint.x += this.tempFlipPanPoint.x;\n        parent.panPoint.totalPannedPoint.y += this.tempFlipPanPoint.y;\n        var tempCurrFlipState = parent.transform.currFlipState;\n        var obj = { flipColl: null };\n        parent.notify('transform', { prop: 'getFlipColl', onPropertyChange: false, value: { obj: obj } });\n        var tempFlipColl = obj['flipColl'];\n        parent.notify('transform', { prop: 'setFlipColl', onPropertyChange: false, value: { flipColl: [] } });\n        parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n        parent.objColl.push(parent.activeObj);\n        if (parent.transform.zoomFactor > 0) {\n            var zoomFactor = parent.transform.zoomFactor;\n            var isUndoRedo = parent.isUndoRedo;\n            for (var i = 0; i < (zoomFactor * 10); i++) {\n                parent.isUndoRedo = true;\n                parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                    value: { zoomFactor: -0.1, zoomPoint: null } });\n            }\n            parent.isUndoRedo = isUndoRedo;\n            parent.notify('draw', { prop: 'resetPanPoints', onPropertyChange: false });\n        }\n        parent.currSelectionPoint = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        var temp = this.lowerContext.filter;\n        parent.notify('finetune', { prop: 'updateBrightFilter', onPropertyChange: false });\n        this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            parent.objColl[i].shapeFlip = '';\n        }\n        for (var i = 0; i < parent.freehandCounter; i++) {\n            parent.pointColl[i].shapeFlip = '';\n        }\n        parent.notify('shape', { prop: 'redrawObj', onPropertyChange: false, value: { degree: this.getCurrFlipState() } });\n        parent.notify('freehand-draw', { prop: 'flipFHDColl', onPropertyChange: false,\n            value: { value: this.getCurrFlipState() } });\n        parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        parent.objColl.pop();\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        this.cropImg(true);\n        parent.notify('transform', { prop: 'setReverseRotate', onPropertyChange: false, value: { bool: true } });\n        this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n        parent.notify('draw', { prop: 'setDestPoints', onPropertyChange: false });\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, context: null, isPreventCircleCrop: null } });\n        parent.notify('finetune', { prop: 'updateBrightFilter', onPropertyChange: false });\n        this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: false } });\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: null, context: null, isPreventCircleCrop: null } });\n        parent.transform.currFlipState = tempCurrFlipState;\n        parent.notify('transform', { prop: 'setFlipColl', onPropertyChange: false, value: { flipColl: tempFlipColl } });\n        this.lowerContext.filter = 'none';\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            parent.objColl[i].shapeFlip = '';\n        }\n        for (var i = 0; i < parent.freehandCounter; i++) {\n            parent.pointColl[i].shapeFlip = '';\n        }\n        parent.notify('shape', { prop: 'redrawObj', onPropertyChange: false, value: { degree: this.getCurrFlipState() } });\n        parent.notify('freehand-draw', { prop: 'flipFHDColl', onPropertyChange: false,\n            value: { value: this.getCurrFlipState() } });\n        parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n        parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        this.lowerContext.filter = temp;\n        if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n            this.cropCircle(this.lowerContext);\n        }\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('transform', { prop: 'setReverseFlip', onPropertyChange: false, value: { isReverseFlip: false } });\n        parent.notify('draw', { prop: 'resetPanPoints', onPropertyChange: false });\n        this.tempFlipPanPoint = { x: 0, y: 0 };\n    };\n    Crop.prototype.cropObjColl = function () {\n        var parent = this.parent;\n        var point;\n        var activePoint;\n        var shape;\n        if (parent.objColl.length > 0) {\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                point = parent.objColl[i].activePoint;\n                activePoint = parent.activeObj.activePoint;\n                shape = parent.objColl[i].shape;\n                parent.objColl[i].imageRatio = { startX: ((point.startX - activePoint.startX) / activePoint.width),\n                    startY: ((point.startY - activePoint.startY) / activePoint.height),\n                    endX: ((point.endX - activePoint.startX) / activePoint.width),\n                    endY: ((point.endY - activePoint.startY) / activePoint.height),\n                    width: activePoint.width / point.width,\n                    height: activePoint.height / point.height };\n                var degree = void 0;\n                var size = void 0;\n                switch (shape) {\n                    case 'text':\n                        if (parent.objColl[i].shapeDegree === 0) {\n                            degree = this.parent.transform.degree;\n                        }\n                        else {\n                            degree = this.parent.transform.degree - parent.objColl[i].shapeDegree;\n                        }\n                        size = (degree === 0 || Math.abs(degree) === 180) ? point.width : point.height;\n                        parent.objColl[i].textSettings.fontRatio = size / parent.objColl[i].textSettings.fontSize;\n                        break;\n                    case 'line':\n                    case 'arrow':\n                        this.cropPointCollection(i);\n                        if (shape === 'arrow') {\n                            parent.notify('shape', { prop: 'updateArrowRatio', onPropertyChange: false, value: { obj: parent.objColl[i] } });\n                        }\n                        break;\n                    case 'path':\n                        this.cropPointCollection(i);\n                        break;\n                }\n            }\n        }\n    };\n    Crop.prototype.cropPointCollection = function (i) {\n        var parent = this.parent;\n        var shape = parent.objColl[i].shape;\n        var x;\n        var y;\n        var width;\n        var height;\n        var point = parent.activeObj.activePoint;\n        if (shape === 'path') {\n            x = point.startX;\n            y = point.startY;\n            width = point.width;\n            height = point.height;\n        }\n        else {\n            x = parent.img.destLeft;\n            y = parent.img.destTop;\n            width = parent.img.destWidth;\n            height = parent.img.destHeight;\n        }\n        var selPoint = parent.objColl[i];\n        for (var n = 0, len = selPoint.pointColl.length; n < len; n++) {\n            selPoint.pointColl[n].ratioX =\n                (selPoint.pointColl[n].x - x) / width;\n            selPoint.pointColl[n].ratioY =\n                (selPoint.pointColl[n].y - y) / height;\n        }\n    };\n    Crop.prototype.cropFreehandDrawColl = function () {\n        var parent = this.parent;\n        // Update crop values to point collection\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            parent.points = extend([], parent.pointColl[n].points, []);\n            parent.notify('freehand-draw', { prop: 'setPointCounter', onPropertyChange: false, value: { value: 0 } });\n            var len = parent.points.length;\n            for (var l = 0; l < len; l++) {\n                parent.points[l].ratioX = (parent.points[l].x -\n                    parent.activeObj.activePoint.startX) / parent.activeObj.activePoint.width;\n                parent.points[l].ratioY = (parent.points[l].y -\n                    parent.activeObj.activePoint.startY) / parent.activeObj.activePoint.height;\n            }\n        }\n        parent.notify('freehand-draw', { prop: 'updateCropPtsForSel', onPropertyChange: false });\n    };\n    Crop.prototype.setCurrSelPoints = function (isSetDimension) {\n        var parent = this.parent;\n        var destPoint = this.cropDestPoints;\n        parent.img.srcLeft = 0;\n        parent.img.srcTop = 0;\n        parent.img.srcWidth = parent.baseImg.width;\n        parent.img.srcHeight = parent.baseImg.height;\n        parent.img.destLeft = destPoint.startX;\n        parent.img.destTop = destPoint.startY;\n        parent.img.destWidth = destPoint.width;\n        parent.img.destHeight = destPoint.height;\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        if (isSetDimension) {\n            parent.notify('draw', { prop: 'setDestPoints', onPropertyChange: false });\n        }\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, context: null, isPreventCircleCrop: null } });\n        if (this.croppedDegree === 0 && parent.transform.degree === 0 && parent.currSelectionPoint\n            && parent.currSelectionPoint.shape !== 'crop-circle' && parent.currSelectionPoint.shape !== 'crop-square') {\n            parent.img.destLeft = destPoint.startX;\n            parent.img.destTop = destPoint.startY;\n            parent.img.destWidth = destPoint.width;\n            parent.img.destHeight = destPoint.height;\n        }\n        if (parent.transform.degree === 0) {\n            parent.img.destLeft += parent.panPoint.totalPannedInternalPoint.x;\n            parent.img.destTop += parent.panPoint.totalPannedInternalPoint.y;\n        }\n        parent.notify('filter', { prop: 'updateBrightFilter', onPropertyChange: false });\n        this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: null, context: null, isPreventCircleCrop: true } });\n        if (parent.cropObj.activeObj.shape) {\n            var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                height: parent.img.destHeight };\n            if (parent.currSelectionPoint && parent.currSelectionPoint.activePoint) {\n                parent.img.destLeft = parent.currSelectionPoint.activePoint.startX;\n                parent.img.destTop = parent.currSelectionPoint.activePoint.startY;\n                parent.img.destWidth = parent.currSelectionPoint.activePoint.width;\n                parent.img.destHeight = parent.currSelectionPoint.activePoint.height;\n            }\n            parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.img.destLeft = destPoints.startX;\n            parent.img.destTop = destPoints.startY;\n            parent.img.destWidth = destPoints.width;\n            parent.img.destHeight = destPoints.height;\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n            var cropObjColl = extend([], parent.objColl, null, true);\n            var cropPointColl = extend([], parent.pointColl, null, true);\n            parent.objColl = [];\n            parent.pointColl = [];\n            parent.freehandCounter = 0;\n            var object = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: object } });\n            var cropSelPointColl = object['selPointColl'];\n            parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                value: { obj: { selPointColl: [] } } });\n            parent.cropObj.filter = this.lowerContext.filter;\n            parent.notify('draw', { prop: 'setCurrentObj', onPropertyChange: false, value: { obj: null } });\n            var activeObj = extend({}, parent.activeObj, null, true);\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.objColl = cropObjColl;\n            parent.pointColl = cropPointColl;\n            parent.freehandCounter = parent.pointColl.length;\n            parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                value: { obj: { selPointColl: cropSelPointColl } } });\n            parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: this.lowerContext, points: null } });\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n            parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.currSelectionPoint = null;\n            if (parent.transform.degree === 0) {\n                parent.notify('transform', { prop: 'drawPannImage', onPropertyChange: false,\n                    value: { point: { x: 0, y: 0 } } });\n            }\n            parent.activeObj = activeObj;\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n            parent.notify('transform', { prop: 'setTempPanMove', onPropertyChange: false,\n                value: { point: null } });\n        }\n        else {\n            var temp = this.lowerContext.filter;\n            this.lowerContext.filter = 'none';\n            parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: this.lowerContext, points: null } });\n            this.lowerContext.filter = temp;\n            parent.currSelectionPoint = null;\n        }\n    };\n    Crop.prototype.cropCircle = function (context, isSave, isFlip) {\n        var parent = this.parent;\n        if (isFlip && parent.transform.currFlipState !== '') {\n            parent.notify('draw', { prop: 'setTransform', onPropertyChange: false,\n                value: { context: context, value: parent.transform.currFlipState, isReverse: null } });\n        }\n        context.globalCompositeOperation = 'destination-in';\n        context.beginPath();\n        var centerX = isNullOrUndefined(isSave) ? parent.img.destLeft + (parent.img.destWidth / 2) : parent.img.destWidth / 2;\n        var centerY = isNullOrUndefined(isSave) ? parent.img.destTop + (parent.img.destHeight / 2) : parent.img.destHeight / 2;\n        var radius = parent.img.destWidth / 2;\n        context.arc(centerX, centerY, radius, 0, Math.PI * 2);\n        context.closePath();\n        context.fill();\n        context.restore();\n        context.globalCompositeOperation = 'source-over';\n        parent.currObjType.isActiveObj = parent.isCircleCrop = true;\n        if (isFlip && parent.transform.currFlipState !== '') {\n            parent.notify('draw', { prop: 'setTransform', onPropertyChange: false,\n                value: { context: context, value: parent.transform.currFlipState, isReverse: null } });\n        }\n    };\n    Crop.prototype.getCurrCropState = function (type, isAllowInvert) {\n        var parent = this.parent;\n        var flipState = '';\n        var state = [];\n        var obj = { flipColl: null };\n        parent.notify('transform', { prop: 'getFlipColl', onPropertyChange: false, value: { obj: obj } });\n        if (type === 'initial') {\n            if (Math.abs(parent.transform.degree) === 180) {\n                flipState = obj['flipColl'].length > 1 ? this.getCurrFlipState() : parent.transform.currFlipState;\n            }\n            else {\n                for (var i = 0, len = parent.rotateFlipColl.length; i < len; i++) {\n                    if (typeof (parent.rotateFlipColl[i]) === 'number') {\n                        state.push('number');\n                    }\n                    else if (typeof (parent.rotateFlipColl[i]) === 'string') {\n                        state.push('string');\n                    }\n                }\n                if (state.length > 1 && state[state.length - 1] === 'string' && state[state.length - 2] === 'number') {\n                    if (parent.transform.currFlipState === 'horizontal') {\n                        flipState = 'vertical';\n                    }\n                    else if (parent.transform.currFlipState === 'vertical') {\n                        flipState = 'horizontal';\n                    }\n                }\n                else if (state.length > 1 && state[state.length - 1] === 'number' && state[state.length - 2] === 'string') {\n                    flipState = obj['flipColl'].length > 1 ? this.getCurrFlipState() : parent.transform.currFlipState;\n                }\n            }\n        }\n        else {\n            flipState = this.getCurrFlipState();\n            if (isAllowInvert || !this.isInitialRotate()) {\n                if (parent.transform.degree === -90 || parent.transform.degree === -270) {\n                    if (flipState === 'horizontal') {\n                        flipState = 'vertical';\n                    }\n                    else if (flipState === 'vertical') {\n                        flipState = 'horizontal';\n                    }\n                }\n            }\n        }\n        if (flipState === '') {\n            flipState = obj['flipColl'].length > 1 ? this.getCurrFlipState() : parent.transform.currFlipState;\n        }\n        return flipState;\n    };\n    Crop.prototype.isInitialRotate = function () {\n        var isRotate = false;\n        if (this.parent.rotateFlipColl.length > 0 && typeof (this.parent.rotateFlipColl[0]) === 'number') {\n            isRotate = true;\n        }\n        return isRotate;\n    };\n    Crop.prototype.updateRotatePan = function () {\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.panPoint.currentPannedPoint)) {\n            return;\n        }\n        var panRegion = '';\n        if (parent.rotateFlipColl.length > 0 && typeof (parent.rotateFlipColl[0]) === 'number'\n            && parent.transform.degree < 0) {\n            panRegion = this.getCurrCropState('reverse', true);\n        }\n        else {\n            panRegion = this.getCurrFlipState();\n        }\n        if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            if (parent.transform.degree === 90 || (parent.transform.degree === -90 &&\n                (panRegion === 'horizontal' || panRegion === 'vertical'))\n                || (parent.transform.degree === -270 && (panRegion === '' || panRegion === 'verticalHorizontal'\n                    || panRegion === 'horizontalVertical'))) {\n                if (panRegion === 'horizontal' || panRegion === '') {\n                    parent.img.destLeft += parent.panPoint.currentPannedPoint.y;\n                }\n                else {\n                    parent.img.destLeft -= parent.panPoint.currentPannedPoint.y;\n                }\n                if (panRegion === '' || panRegion === 'vertical') {\n                    parent.img.destTop -= parent.panPoint.currentPannedPoint.x;\n                }\n                else {\n                    parent.img.destTop += parent.panPoint.currentPannedPoint.x;\n                }\n            }\n            else if (parent.transform.degree === 270 || (parent.transform.degree === -270 &&\n                (panRegion === 'horizontal' || panRegion === 'vertical'))\n                || (parent.transform.degree === -90 && (panRegion === '' || panRegion === 'verticalHorizontal'\n                    || panRegion === 'horizontalVertical'))) {\n                if (panRegion === '' || panRegion === 'horizontal') {\n                    parent.img.destLeft -= parent.panPoint.currentPannedPoint.y;\n                }\n                else {\n                    parent.img.destLeft += parent.panPoint.currentPannedPoint.y;\n                }\n                if (panRegion === '' || panRegion === 'vertical') {\n                    parent.img.destTop += parent.panPoint.currentPannedPoint.x;\n                }\n                else {\n                    parent.img.destTop -= parent.panPoint.currentPannedPoint.x;\n                }\n            }\n        }\n        else {\n            if (parent.transform.degree === 180 || parent.transform.degree === -180) {\n                if (panRegion === '' || panRegion === 'vertical') {\n                    parent.img.destLeft -= parent.panPoint.currentPannedPoint.x;\n                }\n                else {\n                    parent.img.destLeft += parent.panPoint.currentPannedPoint.x;\n                }\n                if (panRegion === '' || panRegion === 'horizontal') {\n                    parent.img.destTop -= parent.panPoint.currentPannedPoint.y;\n                }\n                else {\n                    parent.img.destTop += parent.panPoint.currentPannedPoint.y;\n                }\n            }\n        }\n    };\n    Crop.prototype.crop = function (obj) {\n        var _this = this;\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            var object_1 = { isCropToolbar: parent.isCropToolbar };\n            if (parent.currObjType.isUndoAction && !object_1['isCropToolbar']) {\n                parent.notify('undo-redo', { prop: 'refreshUrc', value: { bool: null } });\n            }\n            var transitionArgs = { cancel: false, startPoint: { x: parent.activeObj.activePoint.startX,\n                    y: parent.activeObj.activePoint.startY }, endPoint: { x: parent.activeObj.activePoint.endX,\n                    y: parent.activeObj.activePoint.endY }, preventScaling: false };\n            if (!object_1['isCropToolbar'] && isBlazor() && parent.events && parent.events.cropping.hasDelegate === true) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                parent.dotNetRef.invokeMethodAsync('CropEventAsync', 'OnCrop', transitionArgs).then(function (args) {\n                    _this.cropEvent(args, obj, object_1);\n                });\n            }\n            else {\n                if (!object_1['isCropToolbar']) {\n                    parent.trigger('cropping', transitionArgs);\n                }\n                this.cropEvent(transitionArgs, obj, object_1);\n            }\n        }\n    };\n    Crop.prototype.cropEvent = function (transitionArgs, obj, object) {\n        var parent = this.parent;\n        var splitWords;\n        if (!transitionArgs.cancel) {\n            splitWords = parent.activeObj.shape ? parent.activeObj.shape.split('-') : [];\n            if (!parent.disabled && parent.activeObj.horTopLine && (parent.currObjType.isCustomCrop || (splitWords.length > 0 &&\n                splitWords[0] === 'crop'))) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                obj.isCrop = true;\n                var prevCropObj = extend({}, parent.cropObj, {}, true);\n                var prevObj = extend({}, this.prevCropCurrObj, {}, true);\n                if (transitionArgs.preventScaling) {\n                    this.isPreventScaling = true;\n                }\n                else {\n                    this.isPreventScaling = false;\n                }\n                this.cropImg();\n                parent.transform.zoomFactor = 0;\n                parent.zoomSettings.zoomFactor = 1;\n                parent.setProperties({ zoomSettings: { zoomFactor: 1 } }, true);\n                parent.notify('transform', { prop: 'setPreviousZoomValue', onPropertyChange: false,\n                    value: { previousZoomValue: parent.zoomSettings.zoomFactor } });\n                var currSelPtObj = { prevCurrSelectionPoint: this.parent.prevCurrSelectionPoint };\n                prevObj.currSelectionPoint = extend({}, currSelPtObj['prevCurrSelectionPoint'], {}, true);\n                parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                    value: { operation: 'crop', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                        previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                        previousCropObj: prevCropObj, previousText: null,\n                        currentText: null, previousFilter: null, isCircleCrop: parent.isCircleCrop } });\n                if (!object['isCropToolbar']) {\n                    parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                }\n                parent.notify('transform', { prop: 'setCropDimension', onPropertyChange: false,\n                    value: { width: parent.cropObj.destPoints.width, height: parent.cropObj.destPoints.height } });\n                if (!isBlazor() && !object['isCropToolbar']) {\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                            isApplyBtn: false, isCropping: false, isZooming: null, cType: null } });\n                }\n                else if (!object['isCropToolbar']) {\n                    this.parent.updateToolbar(this.parent.element, 'imageLoaded');\n                }\n            }\n        }\n    };\n    Crop.prototype.calcRatio = function (obj) {\n        var parent = this.parent;\n        var widthRatio;\n        var heightRatio;\n        if (parent.transform.degree === 0 || parent.transform.degree % 180 === 0) {\n            widthRatio = parent.baseImg.width / parent.img.destWidth;\n            heightRatio = parent.baseImg.height / parent.img.destHeight;\n        }\n        else {\n            widthRatio = parent.baseImg.height / parent.img.destWidth;\n            heightRatio = parent.baseImg.width / parent.img.destHeight;\n        }\n        if (obj) {\n            obj['width'] = widthRatio;\n            obj['height'] = heightRatio;\n        }\n        return { width: widthRatio, height: heightRatio };\n    };\n    Crop.prototype.isObjInImage = function (obj, dummyObj) {\n        var parent = this.parent;\n        var isInside = false;\n        var startX = obj.activePoint.startX;\n        var endX = obj.activePoint.endX;\n        var startY = obj.activePoint.startY;\n        var endY = obj.activePoint.endY;\n        if ((startX >= parent.img.destLeft && endX <= (parent.img.destLeft + parent.img.destWidth)) ||\n            (startX <= parent.img.destLeft && endX >= parent.img.destLeft) ||\n            (startX <= (parent.img.destLeft + parent.img.destWidth) && endX >= (parent.img.destLeft + parent.img.destWidth)) ||\n            (startY >= parent.img.destTop && endY <= (parent.img.destTop + parent.img.destHeight)) ||\n            (startY <= parent.img.destTop && endY >= parent.img.destTop) ||\n            (startY <= (parent.img.destTop + parent.img.destHeight) && endY >= (parent.img.destTop + parent.img.destHeight))) {\n            isInside = true;\n        }\n        if (dummyObj) {\n            dummyObj['isInside'] = isInside;\n        }\n        return isInside;\n    };\n    Crop.prototype.getCurrFlipState = function (panObj) {\n        var parent = this.parent;\n        var obj = { panRegion: '' };\n        var object = { collection: parent.rotateFlipColl };\n        parent.notify('shape', { prop: 'alignRotateFlipColl', onPropertyChange: false,\n            value: { collection: parent.rotateFlipColl, isRotateFlipCollection: true, obj: object } });\n        parent.rotateFlipColl = object['collection'];\n        for (var i = 0, len = parent.rotateFlipColl.length; i < len; i++) {\n            parent.notify('transform', { prop: 'setCurrPanRegion', onPropertyChange: false,\n                value: { region: obj['panRegion'], type: parent.rotateFlipColl[i], obj: obj } });\n        }\n        if (panObj) {\n            panObj['panRegion'] = obj['panRegion'];\n        }\n        return obj['panRegion'];\n    };\n    return Crop;\n}());\nexport { Crop };\n","import { extend, isNullOrUndefined, Browser, isBlazor, getComponent } from '@syncfusion/ej2-base';\nimport { Dialog, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nvar Draw = /** @class */ (function () {\n    function Draw(parent) {\n        this.cancelObjColl = [];\n        this.cancelPointColl = [];\n        this.isInitialLoading = false; // Specifies whether image is loaded for the first time or not (for applying initial filter)\n        this.fileName = '';\n        this.isErrorImage = false;\n        this.isShapeTextInserted = false;\n        this.isRotateZoom = false; // To restore zoomed image on selection crop selection\n        this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null }; // restore stroke settings on cancel\n        this.tempTextSettings = { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, fontRatio: null, bold: false, italic: false, underline: false }; // restore text settings on cancel\n        this.tempAdjValue = ''; // for temp internal slider value\n        this.tempFilter = ''; // restore filter style on cancel\n        this.tempUndoRedoStep = 0;\n        this.tempFreehandCounter = 0;\n        this.tempCurrFhdIndex = 0;\n        this.tempZoomFactor = null; // Restore zoom factor on cancel\n        this.isCancelAction = false;\n        this.rotatedFlipCropSel = false;\n        this.zoomCrop = { width: 0, height: 0 };\n        this.isImageEdited = false;\n        this.isFileChanged = false;\n        this.isNewPath = false;\n        this.arrowDimension = { bar: { width: 10, height: 32, ratioX: null, ratioY: null },\n            arrow: { width: 24, height: 24, ratioX: null, ratioY: null }, arrowSolid: { width: 32, height: 32, ratioX: null, ratioY: null },\n            circle: { width: 10, height: 10, ratioX: null, ratioY: null }, square: { width: 20, height: 20, ratioX: null, ratioY: null } };\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Draw.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Draw.prototype.addEventListener = function () {\n        this.parent.on('draw', this.draw, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Draw.prototype.removeEventListener = function () {\n        this.parent.off('draw', this.draw);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Draw.prototype.draw = function (args) {\n        this.updatePrivateVariables();\n        switch (args.prop) {\n            case 'drawObject':\n                this.drawObject(args.value['canvas'], args.value['obj'], args.value['isCropRatio'], args.value['points'], args.value['isPreventDrag'], args.value['saveContext'], args.value['isPreventSelection']);\n                break;\n            case 'updateActiveObject':\n                this.updateActiveObject(args.value['actPoint'], args.value['obj'], args.value['isMouseMove'], args.value['x'], args.value['y']);\n                break;\n            case 'clearOuterCanvas':\n                this.clearOuterCanvas(args.value['context']);\n                break;\n            case 'setDestPoints':\n                this.setDestPoints();\n                break;\n            case 'updateCurrTransState':\n                this.updateCurrTransState(args.value['type'], args.value['isPreventDestination'], args.value['isRotatePan']);\n                break;\n            case 'currTransState':\n                this.currTransState(args.value['type'], args.value['isPreventDestination'], args.value['context'], args.value['isPreventCircleCrop']);\n                break;\n            case 'setTransform':\n                this.setTransform(args.value['context'], args.value['value'], args.value['isReverse']);\n                break;\n            case 'render-image':\n                this.renderImage(args.value['isMouseWheel']);\n                break;\n            case 'draw-image-to-canvas':\n                this.drawImgToCanvas(args.value['dimension']);\n                break;\n            case 'update-canvas':\n                this.updateCanvas();\n                break;\n            case 'performCancel':\n                this.performCancel(args.value['isContextualToolbar']);\n                break;\n            case 'updateFlipPan':\n                this.updateFlipPan(args.value['tempSelectionObj']);\n                break;\n            case 'select':\n                this.select(args.value['type'], args.value['startX'], args.value['startY'], args.value['width'], args.value['height']);\n                break;\n            case 'callUpdateCurrTransState':\n                this.callUpdateCurrTransState();\n                break;\n            case 'resetPanPoints':\n                this.resetPanPoints();\n                break;\n            case 'setClientTransDim':\n                this.setClientTransDim(args.value['isPreventDimension']);\n                break;\n            case 'redrawImgWithObj':\n                this.redrawImgWithObj();\n                break;\n            case 'setCurrentObj':\n                this.setCurrentObj(args.value['obj']);\n                break;\n            case 'performPointZoom':\n                this.performPointZoom(args.value['x'], args.value['y'], args.value['type']);\n                break;\n            case 'open':\n                this.open(args.value['data']);\n                break;\n            case 'isInitialLoading':\n                this.isInitialLoading = args.value['isInitialLoading'];\n                break;\n            case 'isInitialLoaded':\n                this.getInitialLoaded(args.value['object']);\n                break;\n            case 'fileSelect':\n                this.fileSelect(args.value['inputElement'], args.value['args']);\n                break;\n            case 'getFileName':\n                args.value['obj']['fileName'] = this.fileName;\n                args.value['obj']['fileType'] = this.fileType;\n                break;\n            case 'getErrorImage':\n                args.value['obj']['isErrorImage'] = this.isErrorImage;\n                break;\n            case 'getInitialZoomValue':\n                args.value['obj']['initialZoomValue'] = this.initZoomValue;\n                break;\n            case 'setShapeTextInsert':\n                this.isShapeTextInserted = args.value['bool'];\n                break;\n            case 'resetCurrentSelectionPoint':\n                this.currSelPoint = null;\n                break;\n            case 'setRotateZoom':\n                this.isRotateZoom = args.value['isRotateZoom'];\n                break;\n            case 'setTempStrokeSettings':\n                this.tempStrokeSettings = args.value['tempStrokeSettings'];\n                break;\n            case 'setTempTextSettings':\n                this.tempTextSettings = args.value['tempTextSettings'];\n                break;\n            case 'setTempAdjustmentValue':\n                this.tempAdjValue = args.value['tempAdjustmentValue'];\n                break;\n            case 'getTempAdjustmentValue':\n                args.value['obj']['value'] = this.tempAdjValue;\n                break;\n            case 'setTempFilter':\n                this.tempFilter = args.value['tempFilter'];\n                break;\n            case 'setTempUndoRedoStep':\n                this.tempUndoRedoStep = args.value['tempUndoRedoStep'];\n                break;\n            case 'setTempFreehandCounter':\n                this.tempFreehandCounter = args.value['tempFreehandCounter'];\n                break;\n            case 'setTempCurrentFreehandDrawIndex':\n                this.tempCurrFhdIndex = args.value['tempCurrentFreehandDrawIndex'];\n                break;\n            case 'setTempZoomFactor':\n                this.tempZoomFactor = args.value['tempZoomFactor'];\n                break;\n            case 'setCancelAction':\n                this.isCancelAction = args.value['bool'];\n                break;\n            case 'getRotatedFlipCropSelection':\n                args.value['bool']['isSelected'] = this.rotatedFlipCropSel;\n                break;\n            case 'getPrevActObj':\n                args.value['obj']['prevActObj'] = this.prevActObj;\n                break;\n            case 'setPrevActObj':\n                this.prevActObj = args.value['prevActObj'];\n                break;\n            case 'setZoomCropWidth':\n                this.zoomCrop.width = args.value['width'];\n                this.zoomCrop.height = args.value['height'];\n                break;\n            case 'setImageEdited':\n                this.isImageEdited = true;\n                break;\n            case 'reset':\n                this.reset();\n                break;\n            case 'dlgBtnClick':\n                this.dlgBtnClick();\n                break;\n            case 'dlgCloseBtnClick':\n                this.dlgCloseBtnClick();\n                break;\n            case 'setNewPath':\n                this.isNewPath = args.value['bool'];\n                break;\n            case 'getNewPath':\n                args.value['obj']['isNewPath'] = this.isNewPath;\n                break;\n            case 'getArrowDimension':\n                args.value['obj']['arrowDimension'] = this.arrowDimension;\n                break;\n            case 'setArrowDimension':\n                this.arrowDimension = args.value['arrowDimension'];\n                break;\n            case 'moveToSelectionRange':\n                this.moveToSelectionRange(args.value['type'], args.value['activeObj']);\n                break;\n        }\n    };\n    Draw.prototype.getModuleName = function () {\n        return 'draw';\n    };\n    Draw.prototype.updatePrivateVariables = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n        if (parent.upperCanvas) {\n            this.upperContext = parent.upperCanvas.getContext('2d');\n        }\n        if (isNullOrUndefined(this.tempZoomFactor)) {\n            this.tempZoomFactor = parent.transform.zoomFactor;\n        }\n    };\n    Draw.prototype.reset = function () {\n        this.isInitialLoading = this.isErrorImage = this.isNewPath = false;\n        this.cancelObjColl = this.cancelPointColl = [];\n        this.isShapeTextInserted = false;\n        this.initZoomValue = null;\n        this.tempFilter = '';\n        this.currSelPoint = null;\n        this.isRotateZoom = false;\n        this.tempAdjValue = '';\n        this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n        this.tempTextSettings =\n            { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, fontRatio: null, bold: false, italic: false, underline: false };\n        this.tempUndoRedoStep = this.tempFreehandCounter = this.tempCurrFhdIndex = 0;\n        this.tempZoomFactor = null;\n        this.isCancelAction = false;\n        this.rotatedFlipCropSel = false;\n        this.prevActObj = null;\n        this.arrowDimension = { bar: { width: 10, height: 32, ratioX: null, ratioY: null },\n            arrow: { width: 24, height: 24, ratioX: null, ratioY: null }, arrowSolid: { width: 32, height: 32, ratioX: null, ratioY: null },\n            circle: { width: 10, height: 10, ratioX: null, ratioY: null }, square: { width: 20, height: 20, ratioX: null, ratioY: null } };\n    };\n    Draw.prototype.drawObject = function (canvas, obj, isCropRatio, points, isPreventDrag, saveContext, isPreventSelection) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        var canvasDraw;\n        if (canvas.toLowerCase() === 'original') {\n            canvasDraw = this.lowerContext;\n        }\n        else if (canvas.toLowerCase() === 'duplicate') {\n            canvasDraw = this.upperContext;\n        }\n        else if (saveContext) {\n            canvasDraw = saveContext;\n        }\n        if (!isPreventDrag && parent.activeObj.shape) {\n            this.setDragLimit();\n        }\n        if (parent.currObjType.shape) {\n            var splitWords = parent.currObjType.shape.split('-');\n            if (splitWords[0].toLowerCase() === 'crop' && isCropRatio) {\n                this.drawCropRatio();\n            }\n        }\n        if (points) {\n            actPoint.startX = points.startX;\n            actPoint.startY = points.startY;\n            actPoint.endX = points.endX;\n            actPoint.endY = points.endY;\n            actPoint.width = points.width;\n            actPoint.height = points.height;\n        }\n        if (isNullOrUndefined(parent.activeObj.strokeSettings)) {\n            var obj_1 = { strokeSettings: {} };\n            parent.notify('shape', { prop: 'getStrokeSettings', onPropertyChange: false,\n                value: { obj: obj_1 } });\n            parent.activeObj.strokeSettings = obj_1['strokeSettings'];\n        }\n        if (isNullOrUndefined(parent.activeObj.strokeSettings.strokeWidth)) {\n            parent.activeObj.strokeSettings.strokeWidth = 2;\n        }\n        if (obj) {\n            parent.activeObj = extend({}, obj, {}, true);\n        }\n        this.updateActiveObject();\n        if (parent.currObjType.isText) {\n            var obj_2 = { keyHistory: '' };\n            parent.notify('shape', { prop: 'getKeyHistory', onPropertyChange: false, value: { obj: obj_2 } });\n            parent.activeObj.keyHistory = obj_2['keyHistory'];\n        }\n        if (canvas.toLowerCase() !== 'original') {\n            var splitWords = void 0;\n            var isCrop = false;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n                if (splitWords[0] === 'crop') {\n                    isCrop = true;\n                }\n            }\n            if (isCrop) {\n                this.upperContext.fillStyle = 'rgb(0, 0, 0, 0.25)';\n                this.upperContext.fillRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n                this.upperContext.clearRect(actPoint.startX, actPoint.startY, actPoint.width, actPoint.height);\n            }\n            if (isNullOrUndefined(isPreventSelection) && (canvasDraw === this.lowerContext || canvasDraw === this.upperContext)) {\n                this.rotateContext('initial', canvasDraw);\n                this.drawOuterSelection(canvasDraw);\n                this.rotateContext('reverse', canvasDraw);\n            }\n        }\n        parent.currObjType.isActiveObj = true;\n        var object = { keyHistory: '' };\n        parent.notify('shape', { prop: 'getKeyHistory', onPropertyChange: false, value: { obj: object } });\n        if (obj) {\n            this.drawShapeObj(canvas, obj.shape, saveContext, isPreventSelection);\n        }\n        else if (object['keyHistory'] !== '' && parent.currObjType.isText) {\n            this.drawShapeObj(canvas, 'text', saveContext, isPreventSelection);\n        }\n        else if (parent.activeObj.shape) {\n            this.drawShapeObj(canvas, parent.activeObj.shape, saveContext, isPreventSelection);\n        }\n        else {\n            this.drawShapeObj(canvas, undefined, saveContext, isPreventSelection);\n        }\n    };\n    Draw.prototype.rotateContext = function (type, ctx) {\n        var parent = this.parent;\n        var activePoint = extend({}, parent.activeObj.activePoint, {}, true);\n        if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow') {\n            return;\n        }\n        var rotationAngle = (type === 'initial') ? parent.activeObj.rotatedAngle : -parent.activeObj.rotatedAngle;\n        ctx.translate(activePoint.startX + (activePoint.width / 2), activePoint.startY + (activePoint.height / 2));\n        ctx.rotate(rotationAngle);\n        ctx.translate(-(activePoint.startX + (activePoint.width / 2)), -(activePoint.startY + (activePoint.height / 2)));\n    };\n    Draw.prototype.setDragLimit = function () {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        if (actPoint && parent.activeObj.rotatedAngle === 0) {\n            if (actPoint.startX < parent.img.destLeft) {\n                actPoint.startX = parent.img.destLeft;\n                actPoint.endX = actPoint.startX + actPoint.width;\n            }\n            else if (actPoint.endX > parent.img.destLeft + parent.img.destWidth) {\n                actPoint.endX = parent.img.destLeft + parent.img.destWidth;\n                actPoint.startX = actPoint.endX - actPoint.width;\n            }\n            if (actPoint.startY < parent.img.destTop) {\n                actPoint.startY = parent.img.destTop;\n            }\n            else if (actPoint.endY > parent.img.destTop + parent.img.destHeight) {\n                actPoint.endY = parent.img.destTop + parent.img.destHeight;\n                actPoint.startY = actPoint.endY - actPoint.height;\n            }\n            parent.activeObj = this.updateWidthHeight(parent.activeObj);\n        }\n    };\n    Draw.prototype.drawCropRatio = function () {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var x;\n        var y;\n        var width;\n        var height;\n        if (parent.transform.zoomFactor > 0 && this.currSelPoint) {\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            this.drawCustomSelection('crop-custom', null, null, null, null);\n            if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n                width = parent.activeObj.activePoint.width < parent.activeObj.activePoint.height ?\n                    parent.activeObj.activePoint.width : parent.activeObj.activePoint.height;\n                height = width;\n            }\n            else {\n                if (parent.img.destLeft + parent.img.destLeft + parent.img.destWidth <= parent.lowerCanvas.clientWidth) {\n                    width = actPoint.width;\n                }\n                else {\n                    width = parent.lowerCanvas.clientWidth - parent.img.destLeft;\n                }\n                if (parent.img.destTop + parent.img.destTop + parent.img.destHeight <= parent.lowerCanvas.clientHeight) {\n                    height = actPoint.height;\n                }\n                else {\n                    height = parent.lowerCanvas.clientHeight - parent.img.destTop;\n                }\n            }\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.activeObj = activeObj;\n            parent.currObjType.shape = activeObj.shape;\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            parent.currObjType.isCustomCrop = false;\n        }\n        else {\n            width = parent.img.destWidth;\n            height = parent.img.destHeight;\n            if (parent.img.destLeft < 0) {\n                width += parent.img.destLeft;\n            }\n            if (parent.img.destTop < 0) {\n                height += parent.img.destTop;\n            }\n            if (parent.currObjType.shape.toLowerCase() !== 'crop-square' && parent.currObjType.shape.toLowerCase() !== 'crop-circle') {\n                if (parent.img.destLeft + parent.img.destWidth > parent.lowerCanvas.width) {\n                    width -= (parent.img.destLeft + parent.img.destWidth - parent.lowerCanvas.width);\n                }\n                if (parent.img.destTop + parent.img.destHeight > parent.lowerCanvas.height) {\n                    height -= (parent.img.destTop + parent.img.destHeight - parent.lowerCanvas.height);\n                }\n            }\n        }\n        switch (parent.currObjType.shape.toLowerCase()) {\n            case 'crop-square':\n            case 'crop-circle':\n                parent.notify('selection', { prop: 'setDragDirection', onPropertyChange: false, value: { width: width, height: height } });\n                actPoint = parent.activeObj.activePoint;\n                if (parent.lowerCanvas.width < (actPoint.endX - actPoint.startX)) {\n                    actPoint.startX = 7.5;\n                    actPoint.endX = parent.lowerCanvas.width - 7.5;\n                }\n                if (parent.lowerCanvas.height < (actPoint.endY - actPoint.startY)) {\n                    actPoint.startY = 7.5;\n                    actPoint.endY = parent.lowerCanvas.height - 7.5;\n                }\n                if (width === parent.img.destWidth && height === parent.img.destHeight) {\n                    actPoint.startX += parent.img.destLeft;\n                    actPoint.startY +=\n                        parent.img.destTop;\n                    actPoint.endX += parent.img.destLeft;\n                    actPoint.endY +=\n                        parent.img.destTop;\n                }\n                if (parent.lowerCanvas.width > parent.lowerCanvas.height) {\n                    actPoint.height = actPoint.endY - actPoint.startY;\n                    actPoint.width = actPoint.height;\n                    actPoint.endX = actPoint.startX +\n                        actPoint.width;\n                }\n                else {\n                    actPoint.width = actPoint.endX - actPoint.startX;\n                    actPoint.height = actPoint.width;\n                    actPoint.endY = actPoint.startY +\n                        actPoint.height;\n                }\n                break;\n            case 'crop-3:2':\n                x = 3;\n                y = 2;\n                break;\n            case 'crop-4:3':\n                x = 4;\n                y = 3;\n                break;\n            case 'crop-5:4':\n                x = 5;\n                y = 4;\n                break;\n            case 'crop-7:5':\n                x = 7;\n                y = 5;\n                break;\n            case 'crop-16:9':\n                x = 16;\n                y = 9;\n                break;\n        }\n        if (x !== undefined && y !== undefined) {\n            parent.notify('selection', { prop: 'calcShapeRatio', onPropertyChange: false,\n                value: { x: x, y: y, imgWidth: width, imgHeight: height } });\n            if (width === parent.img.destWidth && height === parent.img.destHeight) {\n                this.updatePoints();\n            }\n            actPoint = parent.activeObj.activePoint;\n        }\n        if (actPoint.startX < parent.img.destLeft) {\n            var diff = (parent.img.destLeft - actPoint.startX) + 7.5;\n            actPoint.startX += diff;\n            actPoint.endX += diff;\n        }\n        if (actPoint.startY < parent.img.destTop) {\n            var diff = (parent.img.destTop - actPoint.startY) + 7.5;\n            actPoint.startY += diff;\n            actPoint.endY += diff;\n        }\n        parent.activeObj = this.updateWidthHeight(parent.activeObj);\n        this.adjToCenter();\n    };\n    Draw.prototype.adjToCenter = function () {\n        var parent = this.parent;\n        var diffX = ((parent.lowerCanvas.width) / 2) - (parent.activeObj.activePoint.endX -\n            parent.activeObj.activePoint.width / 2);\n        var diffY = ((parent.lowerCanvas.height) / 2) - (parent.activeObj.activePoint.endY -\n            parent.activeObj.activePoint.height / 2);\n        parent.activeObj.activePoint.startX += diffX;\n        parent.activeObj.activePoint.endX += diffX;\n        parent.activeObj.activePoint.startY += diffY;\n        parent.activeObj.activePoint.endY += diffY;\n        if (parent.activeObj.activePoint.startX < (parent.img.destLeft >= 7.5 ? parent.img.destLeft : 7.5)) {\n            var diff = ((parent.img.destLeft >= 7.5 ? parent.img.destLeft : 0) - parent.activeObj.activePoint.startX) + 7.5;\n            parent.activeObj.activePoint.startX += diff;\n            parent.activeObj.activePoint.endX += diff;\n        }\n        else if (parent.activeObj.activePoint.endX > parent.img.destLeft + parent.img.destWidth) {\n            var diff = (parent.activeObj.activePoint.endX - (parent.img.destLeft + parent.img.destWidth)) + 7.5;\n            parent.activeObj.activePoint.startX -= diff;\n            parent.activeObj.activePoint.endX -= diff;\n        }\n        if (parent.activeObj.activePoint.startY < (parent.img.destTop > 7.5 ? parent.img.destTop : 7.5)) {\n            var diff = ((parent.img.destTop > 7.5 ? parent.img.destTop : 0) - parent.activeObj.activePoint.startY) + 7.5;\n            parent.activeObj.activePoint.startY += diff;\n            parent.activeObj.activePoint.endY += diff;\n        }\n        else if (parent.activeObj.activePoint.endY > parent.img.destTop + parent.img.destHeight) {\n            var diff = (parent.activeObj.activePoint.endY - (parent.img.destTop + parent.img.destHeight)) + 7.5;\n            parent.activeObj.activePoint.startY -= diff;\n            parent.activeObj.activePoint.endY -= diff;\n        }\n    };\n    Draw.prototype.updateActiveObject = function (actPoint, obj, isMouseMove, x, y) {\n        actPoint = actPoint ? actPoint : extend({}, this.parent.activeObj.activePoint, {}, true);\n        obj = obj ? obj : extend({}, this.parent.activeObj, {}, true);\n        actPoint.width = actPoint.endX - actPoint.startX;\n        actPoint.height = actPoint.endY - actPoint.startY;\n        x = x ? x : 0;\n        y = y ? y : 0;\n        var horCircleWidth = actPoint.width / 2;\n        var verCircleHeight = actPoint.height / 2;\n        var radius = 7.5;\n        obj.horTopLine = { startX: actPoint.startX + x, startY: actPoint.startY - y,\n            endX: actPoint.endX + x, endY: actPoint.endY + y };\n        obj.horBottomLine = { startX: actPoint.startX - x, startY: actPoint.endY - y,\n            endX: actPoint.endX - x, endY: actPoint.endY + y };\n        obj.verLeftLine = { startX: actPoint.startX + x, startY: actPoint.startY - y,\n            endX: actPoint.startX - y, endY: actPoint.endY - y };\n        obj.verRightLine = { startX: actPoint.endX + x, startY: actPoint.startY + y,\n            endX: actPoint.endX - x, endY: actPoint.endY + y };\n        obj.topLeftCircle = { startX: actPoint.startX, startY: actPoint.startY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.topCenterCircle = { startX: actPoint.startX + horCircleWidth, startY: actPoint.startY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.topRightCircle = { startX: actPoint.endX, startY: actPoint.startY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.centerLeftCircle = { startX: actPoint.startX, startY: actPoint.startY + verCircleHeight,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.centerRightCircle = { startX: actPoint.endX, startY: actPoint.startY + verCircleHeight,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.bottomLeftCircle = { startX: actPoint.startX, startY: actPoint.endY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.bottomCenterCircle = { startX: actPoint.startX + horCircleWidth, startY: actPoint.endY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.bottomRightCircle = { startX: actPoint.endX, startY: actPoint.endY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        if (obj.rotatedAngle === 0) {\n            obj.rotationCirclePoint = { x: obj.bottomCenterCircle.startX,\n                y: obj.bottomCenterCircle.startY + 25 };\n            obj.rotationCirclePoint.ratioX = (obj.rotationCirclePoint.x - this.parent.img.destLeft) / this.parent.img.destWidth;\n            obj.rotationCirclePoint.ratioY = (obj.rotationCirclePoint.y - this.parent.img.destTop) / this.parent.img.destHeight;\n        }\n        obj.activePoint = actPoint;\n        if (isNullOrUndefined(isMouseMove)) {\n            this.parent.activeObj = extend({}, obj, {}, true);\n        }\n    };\n    Draw.prototype.drawOuterSelection = function (canvasDraw, isCropCircle) {\n        var splitWords;\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        canvasDraw.lineWidth = (0.5);\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        var tempObj = extend({}, parent.activeObj, {}, true);\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (((splitWords !== undefined && splitWords[0] === 'crop') || parent.activeObj.shape === undefined) && !isCropCircle) {\n            this.upperContext.fillStyle = 'rgb(0, 0, 0, 0.25)';\n            this.upperContext.fillRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            this.upperContext.clearRect(actPoint.startX, actPoint.startY, actPoint.width, actPoint.height);\n        }\n        canvasDraw.strokeStyle = parent.themeColl[parent.theme]['primaryColor'];\n        canvasDraw.fillStyle = parent.themeColl[parent.theme]['secondaryColor'];\n        var degree;\n        if (tempObj.shapeDegree === 0) {\n            degree = parent.transform.degree;\n        }\n        else {\n            degree = parent.transform.degree - tempObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'line') {\n            canvasDraw.beginPath();\n            canvasDraw.moveTo(actPoint.startX, actPoint.startY);\n            canvasDraw.lineTo(actPoint.endX, actPoint.endY);\n            canvasDraw.stroke();\n        }\n        else if (parent.activeObj.shape === 'path') {\n            canvasDraw.beginPath();\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            canvasDraw.moveTo(activeObj.pointColl[0].x, activeObj.pointColl[0].y);\n            if (activeObj.pointColl.length > 1) {\n                for (var i = 1, len = activeObj.pointColl.length; i < len; i++) {\n                    actPoint.endX = activeObj.pointColl[i].x;\n                    actPoint.endY = activeObj.pointColl[i].y;\n                    canvasDraw.lineTo(actPoint.endX, actPoint.endY);\n                }\n            }\n            var obj = { shape: null };\n            parent.notify('selection', { prop: 'getCurrentDrawingShape', value: { obj: obj } });\n            if (obj['shape'] === 'path') {\n                parent.activeObj = activeObj;\n            }\n            canvasDraw.lineTo(actPoint.endX, actPoint.endY);\n            canvasDraw.stroke();\n        }\n        else {\n            canvasDraw.beginPath();\n            canvasDraw.rect(tempObj.activePoint.startX, tempObj.activePoint.startY, tempObj.activePoint.width, tempObj.activePoint.height);\n            canvasDraw.stroke();\n            canvasDraw.closePath();\n            if (parent.selectionSettings.showCircle) {\n                var strokeColor = canvasDraw.strokeStyle;\n                var fillColor = canvasDraw.fillStyle;\n                canvasDraw.strokeStyle = parent.selectionSettings.strokeColor;\n                canvasDraw.fillStyle = parent.selectionSettings.fillColor;\n                canvasDraw.lineWidth *= 2;\n                canvasDraw.beginPath();\n                canvasDraw.moveTo(tempObj.topLeftCircle.startX, tempObj.topLeftCircle.startY);\n                canvasDraw.arc(tempObj.topLeftCircle.startX, tempObj.topLeftCircle.startY, tempObj.topLeftCircle.radius, 0, 2 * Math.PI);\n                canvasDraw.moveTo(tempObj.topRightCircle.startX, tempObj.topRightCircle.startY);\n                canvasDraw.arc(tempObj.topRightCircle.startX, tempObj.topRightCircle.startY, tempObj.topRightCircle.radius, 0, 2 * Math.PI);\n                canvasDraw.moveTo(tempObj.bottomLeftCircle.startX, tempObj.bottomLeftCircle.startY);\n                canvasDraw.arc(tempObj.bottomLeftCircle.startX, tempObj.bottomLeftCircle.startY, tempObj.bottomLeftCircle.radius, 0, 2 * Math.PI);\n                canvasDraw.moveTo(tempObj.bottomRightCircle.startX, tempObj.bottomRightCircle.startY);\n                canvasDraw.arc(tempObj.bottomRightCircle.startX, tempObj.bottomRightCircle.startY, tempObj.bottomRightCircle.radius, 0, 2 * Math.PI);\n                canvasDraw.stroke();\n                canvasDraw.fill();\n                canvasDraw.closePath();\n                canvasDraw.lineWidth /= 2;\n                canvasDraw.strokeStyle = strokeColor;\n                canvasDraw.fillStyle = fillColor;\n            }\n        }\n        if (parent.selectionSettings.showCircle && (splitWords === undefined || splitWords[0] !== 'crop')) {\n            var strokeColor = canvasDraw.strokeStyle;\n            var fillColor = canvasDraw.fillStyle;\n            canvasDraw.strokeStyle = parent.selectionSettings.strokeColor;\n            canvasDraw.fillStyle = parent.selectionSettings.fillColor;\n            if (parent.activeObj.shape === 'text') {\n                // Text rotation codes\n                // canvasDraw.lineWidth *= 2;\n                // canvasDraw.beginPath();\n                // this.drawRotationArcLine(canvasDraw);\n                // canvasDraw.lineTo(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y);\n                // canvasDraw.stroke(); canvasDraw.fill(); canvasDraw.closePath();\n                // canvasDraw.beginPath();\n                // canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y);\n                // canvasDraw.arc(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y,\n                //                parent.activeObj.bottomCenterCircle.radius, 0, 2 * Math.PI);\n                // canvasDraw.stroke();\n                // canvasDraw.fill();\n                // canvasDraw.closePath();\n                // canvasDraw.lineWidth /= 2;\n            }\n            else {\n                this.drawCenterCircles(canvasDraw);\n            }\n            canvasDraw.strokeStyle = strokeColor;\n            canvasDraw.fillStyle = fillColor;\n        }\n        tempObj.rotationCircleLine = parent.activeObj.rotationCircleLine;\n        parent.activeObj = extend({}, tempObj, {}, true);\n    };\n    Draw.prototype.drawArrowHead = function (canvasDraw, isStartHead) {\n        var headType = isStartHead ? this.parent.activeObj.start : this.parent.activeObj.end;\n        switch (headType) {\n            case 'arrowSolid':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrowSolid(canvasDraw, true) : this.arrowSolid(canvasDraw, false);\n                break;\n            case 'arrow':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrow(canvasDraw, true) : this.arrow(canvasDraw, false);\n                break;\n            case 'circleSolid':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrowCircleSolid(canvasDraw, true) : this.arrowCircleSolid(canvasDraw, false);\n                break;\n            case 'circle':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrowCircle(canvasDraw, true) : this.arrowCircle(canvasDraw, false);\n                break;\n            case 'bar':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrowBar(canvasDraw, true) : this.arrowBar(canvasDraw, false);\n                break;\n            case 'square':\n            case 'squareSolid':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrowSquareStart(canvasDraw) : this.arrowSquareEnd(canvasDraw);\n                break;\n        }\n    };\n    Draw.prototype.drawShapeObj = function (canvas, shape, saveContext, isPreventSelection) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var currentShape = shape !== undefined ? shape : parent.currObjType.shape;\n        parent.currObjType.shape = currentShape;\n        var canvasDraw;\n        if (canvas.toLowerCase() === 'original') {\n            canvasDraw = this.lowerContext;\n        }\n        else if (canvas.toLowerCase() === 'duplicate') {\n            canvasDraw = this.upperContext;\n        }\n        else if (saveContext) {\n            canvasDraw = saveContext;\n        }\n        if (parent.currObjType.shape.toLowerCase() === 'rectangle' || parent.currObjType.shape.toLowerCase() === 'ellipse'\n            || parent.currObjType.shape.toLowerCase() === 'line' || parent.activeObj.shape === 'arrow' ||\n            parent.activeObj.shape === 'path') {\n            parent.activeObj.shape = parent.currObjType.shape;\n        }\n        canvasDraw.strokeStyle = parent.activeObj.strokeSettings.strokeColor;\n        if (shape === 'text' || shape === 'freehanddraw') {\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n        }\n        else {\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.fillColor;\n        }\n        var horLineWidth = actPoint.width / 3;\n        var verLineHeight = actPoint.height / 3;\n        var selectionWidth = actPoint.endX - actPoint.startX;\n        var selectionHeight = actPoint.endY - actPoint.startY;\n        this.rotateContext('initial', canvasDraw);\n        var degree;\n        var tempFillStyle = canvasDraw.fillStyle;\n        var activeObj;\n        switch (parent.currObjType.shape.toLowerCase()) {\n            case 'rectangle':\n                this.drawSquareLines(canvasDraw);\n                if (isNullOrUndefined(isPreventSelection) && canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'ellipse':\n                selectionWidth = Math.abs(selectionWidth);\n                selectionHeight = Math.abs(selectionHeight);\n                canvasDraw.beginPath();\n                canvasDraw.ellipse(actPoint.startX + (selectionWidth / 2), actPoint.startY + (selectionHeight / 2), selectionWidth / 2, selectionHeight / 2, 0, 0, 2 * Math.PI, false);\n                if (parent.activeObj.strokeSettings.fillColor !== '') {\n                    canvasDraw.fillStyle = parent.activeObj.strokeSettings.fillColor;\n                    canvasDraw.fill();\n                }\n                canvasDraw.ellipse(actPoint.startX + (selectionWidth / 2), actPoint.startY + (selectionHeight / 2), Math.abs((selectionWidth / 2) - (parent.activeObj.strokeSettings.strokeWidth)), Math.abs((selectionHeight / 2) - (parent.activeObj.strokeSettings.strokeWidth)), 0, 0, 2 * Math.PI, false);\n                canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n                canvasDraw.fill('evenodd');\n                canvasDraw.closePath();\n                if (isNullOrUndefined(isPreventSelection) && canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'crop-circle':\n                if (canvasDraw === this.lowerContext) {\n                    canvasDraw = this.upperContext;\n                }\n                this.shapeCircle(canvasDraw, selectionWidth, selectionHeight);\n                break;\n            case 'line':\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n                if (isNullOrUndefined(isPreventSelection) && canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'arrow':\n                if (parent.activeObj.shapeDegree === 0) {\n                    degree = parent.transform.degree;\n                }\n                else {\n                    degree = parent.transform.degree - parent.activeObj.shapeDegree;\n                }\n                if (degree < 0) {\n                    degree = 360 + degree;\n                }\n                canvasDraw.fillStyle = canvasDraw.strokeStyle;\n                if (isNullOrUndefined(parent.activeObj.triangleDirection)) {\n                    parent.activeObj.triangleDirection = 'right';\n                }\n                if (isNullOrUndefined(parent.activeObj.start)) {\n                    parent.activeObj.start = 'none';\n                }\n                if (isNullOrUndefined(parent.activeObj.end)) {\n                    parent.activeObj.end = 'arrowSolid';\n                }\n                this.drawArrowHead(canvasDraw, true);\n                this.drawArrowHead(canvasDraw, false);\n                if (parent.activeObj.end === 'none') {\n                    this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n                }\n                canvasDraw.fillStyle = tempFillStyle;\n                if (isNullOrUndefined(isPreventSelection) && canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'path':\n                activeObj = extend({}, parent.activeObj, {}, true);\n                if (activeObj.pointColl.length > 1) {\n                    var obj = { shape: null };\n                    parent.notify('selection', { prop: 'getCurrentDrawingShape', value: { obj: obj } });\n                    if (obj['shape'] === 'path') {\n                        var nextPoint = { x: 0, y: 0 };\n                        for (var i = 0, len = activeObj.pointColl.length; i < len; i++) {\n                            if (isNullOrUndefined(activeObj.pointColl[i + 1])) {\n                                nextPoint.x = activeObj.activePoint.endX;\n                                nextPoint.y = activeObj.activePoint.endY;\n                            }\n                            else {\n                                nextPoint.x = activeObj.pointColl[i + 1].x;\n                                nextPoint.y = activeObj.pointColl[i + 1].y;\n                            }\n                            actPoint.startX = activeObj.pointColl[i].x;\n                            actPoint.startY = activeObj.pointColl[i].y;\n                            actPoint.endX = nextPoint.x;\n                            actPoint.endY = nextPoint.y;\n                            parent.activeObj = this.updateWidthHeight(parent.activeObj);\n                            this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n                        }\n                    }\n                    else {\n                        for (var i = 1, len = activeObj.pointColl.length; i < len; i++) {\n                            actPoint.startX = activeObj.pointColl[i - 1].x;\n                            actPoint.startY = activeObj.pointColl[i - 1].y;\n                            actPoint.endX = activeObj.pointColl[i].x;\n                            actPoint.endY = activeObj.pointColl[i].y;\n                            parent.activeObj = this.updateWidthHeight(parent.activeObj);\n                            this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n                        }\n                    }\n                    parent.activeObj = activeObj;\n                }\n                else {\n                    this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n                }\n                if (canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'text':\n                this.shapeText(canvasDraw);\n                break;\n            case 'crop-square':\n            case 'crop-3:4':\n            case 'crop-4:3':\n            case 'crop-6:9':\n            case 'crop-9:6':\n            case 'crop-9:16':\n            case 'crop-16:9':\n                if (canvasDraw === this.lowerContext) {\n                    canvasDraw = this.upperContext;\n                }\n                this.drawSelection(horLineWidth, verLineHeight);\n                parent.currObjType.shape = '';\n                break;\n            default:\n                this.drawSelection(horLineWidth, verLineHeight);\n                break;\n        }\n        this.rotateContext('reverse', canvasDraw);\n    };\n    Draw.prototype.updatePoints = function () {\n        var parent = this.parent;\n        parent.activeObj.activePoint.startX += parent.img.destLeft;\n        parent.activeObj.activePoint.startY += parent.img.destTop;\n        parent.activeObj.activePoint.endX += parent.img.destLeft;\n        parent.activeObj.activePoint.endY += parent.img.destTop;\n        parent.activeObj = this.updateWidthHeight(parent.activeObj);\n    };\n    Draw.prototype.updateWidthHeight = function (obj) {\n        obj.activePoint.width = obj.activePoint.endX - obj.activePoint.startX;\n        obj.activePoint.height = obj.activePoint.endY - obj.activePoint.startY;\n        return obj;\n    };\n    Draw.prototype.drawCenterCircles = function (canvasDraw) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        canvasDraw.lineWidth *= 2;\n        canvasDraw.beginPath();\n        if (parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'line') {\n            canvasDraw.moveTo(actPoint.startX, actPoint.startY);\n            canvasDraw.arc(actPoint.startX, actPoint.startY, parent.activeObj.topCenterCircle.radius, 0, 2 * Math.PI);\n            canvasDraw.moveTo(actPoint.endX, actPoint.endY);\n            canvasDraw.arc(actPoint.endX, actPoint.endY, parent.activeObj.bottomCenterCircle.radius, 0, 2 * Math.PI);\n        }\n        else if (parent.activeObj.shape === 'path') {\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            if (activeObj.pointColl.length > 1) {\n                for (var i = 1, len = activeObj.pointColl.length; i < len; i++) {\n                    actPoint.startX = activeObj.pointColl[i - 1].x;\n                    actPoint.startY = activeObj.pointColl[i - 1].y;\n                    actPoint.endX = activeObj.pointColl[i].x;\n                    actPoint.endY = activeObj.pointColl[i].y;\n                    canvasDraw.moveTo(actPoint.startX, actPoint.startY);\n                    canvasDraw.arc(actPoint.startX, actPoint.startY, parent.activeObj.topCenterCircle.radius, 0, 2 * Math.PI);\n                    canvasDraw.moveTo(actPoint.endX, actPoint.endY);\n                    canvasDraw.arc(actPoint.endX, actPoint.endY, parent.activeObj.bottomCenterCircle.radius, 0, 2 * Math.PI);\n                }\n            }\n            var obj = { shape: null };\n            parent.notify('selection', { prop: 'getCurrentDrawingShape', value: { obj: obj } });\n            if (obj['shape'] === 'path') {\n                parent.activeObj = activeObj;\n            }\n            canvasDraw.moveTo(actPoint.startX, actPoint.startY);\n            canvasDraw.arc(actPoint.startX, actPoint.startY, parent.activeObj.topCenterCircle.radius, 0, 2 * Math.PI);\n            canvasDraw.moveTo(actPoint.endX, actPoint.endY);\n            canvasDraw.arc(actPoint.endX, actPoint.endY, parent.activeObj.bottomCenterCircle.radius, 0, 2 * Math.PI);\n        }\n        else {\n            this.drawRotationArcLine(canvasDraw);\n            canvasDraw.lineTo(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y);\n        }\n        canvasDraw.stroke();\n        canvasDraw.fill();\n        canvasDraw.closePath();\n        if (parent.activeObj.shape !== 'arrow' && parent.activeObj.shape !== 'line' &&\n            parent.activeObj.shape !== 'path') {\n            canvasDraw.beginPath();\n            canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y);\n            canvasDraw.arc(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y, parent.activeObj.bottomCenterCircle.radius, 0, 2 * Math.PI);\n            canvasDraw.stroke();\n            canvasDraw.fill();\n            canvasDraw.closePath();\n        }\n        canvasDraw.lineWidth /= 2;\n    };\n    Draw.prototype.drawRotationArcLine = function (canvasDraw) {\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.activeObj.rotationCircleLine)) {\n            parent.activeObj.rotationCircleLine = 22.5;\n        }\n        var degree;\n        var isHorizontalflip = false;\n        var isVerticalflip = false;\n        if (parent.activeObj.shapeDegree === 0) {\n            degree = parent.transform.degree;\n        }\n        else {\n            degree = parent.transform.degree - parent.activeObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        for (var i = 0, len = parent.activeObj.flipObjColl.length; i < len; i++) {\n            if (parent.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                isHorizontalflip = true;\n            }\n            else if (parent.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                isVerticalflip = true;\n            }\n        }\n        switch (degree) {\n            case 0:\n            case 360:\n                if (isVerticalflip) {\n                    parent.activeObj.rotationCirclePoint = { x: parent.activeObj.topCenterCircle.startX,\n                        y: parent.activeObj.topCenterCircle.startY - parent.activeObj.rotationCircleLine };\n                    canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y + parent.activeObj.rotationCircleLine);\n                }\n                else {\n                    parent.activeObj.rotationCirclePoint = { x: parent.activeObj.bottomCenterCircle.startX,\n                        y: parent.activeObj.bottomCenterCircle.startY + parent.activeObj.rotationCircleLine };\n                    canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y - parent.activeObj.rotationCircleLine);\n                }\n                break;\n            case 90:\n            case -270:\n                if (isHorizontalflip) {\n                    parent.activeObj.rotationCirclePoint = { x: parent.activeObj.centerRightCircle.startX +\n                            parent.activeObj.rotationCircleLine, y: parent.activeObj.centerLeftCircle.startY };\n                    canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x - parent.activeObj.rotationCircleLine, parent.activeObj.rotationCirclePoint.y);\n                }\n                else {\n                    parent.activeObj.rotationCirclePoint = { x: parent.activeObj.centerLeftCircle.startX -\n                            parent.activeObj.rotationCircleLine, y: parent.activeObj.centerLeftCircle.startY };\n                    canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x + parent.activeObj.rotationCircleLine, parent.activeObj.rotationCirclePoint.y);\n                }\n                break;\n            case 180:\n            case -180:\n                if (isVerticalflip) {\n                    parent.activeObj.rotationCirclePoint = { x: parent.activeObj.bottomCenterCircle.startX,\n                        y: parent.activeObj.bottomCenterCircle.startY + parent.activeObj.rotationCircleLine };\n                    canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y - parent.activeObj.rotationCircleLine);\n                }\n                else {\n                    parent.activeObj.rotationCirclePoint = { x: parent.activeObj.topCenterCircle.startX,\n                        y: parent.activeObj.topCenterCircle.startY - parent.activeObj.rotationCircleLine };\n                    canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y + parent.activeObj.rotationCircleLine);\n                }\n                break;\n            case 270:\n            case -90:\n                if (isHorizontalflip) {\n                    parent.activeObj.rotationCirclePoint = { x: parent.activeObj.centerLeftCircle.startX -\n                            parent.activeObj.rotationCircleLine, y: parent.activeObj.centerLeftCircle.startY };\n                    canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x + parent.activeObj.rotationCircleLine, parent.activeObj.rotationCirclePoint.y);\n                }\n                else {\n                    parent.activeObj.rotationCirclePoint = { x: parent.activeObj.centerRightCircle.startX +\n                            parent.activeObj.rotationCircleLine, y: parent.activeObj.centerLeftCircle.startY };\n                    canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x - parent.activeObj.rotationCircleLine, parent.activeObj.rotationCirclePoint.y);\n                }\n                break;\n        }\n    };\n    Draw.prototype.drawSquareLines = function (canvasDraw) {\n        var splitWords;\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords[0] === 'crop') {\n            canvasDraw.strokeStyle = '#fff';\n        }\n        else {\n            canvasDraw.strokeStyle = parent.activeObj.strokeSettings.strokeColor;\n        }\n        canvasDraw.beginPath();\n        canvasDraw.rect(actPoint.startX, actPoint.startY, actPoint.width, actPoint.height);\n        if (parent.activeObj.strokeSettings.fillColor !== '') {\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.fillColor;\n            canvasDraw.fill();\n        }\n        canvasDraw.rect(actPoint.startX + parent.activeObj.strokeSettings.strokeWidth, actPoint.startY + parent.activeObj.strokeSettings.strokeWidth, actPoint.width - (2 * parent.activeObj.strokeSettings.strokeWidth), actPoint.height - (2 * parent.activeObj.strokeSettings.strokeWidth));\n        canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n        canvasDraw.fill('evenodd');\n        canvasDraw.closePath();\n    };\n    Draw.prototype.drawSelection = function (horLineWidth, verLineHeight) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        this.upperContext.strokeStyle = parent.themeColl[parent.theme]['primaryColor'];\n        this.upperContext.beginPath();\n        parent.activeObj.horTopInnerLine = { startX: actPoint.startX, startY: actPoint.startY +\n                verLineHeight, endX: actPoint.endX, endY: actPoint.endY + verLineHeight };\n        parent.activeObj.horBottomInnerLine = { startX: actPoint.startX, startY: actPoint.startY + (2 * verLineHeight), endX: actPoint.endX, endY: actPoint.endY + (2 * verLineHeight) };\n        parent.activeObj.verLeftInnerLine = { startX: actPoint.startX + horLineWidth,\n            startY: actPoint.startY, endX: actPoint.startX + horLineWidth,\n            endY: actPoint.endY };\n        parent.activeObj.verRightInnerLine = { startX: actPoint.startX + (2 * horLineWidth),\n            startY: actPoint.startY, endX: actPoint.startX + (2 * horLineWidth),\n            endY: actPoint.endY };\n        this.upperContext.moveTo(parent.activeObj.horTopInnerLine.startX, parent.activeObj.horTopInnerLine.startY);\n        this.upperContext.lineTo(parent.activeObj.horTopInnerLine.endX, parent.activeObj.horTopInnerLine.startY);\n        this.upperContext.moveTo(parent.activeObj.horBottomInnerLine.startX, parent.activeObj.horBottomInnerLine.startY);\n        this.upperContext.lineTo(parent.activeObj.horBottomInnerLine.endX, parent.activeObj.horBottomInnerLine.startY);\n        this.upperContext.moveTo(parent.activeObj.verLeftInnerLine.startX, parent.activeObj.verLeftInnerLine.startY);\n        this.upperContext.lineTo(parent.activeObj.verLeftInnerLine.endX, parent.activeObj.verLeftInnerLine.endY);\n        this.upperContext.moveTo(parent.activeObj.verRightInnerLine.startX, parent.activeObj.verRightInnerLine.startY);\n        this.upperContext.lineTo(parent.activeObj.verRightInnerLine.endX, parent.activeObj.verRightInnerLine.endY);\n        this.upperContext.stroke();\n        this.upperContext.closePath();\n    };\n    Draw.prototype.shapeCircle = function (canvasDraw, selectionWidth, selectionHeight) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        canvasDraw.strokeStyle = parent.themeColl[parent.theme]['primaryColor'];\n        canvasDraw.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        canvasDraw.fillStyle = 'rgb(0, 0, 0, 0.25)';\n        canvasDraw.fillRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        var tempWidth = canvasDraw.lineWidth;\n        canvasDraw.lineWidth = (2);\n        canvasDraw.beginPath();\n        canvasDraw.ellipse(parent.activeObj.horTopLine.startX + (selectionWidth / 2), parent.activeObj.horTopLine.startY\n            + (selectionHeight / 2), selectionWidth / 2, selectionHeight / 2, 0, 0, 2 * Math.PI, false);\n        canvasDraw.stroke();\n        canvasDraw.closePath();\n        canvasDraw.save();\n        canvasDraw.beginPath();\n        canvasDraw.arc(((actPoint.endX - actPoint.startX) / 2) + actPoint.startX, ((actPoint.endY - actPoint.startY) / 2) + actPoint.startY, (actPoint.width / 2), 0, Math.PI * 2);\n        canvasDraw.closePath();\n        canvasDraw.clip();\n        canvasDraw.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        canvasDraw.restore();\n        canvasDraw.lineWidth = tempWidth;\n        this.drawOuterSelection(canvasDraw, true);\n        parent.currObjType.shape = '';\n    };\n    Draw.prototype.shapeLine = function (canvasDraw, x1, y1, x2, y2) {\n        var tempLineWidth = canvasDraw.lineWidth;\n        canvasDraw.lineWidth = (this.parent.activeObj.strokeSettings.strokeWidth);\n        canvasDraw.beginPath();\n        canvasDraw.moveTo(x1, y1);\n        canvasDraw.lineTo(x2, y2);\n        canvasDraw.stroke();\n        canvasDraw.lineWidth = tempLineWidth;\n    };\n    Draw.prototype.arrow = function (canvasDraw, start) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n        var x = this.arrowDimension['arrow']['width'] + parent.activeObj.strokeSettings.strokeWidth;\n        var y = this.arrowDimension['arrow']['height'] + parent.activeObj.strokeSettings.strokeWidth;\n        this.dx = actPoint.endX - actPoint.startX;\n        this.dy = actPoint.endY - actPoint.startY;\n        canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n        var angle = Math.atan2(this.dy, this.dx);\n        if ((start && (parent.activeObj.triangleDirection === 'left' || parent.activeObj.triangleDirection === 'right')\n            && (parent.activeObj.start === 'arrow' && parent.activeObj.end === 'none')\n            || (parent.activeObj.start === 'arrow' && parent.activeObj.end !== 'circle'\n                && parent.activeObj.end !== 'square')) ||\n            (!start && (parent.activeObj.end === 'arrow' && parent.activeObj.start === 'none'\n                || parent.activeObj.start !== 'circle' && parent.activeObj.start !== 'square'))) {\n            this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n        }\n        if ((start && parent.activeObj.triangleDirection === 'left') ||\n            (!start && parent.activeObj.triangleDirection === 'right')) {\n            canvasDraw.translate(actPoint.endX, actPoint.endY);\n            canvasDraw.rotate(angle);\n            this.shapeLine(canvasDraw, 0, 0, -x, y / 2);\n            this.shapeLine(canvasDraw, 0, 0, -x, -y / 2);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.endX, -actPoint.endY);\n        }\n        else if ((start && parent.activeObj.triangleDirection === 'right') ||\n            (!start && parent.activeObj.triangleDirection === 'left')) {\n            canvasDraw.translate(actPoint.startX, actPoint.startY);\n            canvasDraw.rotate(angle);\n            this.shapeLine(canvasDraw, 0, 0, x, y / 2);\n            this.shapeLine(canvasDraw, 0, 0, x, -y / 2);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.startX, -actPoint.startY);\n        }\n    };\n    Draw.prototype.arrowSolid = function (canvasDraw, start) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var x = this.arrowDimension['arrowSolid']['width'] + parent.activeObj.strokeSettings.strokeWidth;\n        var y = this.arrowDimension['arrowSolid']['height'] + parent.activeObj.strokeSettings.strokeWidth;\n        this.dx = actPoint.endX - actPoint.startX;\n        this.dy = actPoint.endY - actPoint.startY;\n        var angle = Math.atan2(this.dy, this.dx);\n        if ((start && (parent.activeObj.start === 'arrowSolid' && parent.activeObj.end === 'none')\n            || (parent.activeObj.start === 'arrowSolid' && parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square')) ||\n            (!start && (parent.activeObj.end === 'arrowSolid' && parent.activeObj.start === 'none'\n                || parent.activeObj.start !== 'circle' && parent.activeObj.start !== 'square'))) {\n            this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n        }\n        if ((start && parent.activeObj.triangleDirection === 'left') ||\n            (!start && parent.activeObj.triangleDirection === 'right')) {\n            canvasDraw.translate(actPoint.endX, actPoint.endY);\n            canvasDraw.rotate(angle);\n            canvasDraw.beginPath();\n            canvasDraw.moveTo(parent.activeObj.strokeSettings.strokeWidth, 0);\n            canvasDraw.lineTo(-x + y / 2, y / 2);\n            canvasDraw.lineTo(-x + y / 2, -y / 2);\n            canvasDraw.closePath();\n            canvasDraw.fill();\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.endX, -actPoint.endY);\n            parent.activeObj.rotatedAngle = angle;\n        }\n        else if ((start && parent.activeObj.triangleDirection === 'right') ||\n            (!start && parent.activeObj.triangleDirection === 'left')) {\n            canvasDraw.translate(actPoint.startX, actPoint.startY);\n            canvasDraw.rotate(angle);\n            canvasDraw.beginPath();\n            canvasDraw.moveTo(0 - parent.activeObj.strokeSettings.strokeWidth, 0);\n            canvasDraw.lineTo(x - y / 2, y / 2);\n            canvasDraw.lineTo(x - y / 2, -y / 2);\n            canvasDraw.closePath();\n            canvasDraw.fill();\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.startX, -actPoint.startY);\n            parent.activeObj.rotatedAngle = angle;\n        }\n    };\n    Draw.prototype.arrowSquareStart = function (canvasDraw) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        if ((parent.activeObj.start === 'square' && parent.activeObj.end === 'none')\n            || (parent.activeObj.start === 'square' && parent.activeObj.end !== 'circle'\n                && parent.activeObj.start !== 'square') || (parent.activeObj.start === 'squareSolid' && parent.activeObj.end === 'circleSolid')) {\n            this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n        }\n        canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n        canvasDraw.beginPath();\n        canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n        var x = this.arrowDimension['square']['width'] + parent.activeObj.strokeSettings.strokeWidth;\n        var y = this.arrowDimension['square']['height'] + parent.activeObj.strokeSettings.strokeWidth;\n        this.dx = actPoint.endX - actPoint.startX;\n        this.dy = actPoint.endY - actPoint.startY;\n        var angle = Math.atan2(this.dy, this.dx);\n        if (parent.activeObj.triangleDirection === 'left') {\n            canvasDraw.translate(actPoint.endX, actPoint.endY);\n            canvasDraw.rotate(angle);\n            if (parent.activeObj.start === 'squareSolid') {\n                canvasDraw.fillRect(-x + y / 2, -y / 2, x, y);\n            }\n            canvasDraw.strokeRect(-x + y / 2, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.endX, -actPoint.endY);\n            this.squareStartIntersectX1 = actPoint.endX - (y / 2) * Math.cos(angle);\n            this.squareStartIntersectY1 = actPoint.endY - (y / 2) * Math.sin(angle);\n            if (parent.activeObj.start === 'square' && parent.activeObj.end !== 'square'\n                && parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square') {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n            if (parent.activeObj.start === 'square' && parent.activeObj.end === 'circle') {\n                this.shapeLine(canvasDraw, this.endCircleIntersectX1, this.endCircleIntersectY1, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n            if (parent.activeObj.start === 'squareSolid' && parent.activeObj.end === 'squareSolid') {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n            }\n        }\n        else if (parent.activeObj.triangleDirection === 'right') {\n            canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n            if (parent.activeObj.start === 'squareSolid' && parent.activeObj.end === 'squareSolid') {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n            }\n            canvasDraw.translate(actPoint.startX, actPoint.startY);\n            canvasDraw.rotate(angle);\n            if (parent.activeObj.start === 'squareSolid') {\n                canvasDraw.fillRect(y / 2 - x, -y / 2, x, y);\n            }\n            canvasDraw.strokeRect(y / 2 - x, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.startX, -actPoint.startY);\n            parent.activeObj.rotatedAngle = angle;\n            this.squareStartIntersectX1 = actPoint.startX + (y / 2) * Math.cos(angle);\n            this.squareStartIntersectY1 = actPoint.startY + (y / 2) * Math.sin(angle);\n            if (parent.activeObj.start === 'square' && parent.activeObj.end !== 'square'\n                && parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square') {\n                this.shapeLine(canvasDraw, actPoint.endX, actPoint.endY, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n            if (parent.activeObj.start === 'square' && parent.activeObj.end === 'circle') {\n                this.shapeLine(canvasDraw, this.endCircleIntersectX1, this.endCircleIntersectY1, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n        }\n    };\n    Draw.prototype.arrowSquareEnd = function (canvasDraw) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var x = this.arrowDimension['square']['width'] + parent.activeObj.strokeSettings.strokeWidth;\n        var y = this.arrowDimension['square']['height'] + parent.activeObj.strokeSettings.strokeWidth;\n        this.dx = actPoint.endX - actPoint.startX;\n        this.dy = actPoint.endY - actPoint.startY;\n        var angle = Math.atan2(this.dy, this.dx);\n        canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n        if (parent.activeObj.triangleDirection === 'right') {\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n            if (parent.activeObj.end === 'squareSolid' && parent.activeObj.start === 'none') {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n            }\n            canvasDraw.translate(actPoint.endX, actPoint.endY);\n            canvasDraw.rotate(angle);\n            if (parent.activeObj.end === 'squareSolid') {\n                canvasDraw.fillRect(-x + y / 2, -y / 2, x, y);\n            }\n            canvasDraw.strokeRect(-x + y / 2, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.endX, -actPoint.endY);\n            parent.activeObj.rotatedAngle = angle;\n            this.squareEndIntersectX1 = actPoint.endX - (y / 2) * Math.cos(angle);\n            this.squareEndIntersectY1 = actPoint.endY - (y / 2) * Math.sin(angle);\n            if (parent.activeObj.end === 'square' && parent.activeObj.start !== 'square' && parent.activeObj.start !== 'circle'\n                && parent.activeObj.end === 'square') {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, this.squareEndIntersectX1, this.squareEndIntersectY1);\n            }\n            else if ((parent.activeObj.start === 'circle') && parent.activeObj.end === 'square') {\n                this.shapeLine(canvasDraw, this.squareEndIntersectX1, this.squareEndIntersectY1, this.startCircleIntersectX1, this.startCircleIntersectY1);\n            }\n            else if ((parent.activeObj.start === 'square') && parent.activeObj.end === 'square') {\n                this.shapeLine(canvasDraw, this.squareEndIntersectX1, this.squareEndIntersectY1, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n        }\n        else if (parent.activeObj.triangleDirection === 'left') {\n            canvasDraw.translate(actPoint.startX, actPoint.startY);\n            canvasDraw.rotate(angle);\n            if (parent.activeObj.end === 'squareSolid') {\n                canvasDraw.fillRect(y / 2 - x, -y / 2, x, y);\n            }\n            canvasDraw.strokeRect(y / 2 - x, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.startX, -actPoint.startY);\n            parent.activeObj.rotatedAngle = angle;\n            this.squareEndIntersectX1 = actPoint.startX + (y / 2) * Math.cos(angle);\n            this.squareEndIntersectY1 = actPoint.startY + (y / 2) * Math.sin(angle);\n            if (parent.activeObj.end === 'square' && parent.activeObj.start !== 'square' &&\n                parent.activeObj.start !== 'circle' && parent.activeObj.end === 'square') {\n                this.shapeLine(canvasDraw, actPoint.endX, actPoint.endY, this.squareEndIntersectX1, this.squareEndIntersectY1);\n            }\n            else if ((parent.activeObj.start === 'circle') && parent.activeObj.end === 'square') {\n                this.shapeLine(canvasDraw, this.squareEndIntersectX1, this.squareEndIntersectY1, this.startCircleIntersectX1, this.startCircleIntersectY1);\n            }\n            else if ((parent.activeObj.start === 'square') && parent.activeObj.end === 'square') {\n                this.shapeLine(canvasDraw, this.squareEndIntersectX1, this.squareEndIntersectY1, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n        }\n    };\n    Draw.prototype.arrowCircle = function (canvasDraw, start) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        if ((start && parent.activeObj.triangleDirection === 'left') ||\n            (!start && parent.activeObj.triangleDirection === 'right')) {\n            canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n            var circleRadius = this.arrowDimension['circle']['width'] + parent.activeObj.strokeSettings.strokeWidth;\n            canvasDraw.beginPath();\n            canvasDraw.arc(actPoint.endX, actPoint.endY, circleRadius, 0, 2 * Math.PI);\n            canvasDraw.stroke();\n            canvasDraw.closePath();\n            this.dx = actPoint.endX - actPoint.startX;\n            this.dy = actPoint.endY - actPoint.startY;\n            var a = this.dx * this.dx + this.dy * this.dy;\n            var b = 2 * (this.dx * (actPoint.startX - actPoint.endX) + this.dy * (actPoint.startY - actPoint.endY));\n            var c = (actPoint.startX - actPoint.endX) *\n                (actPoint.startX - actPoint.endX) +\n                (actPoint.startY - actPoint.endY) *\n                    (actPoint.startY - actPoint.endY) - circleRadius * circleRadius;\n            var intersect = b * b - 4 * a * c;\n            if (intersect >= 0) {\n                canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n                var t2 = (-b - Math.sqrt(intersect)) / (2 * a);\n                var intersectionX1 = actPoint.startX + this.dx * t2;\n                var intersectionY1 = actPoint.startY + this.dy * t2;\n                if (start) {\n                    this.startCircleIntersectX1 = intersectionX1;\n                    this.startCircleIntersectY1 = intersectionY1;\n                    canvasDraw.beginPath();\n                    canvasDraw.fill();\n                    canvasDraw.beginPath();\n                    if (parent.activeObj.start === 'circle' && parent.activeObj.end === 'circle') {\n                        this.shapeLine(canvasDraw, this.startCircleIntersectX1, this.startCircleIntersectY1, this.endCircleIntersectX1, this.endCircleIntersectY1);\n                    }\n                    else if (parent.activeObj.start === 'circle' && parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square') {\n                        this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, this.startCircleIntersectX1, this.startCircleIntersectY1);\n                    }\n                    canvasDraw.stroke();\n                    canvasDraw.closePath();\n                }\n                else {\n                    this.endCircleIntersectX1 = intersectionX1;\n                    this.endCircleIntersectY1 = intersectionY1;\n                    if (parent.activeObj.end === 'circle' && (parent.activeObj.start !== 'circle' && parent.activeObj.start !== 'square')) {\n                        this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, this.endCircleIntersectX1, this.endCircleIntersectY1);\n                    }\n                }\n            }\n            var angle = Math.atan2(this.dy, this.dx);\n            parent.activeObj.rotatedAngle = angle;\n        }\n        else if ((start && parent.activeObj.triangleDirection === 'right') ||\n            (!start && parent.activeObj.triangleDirection === 'left')) {\n            canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n            var circleRadius = this.arrowDimension['circle']['width'] + parent.activeObj.strokeSettings.strokeWidth;\n            canvasDraw.beginPath();\n            canvasDraw.arc(actPoint.startX, actPoint.startY, circleRadius, 0, 2 * Math.PI);\n            canvasDraw.stroke();\n            canvasDraw.closePath();\n            this.dx = actPoint.startX - actPoint.endX;\n            this.dy = actPoint.startY - actPoint.endY;\n            var a = this.dx * this.dx + this.dy * this.dy;\n            var b = 2 * (this.dx * (actPoint.endX - actPoint.startX) +\n                this.dy * (actPoint.endY - actPoint.startY));\n            var c = (actPoint.endX - actPoint.startX) *\n                (actPoint.endX - actPoint.startX) +\n                (actPoint.endY - actPoint.startY) *\n                    (actPoint.endY - actPoint.startY) - circleRadius * circleRadius;\n            var intersect = b * b - 4 * a * c;\n            if (intersect >= 0) {\n                canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n                var t2 = (-b - Math.sqrt(intersect)) / (2 * a);\n                var intersectionX1 = actPoint.endX + this.dx * t2;\n                var intersectionY1 = actPoint.endY + this.dy * t2;\n                if (start) {\n                    this.startCircleIntersectX1 = intersectionX1;\n                    this.startCircleIntersectY1 = intersectionY1;\n                    if (parent.activeObj.start === 'circle' && parent.activeObj.end === 'circle') {\n                        this.shapeLine(canvasDraw, this.endCircleIntersectX1, this.endCircleIntersectY1, this.startCircleIntersectX1, this.startCircleIntersectY1);\n                    }\n                    else if (parent.activeObj.start === 'circle' && parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square') {\n                        this.shapeLine(canvasDraw, actPoint.endX, actPoint.endY, this.startCircleIntersectX1, this.startCircleIntersectY1);\n                    }\n                }\n                else {\n                    this.endCircleIntersectX1 = intersectionX1;\n                    this.endCircleIntersectY1 = intersectionY1;\n                    canvasDraw.beginPath();\n                    canvasDraw.fill();\n                    canvasDraw.beginPath();\n                    if (parent.activeObj.end === 'circle' && (parent.activeObj.start !== 'circle' && parent.activeObj.start !== 'square')) {\n                        this.shapeLine(canvasDraw, actPoint.endX, actPoint.endY, this.endCircleIntersectX1, this.endCircleIntersectY1);\n                    }\n                }\n            }\n            var angle = Math.atan2(this.dy, this.dx);\n            parent.activeObj.rotatedAngle = angle;\n        }\n    };\n    Draw.prototype.arrowCircleSolid = function (canvasDraw, start) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        if ((start && parent.activeObj.triangleDirection === 'left') ||\n            (!start && parent.activeObj.triangleDirection === 'right')) {\n            canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n            canvasDraw.beginPath();\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n            if ((start && (parent.activeObj.start === 'circleSolid' && parent.activeObj.end === 'none') ||\n                (parent.activeObj.start === 'circleSolid' && parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square')) ||\n                (!start && (parent.activeObj.end === 'circleSolid' && parent.activeObj.start === 'none'))) {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n            }\n            var circleRadius = this.arrowDimension['circle']['width'] + parent.activeObj.strokeSettings.strokeWidth;\n            this.dx = actPoint.endX - actPoint.startX;\n            this.dy = actPoint.endY - actPoint.startY;\n            canvasDraw.save();\n            canvasDraw.beginPath();\n            canvasDraw.arc(actPoint.endX, actPoint.endY, circleRadius, 0, 2 * Math.PI);\n            canvasDraw.stroke();\n            canvasDraw.fill();\n            canvasDraw.closePath();\n            parent.activeObj.rotatedAngle = Math.atan2(this.dy, this.dx);\n        }\n        else if ((start && parent.activeObj.triangleDirection === 'right') ||\n            (!start && parent.activeObj.triangleDirection === 'left')) {\n            canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n            canvasDraw.beginPath();\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n            if ((start && (parent.activeObj.start === 'circleSolid' && parent.activeObj.end === 'none') ||\n                (parent.activeObj.start === 'circleSolid' && parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square')) ||\n                !start && (parent.activeObj.end === 'circleSolid' && parent.activeObj.start === 'none')) {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n            }\n            var circleRadius = this.arrowDimension['circle']['width'] + parent.activeObj.strokeSettings.strokeWidth;\n            this.dx = actPoint.endX - actPoint.startX;\n            this.dy = actPoint.endY - actPoint.startY;\n            canvasDraw.save();\n            canvasDraw.beginPath();\n            canvasDraw.arc(actPoint.startX, actPoint.startY, circleRadius, 0, 2 * Math.PI);\n            canvasDraw.stroke();\n            canvasDraw.fill();\n            canvasDraw.closePath();\n            parent.activeObj.rotatedAngle = Math.atan2(this.dy, this.dx);\n        }\n    };\n    Draw.prototype.arrowBar = function (canvasDraw, start) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        if ((start && parent.activeObj.triangleDirection === 'left') ||\n            (!start && parent.activeObj.triangleDirection === 'right')) {\n            canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n            canvasDraw.beginPath();\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n            if ((start && (parent.activeObj.start === 'bar' && parent.activeObj.end === 'none') ||\n                (parent.activeObj.start === 'bar' && (parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square'))) ||\n                (!start && ((parent.activeObj.end === 'bar' && parent.activeObj.start === 'none') ||\n                    (parent.activeObj.end === 'bar' && (parent.activeObj.start !== 'circle' && parent.activeObj.start !== 'square'))))) {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n            }\n            var x = this.arrowDimension['bar']['width'] + parent.activeObj.strokeSettings.strokeWidth;\n            var y = this.arrowDimension['bar']['height'] + parent.activeObj.strokeSettings.strokeWidth;\n            this.dx = actPoint.endX - actPoint.startX;\n            this.dy = actPoint.endY - actPoint.startY;\n            var angle = Math.atan2(this.dy, this.dx);\n            canvasDraw.translate(actPoint.endX, actPoint.endY);\n            canvasDraw.rotate(angle);\n            canvasDraw.fillRect(-x + y / 4, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.endX, -actPoint.endY);\n            parent.activeObj.rotatedAngle = angle;\n        }\n        else if ((start && parent.activeObj.triangleDirection === 'right') ||\n            (!start && parent.activeObj.triangleDirection === 'left')) {\n            canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n            canvasDraw.beginPath();\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n            if ((start && (parent.activeObj.start === 'bar' && parent.activeObj.end === 'none')\n                || (parent.activeObj.start === 'bar' && (parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square'))) ||\n                (!start && (parent.activeObj.end === 'bar' && parent.activeObj.start === 'none'))) {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n            }\n            var x = this.arrowDimension['bar']['width'] + parent.activeObj.strokeSettings.strokeWidth;\n            var y = this.arrowDimension['bar']['height'] + parent.activeObj.strokeSettings.strokeWidth;\n            this.dx = actPoint.endX - actPoint.startX;\n            this.dy = actPoint.endY - actPoint.startY;\n            var angle = Math.atan2(this.dy, this.dx);\n            canvasDraw.translate(actPoint.startX, actPoint.startY);\n            canvasDraw.rotate(angle);\n            canvasDraw.fillRect(y / 4 - x, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.startX, -actPoint.startY);\n            parent.activeObj.rotatedAngle = angle;\n        }\n    };\n    Draw.prototype.shapeText = function (canvasDraw) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var rows = parent.activeObj.keyHistory.split('\\n');\n        var height = parent.activeObj.textSettings.fontSize + parent.activeObj.textSettings.fontSize * 0.25;\n        var lineHeight = ((height * rows.length) - (parent.activeObj.textSettings.fontSize * rows.length)) / rows.length;\n        for (var i = 0; i < rows.length; i++) {\n            var text = rows[i];\n            var yPoint = ((i + 1) * parent.activeObj.textSettings.fontSize * 0.85) + (i * lineHeight);\n            if (parent.transform.degree === -360) {\n                parent.transform.degree = 0;\n            }\n            if (parent.transform.degree === 0 || parent.transform.degree === 180) {\n                if (parent.activeObj.textSettings.fontSize > actPoint.height) {\n                    parent.activeObj.textSettings.fontSize = actPoint.height -\n                        (actPoint.height * 0.1);\n                }\n            }\n            else {\n                if (parent.activeObj.textSettings.fontSize > actPoint.width) {\n                    parent.activeObj.textSettings.fontSize = actPoint.width -\n                        (actPoint.width * 0.1);\n                }\n            }\n            canvasDraw.strokeStyle = parent.activeObj.strokeSettings.strokeColor;\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n            var textStyle = '';\n            if (parent.activeObj.textSettings.bold) {\n                textStyle = 'bold ';\n            }\n            if (parent.activeObj.textSettings.italic) {\n                textStyle = 'italic ';\n            }\n            if (parent.activeObj.textSettings.bold && parent.activeObj.textSettings.italic) {\n                textStyle = 'italic bold ';\n            }\n            canvasDraw.font = textStyle + parent.activeObj.textSettings.fontSize + 'px' + ' ' +\n                parent.activeObj.textSettings.fontFamily;\n            if (parent.activeObj.flipObjColl.length === 4) {\n                parent.activeObj.flipObjColl = [];\n            }\n            for (var j = 0, len = parent.activeObj.flipObjColl.length; j < len; j++) {\n                if (parent.activeObj.flipObjColl[j].toLowerCase() === 'horizontal') {\n                    canvasDraw.translate(canvasDraw.canvas.width, 0);\n                    canvasDraw.scale(-1, 1);\n                    this.updateActPoint('horizontal', canvasDraw);\n                }\n                else if (parent.activeObj.flipObjColl[j].toLowerCase() === 'vertical') {\n                    canvasDraw.translate(0, canvasDraw.canvas.height);\n                    canvasDraw.scale(1, -1);\n                    this.updateActPoint('vertical', canvasDraw);\n                }\n            }\n            if (parent.activeObj.shapeDegree !== parent.transform.degree) {\n                this.rotateText(canvasDraw);\n            }\n            else {\n                canvasDraw.fillText(text, actPoint.startX + parent.activeObj.textSettings.fontSize * 0.1, actPoint.startY + yPoint);\n            }\n            for (var k = 0, len = parent.activeObj.flipObjColl.length; k < len; k++) {\n                if (parent.activeObj.flipObjColl[k].toLowerCase() === 'horizontal') {\n                    canvasDraw.translate(canvasDraw.canvas.width, 0);\n                    canvasDraw.scale(-1, 1);\n                    this.updateActPoint('horizontal', canvasDraw);\n                }\n                else if (parent.activeObj.flipObjColl[k].toLowerCase() === 'vertical') {\n                    canvasDraw.translate(0, canvasDraw.canvas.height);\n                    canvasDraw.scale(1, -1);\n                    this.updateActPoint('vertical', canvasDraw);\n                }\n            }\n        }\n        parent.currObjType.isText = false;\n    };\n    Draw.prototype.updateActPoint = function (degree, canvasDraw) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        if (degree.toLowerCase() === 'horizontal') {\n            if (actPoint.startX <= canvasDraw.canvas.width / 2) {\n                actPoint.startX = canvasDraw.canvas.width / 2 + ((canvasDraw.canvas.width / 2) -\n                    actPoint.endX);\n                actPoint.endX = actPoint.startX +\n                    actPoint.width;\n                this.updateActiveObject(actPoint, parent.activeObj);\n            }\n            else if (actPoint.startX >= canvasDraw.canvas.width / 2) {\n                actPoint.startX = canvasDraw.canvas.width - actPoint.endX;\n                actPoint.endX = actPoint.startX +\n                    actPoint.width;\n                this.updateActiveObject(actPoint, parent.activeObj);\n            }\n        }\n        else if (degree.toLowerCase() === 'vertical') {\n            if (actPoint.startY <= canvasDraw.canvas.height / 2) {\n                actPoint.startY = canvasDraw.canvas.height / 2 + ((canvasDraw.canvas.height / 2) - actPoint.endY);\n                actPoint.endY = actPoint.startY + actPoint.height;\n                this.updateActiveObject(actPoint, parent.activeObj);\n            }\n            else if (actPoint.startY >= canvasDraw.canvas.height / 2) {\n                actPoint.startY = canvasDraw.canvas.height - actPoint.endY;\n                actPoint.endY = actPoint.startY + actPoint.height;\n                this.updateActiveObject(actPoint, parent.activeObj);\n            }\n        }\n    };\n    Draw.prototype.rotateText = function (canvasDraw) {\n        var parent = this.parent;\n        var startX = parent.activeObj.activePoint.startX;\n        var startY = parent.activeObj.activePoint.startY;\n        var degree;\n        var actPoint = parent.activeObj.activePoint;\n        if (parent.activeObj.shapeDegree === 0) {\n            degree = parent.transform.degree;\n        }\n        else {\n            degree = parent.transform.degree - parent.activeObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (degree % 360 === 0 && (parent.transform.degree !== -360 || parent.transform.currFlipState === '')) {\n            startX = actPoint.startX + parent.activeObj.textSettings.fontSize * 0.15;\n            startY = actPoint.startY + (actPoint.endY - actPoint.startY);\n            var rows = parent.activeObj.keyHistory.split('\\n');\n            for (var i = 0; i < rows.length; i++) {\n                startY = actPoint.startY + (i * parent.activeObj.textSettings.fontSize + parent.activeObj.textSettings.fontSize * 0.25);\n                canvasDraw.fillText(rows[i], startX, startY);\n            }\n        }\n        else if (degree % 90 === 0 && degree % 180 !== 0) {\n            canvasDraw.translate(parent.lowerCanvas.width / 2, parent.lowerCanvas.height / 2);\n            canvasDraw.rotate(Math.PI / 180 * degree);\n            canvasDraw.translate(-parent.lowerCanvas.height / 2, -parent.lowerCanvas.width / 2);\n            if (degree % 90 === 0 && degree % 270 !== 0) {\n                startY = (parent.lowerCanvas.width - actPoint.endX) +\n                    parent.activeObj.textSettings.fontSize * 0.4;\n                startX = actPoint.startY;\n            }\n            else if (degree % 270 === 0) {\n                startX = parent.lowerCanvas.height - actPoint.endY;\n                startY = actPoint.startX + parent.activeObj.textSettings.fontSize * 0.4;\n            }\n            this.textFlipDegree(canvasDraw, startX, startY);\n            canvasDraw.translate(parent.lowerCanvas.height / 2, parent.lowerCanvas.width / 2);\n            canvasDraw.rotate(Math.PI / 180 * -degree);\n            canvasDraw.translate(-parent.lowerCanvas.width / 2, -parent.lowerCanvas.height / 2);\n        }\n        else {\n            canvasDraw.translate(parent.lowerCanvas.width / 2, parent.lowerCanvas.height / 2);\n            canvasDraw.rotate(Math.PI / 180 * degree);\n            startX = parent.lowerCanvas.width - actPoint.endX;\n            startY = (parent.lowerCanvas.height - actPoint.endY) +\n                parent.activeObj.textSettings.fontSize * 0.4;\n            canvasDraw.translate(-parent.lowerCanvas.width / 2, -parent.lowerCanvas.height / 2);\n            this.textFlipDegree(canvasDraw, startX, startY);\n            canvasDraw.translate(parent.lowerCanvas.width / 2, parent.lowerCanvas.height / 2);\n            canvasDraw.rotate(Math.PI / 180 * -degree);\n            canvasDraw.translate(-parent.lowerCanvas.width / 2, -parent.lowerCanvas.height / 2);\n        }\n        if (parent.transform.degree === 360 || parent.transform.degree === -360) {\n            parent.transform.degree = 0;\n        }\n    };\n    Draw.prototype.textFlipDegree = function (canvasDraw, startX, startY) {\n        var parent = this.parent;\n        var rows = parent.activeObj.keyHistory.split('\\n');\n        var height = parent.activeObj.textSettings.fontSize;\n        var lineHeight = ((height * rows.length) - (parent.activeObj.textSettings.fontSize * rows.length)) / rows.length;\n        var yPoint = (parent.activeObj.textSettings.fontSize * 0.85) + lineHeight;\n        for (var i = 0; i < rows.length; i++) {\n            var text = rows[i];\n            if (i > 0) {\n                if (i === 1) {\n                    yPoint -= (parent.activeObj.textSettings.fontSize * 0.85);\n                }\n                yPoint += parent.activeObj.textSettings.fontSize + parent.activeObj.textSettings.fontSize * 0.15;\n            }\n            canvasDraw.fillText(text, startX + parent.activeObj.textSettings.fontSize * 0.15, startY +\n                yPoint + (i > 0 ? parent.activeObj.textSettings.fontSize * 0.25 : -parent.activeObj.textSettings.fontSize * 0.35));\n        }\n    };\n    Draw.prototype.clearOuterCanvas = function (context) {\n        var parent = this.parent;\n        var destLeft = parent.img.destLeft;\n        var destTop = parent.img.destTop;\n        if (parent.img.destWidth < parent.lowerCanvas.width) {\n            var left = parent.img.destLeft > 0 ? parent.img.destLeft : 0;\n            context.clearRect(0, 0, left, parent.lowerCanvas.height);\n            context.clearRect(parent.img.destLeft + parent.img.destWidth, 0, left, parent.lowerCanvas.height);\n        }\n        if (parent.img.destHeight < parent.lowerCanvas.height) {\n            var top_1 = parent.img.destTop > 0 ? parent.img.destTop : 0;\n            context.clearRect(0, 0, parent.lowerCanvas.width, top_1);\n            context.clearRect(0, parent.img.destTop + parent.img.destHeight, parent.lowerCanvas.width, top_1);\n        }\n        if (parent.transform.currFlipState !== '') {\n            parent.img.destLeft = destLeft;\n            parent.img.destTop = destTop;\n        }\n    };\n    Draw.prototype.setDestPoints = function () {\n        var maxDimension;\n        var parent = this.parent;\n        if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            var obj = { width: 0, height: 0 };\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n                value: { width: parent.img.srcHeight, height: parent.img.srcWidth, obj: obj } });\n            maxDimension = obj;\n            if (this.isRotateZoom) {\n                maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n                maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n                parent.img.destWidth = maxDimension.height;\n                parent.img.destHeight = maxDimension.width;\n            }\n            parent.img.destLeft = (parent.lowerCanvas.clientWidth - maxDimension.height) / 2;\n            parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.width) / 2;\n            parent.img.destWidth = maxDimension.height;\n            parent.img.destHeight = maxDimension.width;\n        }\n        else {\n            var obj = { width: 0, height: 0 };\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n                value: { width: parent.img.srcWidth, height: parent.img.srcHeight, obj: obj } });\n            maxDimension = obj;\n            if (this.isRotateZoom) {\n                maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n                maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n                parent.img.destWidth = maxDimension.width;\n                parent.img.destHeight = maxDimension.height;\n            }\n            parent.img.destLeft = (parent.lowerCanvas.clientWidth - maxDimension.width) / 2;\n            parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.height) / 2;\n            parent.img.destWidth = maxDimension.width;\n            parent.img.destHeight = maxDimension.height;\n        }\n    };\n    Draw.prototype.updateCurrTransState = function (type, isPreventDestination, isRotatePan) {\n        var parent = this.parent;\n        var destLeft = parent.img.destLeft;\n        var destTop = parent.img.destTop;\n        if (type === 'initial') {\n            this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n            if (isNullOrUndefined(isPreventDestination)) {\n                this.setDestPoints();\n            }\n        }\n        this.currTransState(type, null, null, isRotatePan);\n        if (parent.transform.degree === 0 && parent.transform.currFlipState === '') {\n            parent.img.destLeft = destLeft;\n            parent.img.destTop = destTop;\n        }\n        if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle')) {\n            if (isRotatePan) {\n                parent.img.destLeft += parent.panPoint.totalPannedClientPoint.x;\n                parent.img.destTop +=\n                    parent.panPoint.totalPannedClientPoint.y;\n            }\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            if (isRotatePan) {\n                parent.img.destLeft -= parent.panPoint.totalPannedClientPoint.x;\n                parent.img.destTop -=\n                    parent.panPoint.totalPannedClientPoint.y;\n            }\n        }\n    };\n    Draw.prototype.currTransState = function (type, isPreventDimension, context, isPreventCircleCrop) {\n        var parent = this.parent;\n        context = context ? context : this.lowerContext;\n        if (type === 'initial') {\n            this.setTransformColl(context, type);\n        }\n        else if (type === 'reverse') {\n            this.setTransformColl(context, type);\n            this.setClientTransDim(isPreventDimension);\n            if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle'\n                && isNullOrUndefined(isPreventCircleCrop))) {\n                if (isPreventCircleCrop) {\n                    parent.img.destLeft += parent.panPoint.totalPannedClientPoint.x;\n                    parent.img.destTop += parent.panPoint.totalPannedClientPoint.y;\n                }\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                if (isPreventCircleCrop) {\n                    parent.img.destLeft -= parent.panPoint.totalPannedClientPoint.x;\n                    parent.img.destTop -= parent.panPoint.totalPannedClientPoint.y;\n                }\n            }\n        }\n    };\n    Draw.prototype.setTransformColl = function (context, type) {\n        var parent = this.parent;\n        if (type === 'initial') {\n            for (var i = 0, len = parent.rotateFlipColl.length; i < len; i++) {\n                this.setTransform(context, parent.rotateFlipColl[i]);\n            }\n        }\n        else if (type === 'reverse') {\n            for (var i = parent.rotateFlipColl.length - 1; i >= 0; i--) {\n                this.setTransform(context, parent.rotateFlipColl[i], true);\n            }\n        }\n    };\n    Draw.prototype.setTransform = function (context, value, isReverse) {\n        var parent = this.parent;\n        if (isReverse && value === 90) {\n            value = -90;\n        }\n        else if (isReverse && value === -90) {\n            value = 90;\n        }\n        if (value === 'horizontal' && parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            value = 'vertical';\n        }\n        else if (value === 'vertical' && parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            value = 'horizontal';\n        }\n        parent.notify('transform', { prop: 'setReverseRotate', onPropertyChange: false, value: { bool: true } });\n        parent.notify('transform', { prop: 'setReverseFlip', onPropertyChange: false, value: { isReverseFlip: true } });\n        if (isNullOrUndefined(isReverse)) {\n            context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        }\n        switch (value) {\n            case 90:\n            case -90:\n                context.translate(context.canvas.width / 2, context.canvas.height / 2);\n                context.rotate(Math.PI / 180 * value);\n                context.translate(-context.canvas.width / 2, -context.canvas.height / 2);\n                break;\n            case 'horizontal':\n                context.translate(context.canvas.width, 0);\n                context.scale(-1, 1);\n                break;\n            case 'vertical':\n                context.translate(0, context.canvas.height);\n                context.scale(1, -1);\n                break;\n        }\n        parent.notify('transform', { prop: 'setReverseRotate', onPropertyChange: false, value: { bool: false } });\n        parent.notify('transform', { prop: 'setReverseFlip', onPropertyChange: false, value: { isReverseFlip: false } });\n    };\n    Draw.prototype.drawImgToCanvas = function (maxDimension) {\n        var parent = this.parent;\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.img.destWidth = maxDimension.width;\n        parent.img.destHeight = maxDimension.height;\n        if (this.isInitialLoading) {\n            parent.notify('filter', { prop: 'initFilter', onPropertyChange: false });\n            this.isInitialLoading = false;\n        }\n        var temp = this.lowerContext.filter;\n        parent.notify('filter', { prop: 'updateBrightFilter', onPropertyChange: false });\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n        if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        this.lowerContext.filter = temp;\n    };\n    Draw.prototype.renderImage = function (isMouseWheel) {\n        var parent = this.parent;\n        var temp = this.lowerContext.filter;\n        parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: null } });\n        this.upperContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        if (isMouseWheel) {\n            this.setTransformColl(this.lowerContext, 'initial');\n        }\n        else {\n            if (parent.transform.zoomFactor > 0) {\n                this.isRotateZoom = true;\n            }\n            this.updateCurrTransState('initial');\n        }\n        parent.notify('filter', { prop: 'updateBrightFilter', onPropertyChange: false });\n        parent.notify('transform', { prop: 'setDestPointsForFlipState', onPropertyChange: false });\n        this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n        parent.notify('transform', { prop: 'setDestPointsForFlipState', onPropertyChange: false });\n        if (isMouseWheel) {\n            this.setTransformColl(this.lowerContext, 'reverse');\n        }\n        else {\n            this.updateCurrTransState('reverse');\n            this.isRotateZoom = false;\n        }\n        this.lowerContext.filter = 'none';\n        parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n        parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n            value: { context: this.lowerContext, points: null } });\n        this.lowerContext.filter = temp;\n        if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle')) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n    };\n    Draw.prototype.imageOnLoad = function (src) {\n        var _this = this;\n        var parent = this.parent;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        parent.baseImg.src = src;\n        parent.baseImg.onload = function () {\n            parent.notify('filter', { prop: 'update-finetunes', onPropertyChange: false });\n            proxy.lowerContext.drawImage(parent.baseImg, 0, 0, proxy.parent.lowerCanvas.width, proxy.parent.lowerCanvas.height);\n            hideSpinner(parent.element);\n            parent.element.style.opacity = '1';\n            proxy.updateCanvas();\n            if (parent.currObjType.isUndoZoom) {\n                parent.currObjType.isUndoZoom = false;\n                proxy.parent.lowerCanvas.style.display = 'block';\n            }\n            parent.isUndoRedo = _this.isErrorImage = false;\n            if (!isBlazor()) {\n                if (Browser.isDevice) {\n                    parent.notify('toolbar', { prop: 'destroy-top-toolbar', onPropertyChange: false });\n                    parent.notify('toolbar', { prop: 'destroy-bottom-toolbar', onPropertyChange: false });\n                    var eventargs = { isApplyBtn: false, isDevice: Browser.isDevice, isOkBtn: null };\n                    parent.notify('toolbar', { prop: 'init-main-toolbar', onPropertyChange: false, value: eventargs });\n                    parent.notify('toolbar', { prop: 'create-bottom-toolbar', onPropertyChange: false });\n                }\n                else {\n                    parent.notify('toolbar', { prop: 'destroy-top-toolbar', onPropertyChange: false });\n                    var eventargs = { isApplyBtn: false, isDevice: false, isOkBtn: null };\n                    parent.notify('toolbar', { prop: 'init-main-toolbar', onPropertyChange: false, value: eventargs });\n                }\n            }\n            else {\n                parent.updateToolbar(parent.element, 'imageLoaded', 'initial');\n                if (Browser.isDevice) {\n                    parent.element.querySelector('.e-bottom-toolbar-area').style.display = 'block';\n                    parent.element.querySelector('.e-canvas-wrapper').style.height = (parent.element.offsetHeight\n                        - parent.toolbarHeight * 2) - 3 + 'px';\n                }\n            }\n        };\n        parent.baseImg.onerror = function () {\n            hideSpinner(parent.element);\n            // proxy.reset();\n            // proxy.parent.baseImg.src = proxy.baseImgSrc;\n            proxy.isErrorImage = true;\n            proxy.errorLoading();\n        };\n    };\n    Draw.prototype.errorLoading = function () {\n        var parent = this.parent;\n        var fileOpened = { fileName: null, fileType: null, isValidImage: false };\n        if (isBlazor() && parent.events && parent.events.fileOpened.hasDelegate === true) {\n            parent.dotNetRef.invokeMethodAsync('FileOpenEventAsync', 'FileOpened', fileOpened);\n        }\n        else {\n            parent.trigger('fileOpened', fileOpened);\n        }\n    };\n    Draw.prototype.updateCanvas = function () {\n        var parent = this.parent;\n        var fileOpened = { fileName: this.fileName, fileType: this.fileType, isValidImage: true };\n        parent.img.srcWidth = parent.baseImg.width;\n        parent.img.srcHeight = parent.baseImg.height;\n        var obj = { width: 0, height: 0 };\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: parent.img.srcWidth, height: parent.img.srcHeight, obj: obj } });\n        var maxDimension = obj;\n        parent.img.destLeft = (parent.lowerCanvas.clientWidth - maxDimension.width) / 2;\n        parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.height) / 2;\n        this.drawImgToCanvas(maxDimension);\n        this.zoomCrop.width = parent.img.destWidth;\n        this.zoomCrop.height = parent.img.destHeight;\n        parent.notify('transform', { prop: 'setCropDimension', onPropertyChange: false,\n            value: { width: parent.img.destWidth, height: parent.img.destHeight } });\n        var point = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n            height: parent.img.destHeight };\n        parent.notify('crop', { prop: 'setCropDestPoints', onPropertyChange: false, value: { point: point } });\n        var temp = this.lowerContext.filter;\n        this.lowerContext.filter = 'none';\n        parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n        parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        this.lowerContext.filter = temp;\n        if (parent.img.destWidth > 0 && parent.img.destHeight > 0) {\n            parent.isImageLoaded = true;\n        }\n        if (parent.isUndoRedo) {\n            if (parent.transform.currFlipState !== '') {\n                parent.notify('transform', { prop: 'flipImage', onPropertyChange: false,\n                    value: { direction: parent.toPascalCase(parent.transform.currFlipState) } });\n            }\n        }\n        if (parent.disabled) {\n            parent.element.setAttribute('class', 'e-disabled');\n        }\n        if (parent.isImageLoaded && parent.element.style.opacity !== '0.5') {\n            if (isBlazor() && parent.events && parent.events.fileOpened.hasDelegate === true) {\n                parent.dotNetRef.invokeMethodAsync('FileOpenEventAsync', 'FileOpened', fileOpened);\n            }\n            else {\n                parent.trigger('fileOpened', fileOpened);\n            }\n        }\n        if (parent.zoomSettings.zoomFactor !== 1 || parent.zoomSettings.zoomPoint) {\n            parent.zoom(parent.zoomSettings.zoomFactor, parent.zoomSettings.zoomPoint);\n        }\n        if (isNullOrUndefined(this.initZoomValue)) {\n            this.initZoomValue = parent.zoomSettings.zoomFactor;\n        }\n        this.isImageEdited = false;\n    };\n    Draw.prototype.performCancel = function (isContextualToolbar) {\n        var parent = this.parent;\n        isContextualToolbar = isContextualToolbar ? isContextualToolbar : false;\n        var obj = { bool: false };\n        parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n        if (obj['bool']) {\n            parent.notify('freehand-draw', { prop: 'cancelFhd', onPropertyChange: false });\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n            }\n            else {\n                parent.updateToolbar(parent.element, 'destroyQuickAccessToolbar');\n            }\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n        }\n        else if (parent.textArea.style.display === 'block') {\n            parent.textArea.style.display = 'none';\n            parent.textArea.value = '';\n            parent.textArea.style.transform = '';\n            if (this.prevActObj) {\n                parent.activeObj = this.prevActObj;\n                this.prevActObj = null;\n            }\n            else {\n                parent.activeObj.strokeSettings = this.tempStrokeSettings;\n                parent.activeObj.textSettings = this.tempTextSettings;\n            }\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n            if (this.isShapeTextInserted) {\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            }\n            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            }\n            else {\n                parent.updateToolbar(parent.element, 'imageLoaded');\n            }\n        }\n        else if ((!isBlazor() && document.querySelector('#' + parent.element.id + '_sliderWrapper')) || (isBlazor() && !parent.element.querySelector('.e-ie-contextual-slider').classList.contains('e-hidden')) ||\n            parent.currObjType.isFiltered) {\n            this.lowerContext.filter = this.tempAdjValue;\n            parent.canvasFilter = this.tempAdjValue;\n            parent.notify('filter', { prop: 'setAdjustmentValue', onPropertyChange: false, value: { adjustmentValue: this.tempAdjValue } });\n            parent.initialAdjustmentValue = this.tempAdjValue;\n            if (this.lowerContext.filter.split(' ').length > 1 &&\n                this.lowerContext.filter.split(' ')[0].split('(')[1].split(')')[0] === '1') {\n                parent.notify('filter', { prop: 'setBrightnessAdjusted', onPropertyChange: false, value: { isBrightnessAdjusted: false } });\n            }\n            parent.currentFilter = this.tempFilter;\n            this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            this.redrawImgWithObj();\n            parent.currObjType.isFiltered = false;\n            var obj_3 = { tempAdjustmentLevel: null };\n            parent.notify('filter', { prop: 'getTempAdjustmentLevel', onPropertyChange: false, value: { obj: obj_3 } });\n            parent.notify('filter', { prop: 'setAdjustmentLevel', onPropertyChange: false,\n                value: { adjustmentLevel: extend({}, obj_3['tempAdjustmentLevel'], {}, true) } });\n            parent.notify('undo-redo', { prop: 'setUndoRedoStep', onPropertyChange: false, value: { step: this.tempUndoRedoStep } });\n            parent.upperCanvas.style.cursor = parent.cursor = 'default';\n            parent.currObjType.isCustomCrop = false;\n            this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n            this.clearOuterCanvas(this.lowerContext);\n            if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            }\n            var eventargs = { type: 'main', isApplyBtn: null, isCropping: null, isZooming: null };\n            if (!isBlazor()) {\n                parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: eventargs });\n            }\n            else {\n                parent.updateToolbar(parent.element, 'imageLoaded');\n            }\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n        }\n        else {\n            if (isContextualToolbar) {\n                var eventargs = { type: 'main', isApplyBtn: null, isCropping: null, isZooming: null };\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: eventargs });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'imageLoaded');\n                }\n            }\n            else {\n                this.cancelItems();\n                parent.togglePan = false;\n                parent.notify('selection', { prop: 'setDragCanvas', value: { bool: false } });\n            }\n        }\n        this.isShapeTextInserted = false;\n        this.isNewPath = false;\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'refresh-dropdown-btn', value: { isDisabled: false } });\n            parent.notify('toolbar', { prop: 'setCurrentToolbar', value: { type: 'main' } });\n        }\n    };\n    Draw.prototype.cancelItems = function () {\n        var parent = this.parent;\n        var isCropSelection = false;\n        var splitWords;\n        var shapes = ['rectangle', 'ellipse', 'line', 'arrow', 'path'];\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords === undefined && parent.currObjType.isCustomCrop) {\n            isCropSelection = true;\n        }\n        else if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (isCropSelection && parent.isCropTab) {\n            parent.isCropTab = false;\n            parent.transform.zoomFactor = parent.transform.defaultZoomFactor;\n        }\n        if (parent.togglePen) {\n            this.cancelPen();\n        }\n        else if (parent.activeObj.shape === 'text') {\n            this.cancelText(isCropSelection);\n        }\n        else if (shapes.indexOf(parent.activeObj.shape) !== -1) {\n            this.cancelShape();\n        }\n        else if (isCropSelection) {\n            this.cancelSelection();\n        }\n        else {\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n        }\n        parent.notify('selection', { prop: 'setCurrentDrawingShape', onPropertyChange: false, value: { value: '' } });\n        parent.upperCanvas.style.cursor = parent.cursor = 'default';\n        parent.currObjType.isCustomCrop = false;\n        this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n        var eventargs = { type: 'main', isApplyBtn: null, isCropping: false, isZooming: null };\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: eventargs });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'imageLoaded');\n        }\n    };\n    Draw.prototype.cancelPen = function () {\n        var parent = this.parent;\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.togglePen = false;\n        parent.upperCanvas.style.cursor = parent.cursor = 'default';\n        // eslint-disable-next-line\n        var tempPointsColl = extend([], parent.pointColl, [], true);\n        parent.pointColl = {};\n        for (var i = 0; i < this.tempFreehandCounter; i++) {\n            parent.pointColl[i] = tempPointsColl[i];\n        }\n        parent.freehandCounter = this.tempFreehandCounter;\n        parent.notify('freehand-draw', { prop: 'setCurrentFreehandDrawIndex', value: { value: this.tempCurrFhdIndex } });\n        parent.activeObj.strokeSettings = this.tempStrokeSettings;\n        parent.notify('shape', { prop: 'setStrokeSettings',\n            value: { strokeSettings: parent.activeObj.strokeSettings, strokeColor: null, fillColor: null, strokeWidth: null } });\n        parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n        parent.notify('selection', { prop: 'setFreehandDrawCustomized', value: { isFreehandDrawCustomized: false } });\n    };\n    Draw.prototype.cancelText = function (isCropSelection) {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'setTextSettings', onPropertyChange: false,\n            value: { textSettings: this.tempTextSettings, fontFamily: null, fontSize: null } });\n        parent.notify('shape', { prop: 'setStrokeSettings',\n            value: { strokeSettings: this.tempStrokeSettings, strokeColor: null, fillColor: null, strokeWidth: null } });\n        if (isNullOrUndefined(parent.activeObj.currIndex)) {\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        }\n        else {\n            var object = { appliedUndoRedoColl: [] };\n            parent.notify('undo-redo', { prop: 'getAppliedUndoRedoColl', value: { obj: object } });\n            var len = object['appliedUndoRedoColl'].length;\n            if (this.prevActObj && object['appliedUndoRedoColl'][len - 1] &&\n                object['appliedUndoRedoColl'][len - 1].currentObjColl[object['appliedUndoRedoColl'][len - 1].currentObjColl.length - 1].currIndex\n                    === this.prevActObj.currIndex) {\n                parent.activeObj = this.prevActObj;\n                this.prevActObj = null;\n            }\n            else {\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            }\n            if (parent.activeObj.shape && parent.activeObj.keyHistory === 'Enter Text') {\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                parent.notify('shape', { prop: 'draw-shape-text' });\n                parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n                parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n            }\n            else if (parent.activeObj.shape) {\n                parent.notify('shape', { prop: 'redraw-text' });\n                parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false, value: { obj: parent.activeObj } });\n                if (!isCropSelection && parent.activeObj.topLeftCircle !== undefined) {\n                    parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n                }\n                parent.clearSelection();\n            }\n        }\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'destroyQuickAccessToolbar');\n        }\n        this.tempTextSettings = { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, fontRatio: null, bold: false,\n            italic: false, underline: false };\n    };\n    Draw.prototype.cancelShape = function () {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'setStrokeSettings',\n            value: { strokeSettings: this.tempStrokeSettings, strokeColor: null, fillColor: null, strokeWidth: null } });\n        if (isNullOrUndefined(parent.activeObj.currIndex)) {\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        }\n        else if (this.isNewPath) {\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            this.renderImage();\n        }\n        else {\n            var object = { appliedUndoRedoColl: [] };\n            parent.notify('undo-redo', { prop: 'getAppliedUndoRedoColl', value: { obj: object } });\n            var len = object['appliedUndoRedoColl'].length;\n            if (this.prevActObj && object['appliedUndoRedoColl'][len - 1] &&\n                object['appliedUndoRedoColl'][len - 1].currentObjColl[object['appliedUndoRedoColl'][len - 1].currentObjColl.length - 1].currIndex\n                    === this.prevActObj.currIndex) {\n                parent.activeObj = this.prevActObj;\n                this.prevActObj = null;\n                parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false, value: { obj: parent.activeObj } });\n                parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n                parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n            }\n            else {\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            }\n        }\n        parent.currObjType.isDragging = false;\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'destroyQuickAccessToolbar');\n        }\n    };\n    Draw.prototype.cancelSelection = function () {\n        var parent = this.parent;\n        if (parent.cancelCropSelection) {\n            parent.cropObj = extend({}, parent.cancelCropSelection.previousCropObj, {}, true);\n            parent.afterCropActions = parent.cancelCropSelection.previousObj.afterCropActions;\n            parent.notify('undo-redo', { prop: 'undoDefault', onPropertyChange: false, value: { obj: parent.cancelCropSelection } });\n            parent.currSelectionPoint = extend({}, parent.cancelCropSelection.previousCropObj.activeObj, true);\n            if (parent.currSelectionPoint && isNullOrUndefined(parent.currSelectionPoint.shape)) {\n                parent.currSelectionPoint = null;\n            }\n            this.clearOuterCanvas(this.lowerContext);\n            if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle')) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            }\n        }\n    };\n    Draw.prototype.updateFlipPan = function (tempSelectionObj) {\n        var parent = this.parent;\n        if (parent.transform.currFlipState !== '') {\n            var temp = this.lowerContext.filter;\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.notify('transform', { prop: 'rotatedFlip', onPropertyChange: false });\n            this.lowerContext.filter = 'none';\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: this.lowerContext, points: null } });\n            this.lowerContext.filter = temp;\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            if (tempSelectionObj) {\n                this.drawObject('duplicate', tempSelectionObj);\n            }\n        }\n    };\n    Draw.prototype.select = function (type, startX, startY, width, height) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var previousObj = object['currObj'];\n            previousObj.objColl = extend([], parent.objColl, [], true);\n            previousObj.pointColl = extend([], parent.pointColl, [], true);\n            previousObj.afterCropActions = parent.afterCropActions;\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            previousObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            parent.notify('crop', { prop: 'setPreviousCropCurrentObj', onPropertyChange: false, value: { obj: previousObj } });\n            if (parent.transform.zoomFactor > 0 && parent.activeObj.shape && parent.activeObj.shape.split('-')[0] === 'crop' && isNullOrUndefined(this.currSelPoint)) {\n                this.currSelPoint = extend({}, parent.activeObj, {}, true);\n            }\n            var isPrevent = false;\n            var splitWords = void 0;\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (splitWords === undefined && parent.currObjType.isCustomCrop) {\n                isPrevent = true;\n            }\n            else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                isPrevent = true;\n            }\n            var obj = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: obj } });\n            var prevObj = obj['currObj'];\n            prevObj.objColl = extend([], parent.objColl, [], true);\n            prevObj.pointColl = extend([], parent.pointColl, [], true);\n            prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.notify('shape', { prop: 'setKeyHistory', onPropertyChange: false, value: { keyHistory: '' } });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            parent.upperCanvas.style.display = 'block';\n            if (parent.currSelectionPoint || parent.transform.defaultZoomFactor !== 0 ||\n                (parent.transform.degree !== 0 && parent.panPoint.totalPannedInternalPoint.x !== 0 &&\n                    parent.panPoint.totalPannedInternalPoint.y !== 0 && !isPrevent)) {\n                parent.isCircleCrop = false;\n                if (parent.transform.defaultZoomFactor !== 0) {\n                    var isCropTab = parent.isCropTab;\n                    parent.isCropTab = false;\n                    parent.notify('transform', { prop: 'resetZoom', onPropertyChange: false });\n                    parent.isCropTab = isCropTab;\n                    this.resetPanPoints();\n                }\n                this.cancelObjColl = extend([], parent.objColl, [], true);\n                this.cancelPointColl = extend([], parent.pointColl, [], true);\n                parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n                parent.isCropTab = true;\n                parent.isCircleCrop = false;\n                parent.notify('crop', { prop: 'setCurrSelPoints', onPropertyChange: false, value: { isSetDimension: true } });\n                parent.transform.zoomFactor = parent.transform.cropZoomFactor;\n                if (isNullOrUndefined(parent.cropObj.activeObj.shape)) {\n                    parent.currObjType.shape = 'crop-' + type.toLowerCase();\n                    this.drawNewSelection(type, startX, startY, width, height);\n                }\n            }\n            else {\n                if (type === 'custom') {\n                    parent.currObjType.shape = '';\n                }\n                this.drawNewSelection(type, startX, startY, width, height);\n            }\n        }\n    };\n    Draw.prototype.drawNewSelection = function (type, startX, startY, width, height) {\n        var parent = this.parent;\n        var points;\n        var cropShape = 'crop-' + type;\n        if (cropShape.toLowerCase() === 'crop-custom') {\n            if (parent.currObjType.shape === '' || parent.currObjType.shape === 'crop-custom') {\n                this.drawCustomSelection('crop-custom', startX, startY, width, height);\n            }\n        }\n        else if (cropShape.toLowerCase() === 'crop-canvas') {\n            parent.upperCanvas.style.display = 'block';\n            parent.notify('selection', { prop: 'setDragCanvas', value: { bool: true } });\n        }\n        else {\n            parent.currObjType.isCustomCrop = false;\n            parent.currObjType.shape = cropShape.toLowerCase();\n            if (width && height) {\n                points = { startX: startX, startY: startY, endX: startX + width, endY: startY + height,\n                    width: width, height: height };\n            }\n            else if (width && cropShape === 'crop-circle') {\n                points = { startX: startX, startY: startY, endX: startX + width, endY: startY + width,\n                    width: width, height: width };\n            }\n            parent.activeObj.shape = cropShape.toLowerCase();\n            this.updateSelectionInsert(points);\n        }\n    };\n    Draw.prototype.updateSelectionInsert = function (points) {\n        var _this = this;\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var obj = { shapeSettingsObj: {} };\n        parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n        var selectionSettings = { type: parent.getSelectionType(obj['shapeSettingsObj']['type']), startX: obj['shapeSettingsObj']['startX'],\n            startY: obj['shapeSettingsObj']['startY'], width: obj['shapeSettingsObj']['width'], height: obj['shapeSettingsObj']['height'] };\n        var selectionChangingArgs = { action: 'insert', previousSelectionSettings: selectionSettings,\n            currentSelectionSettings: selectionSettings };\n        if (isBlazor() && parent.events && parent.events.onSelectionResizeStart.hasDelegate === true) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            parent.dotNetRef.invokeMethodAsync('SelectionEventAsync', 'OnSelectionResizeStart', selectionChangingArgs).then(function (selectionChangingArgs) {\n                parent.notify('shape', { prop: 'updSelChangeEventArgs', onPropertyChange: false,\n                    value: { selectionSettings: selectionChangingArgs.currentSelectionSettings } });\n                if (selectionChangingArgs.currentSelectionSettings.type === 'Custom') {\n                    _this.drawObject('duplicate', parent.activeObj, null, null, true);\n                }\n                else {\n                    if (actPoint.startX !== 0 || actPoint.startY !== 0 ||\n                        actPoint.width !== 0 || actPoint.height !== 0) {\n                        points = { startX: actPoint.startX, startY: actPoint.startY,\n                            endX: actPoint.endX, endY: actPoint.endY,\n                            width: actPoint.width, height: actPoint.height };\n                    }\n                    _this.drawObject('duplicate', null, true, points);\n                }\n            });\n        }\n        else {\n            parent.trigger('selectionChanging', selectionChangingArgs);\n            parent.notify('shape', { prop: 'updSelChangeEventArgs', onPropertyChange: false,\n                value: { selectionSettings: selectionChangingArgs.currentSelectionSettings } });\n            if (selectionChangingArgs.currentSelectionSettings.type === 'Custom') {\n                this.drawObject('duplicate', parent.activeObj, null, null, true);\n            }\n            else {\n                if (actPoint.startX !== 0 || actPoint.startY !== 0 ||\n                    actPoint.width !== 0 || actPoint.height !== 0) {\n                    points = { startX: actPoint.startX, startY: actPoint.startY,\n                        endX: actPoint.endX, endY: actPoint.endY,\n                        width: actPoint.width, height: actPoint.height };\n                }\n                this.drawObject('duplicate', null, true, points);\n            }\n        }\n    };\n    Draw.prototype.drawCustomSelection = function (cropShape, startX, startY, width, height) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        parent.currObjType.isCustomCrop = true;\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.currObjType.shape = parent.activeObj.shape = cropShape.toLowerCase();\n        if (!isNullOrUndefined(startX) && !isNullOrUndefined(startY) && !isNullOrUndefined(width) && !isNullOrUndefined(height)) {\n            actPoint.startX = startX;\n            actPoint.startY = startY;\n            actPoint.endX = startX + width;\n            actPoint.endY = startY + height;\n            actPoint.width = width;\n            actPoint.height = height;\n        }\n        else {\n            if (isNullOrUndefined(parent.transform.zoomFactor) || parent.transform.zoomFactor === 0) {\n                var imgLeft_1 = parent.img.destLeft;\n                var imgTop_1 = parent.img.destTop;\n                var imgWidth_1 = parent.img.destWidth;\n                var imgHeight_1 = parent.img.destHeight;\n                var lowerCanvasWidth_1 = parent.lowerCanvas.width;\n                var lowerCanvasHeight_1 = parent.lowerCanvas.height;\n                var activePoint_1 = actPoint;\n                if (imgLeft_1 >= 0 && imgTop_1 >= 0) {\n                    activePoint_1.startX = imgLeft_1;\n                    activePoint_1.startY = imgTop_1;\n                    activePoint_1.endX = imgLeft_1 + imgWidth_1;\n                    activePoint_1.endY = imgTop_1 + imgHeight_1;\n                }\n                else if (imgLeft_1 >= 0) {\n                    activePoint_1.startX = imgLeft_1;\n                    activePoint_1.startY = 7.5;\n                    activePoint_1.endX = imgLeft_1 + imgWidth_1;\n                    activePoint_1.endY = lowerCanvasHeight_1 - 15;\n                }\n                else if (imgTop_1 >= 0) {\n                    activePoint_1.startX = 7.5;\n                    activePoint_1.startY = imgTop_1;\n                    activePoint_1.endX = lowerCanvasWidth_1 - 15;\n                    activePoint_1.endY = imgTop_1 + imgHeight_1;\n                }\n                else {\n                    activePoint_1.startX = 7.5;\n                    activePoint_1.startY = 7.5;\n                    activePoint_1.endX = lowerCanvasWidth_1 - 15;\n                    activePoint_1.endY = lowerCanvasHeight_1 - 15;\n                }\n            }\n            else {\n                var imgLeft_2 = parent.img.destLeft;\n                var imgTop_2 = parent.img.destTop;\n                var imgWidth_2 = parent.img.destWidth;\n                var imgHeight_2 = parent.img.destHeight;\n                var lowerCanvasWidth_2 = parent.lowerCanvas.width;\n                var lowerCanvasHeight_2 = parent.lowerCanvas.height;\n                var activePoint_2 = actPoint;\n                activePoint_2.startX = Math.max(imgLeft_2 > 0 ? imgLeft_2 : 7.5, imgLeft_2);\n                activePoint_2.startY = Math.max(imgTop_2 > 0 ? imgTop_2 : 7.5, imgTop_2);\n                activePoint_2.endX = Math.min(imgLeft_2 + imgWidth_2 + 15 < lowerCanvasWidth_2 ? imgLeft_2 + imgWidth_2 - 15 :\n                    lowerCanvasWidth_2 - 15, imgLeft_2 + imgWidth_2);\n                activePoint_2.endY = Math.min(imgTop_2 + imgHeight_2 + 15 < lowerCanvasHeight_2 ? imgTop_2 + imgHeight_2 - 15 :\n                    lowerCanvasHeight_2 - 15, imgTop_2 + imgHeight_2);\n            }\n            var imgLeft = parent.img.destLeft;\n            var imgTop = parent.img.destTop;\n            var imgWidth = parent.img.destWidth;\n            var imgHeight = parent.img.destHeight;\n            var lowerCanvasWidth = parent.lowerCanvas.clientWidth;\n            var lowerCanvasHeight = parent.lowerCanvas.clientHeight;\n            var activePoint = actPoint;\n            activePoint.startX = Math.max(activePoint.startX, imgLeft);\n            activePoint.startY = Math.max(activePoint.startY, imgTop);\n            activePoint.endX = Math.min(activePoint.endX, imgLeft + imgWidth);\n            activePoint.endY = Math.min(activePoint.endY, imgTop + imgHeight);\n            if (activePoint.startX === imgLeft && imgLeft + imgWidth > lowerCanvasWidth) {\n                activePoint.endX = lowerCanvasWidth - 15;\n            }\n            if (activePoint.startY === imgTop && imgTop + imgHeight > lowerCanvasHeight) {\n                activePoint.endY = lowerCanvasHeight - 15;\n            }\n            parent.activeObj = this.updateWidthHeight(parent.activeObj);\n            this.updateActiveObject(actPoint, parent.activeObj);\n        }\n        this.updateSelectionInsert();\n    };\n    Draw.prototype.callUpdateCurrTransState = function () {\n        var parent = this.parent;\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        parent.objColl = [];\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        this.isRotateZoom = true;\n        this.updateCurrTransState('initial');\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        if (parent.transform.degree === 0 && parent.rotateFlipColl.length > 0) {\n            parent.img.destLeft += parent.panPoint.totalPannedPoint.x;\n            parent.img.destTop += parent.panPoint.totalPannedPoint.y;\n        }\n        parent.img.destLeft += parent.panPoint.totalPannedInternalPoint.x;\n        parent.img.destTop += parent.panPoint.totalPannedInternalPoint.y;\n        var temp = this.lowerContext.filter;\n        if (parent.transform.degree === 0) {\n            parent.notify('transform', { prop: 'setDestPointsForFlipState', onPropertyChange: false });\n        }\n        parent.notify('filter', { prop: 'updateBrightFilter', onPropertyChange: false });\n        this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n        this.updateCurrTransState('reverse');\n        if (parent.transform.degree === 0 && parent.rotateFlipColl.length > 0) {\n            parent.img.destLeft += parent.panPoint.totalPannedPoint.x;\n            parent.img.destTop += parent.panPoint.totalPannedPoint.y;\n        }\n        this.isRotateZoom = false;\n        parent.objColl = tempObjColl;\n        var tempTogglePen = parent.togglePen;\n        parent.togglePen = false;\n        this.lowerContext.filter = 'none';\n        parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n        parent.img.destLeft += parent.panPoint.totalPannedInternalPoint.x;\n        parent.img.destTop += parent.panPoint.totalPannedInternalPoint.y;\n        parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n            value: { context: this.lowerContext, points: null } });\n        parent.img.destLeft -= parent.panPoint.totalPannedInternalPoint.x;\n        parent.img.destTop -= parent.panPoint.totalPannedInternalPoint.y;\n        parent.togglePen = tempTogglePen;\n        this.lowerContext.filter = temp;\n        parent.activeObj = tempActiveObj;\n    };\n    Draw.prototype.resetPanPoints = function () {\n        this.parent.panPoint.totalPannedPoint = { x: 0, y: 0 };\n        this.parent.panPoint.totalPannedClientPoint = { x: 0, y: 0 };\n        this.parent.panPoint.totalPannedInternalPoint = { x: 0, y: 0 };\n    };\n    Draw.prototype.setClientTransDim = function (isPreventDimension) {\n        var parent = this.parent;\n        if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            parent.img.destLeft = (parent.lowerCanvas.width - parent.img.destHeight) / 2;\n            parent.img.destTop = (parent.lowerCanvas.height - parent.img.destWidth) / 2;\n            var temp = parent.img.destWidth;\n            parent.img.destWidth = parent.img.destHeight;\n            parent.img.destHeight = temp;\n        }\n        else {\n            if (isNullOrUndefined(isPreventDimension)) {\n                parent.img.destLeft = (parent.lowerCanvas.width - parent.img.destWidth) / 2;\n                parent.img.destTop = (parent.lowerCanvas.height - parent.img.destHeight) / 2;\n            }\n        }\n    };\n    Draw.prototype.redrawImgWithObj = function () {\n        var parent = this.parent;\n        var obj = { canvasFilter: parent.canvasFilter };\n        this.lowerContext.filter = obj['canvasFilter'];\n        if (parent.rotateFlipColl.length !== 0) {\n            var totalPannedInternalPoint = extend({}, parent.panPoint.totalPannedInternalPoint, {}, true);\n            var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                height: parent.img.destHeight };\n            this.callUpdateCurrTransState();\n            parent.panPoint.totalPannedInternalPoint = totalPannedInternalPoint;\n            parent.img.destLeft = destPoints.startX;\n            parent.img.destTop = destPoints.startY;\n            parent.img.destWidth = destPoints.width;\n            parent.img.destHeight = destPoints.height;\n        }\n        else {\n            this.callUpdateCurrTransState();\n        }\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        var tempFilter = this.lowerContext.filter;\n        this.lowerContext.filter = parent.getDefaultFilter();\n        parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n        parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n            value: { context: this.lowerContext, points: null } });\n        this.lowerContext.filter = tempFilter;\n    };\n    Draw.prototype.setCurrentObj = function (obj) {\n        var parent = this.parent;\n        var isObj = obj ? true : false;\n        obj = obj ? obj : parent.cropObj;\n        parent.transform.cropZoomFactor = obj.cropZoom;\n        parent.transform.defaultZoomFactor = obj.defaultZoom;\n        if (!isObj) {\n            parent.transform.zoomFactor = obj.cropZoom;\n        }\n        else {\n            if (obj.activeObj.shape && obj.activeObj.shape.split('-')[0] === 'crop') {\n                parent.transform.zoomFactor = obj.cropZoom;\n            }\n            else {\n                parent.transform.zoomFactor = obj.defaultZoom;\n            }\n        }\n        parent.setProperties({ zoomSettings: { zoomFactor: obj.zoomFactor } }, true);\n        parent.notify('transform', { prop: 'setPreviousZoomValue', onPropertyChange: false, value: { previousZoomValue: obj.previousZoomValue } });\n        parent.panPoint.totalPannedPoint = extend({}, obj.totalPannedPoint, {}, true);\n        parent.panPoint.totalPannedClientPoint = extend({}, obj.totalPannedClientPoint, {}, true);\n        parent.panPoint.totalPannedInternalPoint = extend({}, obj.totalPannedInternalPoint, {}, true);\n        var point = extend({}, obj.tempFlipPanPoint, {}, true);\n        parent.notify('crop', { prop: 'setTempFlipPanPoint', onPropertyChange: false, value: { point: point } });\n        parent.rotateFlipColl = extend([], obj.rotateFlipColl, [], true);\n        parent.transform.degree = obj.degree;\n        parent.transform.currFlipState = obj.currFlipState;\n        parent.img.destLeft = obj.destPoints.startX;\n        parent.img.destTop = obj.destPoints.startY;\n        parent.img.destWidth = obj.destPoints.width;\n        parent.img.destHeight = obj.destPoints.height;\n        parent.img.srcLeft = obj.srcPoints.startX;\n        parent.img.srcTop = obj.srcPoints.startY;\n        parent.img.srcWidth = obj.srcPoints.width;\n        parent.img.srcHeight = obj.srcPoints.height;\n        if (obj.afterCropActions) {\n            parent.afterCropActions = obj.afterCropActions;\n        }\n        this.lowerContext.filter = obj.filter;\n        parent.notify('filter', { prop: 'setBrightnessAdjusted', onPropertyChange: false, value: { isBrightnessAdjusted: false } });\n        var isCircleCrop = parent.isCircleCrop;\n        var currSelectionPoint;\n        if (isNullOrUndefined(parent.currSelectionPoint)) {\n            currSelectionPoint = null;\n        }\n        else {\n            currSelectionPoint = extend({}, parent.currSelectionPoint, {}, true);\n            parent.currSelectionPoint = null;\n        }\n        parent.isCircleCrop = false;\n        this.drawCropSelectionImage(obj, false);\n        if (parent.transform.degree !== 0) {\n            if (parent.transform.currFlipState === '') {\n                parent.notify('transform', { prop: 'rotatePan', onPropertyChange: false,\n                    value: { isCropSelection: null, isDefaultZoom: null } });\n            }\n            else {\n                parent.notify('transform', { prop: 'drawPannedImage', value: { xDiff: 0, yDiff: 0 } });\n            }\n            parent.img.destLeft = obj.destPoints.startX;\n            parent.img.destTop = obj.destPoints.startY;\n            parent.panPoint.totalPannedClientPoint = extend({}, obj.totalPannedClientPoint, {}, true);\n            parent.panPoint.totalPannedInternalPoint = extend({}, obj.totalPannedInternalPoint, {}, true);\n        }\n        parent.activeObj = extend({}, obj.activeObj, {}, true);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n            this.drawObject('duplicate', null, null, null, true);\n        }\n        var activeObj = extend({}, obj.activeObj, {}, true);\n        var isAfterCropAction = false;\n        if (parent.afterCropActions.length > 0) {\n            var object = { collection: parent.afterCropActions };\n            parent.notify('shape', { prop: 'alignRotateFlipColl', onPropertyChange: false,\n                value: { collection: parent.afterCropActions, isRotateFlipCollection: null, obj: object } });\n            parent.afterCropActions = object['collection'];\n        }\n        var afterCropActions = extend([], parent.afterCropActions, [], true);\n        if (!isObj && afterCropActions.length > 0) {\n            isAfterCropAction = true;\n            for (var i = 0; i < afterCropActions.length; i++) {\n                if (afterCropActions[i] === 'horizontalflip' || afterCropActions[i] === 'verticalflip') {\n                    parent.activeObj = extend({}, currSelectionPoint, {}, true);\n                    this.rotatedFlipCropSel = true;\n                }\n                parent.notify('transform', { prop: 'updateTransform', onPropertyChange: false, value: { text: afterCropActions[i] } });\n            }\n            activeObj = extend({}, parent.activeObj, {}, true);\n            this.resetPanPoints();\n            parent.activeObj = activeObj;\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n                this.drawObject('duplicate', null, null, null, true);\n            }\n            if (obj.degree !== parent.transform.degree) {\n                parent.transform.cropZoomFactor = null;\n                parent.transform.zoomFactor = 0;\n            }\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n            if (this.rotatedFlipCropSel) {\n                this.rotatedFlipCropSel = false;\n            }\n        }\n        parent.afterCropActions = afterCropActions;\n        if (!this.isCancelAction && !isAfterCropAction) {\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.img.destLeft = obj.destPoints.startX;\n            parent.img.destTop = obj.destPoints.startY;\n        }\n        parent.activeObj = activeObj;\n        parent.isCircleCrop = isCircleCrop;\n        if (isNullOrUndefined(currSelectionPoint)) {\n            parent.currSelectionPoint = null;\n        }\n        else {\n            parent.currSelectionPoint = extend({}, currSelectionPoint, {}, true);\n            if (parent.currSelectionPoint && isNullOrUndefined(parent.currSelectionPoint.shape)) {\n                parent.currSelectionPoint = null;\n            }\n        }\n    };\n    Draw.prototype.drawCropSelectionImage = function (obj, isObj) {\n        var parent = this.parent;\n        var temp = this.lowerContext.filter;\n        parent.clearContext(this.lowerContext);\n        parent.clearContext(this.upperContext);\n        this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n        if (isObj) {\n            this.updateCurrTransState('initial');\n        }\n        else {\n            this.setTransformColl(this.lowerContext, 'initial');\n        }\n        parent.notify('transform', { prop: 'setDestPointsForFlipState', onPropertyChange: false });\n        this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n        if (isObj) {\n            this.updateCurrTransState('reverse');\n        }\n        else {\n            this.setTransformColl(this.lowerContext, 'reverse');\n        }\n        parent.img.destLeft = parent.cropObj.destPoints.startX;\n        parent.img.destTop = parent.cropObj.destPoints.startY;\n        var activeObj = extend({}, obj.activeObj, {}, true);\n        this.lowerContext.filter = 'none';\n        if (this.isCancelAction) {\n            parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        }\n        else {\n            parent.img.destLeft = obj.destPoints.startX;\n            parent.img.destTop = obj.destPoints.startY;\n            parent.img.destWidth = obj.destPoints.width;\n            parent.img.destHeight = obj.destPoints.height;\n            parent.img.srcLeft = obj.srcPoints.startX;\n            parent.img.srcTop = obj.srcPoints.startY;\n            parent.img.srcWidth = obj.srcPoints.width;\n            parent.img.srcHeight = obj.srcPoints.height;\n            var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                height: parent.img.destHeight };\n            parent.img.destLeft = obj.activeObj.activePoint.startX;\n            parent.img.destTop = obj.activeObj.activePoint.startY;\n            parent.img.destWidth = obj.activeObj.activePoint.width;\n            parent.img.destHeight = obj.activeObj.activePoint.height;\n            parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.img.destLeft = destPoints.startX;\n            parent.img.destTop = destPoints.startY;\n            parent.img.destWidth = destPoints.width;\n            parent.img.destHeight = destPoints.height;\n        }\n        parent.activeObj = activeObj;\n        this.lowerContext.filter = temp;\n    };\n    Draw.prototype.performPointZoom = function (x, y, type) {\n        var parent = this.parent;\n        var ratioX = (x - parent.img.destLeft) / parent.img.destWidth;\n        var ratioY = (y - parent.img.destTop) / parent.img.destHeight;\n        var isUndoRedo = parent.isUndoRedo;\n        parent.isUndoRedo = true;\n        parent.setProperties({ zoomSettings: { zoomPoint: { x: x, y: y } } }, true);\n        if (type === 'zoomIn') {\n            parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: .1, zoomPoint: null } });\n        }\n        else if (type === 'zoomOut') {\n            parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: -.1, zoomPoint: null } });\n        }\n        parent.isUndoRedo = isUndoRedo;\n        if (parent.transform.zoomFactor > 0) {\n            var destLeft = parent.img.destLeft;\n            var destTop = parent.img.destTop;\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            if (parent.transform.degree === 0) {\n                parent.img.destLeft = x - (ratioX * parent.img.destWidth);\n                parent.img.destTop = y - (ratioY * parent.img.destHeight);\n                this.drawZoomPanImage(parent.img.destLeft - destLeft, parent.img.destTop - destTop);\n            }\n            else {\n                var isCropTab = parent.isCropTab;\n                parent.isCropTab = true;\n                var objColl = extend([], parent.objColl, [], true);\n                var pointColl = extend([], parent.pointColl, [], true);\n                parent.objColl = [];\n                parent.pointColl = [];\n                parent.freehandCounter = 0;\n                var object = { selPointColl: null };\n                parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                    value: { obj: object } });\n                var cropSelPointColl = object['selPointColl'];\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: [] } } });\n                parent.panPoint.currentPannedPoint = { x: (x - (ratioX * parent.img.destWidth)) - destLeft,\n                    y: (y - (ratioY * parent.img.destHeight)) - destTop };\n                parent.notify('transform', { prop: 'rotatePan', onPropertyChange: false,\n                    value: { isCropSelection: null, isDefaultZoom: null } });\n                parent.isCropTab = isCropTab;\n                parent.objColl = objColl;\n                parent.pointColl = pointColl;\n                parent.freehandCounter = parent.pointColl.length;\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: cropSelPointColl } } });\n                parent.notify('shape', { prop: 'panObjColl', onPropertyChange: false,\n                    value: { xDiff: parent.panPoint.currentPannedPoint.x, yDiff: parent.panPoint.currentPannedPoint.y, panRegion: '' } });\n                parent.notify('freehand-draw', { prop: 'panFHDColl', onPropertyChange: false,\n                    value: { xDiff: parent.panPoint.currentPannedPoint.x, yDiff: parent.panPoint.currentPannedPoint.y, panRegion: '' } });\n            }\n            this.adjustPanning(activeObj);\n            parent.activeObj = activeObj;\n            if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n                this.drawObject('duplicate', null, null, null, true);\n            }\n        }\n    };\n    Draw.prototype.adjustPanning = function (activeObj) {\n        var parent = this.parent;\n        if (activeObj.activePoint.width !== 0 && activeObj.activePoint.height !== 0) {\n            var destLeft = parent.img.destLeft;\n            var destTop = parent.img.destTop;\n            var point = { x: 0, y: 0 };\n            if (parent.img.destLeft > activeObj.activePoint.startX) {\n                point.x = parent.img.destLeft - activeObj.activePoint.startX;\n            }\n            else if (parent.img.destLeft + parent.img.destWidth < activeObj.activePoint.startX + activeObj.activePoint.width) {\n                point.x = (parent.img.destLeft + parent.img.destWidth) - (activeObj.activePoint.startX + activeObj.activePoint.width);\n            }\n            if (parent.img.destTop > activeObj.activePoint.startY) {\n                point.y = parent.img.destTop - activeObj.activePoint.startY;\n            }\n            else if (parent.img.destTop + parent.img.destHeight < activeObj.activePoint.startY + activeObj.activePoint.height) {\n                point.y = (parent.img.destTop + parent.img.destHeight) - (activeObj.activePoint.startY + activeObj.activePoint.height);\n            }\n            if (parent.transform.degree === 0) {\n                parent.img.destLeft -= point.x;\n                parent.img.destTop -= point.y;\n                this.drawZoomPanImage(parent.img.destLeft - destLeft, parent.img.destTop - destTop);\n            }\n            else {\n                var isCropTab = parent.isCropTab;\n                parent.isCropTab = true;\n                var objColl = extend([], parent.objColl, [], true);\n                var pointColl = extend([], parent.pointColl, [], true);\n                parent.objColl = [];\n                parent.pointColl = [];\n                parent.freehandCounter = 0;\n                var object = { selPointColl: null };\n                parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                    value: { obj: object } });\n                var cropSelPointColl = object['selPointColl'];\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: [] } } });\n                parent.img.destLeft -= point.x;\n                parent.img.destTop -= point.y;\n                parent.panPoint.currentPannedPoint = { x: parent.img.destLeft - destLeft, y: parent.img.destTop - destTop };\n                parent.notify('transform', { prop: 'rotatePan', onPropertyChange: false,\n                    value: { isCropSelection: null, isDefaultZoom: null } });\n                parent.isCropTab = isCropTab;\n                parent.objColl = objColl;\n                parent.pointColl = pointColl;\n                parent.freehandCounter = parent.pointColl.length;\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: cropSelPointColl } } });\n                parent.notify('shape', { prop: 'panObjColl', onPropertyChange: false,\n                    value: { xDiff: parent.panPoint.currentPannedPoint.x, yDiff: parent.panPoint.currentPannedPoint.y, panRegion: '' } });\n                parent.notify('freehand-draw', { prop: 'panFHDColl', onPropertyChange: false,\n                    value: { xDiff: parent.panPoint.currentPannedPoint.x, yDiff: parent.panPoint.currentPannedPoint.y, panRegion: '' } });\n            }\n        }\n    };\n    Draw.prototype.drawZoomPanImage = function (x, y) {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'panObjColl', onPropertyChange: false,\n            value: { xDiff: x, yDiff: y, panRegion: '' } });\n        parent.notify('freehand-draw', { prop: 'panFHDColl', onPropertyChange: false,\n            value: { xDiff: x, yDiff: y, panRegion: '' } });\n        this.renderImage(true);\n        var obj = { width: 0, height: 0 };\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: parent.img.srcWidth, height: parent.img.srcHeight, obj: obj } });\n        var maxDimension = obj;\n        maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n        maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n        parent.panPoint.totalPannedPoint.x += x;\n        parent.panPoint.totalPannedPoint.y += y;\n        parent.notify('crop', { prop: 'setTempFlipPanPoint', onPropertyChange: false, value: { point: { x: 0, y: 0 } } });\n    };\n    Draw.prototype.openNewImage = function () {\n        var parent = this.parent;\n        var inMemoryContext = parent.inMemoryCanvas.getContext('2d');\n        showSpinner(parent.element);\n        parent.element.style.opacity = '0.5';\n        var toolbar = document.querySelector('#' + parent.element.id + '_currPos');\n        if (toolbar) {\n            toolbar.style.display = 'none';\n        }\n        var obj = { defToolbarItems: null };\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'getDefToolbarItems', value: { obj: obj } });\n            if (obj['defToolbarItems'].length === 0 &&\n                (isNullOrUndefined(document.getElementById(parent.element.id + '_toolbar')))) {\n                var height = parent.element.querySelector('#' + parent.element.id + '_toolbarArea').clientHeight;\n                parent.notify('toolbar', { prop: 'setToolbarHeight', value: { height: height } });\n            }\n        }\n        else {\n            if (parent.element.querySelector('#' + parent.element.id + '_toolbar')) {\n                parent.toolbarHeight = parent.element.querySelector('#' + parent.element.id + '_toolbar').clientHeight;\n            }\n            else {\n                parent.toolbarHeight = 0;\n            }\n        }\n        parent.reset();\n        parent.update();\n        parent.transform.degree = 0;\n        parent.transform.zoomFactor = 0;\n        parent.isImageLoaded = false;\n        parent.currSelectionPoint = null;\n        var type = typeof (this.openURL);\n        if (type === 'string') {\n            var fileName = this.openURL.split('.');\n            if (fileName.length > 1) {\n                fileName = fileName[fileName.length - 2].split('/');\n                this.fileName = fileName[fileName.length - 1];\n            }\n            else {\n                this.fileName = 'ImageEditor';\n            }\n            this.fileType = this.getFileExtensionFromURL(this.openURL);\n            if (this.fileType) {\n                this.fileType = parent.toPascalCase(this.fileType);\n                var fileType = this.fileType.toLowerCase();\n                if (fileType === 'jpg' || fileType === 'jpeg') {\n                    this.fileType = 'Jpeg';\n                    fileType = 'jpeg';\n                }\n                if (fileType !== 'jpeg' && fileType !== 'png' && fileType !== 'svg') {\n                    this.fileType = null;\n                }\n            }\n            this.imageOnLoad(this.openURL);\n        }\n        else {\n            this.fileName = 'ImageEditor';\n            this.fileType = null;\n            parent.lowerCanvas = document.querySelector('#' + parent.element.id + '_lowerCanvas');\n            parent.upperCanvas = document.querySelector('#' + parent.element.id + '_upperCanvas');\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n            this.upperContext = parent.upperCanvas.getContext('2d');\n            parent.clearContext(this.lowerContext);\n            parent.clearContext(this.upperContext);\n            parent.clearContext(inMemoryContext);\n            parent.inMemoryCanvas.width = parent.baseImg.width = this.openURL.width;\n            parent.inMemoryCanvas.height = parent.baseImg.height = this.openURL.height;\n            inMemoryContext.putImageData(this.openURL, 0, 0);\n            parent.baseImg.src = parent.inMemoryCanvas.toDataURL();\n        }\n    };\n    Draw.prototype.dlgBtnClick = function () {\n        var parent = this.parent;\n        parent.export();\n        if (this.isFileChanged) {\n            parent.isImageLoaded = this.isFileChanged = false;\n            parent.reset();\n            this.checkToolbarTemplate(this.inputElem, this.openURL);\n        }\n        else {\n            this.reset();\n            this.openNewImage();\n        }\n        if (!isBlazor()) {\n            getComponent(document.getElementById(parent.element.id + '_dialog'), 'dialog').destroy();\n        }\n        this.isImageEdited = false;\n    };\n    Draw.prototype.dlgCloseBtnClick = function () {\n        var parent = this.parent;\n        this.baseImgSrc = parent.baseImg.src;\n        if (this.isFileChanged) {\n            parent.isImageLoaded = this.isFileChanged = false;\n            parent.reset();\n            this.checkToolbarTemplate(this.inputElem, this.openURL);\n        }\n        else {\n            this.reset();\n            this.openNewImage();\n        }\n        if (!isBlazor()) {\n            getComponent(document.getElementById(parent.element.id + '_dialog'), 'dialog').destroy();\n        }\n        this.isImageEdited = false;\n    };\n    Draw.prototype.showDialogPopup = function () {\n        this.parent.element.querySelector('#' + this.parent.element.id + '_dialog').style.display = 'block';\n        var dialog = new Dialog({\n            header: 'Confirm Save Changes',\n            closeOnEscape: true,\n            content: '<span>Do you want to save the changes you made to the image?</span>',\n            target: document.getElementById('target'),\n            width: '285px',\n            isModal: true,\n            animationSettings: { effect: 'Zoom' },\n            close: this.dlgCloseBtnClick.bind(this),\n            buttons: [\n                { click: this.dlgCloseBtnClick.bind(this),\n                    buttonModel: { content: 'No', iconCss: 'e-icons e-close' }\n                },\n                { click: this.dlgBtnClick.bind(this),\n                    buttonModel: { content: 'Yes', isPrimary: true, iconCss: 'e-icons e-check' } }\n            ]\n        });\n        dialog.appendTo('#' + this.parent.element.id + '_dialog');\n    };\n    Draw.prototype.restoreOldImage = function () {\n        if (this.parent.isImageLoaded) {\n            // if (this.isImageEdited || this.parent.pointColl.length > 0 || this.parent.objColl.length > 0) {\n            //     this.showDialogPopup();\n            // } else {\n            // this.reset();\n            // this.openNewImage();\n            // }\n            // const data: ImageData = this.parent.getImageData();\n            // const canvas: HTMLCanvasElement = document.createElement('canvas');\n            // canvas.width = data.width; canvas.height = data.height;\n            // canvas.getContext('2d').putImageData(data, 0, 0);\n            // this.baseImgSrc = canvas.toDataURL();\n            this.reset();\n            this.openNewImage();\n        }\n        else {\n            this.openNewImage();\n        }\n    };\n    Draw.prototype.open = function (data) {\n        if (!this.parent.disabled) {\n            this.openURL = data;\n            this.restoreOldImage();\n        }\n    };\n    Draw.prototype.getInitialLoaded = function (object) {\n        object['isInitialLoaded'] = this.isInitialLoading;\n    };\n    Draw.prototype.getFileExtensionFromURL = function (url) {\n        var lastDotIndex = url.lastIndexOf(\".\");\n        if (lastDotIndex !== -1) {\n            return url.slice(lastDotIndex + 1).toLowerCase();\n        }\n        return null;\n    };\n    Draw.prototype.fileSelect = function (inputElement, args) {\n        var parent = this.parent;\n        if (!parent.disabled) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var filesData = args.target.files[0];\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var fileData = filesData;\n            var fileExtension = fileData.name && fileData.name.split('.')[1].toLowerCase();\n            if (fileExtension && ['jpg', 'jpeg', 'png', 'svg'].indexOf(fileExtension) === -1) {\n                this.errorLoading();\n                return;\n            }\n            showSpinner(parent.element);\n            parent.element.style.opacity = '0.5';\n            this.inputElem = inputElement;\n            fileExtension = fileData.name && fileData.name.split('.')[1];\n            if (fileExtension) {\n                var fileType = parent.toPascalCase(fileExtension);\n                if (fileType === 'JPG' || fileType === 'Jpg') {\n                    this.fileType = 'Jpeg';\n                }\n                else {\n                    this.fileType = fileType;\n                }\n            }\n            else {\n                this.fileType = null;\n            }\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var URL_1 = window.URL;\n            var url = URL_1.createObjectURL(filesData);\n            this.openURL = url;\n            if (parent.isImageLoaded && (this.isImageEdited || parent.pointColl.length > 0 || parent.objColl.length > 0)) {\n                this.isFileChanged = true;\n                if (!isBlazor()) {\n                    this.showDialogPopup();\n                }\n                else {\n                    parent.dotNetRef.invokeMethodAsync('UpdateDialog');\n                }\n            }\n            else {\n                this.checkToolbarTemplate(inputElement, url);\n            }\n        }\n    };\n    Draw.prototype.checkToolbarTemplate = function (inputElement, url) {\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.toolbarTemplate)) {\n            parent.reset();\n            parent.update();\n        }\n        this.fileName = inputElement.value.split('\\\\')[inputElement.value.split('\\\\').length - 1];\n        this.fileName = this.fileName.split('.')[0];\n        this.imageOnLoad(url.toString());\n        inputElement.value = '';\n    };\n    Draw.prototype.moveToSelectionRange = function (type, activeObj) {\n        var parent = this.parent;\n        if (parent.activeObj.shape) {\n            if (type === 'rotateleft' || type === 'rotateright') {\n                var zoomFactor = parent.transform.zoomFactor;\n                parent.objColl.push(parent.activeObj);\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n                    if (parent.objColl[parent.objColl.length - 1].activePoint.width < activeObj.activePoint.height) {\n                        for (var i = 2; i < parent.zoomSettings.maxZoomFactor; i++) {\n                            if (parent.objColl[parent.objColl.length - 1].activePoint.width >= activeObj.activePoint.height ||\n                                this.isSelectionBiggerThanCanvas(parent.objColl[parent.objColl.length - 1]) ||\n                                this.isSelectionOutsideCanvas(parent.objColl[parent.objColl.length - 1])) {\n                                if (!isNullOrUndefined(zoomFactor)) {\n                                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                        value: { zoomFactor: -0.1, zoomPoint: null } });\n                                }\n                                break;\n                            }\n                            zoomFactor += 0.1;\n                            parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                value: { zoomFactor: zoomFactor, zoomPoint: null } });\n                        }\n                    }\n                    else {\n                        for (var i = 2; i < parent.zoomSettings.maxZoomFactor; i++) {\n                            if (parent.objColl[parent.objColl.length - 1].activePoint.width >= activeObj.activePoint.height ||\n                                this.isSelectionBiggerThanCanvas(parent.objColl[parent.objColl.length - 1]) ||\n                                this.isSelectionOutsideCanvas(parent.objColl[parent.objColl.length - 1])) {\n                                if (!isNullOrUndefined(zoomFactor)) {\n                                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                        value: { zoomFactor: 0.1, zoomPoint: null } });\n                                }\n                                break;\n                            }\n                            zoomFactor -= .1;\n                            parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                value: { zoomFactor: zoomFactor, zoomPoint: null } });\n                        }\n                    }\n                }\n                else {\n                    if (parent.objColl[parent.objColl.length - 1].activePoint.height < activeObj.activePoint.width) {\n                        for (var i = 2; i < parent.zoomSettings.maxZoomFactor; i++) {\n                            if (parent.objColl[parent.objColl.length - 1].activePoint.height >= activeObj.activePoint.width ||\n                                this.isSelectionBiggerThanCanvas(parent.objColl[parent.objColl.length - 1]) ||\n                                this.isSelectionOutsideCanvas(parent.objColl[parent.objColl.length - 1])) {\n                                if (!isNullOrUndefined(zoomFactor)) {\n                                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                        value: { zoomFactor: -0.1, zoomPoint: null } });\n                                }\n                                break;\n                            }\n                            zoomFactor += 0.1;\n                            parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                value: { zoomFactor: zoomFactor, zoomPoint: null } });\n                        }\n                    }\n                    else {\n                        for (var i = 2; i < parent.zoomSettings.maxZoomFactor; i++) {\n                            if (parent.objColl[parent.objColl.length - 1].activePoint.height >= activeObj.activePoint.width ||\n                                this.isSelectionBiggerThanCanvas(parent.objColl[parent.objColl.length - 1]) ||\n                                this.isSelectionOutsideCanvas(parent.objColl[parent.objColl.length - 1])) {\n                                if (!isNullOrUndefined(zoomFactor)) {\n                                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                        value: { zoomFactor: 0.1, zoomPoint: null } });\n                                }\n                                break;\n                            }\n                            zoomFactor -= .1;\n                            parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                value: { zoomFactor: zoomFactor, zoomPoint: null } });\n                        }\n                    }\n                }\n                var panX = (parent.lowerCanvas.clientWidth / 2) - (parent.objColl[parent.objColl.length - 1].activePoint.startX +\n                    (parent.objColl[parent.objColl.length - 1].activePoint.width / 2));\n                var panY = (parent.lowerCanvas.clientHeight / 2) - (parent.objColl[parent.objColl.length - 1].activePoint.startY +\n                    (parent.objColl[parent.objColl.length - 1].activePoint.height / 2));\n                if (parent.transform.degree === 0) {\n                    parent.img.destLeft += panX;\n                    parent.img.destTop += panY;\n                    parent.notify('transform', { prop: 'drawPannImage', value: { point: { x: panX, y: panY } } });\n                }\n                else {\n                    parent.panPoint.currentPannedPoint = { x: panX, y: panY };\n                    parent.notify('transform', { prop: 'drawPannedImage', value: { xDiff: panX, yDiff: panY } });\n                    parent.panPoint.currentPannedPoint = { x: 0, y: 0 };\n                }\n                parent.notify('transform', { prop: 'setTempPanMove', onPropertyChange: false,\n                    value: { point: null } });\n                parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1]);\n                parent.objColl.pop();\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n            }\n        }\n    };\n    Draw.prototype.isSelectionBiggerThanCanvas = function (obj) {\n        var isBigger = false;\n        if (obj.activePoint.startX <= this.parent.img.destLeft ||\n            obj.activePoint.startY <= this.parent.img.destTop ||\n            obj.activePoint.endX >= this.parent.img.destLeft + this.parent.img.destWidth ||\n            obj.activePoint.endY >= this.parent.img.destTop + this.parent.img.destHeight) {\n            isBigger = true;\n        }\n        return isBigger;\n    };\n    Draw.prototype.isSelectionOutsideCanvas = function (obj) {\n        var isOutside = false;\n        if ((obj.activePoint.height < this.parent.lowerCanvas.height - this.parent.toolbarHeight) ||\n            (obj.activePoint.width < this.parent.lowerCanvas.width)) {\n            isOutside = true;\n        }\n        return isOutside;\n    };\n    return Draw;\n}());\nexport { Draw };\n","import { extend, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nvar Export = /** @class */ (function () {\n    function Export(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Export.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Export.prototype.addEventListener = function () {\n        this.parent.on('export', this.export, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Export.prototype.removeEventListener = function () {\n        this.parent.off('export', this.export);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Export.prototype.export = function (args) {\n        if (isBlazor()) {\n            var obj = { shape: '' };\n            this.parent.notify('selection', { prop: 'getCurrentDrawingShape', onPropertyChange: false, value: { obj: obj } });\n            if (obj['shape'] !== '') {\n                this.parent.notify('selection', { prop: 'setCurrentDrawingShape', onPropertyChange: false, value: { value: '' } });\n                this.parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            }\n        }\n        else {\n            this.parent.notify('toolbar', { prop: 'refreshShapeDrawing', onPropertyChange: false });\n        }\n        this.updatePvtVar();\n        switch (args.prop) {\n            case 'export':\n                this.exportImg(args.value['type'], args.value['fileName']);\n                break;\n            case 'exportToCanvas':\n                this.exportToCanvas(args.value['object']);\n                break;\n        }\n    };\n    Export.prototype.getModuleName = function () {\n        return 'export';\n    };\n    Export.prototype.updatePvtVar = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n    };\n    Export.prototype.exportImg = function (type, fileName) {\n        var _this = this;\n        var parent = this.parent;\n        var obj = { fileName: '' };\n        parent.notify('draw', { prop: 'getFileName', onPropertyChange: false, value: { obj: obj } });\n        var imageName = obj['fileName'];\n        if (!parent.disabled && parent.isImageLoaded) {\n            var dummyObj = { bool: false };\n            parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: dummyObj } });\n            if (dummyObj['bool']) {\n                parent.notify('freehand-draw', { prop: 'applyFhd', onPropertyChange: false });\n            }\n            if (parent.togglePen) {\n                parent.currObjType.isZoomed = true;\n                parent.notify('shape', { prop: 'apply', onPropertyChange: false, value: { shape: null, obj: null, canvas: null } });\n            }\n            if (parent.textArea.style.display === 'block') {\n                parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                    value: { x: null, y: null, isMouseDown: null } });\n            }\n            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: null } });\n            var obj_1 = { canvasFilter: this.parent.canvasFilter };\n            this.lowerContext.filter = obj_1['canvasFilter'];\n            type = type ? type : 'Png';\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n            var beforeSave = { cancel: false, fileName: fileName ? fileName : imageName,\n                fileType: type };\n            if (isBlazor() && parent.events && parent.events.saving.hasDelegate === true) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                parent.dotNetRef.invokeMethodAsync('BeforeSaveEventAsync', 'BeforeSave', beforeSave).then(function (beforeSave) {\n                    _this.beforeSaveEvent(beforeSave, type, fileName, imageName);\n                });\n            }\n            else {\n                parent.trigger('beforeSave', beforeSave);\n                this.beforeSaveEvent(beforeSave, type, fileName, imageName);\n            }\n        }\n    };\n    Export.prototype.beforeSaveEvent = function (observableSaveArgs, type, fileName, imageName) {\n        var parent = this.parent;\n        if (!observableSaveArgs.cancel) {\n            parent.currObjType.isSave = true;\n            fileName = observableSaveArgs.fileName ? observableSaveArgs.fileName : fileName;\n            var lowerCaseType = type.toLowerCase();\n            fileName = fileName || imageName;\n            if (lowerCaseType === 'svg') {\n                this.toSVGImg(fileName);\n            }\n            else {\n                this.toBlobFn(fileName, lowerCaseType);\n            }\n            var saved = { fileName: fileName ? fileName : imageName, fileType: type };\n            parent.trigger('saved', saved);\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            }\n            parent.lowerCanvas.style.left = parent.upperCanvas.style.left = '';\n            parent.lowerCanvas.style.top = parent.upperCanvas.style.top = '';\n            parent.lowerCanvas.style.maxWidth = parent.upperCanvas.style.maxWidth = '';\n            parent.lowerCanvas.style.maxHeight = parent.upperCanvas.style.maxHeight = '';\n        }\n    };\n    Export.prototype.toSVGImg = function (fileName) {\n        var parent = this.parent;\n        showSpinner(parent.element);\n        parent.element.style.opacity = '0.5';\n        var tempCanvas = this.exportToCanvas();\n        var dataUrl = tempCanvas.toDataURL();\n        hideSpinner(parent.element);\n        parent.element.style.opacity = '1';\n        var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        svg.setAttribute('width', tempCanvas.style.maxWidth);\n        svg.setAttribute('height', tempCanvas.style.maxHeight);\n        var XLinkNS = 'http://www.w3.org/1999/xlink';\n        var img = document.createElementNS('http://www.w3.org/2000/svg', 'image');\n        img.setAttributeNS(null, 'height', tempCanvas.height.toString());\n        img.setAttributeNS(null, 'width', tempCanvas.width.toString());\n        img.setAttributeNS(XLinkNS, 'xlink:href', dataUrl);\n        svg.appendChild(img);\n        var prefix = 'data:image/svg+xml;base64,';\n        var header = '<svg' + ' xmlns=\"http://www.w3.org/2000/svg\"' + ' xmlns:xlink=\"http://www.w3.org/1999/xlink\"'\n            + (\" width=\\\"\" + tempCanvas.width + \"\\\"\") + (\" height=\\\"\" + tempCanvas.height + \"\\\"\") + '>';\n        var footer = '</svg>';\n        var body = svg.innerHTML;\n        var data = header + body + footer;\n        var svgDataUrl = prefix + btoa(data);\n        if (fileName === null) {\n            return svgDataUrl;\n        }\n        else {\n            this.downloadImg(svgDataUrl, fileName + '.' + 'svg');\n            return null;\n        }\n    };\n    Export.prototype.toBlobFn = function (fileName, type) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        var parent = this.parent;\n        showSpinner(parent.element);\n        parent.element.style.opacity = '0.5';\n        var tempCanvas = this.exportToCanvas();\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        tempCanvas.toBlob(function (blob) {\n            var blobUrl = URL.createObjectURL(blob);\n            proxy.downloadImg(blobUrl, fileName + '.' + type);\n            hideSpinner(parent.element);\n            parent.element.style.opacity = '1';\n        }, 'image/png');\n    };\n    Export.prototype.exportToCanvas = function (object) {\n        var parent = this.parent;\n        var obj = { width: 0, height: 0 };\n        parent.notify('crop', { prop: 'calcRatio', onPropertyChange: false, value: { obj: obj } });\n        var ratio = obj;\n        var tempContextFilter = this.lowerContext.filter;\n        // Manipulating blur value\n        if (this.lowerContext.filter !== 'none') {\n            var splitWords = this.lowerContext.filter.split(' ');\n            var value = parseFloat(splitWords[5].split('(')[1]);\n            value *= ((ratio.width + ratio.height) / 2);\n            splitWords[5] = 'blur(' + value + 'px)';\n            this.lowerContext.filter = splitWords.join(' ');\n        }\n        var maxDimension;\n        var tempCanvas = parent.createElement('canvas', {\n            id: parent.element.id + '_tempCanvas', attrs: { name: 'canvasImage' }\n        });\n        var tempContext = tempCanvas.getContext('2d');\n        tempContext.filter = this.lowerContext.filter;\n        if (parent.currSelectionPoint) {\n            tempCanvas.width = parent.img.destWidth;\n            tempCanvas.height = parent.img.destHeight;\n            tempContext.filter = this.lowerContext.filter;\n            var temp = this.lowerContext.filter;\n            parent.notify('filter', { prop: 'updateBrightFilter', onPropertyChange: false });\n            tempContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, 0, 0, parent.img.destWidth, parent.img.destHeight);\n            this.lowerContext.filter = temp;\n        }\n        else {\n            tempCanvas.width = parent.baseImg.width;\n            tempCanvas.height = parent.baseImg.height;\n            var obj_2 = { width: 0, height: 0 };\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n                value: { width: parent.baseImg.width, height: parent.baseImg.height, obj: obj_2 } });\n            maxDimension = obj_2;\n            tempCanvas.style.maxWidth = maxDimension.width + 'px';\n            tempCanvas.style.maxHeight = maxDimension.height + 'px';\n            tempContext.filter = this.lowerContext.filter;\n            var temp = this.lowerContext.filter;\n            parent.notify('filter', { prop: 'updateBrightFilter', onPropertyChange: false });\n            tempContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, 0, 0, parent.baseImg.width, parent.baseImg.height);\n            this.lowerContext.filter = temp;\n        }\n        if (parent.transform.degree !== 0 || parent.transform.currFlipState !== '') {\n            this.updateSaveContext(tempContext);\n            this.exportTransformedImage(tempContext);\n        }\n        if (parent.objColl.length > 0) {\n            var temp = tempContext.filter;\n            tempContext.filter = 'none';\n            var tempObjColl = extend([], parent.objColl, [], true);\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                var activePoint = parent.objColl[i].activePoint;\n                // Subtracting destination left and top points\n                activePoint.startX -= parent.img.destLeft;\n                activePoint.startY -= parent.img.destTop;\n                activePoint.endX -= parent.img.destLeft;\n                activePoint.endY -= parent.img.destTop;\n                activePoint.width = activePoint.endX - activePoint.startX;\n                activePoint.height = activePoint.endY - activePoint.startY;\n                // Manipulating points\n                if (isNullOrUndefined(parent.currSelectionPoint)) {\n                    activePoint.startX *= ratio.width;\n                    activePoint.startY *= ratio.height;\n                    activePoint.endX *= ratio.width;\n                    activePoint.endY *= ratio.height;\n                    activePoint.width = activePoint.endX - activePoint.startX;\n                    activePoint.height = activePoint.endY - activePoint.startY;\n                    parent.objColl[i].strokeSettings.strokeWidth *= ((ratio.width + ratio.height) / 2);\n                    if (parent.objColl[i].shape === 'text') {\n                        parent.objColl[i].textSettings.fontSize *= ((ratio.width + ratio.height) / 2);\n                    }\n                }\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'saveContext', obj: parent.objColl[i], isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: tempContext, isPreventSelection: null } });\n            }\n            tempContext.filter = temp;\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.objColl = tempObjColl;\n        }\n        if (parent.freehandCounter > 0) {\n            // eslint-disable-next-line\n            var tempPointColl = extend({}, parent.pointColl, {}, true);\n            for (var n = 0; n < parent.freehandCounter; n++) {\n                parent.points = extend([], parent.pointColl[n].points, []);\n                parent.notify('freehand-draw', { prop: 'setPointCounter', onPropertyChange: false, value: { value: 0 } });\n                var len = parent.points.length;\n                if (parent.currSelectionPoint) {\n                    for (var l = 0; l < len; l++) {\n                        parent.points[l].x -= parent.img.destLeft;\n                        parent.points[l].y -= parent.img.destTop;\n                    }\n                }\n                else {\n                    parent.pointColl[n].strokeWidth *= ((ratio.width + ratio.height) / 2);\n                    for (var l = 0; l < len; l++) {\n                        parent.points[l].x = (parent.points[l].x - parent.img.destLeft) * ratio.width;\n                        parent.points[l].y = (parent.points[l].y - parent.img.destTop) * ratio.height;\n                    }\n                }\n            }\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: tempContext, points: null } });\n            parent.pointColl = tempPointColl;\n        }\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: tempContext, isSave: true, isFlip: null } });\n        }\n        this.lowerContext.filter = tempContextFilter;\n        if (object) {\n            object['canvas'] = tempCanvas;\n        }\n        return tempCanvas;\n    };\n    Export.prototype.downloadImg = function (blob, fileName) {\n        var a = document.createElement('a');\n        a.href = blob;\n        a.target = '_parent';\n        a.download = fileName;\n        (document.body || document.documentElement).appendChild(a);\n        a.click();\n        a.parentNode.removeChild(a);\n    };\n    Export.prototype.exportTransformedImage = function (tempContext) {\n        var parent = this.parent;\n        var degree = parent.transform.degree;\n        for (var i = 0, len = parent.rotateFlipColl.length; i < len; i++) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var flip = parent.rotateFlipColl[i];\n            if (typeof flip === 'number') {\n                this.exportRotate(tempContext, flip);\n            }\n            else if (flip === 'horizontal') {\n                this.exportFlip(tempContext, true, false);\n            }\n            else if (flip === 'vertical') {\n                this.exportFlip(tempContext, false, true);\n            }\n        }\n        parent.transform.degree = degree;\n    };\n    Export.prototype.exportRotate = function (tempContext, degree) {\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.currSelectionPoint)) {\n            this.setMaxDim(parent.transform.degree, tempContext.canvas);\n            tempContext.translate(tempContext.canvas.width / 2, tempContext.canvas.height / 2);\n            tempContext.rotate(Math.PI / 180 * degree);\n            tempContext.drawImage(parent.inMemoryCanvas, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, -tempContext.canvas.height / 2, -tempContext.canvas.width / 2, tempContext.canvas.height, tempContext.canvas.width);\n        }\n        else {\n            tempContext.translate(tempContext.canvas.width / 2, tempContext.canvas.height / 2);\n            tempContext.rotate(Math.PI / 180 * degree);\n            tempContext.drawImage(parent.inMemoryCanvas, -tempContext.canvas.height / 2, -tempContext.canvas.width / 2, tempContext.canvas.height, tempContext.canvas.width);\n        }\n        this.updateSaveContext(tempContext);\n    };\n    Export.prototype.exportFlip = function (tempContext, flipHorizontal, flipVertical) {\n        if (flipHorizontal) {\n            tempContext.translate(tempContext.canvas.width, 0);\n            tempContext.scale(-1, 1);\n        }\n        if (flipVertical) {\n            tempContext.translate(0, tempContext.canvas.height);\n            tempContext.scale(1, -1);\n        }\n        tempContext.drawImage(this.parent.inMemoryCanvas, 0, 0);\n        this.updateSaveContext(tempContext);\n    };\n    Export.prototype.updateSaveContext = function (tempContext) {\n        var inMemoryContext = this.parent.inMemoryCanvas.getContext('2d');\n        tempContext.setTransform(1, 0, 0, 1, 0, 0);\n        var imageData = tempContext.getImageData(0, 0, tempContext.canvas.width, tempContext.canvas.height);\n        this.parent.inMemoryCanvas.width = imageData.width;\n        this.parent.inMemoryCanvas.height = imageData.height;\n        inMemoryContext.putImageData(imageData, 0, 0);\n    };\n    Export.prototype.setMaxDim = function (degree, tempCanvas) {\n        var newWidth;\n        var newHeight;\n        if (degree % 90 === 0 && degree % 180 !== 0) {\n            newWidth = this.parent.baseImg.height;\n            newHeight = this.parent.baseImg.width;\n        }\n        else if (degree % 180 === 0 || degree === 0) {\n            newWidth = this.parent.baseImg.width;\n            newHeight = this.parent.baseImg.height;\n        }\n        tempCanvas.width = newWidth;\n        tempCanvas.height = newHeight;\n        var obj = { width: 0, height: 0 };\n        this.parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: newWidth, height: newHeight, obj: obj } });\n        var maxDimension = obj;\n        tempCanvas.style.maxWidth = maxDimension.width + 'px';\n        tempCanvas.style.maxHeight = maxDimension.height + 'px';\n    };\n    return Export;\n}());\nexport { Export };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nvar Filter = /** @class */ (function () {\n    function Filter(parent) {\n        this.adjustmentLevel = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0, blur: 0,\n            exposure: 0, sharpen: false, bw: false }; // for toolbar slider value\n        this.tempAdjustmentLevel = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0, blur: 0,\n            exposure: 0, sharpen: false, bw: false }; // for temp toolbar slider value\n        this.adjustmentValue = ''; // for internal slider value\n        this.isBrightnessAdjusted = false;\n        this.appliedFilter = '';\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Filter.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Filter.prototype.addEventListener = function () {\n        this.parent.on('filter', this.filter, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Filter.prototype.removeEventListener = function () {\n        this.parent.off('filter', this.filter);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Filter.prototype.filter = function (args) {\n        this.updatePrivateVariables();\n        switch (args.prop) {\n            case 'finetuneImage':\n                this.finetuneImage(args.value['option'], args.value['value']);\n                break;\n            case 'applyImageFilter':\n                this.setFilter(args.value['option']);\n                break;\n            case 'update-finetunes':\n                this.updateFinetunes();\n                break;\n            case 'updateBrightFilter':\n                this.updateBrightFilter();\n                break;\n            case 'set-adjustment':\n                this.setAdjustment(args.value['operation']);\n                break;\n            case 'update-filter':\n                this.updateFilter(args.value['operation'], args.value['filter']);\n                break;\n            case 'initFilter':\n                this.initFilter();\n                break;\n            case 'setCurrAdjValue':\n                this.setCurrAdjValue(args.value['type'], args.value['value']);\n                break;\n            case 'updateAdj':\n                this.updateAdj(args.value['type'], args.value['value'], args.value['isPreview'], args.value['ctx']);\n                break;\n            case 'getCurrentObj':\n                this.getCurrentObj(args.value['object']);\n                break;\n            case 'getAdjustmentLevel':\n                args.value['obj']['adjustmentLevel'] = this.adjustmentLevel;\n                break;\n            case 'setAdjustmentLevel':\n                this.adjustmentLevel = args.value['adjustmentLevel'];\n                break;\n            case 'getTempAdjustmentLevel':\n                args.value['obj']['tempAdjustmentLevel'] = this.tempAdjustmentLevel;\n                break;\n            case 'setTempAdjustmentLevel':\n                this.tempAdjustmentLevel = args.value['tempAdjustmentLevel'];\n                break;\n            case 'setAdjustmentValue':\n                this.adjustmentValue = args.value['adjustmentValue'];\n                break;\n            case 'getBrightnessAdjusted':\n                args.value['obj']['isBrightnessAdjusted'] = this.isBrightnessAdjusted;\n                break;\n            case 'setBrightnessAdjusted':\n                this.isBrightnessAdjusted = args.value['isBrightnessAdjusted'];\n                if (this.parent.currentFilter.split('_') && this.parent.currentFilter.split('_')[1] === 'cold') {\n                    this.isBrightnessAdjusted = false;\n                }\n                break;\n            case 'reset':\n                this.reset();\n                break;\n        }\n    };\n    Filter.prototype.updatePrivateVariables = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n    };\n    Filter.prototype.getModuleName = function () {\n        return 'filter';\n    };\n    Filter.prototype.updateBrightFilter = function () {\n        var splitWords = this.lowerContext.filter.split(' ');\n        if (this.isBrightnessAdjusted && splitWords.length > 0 && !isNullOrUndefined(splitWords[4])) {\n            var opacityValue = parseFloat(splitWords[4].split('(')[1]);\n            splitWords[4] = 'opacity(' + (opacityValue - 0.3) + ')';\n            this.lowerContext.filter = splitWords.join(' ');\n        }\n    };\n    Filter.prototype.reset = function () {\n        this.adjustmentLevel = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0,\n            blur: 0, exposure: 0, sharpen: false, bw: false };\n        this.tempAdjustmentLevel = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0,\n            blur: 0, exposure: 0, sharpen: false, bw: false };\n        this.adjustmentValue = this.parent.getDefaultFilter();\n        this.isBrightnessAdjusted = false;\n        this.appliedFilter = '';\n    };\n    Filter.prototype.updateFinetunes = function () {\n        var parent = this.parent;\n        var fs = parent.finetuneSettings;\n        if (fs) {\n            if (fs.brightness) {\n                this.adjustmentLevel.brightness = fs.brightness.defaultValue;\n                this.tempAdjustmentLevel.brightness = fs.brightness.defaultValue;\n            }\n            if (fs.contrast) {\n                this.adjustmentLevel.contrast = fs.contrast.defaultValue;\n                this.tempAdjustmentLevel.contrast = fs.contrast.defaultValue;\n            }\n            if (fs.hue) {\n                this.adjustmentLevel.hue = fs.hue.defaultValue;\n                this.tempAdjustmentLevel.hue = fs.hue.defaultValue;\n            }\n            if (fs.saturation) {\n                this.adjustmentLevel.saturation = fs.saturation.defaultValue;\n                this.tempAdjustmentLevel.saturation = fs.saturation.defaultValue;\n            }\n            if (fs.exposure) {\n                this.adjustmentLevel.exposure = fs.exposure.defaultValue;\n                this.tempAdjustmentLevel.exposure = fs.exposure.defaultValue;\n            }\n            if (fs.opacity) {\n                this.adjustmentLevel.opacity = fs.opacity.defaultValue;\n                this.tempAdjustmentLevel.opacity = fs.opacity.defaultValue;\n            }\n            if (fs.blur) {\n                this.adjustmentLevel.blur = fs.blur.defaultValue;\n                this.tempAdjustmentLevel.blur = fs.blur.defaultValue;\n            }\n            parent.notify('draw', { prop: 'isInitialLoading', onPropertyChange: false, value: { isInitialLoading: true } });\n        }\n    };\n    Filter.prototype.initFilter = function () {\n        this.setFilterAdj('brightness', this.adjustmentLevel.brightness);\n        this.setFilterAdj('contrast', this.adjustmentLevel.contrast);\n        this.setFilterAdj('hue', this.adjustmentLevel.hue);\n        this.setFilterAdj('saturation', this.adjustmentLevel.saturation);\n        this.setFilterAdj('exposure', this.adjustmentLevel.exposure);\n        this.setFilterAdj('opacity', this.adjustmentLevel.opacity);\n        this.setFilterAdj('blur', this.adjustmentLevel.blur);\n    };\n    Filter.prototype.updateAdj = function (type, value, isPreview, ctx) {\n        var parent = this.parent;\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        var splitWords = this.lowerContext.filter.split(' ');\n        var values = [];\n        var opacityValue;\n        var brightnessValue;\n        if (splitWords[4]) {\n            opacityValue = parseFloat(splitWords[4].split('(')[1]);\n        }\n        if (splitWords[0]) {\n            brightnessValue = parseFloat(splitWords[0].split('(')[1]);\n        }\n        var brightness = this.getFilterValue(this.adjustmentLevel.brightness);\n        var saturation = this.getFilterValue(this.adjustmentLevel.saturation);\n        var excludedTypes = ['brightness', 'contrast', 'hue', 'saturation', 'exposure', 'opacity', 'blur'];\n        if (excludedTypes.indexOf(type) === -1) {\n            if (isNullOrUndefined(isPreview) && (this.adjustmentLevel.sharpen || this.adjustmentLevel.bw)) {\n                parent.isUndoRedo = true;\n                var temp = this.lowerContext.filter;\n                this.lowerContext.filter = 'none';\n                parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n                parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                    value: { context: this.lowerContext, points: null } });\n                this.lowerContext.filter = temp;\n                parent.isUndoRedo = false;\n            }\n        }\n        if (brightness !== 1) {\n            splitWords[4] = 'opacity(' + (opacityValue - 0.3) + ')';\n        }\n        var saturate;\n        var bright;\n        var saturatePercent;\n        var contrast;\n        var saturatePercentage;\n        switch (type) {\n            case 'brightness':\n                if (parseFloat(splitWords[3].split('(')[1]) !== 100) {\n                    value += 0.1;\n                }\n                splitWords[0] = 'brightness(' + value + ')';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'contrast':\n                splitWords[1] = 'contrast(' + value + '%)';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'hue':\n                splitWords[2] = 'hue-rotate(' + value + 'deg)';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'saturation':\n                splitWords[3] = 'saturate(' + value + '%)';\n                if (saturation !== 1) {\n                    splitWords[0] = 'brightness(' + (brightnessValue + 0.09) + ')';\n                }\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'opacity':\n                if (parseFloat(splitWords[0].split('(')[1]) !== 1) {\n                    value -= 0.2;\n                }\n                splitWords[4] = 'opacity(' + value + ')';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'blur':\n                splitWords[5] = 'blur(' + value + 'px)';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'exposure':\n                if (brightness !== 1) {\n                    splitWords[4] = 'opacity(' + (opacityValue - 0.3) + ')';\n                }\n                if (value > 1) {\n                    value -= 1;\n                    value += brightness;\n                }\n                else if (value < 1) {\n                    value = 1 - value;\n                    value = brightness - value;\n                }\n                splitWords[0] = 'brightness(' + value + ')';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'chrome':\n                saturate = this.getSaturationFilterValue(this.adjustmentLevel.saturation);\n                saturate *= 100;\n                value = saturate + (saturate * 0.4);\n                splitWords[3] = 'saturate(' + value + '%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[6] = 'sepia(0%)';\n                splitWords[7] = 'grayscale(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'cold':\n                // Adjusting Brightness\n                bright = this.getFilterValue(this.adjustmentLevel.brightness);\n                bright *= 100;\n                value = bright * 0.9;\n                value *= 0.01;\n                splitWords[0] = 'brightness(' + value + ')';\n                // Adjusting Contrast\n                contrast = this.getFilterValue(this.adjustmentLevel.contrast);\n                contrast *= 100;\n                value = contrast + (contrast * 0.5);\n                splitWords[1] = 'contrast(' + value + '%)';\n                // Adjusting Saturation\n                saturatePercentage = this.getSaturationFilterValue(this.adjustmentLevel.saturation);\n                saturatePercentage *= 100;\n                value = saturatePercentage;\n                splitWords[3] = 'saturate(' + value + '%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[2] = values[2];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[6] = 'sepia(0%)';\n                splitWords[7] = 'grayscale(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'warm':\n                saturatePercent = this.getSaturationFilterValue(this.adjustmentLevel.saturation);\n                saturatePercent *= 100;\n                value = saturatePercent + (saturatePercent * 0.4);\n                splitWords[3] = 'saturate(' + value + '%)';\n                splitWords[6] = 'sepia(25%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[7] = 'grayscale(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'grayscale':\n                splitWords[7] = 'grayscale(100%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[3] = values[3];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[6] = 'sepia(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'sepia':\n                splitWords[6] = 'sepia(100%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[3] = values[3];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[7] = 'grayscale(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'invert':\n                splitWords[8] = 'invert(100%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[3] = values[3];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[6] = 'sepia(0%)';\n                splitWords[7] = 'grayscale(0%)';\n                break;\n        }\n        if (type !== 'sharpen' && type !== 'blackandwhite') {\n            if (isNullOrUndefined(isPreview)) {\n                if (type === 'default') {\n                    splitWords = this.getDefaultCurrentFilter(splitWords);\n                }\n                this.lowerContext.filter = splitWords.join(' ');\n            }\n            splitWords = this.setTempFilterValue(brightness, isPreview, splitWords, type);\n            parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: true } });\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n            this.appliedFilter = this.lowerContext.filter;\n            this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n            parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: false } });\n            if (brightness !== 1) {\n                splitWords[4] = 'opacity(' + opacityValue + ')';\n            }\n            else if (saturation !== 1) {\n                splitWords[0] = 'brightness(' + brightnessValue + ')';\n            }\n            if ((type === 'exposure' && brightness !== 1) || (type === 'saturation' && saturation !== 1)) {\n                splitWords[0] = 'brightness(' + brightnessValue + ')';\n            }\n            splitWords = this.setTempFilterValue(brightness, isPreview, splitWords, type);\n            if (isNullOrUndefined(isPreview)) {\n                this.lowerContext.filter = splitWords.join(' ');\n            }\n            parent.initialAdjustmentValue = splitWords.join(' ');\n            var tempFilter = this.lowerContext.filter;\n            this.lowerContext.filter = 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n                'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n            parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: this.lowerContext, points: null } });\n            this.lowerContext.filter = tempFilter;\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n            if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            }\n            this.isBrightnessAdjusted = brightness !== 1;\n        }\n        var filter = splitWords.join(' ');\n        if (ctx) {\n            ctx.filter = filter;\n        }\n    };\n    Filter.prototype.setTempFilterValue = function (brightness, isPreview, splitWords, type) {\n        if (isPreview) {\n            if (type === 'default') {\n                splitWords = this.getDefaultCurrentFilter(splitWords);\n            }\n            else if (brightness !== 1) {\n                var tempSplitWords = this.lowerContext.filter.split(' ');\n                tempSplitWords[4] = splitWords[4];\n                this.lowerContext.filter = tempSplitWords.join(' ');\n            }\n        }\n        return splitWords;\n    };\n    Filter.prototype.getDefaultCurrentFilter = function (splitWords) {\n        var values = this.adjustmentValue.split(' ');\n        splitWords = [\n            values[0],\n            values[1],\n            values[2],\n            values[3],\n            values[4],\n            values[5],\n            'sepia(0%)',\n            'grayscale(0%)',\n            'invert(0%)'\n        ];\n        return splitWords;\n    };\n    Filter.prototype.getFilterValue = function (value) {\n        return (value === 0) ? 1 : 1 + ((value * 0.5) / 100);\n    };\n    Filter.prototype.getSaturationFilterValue = function (value) {\n        return value === 0 ? 1 : 1 + (value / 100);\n    };\n    Filter.prototype.setFilterAdj = function (type, value) {\n        var parent = this.parent;\n        parent.notify('freehand-draw', { prop: 'apply-pen-draw', onPropertyChange: false });\n        this.adjustmentLevel[\"\" + type] = value;\n        var valueMap;\n        switch (type) {\n            case 'brightness':\n            case 'contrast':\n            case 'exposure':\n                value = this.getFilterValue(value);\n                if (type === 'contrast') {\n                    value *= 100;\n                }\n                break;\n            case 'hue':\n                value *= 3;\n                break;\n            case 'saturation':\n                value = this.getSaturationFilterValue(value) * 100;\n                break;\n            case 'opacity':\n                if (value >= 50) {\n                    value /= 100;\n                }\n                else if (value === 40) {\n                    value = 0.45;\n                }\n                else if (value === 30) {\n                    value = 0.40;\n                }\n                else if (value === 20) {\n                    value = 0.35;\n                }\n                else if (value === 10) {\n                    value = 0.30;\n                }\n                else if (value === 0) {\n                    value = 0.25;\n                }\n                break;\n            case 'blur':\n                if (value !== 0) {\n                    value /= 20;\n                    // Since 0.5 is not working in blur we consider from 1\n                    value += 0.5;\n                }\n                break;\n        }\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var prevObj = this.getCurrentObj();\n        prevObj.objColl = extend([], parent.objColl, [], true);\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false, value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.updateAdj(type, value);\n        var filter = this.lowerContext.filter;\n        this.lowerContext.filter = this.appliedFilter;\n        parent.notify('undo-redo', {\n            prop: 'updateUndoRedoColl',\n            onPropertyChange: false,\n            value: {\n                operation: type,\n                previousObj: prevObj,\n                previousObjColl: prevObj.objColl,\n                previousPointColl: prevObj.pointColl,\n                previousSelPointColl: prevObj.selPointColl,\n                previousCropObj: prevCropObj,\n                previousText: null,\n                currentText: null,\n                previousFilter: null,\n                isCircleCrop: null\n            }\n        });\n        this.lowerContext.filter = filter;\n    };\n    Filter.prototype.setFilter = function (type) {\n        var parent = this.parent;\n        type = type.toLowerCase();\n        parent.notify('freehand-draw', { prop: 'apply-pen-draw', onPropertyChange: false });\n        var obj = { currentFilter: this.parent.currentFilter };\n        var prevFilter = obj['currentFilter'];\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var prevObj = this.getCurrentObj();\n        prevObj.objColl = extend([], parent.objColl, [], true);\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.updateAdj(type, null);\n        var filter = this.lowerContext.filter;\n        this.lowerContext.filter = this.appliedFilter;\n        parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: type, previousObj: prevObj, previousObjColl: prevObj.objColl,\n                previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: prevFilter, isCircleCrop: null } });\n        this.lowerContext.filter = filter;\n    };\n    Filter.prototype.setAdjustment = function (type) {\n        var splitWords = this.lowerContext.filter.split(' ');\n        var value;\n        var valueArr;\n        switch (type) {\n            case 'brightness':\n                valueArr = splitWords[0].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                this.adjustmentLevel.brightness = this.setFilterValue(value);\n                break;\n            case 'contrast':\n                valueArr = splitWords[1].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                value /= 100;\n                this.adjustmentLevel.contrast = this.setFilterValue(value);\n                break;\n            case 'hue':\n                valueArr = splitWords[2].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                value /= 3;\n                this.adjustmentLevel.hue = value;\n                break;\n            case 'saturation':\n                valueArr = splitWords[3].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                value /= 100;\n                this.adjustmentLevel.saturation = this.setSaturationFilterValue(value);\n                break;\n            case 'opacity':\n                valueArr = splitWords[4].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                if (value === 0.45) {\n                    value = 40;\n                }\n                else if (value === 0.40) {\n                    value = 30;\n                }\n                else if (value === 0.35) {\n                    value = 20;\n                }\n                else if (value === 0.30) {\n                    value = 10;\n                }\n                else if (value === 0.25) {\n                    value = 0;\n                }\n                else {\n                    value *= 100;\n                }\n                this.adjustmentLevel.opacity = value;\n                break;\n            case 'blur':\n                valueArr = splitWords[5].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                value *= 20;\n                this.adjustmentLevel.blur = value;\n                break;\n            case 'exposure':\n                valueArr = splitWords[0].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                this.adjustmentLevel.exposure = this.setFilterValue(value);\n                break;\n        }\n    };\n    Filter.prototype.setFilterValue = function (value) {\n        return Math.round((value === 1) ? 0 : ((value - 1) * 100) / 0.5);\n    };\n    Filter.prototype.setSaturationFilterValue = function (value) {\n        return Math.round((value === 1) ? 0 : (value - 1) * 100);\n    };\n    Filter.prototype.updateFilter = function (type, previousFilter) {\n        var parent = this.parent;\n        var validTypes = ['default', 'chrome', 'cold', 'warm', 'grayscale', 'blackandwhite', 'sepia', 'invert', 'sharpen'];\n        if (validTypes.indexOf(type) !== -1) {\n            var selEle = parent.element.querySelector('.e-contextual-toolbar-wrapper .e-toolbar-item.e-selected');\n            if (selEle) {\n                selEle.classList.remove('e-selected');\n            }\n            var filterCanvas = document.getElementById(parent.element.id + '_' + type + 'Canvas');\n            if (filterCanvas) {\n                filterCanvas.parentElement.classList.add('e-selected');\n            }\n            this.parent.currentFilter = previousFilter ? previousFilter : parent.element.id + '_' + type;\n        }\n    };\n    Filter.prototype.finetuneImage = function (finetuneOption, value) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            switch (finetuneOption.toLowerCase()) {\n                case 'brightness':\n                    this.setFilterAdj('brightness', value);\n                    break;\n                case 'contrast':\n                    this.setFilterAdj('contrast', value);\n                    break;\n                case 'hue':\n                    this.setFilterAdj('hue', value);\n                    break;\n                case 'saturation':\n                    this.setFilterAdj('saturation', value);\n                    break;\n                case 'opacity':\n                    this.setFilterAdj('opacity', value);\n                    break;\n                case 'blur':\n                    this.setFilterAdj('blur', value);\n                    break;\n                case 'exposure':\n                    this.setFilterAdj('exposure', value);\n                    break;\n            }\n            this.parent.canvasFilter = this.lowerContext.filter;\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n        }\n    };\n    Filter.prototype.setCurrAdjValue = function (type, value) {\n        this.parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n        switch (type) {\n            case 'brightness':\n                this.setFilterAdj('brightness', value);\n                break;\n            case 'contrast':\n                this.setFilterAdj('contrast', value);\n                break;\n            case 'hue':\n                this.setFilterAdj('hue', value);\n                break;\n            case 'saturation':\n                this.setFilterAdj('saturation', value);\n                break;\n            case 'opacity':\n                this.setFilterAdj('opacity', value);\n                break;\n            case 'blur':\n                this.setFilterAdj('blur', value);\n                break;\n            case 'exposure':\n                this.setFilterAdj('exposure', value);\n                break;\n        }\n    };\n    Filter.prototype.getCurrentObj = function (dummyObj) {\n        var parent = this.parent;\n        var tempFlipPanPointObj = { point: null };\n        parent.notify('crop', { prop: 'getTempFlipPanPoint', value: { obj: tempFlipPanPointObj } });\n        var zoomObj = { previousZoomValue: null };\n        parent.notify('transform', { prop: 'getPreviousZoomValue', value: { obj: zoomObj } });\n        var obj = { cropZoom: 0, defaultZoom: 0, totalPannedPoint: { x: 0, y: 0 }, totalPannedClientPoint: { x: 0, y: 0 },\n            totalPannedInternalPoint: { x: 0, y: 0 }, tempFlipPanPoint: { x: 0, y: 0 }, activeObj: {},\n            rotateFlipColl: [], degree: 0, currFlipState: '', zoomFactor: 0, previousZoomValue: 0,\n            destPoints: { startX: 0, startY: 0, width: 0, height: 0 },\n            srcPoints: { startX: 0, startY: 0, width: 0, height: 0 }, filter: '' };\n        obj.cropZoom = parent.transform.cropZoomFactor;\n        obj.defaultZoom = parent.transform.defaultZoomFactor;\n        obj.zoomFactor = parent.zoomSettings.zoomFactor;\n        obj.previousZoomValue = zoomObj['previousZoomValue'];\n        obj.totalPannedPoint = extend({}, parent.panPoint.totalPannedPoint, {}, true);\n        obj.totalPannedClientPoint = extend({}, parent.panPoint.totalPannedClientPoint, {}, true);\n        obj.totalPannedInternalPoint = extend({}, parent.panPoint.totalPannedInternalPoint, {}, true);\n        obj.tempFlipPanPoint = extend({}, tempFlipPanPointObj['point'], {}, true);\n        obj.activeObj = extend({}, parent.activeObj, {}, true);\n        obj.rotateFlipColl = extend([], parent.rotateFlipColl, [], true);\n        obj.degree = parent.transform.degree;\n        obj.currFlipState = parent.transform.currFlipState;\n        obj.destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, endX: 0, endY: 0,\n            width: parent.img.destWidth, height: parent.img.destHeight };\n        obj.srcPoints = { startX: parent.img.srcLeft, startY: parent.img.srcTop, endX: 0, endY: 0,\n            width: parent.img.srcWidth, height: parent.img.srcHeight };\n        obj.filter = this.lowerContext.filter;\n        if (dummyObj) {\n            dummyObj['currObj'] = obj;\n        }\n        return obj;\n    };\n    return Filter;\n}());\nexport { Filter };\n","import { EventHandler, extend, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nvar FreehandDrawing = /** @class */ (function () {\n    function FreehandDrawing(parent) {\n        this.fhdObj = { lastWidth: 0, lastVelocity: 0, time: 0, pointX: 0, pointY: 0 };\n        this.isFreehandDrawing = false;\n        this.freehandDownPoint = { x: 0, y: 0 };\n        this.isFreehandPointMoved = false;\n        this.pointCounter = 0;\n        // eslint-disable-next-line\n        this.selPointColl = {};\n        this.currFHDIdx = 0; // Specifies id for every freehand drawing - uses while deleting\n        this.selPoints = [];\n        this.tempFHDStyles = { strokeColor: null, fillColor: null, strokeWidth: null };\n        this.parent = parent;\n        this.addEventListener();\n    }\n    FreehandDrawing.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    FreehandDrawing.prototype.addEventListener = function () {\n        this.parent.on('freehand-draw', this.draw, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    FreehandDrawing.prototype.removeEventListener = function () {\n        this.parent.off('freehand-draw', this.draw);\n        this.parent.off('destroyed', this.destroy);\n    };\n    FreehandDrawing.prototype.draw = function (args) {\n        this.updateFhdPvtVar();\n        switch (args.prop) {\n            case 'hoverFhd': {\n                this.hoverFhd(args.value['strokeColor'], args.value['strokeWidth']);\n                break;\n            }\n            case 'freehandDownHandler':\n                this.freehandDownHandler(args.value['e'], args.value['canvas']);\n                break;\n            case 'freehandUpHandler':\n                this.freehandUpHandler(args.value['e'], args.value['canvas'], args.value['context']);\n                break;\n            case 'handle-freehand-draw': {\n                var id = parseInt(args.value['id'].split('_')[1], 10) - 1;\n                if (this.isFHDIdx(id)) {\n                    this.deleteFhd(id, true);\n                }\n                break;\n            }\n            case 'freehandRedraw':\n                this.freehandRedraw(args.value['context'], args.value['points']);\n                break;\n            case 'deleteFhd': {\n                var id = parseInt(args.value['id'].split('_')[1], 10) - 1;\n                this.deleteFhd(id, true);\n                break;\n            }\n            case 'selectFhd': {\n                var id = null;\n                if (args.value['id']) {\n                    id = parseInt(args.value['id'].split('_')[1], 10) - 1;\n                }\n                this.selectFhd(id);\n                break;\n            }\n            case 'applyFhd':\n                this.applyFhd();\n                break;\n            case 'cancelFhd':\n                this.cancelFhd();\n                break;\n            case 'updateFHDCurPts':\n                this.updateFHDCurPts();\n                break;\n            case 'rotateFhdColl':\n                this.rotateFhdColl();\n                break;\n            case 'flipFHDColl':\n                this.flipFHDColl(args.value['value']);\n                break;\n            case 'panFHDColl':\n                this.panFHDColl(args.value['xDiff'], args.value['yDiff'], args.value['panRegion']);\n                break;\n            case 'updateFHDColl':\n                this.updateFHDColl();\n                break;\n            case 'zoomFHDColl':\n                this.zoomFHDColl(args.value['isPreventApply']);\n                break;\n            case 'apply-pen-draw':\n                this.applyPenDraw();\n                break;\n            case 'freeHandDraw':\n                this.freeHandDraw(args.value['value']);\n                break;\n            case 'isFHDIdx':\n                this.isFHDIdx(args.value['index'], args.value['obj']);\n                break;\n            case 'getSqPtFD':\n                this.getSqPtFD(args.value['idx'], args.value['obj']);\n                break;\n            case 'getSelPointColl':\n                args.value['obj']['selPointColl'] = extend([], this.selPointColl);\n                break;\n            case 'setSelPointColl':\n                this.selPointColl = extend([], args.value['obj']['selPointColl']);\n                break;\n            case 'setFreehandDrawHoveredIndex':\n                this.fhdHovIdx = args.value['index'];\n                break;\n            case 'getFreehandDrawHoveredIndex':\n                args.value['obj']['index'] = this.fhdHovIdx;\n                break;\n            case 'setPointCounter':\n                this.pointCounter = args.value['value'];\n                break;\n            case 'getPenStrokeWidth':\n                args.value['obj']['penStrokeWidth'] = this.penStrokeWidth;\n                break;\n            case 'setPenStrokeWidth':\n                this.penStrokeWidth = args.value['value'];\n                break;\n            case 'getCurrentFreehandDrawIndex':\n                args.value['obj']['currentFreehandDrawIndex'] = this.currFHDIdx;\n                break;\n            case 'setCurrentFreehandDrawIndex':\n                this.currFHDIdx = args.value['value'];\n                break;\n            case 'updateCropPtsForSel':\n                this.updateCropPtsForSel();\n                break;\n            case 'getFreehandDrawSelectedId':\n                args.value['obj']['freehandDrawSelectedId'] = this.fhdSelID;\n                break;\n            case 'resetFreehandDrawSelectedId':\n                this.fhdSelID = null;\n                break;\n            case 'getTempFreeHandDrawEditingStyles':\n                args.value['obj']['tempFreeHandDrawEditingStyles'] = this.tempFHDStyles;\n                break;\n            case 'setFreehandSelectedIndex':\n                this.fhdSelIdx = args.value['index'];\n                break;\n            case 'getFreehandSelectedIndex':\n                args.value['obj']['freehandSelectedIndex'] = this.fhdSelIdx;\n                break;\n            case 'reset':\n                this.reset();\n                break;\n        }\n    };\n    FreehandDrawing.prototype.updateFhdPvtVar = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n        if (parent.upperCanvas) {\n            this.upperContext = parent.upperCanvas.getContext('2d');\n        }\n    };\n    FreehandDrawing.prototype.reset = function () {\n        this.fhdObj = { lastWidth: 0, lastVelocity: 0, time: 0, pointX: 0, pointY: 0 };\n        this.isFreehandDrawing = this.isFreehandPointMoved = false;\n        this.selPoints = [];\n        this.freehandDownPoint = { x: 0, y: 0 };\n        this.selPointColl = {};\n        this.fhdHovIdx = null;\n        this.pointCounter = 0;\n        this.fhdSelID = null;\n        this.penStrokeWidth = undefined;\n        this.currFHDIdx = 0;\n        this.fhdSelIdx = null;\n        this.tempFHDStyles = { strokeColor: null, fillColor: null, strokeWidth: null };\n    };\n    FreehandDrawing.prototype.getModuleName = function () {\n        return 'freehand-draw';\n    };\n    FreehandDrawing.prototype.hoverFhd = function (fillStyle, strokeWidth) {\n        var parent = this.parent;\n        parent.lowerCanvas = document.querySelector('#' + parent.element.id + '_lowerCanvas');\n        this.lowerContext = parent.lowerCanvas.getContext('2d');\n        parent.upperCanvas = document.querySelector('#' + parent.element.id + '_upperCanvas');\n        this.upperContext = parent.upperCanvas.getContext('2d');\n        var context = this.upperContext;\n        var idx = -1;\n        if (this.fhdHovIdx > -1) {\n            idx = this.fhdHovIdx;\n        }\n        else {\n            idx = this.fhdSelIdx;\n        }\n        parent.points = extend([], parent.pointColl[idx].points);\n        this.pointCounter = 0;\n        var len = parent.points.length;\n        var controlPoint1;\n        var controlPoint2;\n        var startPoint;\n        var endPoint;\n        var minStrokeWidth = 0;\n        var maxStrokeWidth = 0;\n        context.fillStyle = fillStyle ? fillStyle : parent.pointColl[idx].strokeColor;\n        context.strokeStyle = context.fillStyle;\n        minStrokeWidth = maxStrokeWidth = this.penStrokeWidth = strokeWidth ?\n            strokeWidth : parent.pointColl[idx].strokeWidth;\n        if (len === 1) {\n            controlPoint1 = controlPoint2 = startPoint = endPoint = parent.points[0];\n            this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n        }\n        for (var l = 0; l < len - 3; l++) {\n            if (parent.points[l + 1] && parent.points[l + 2] && parent.points[l + 2]) {\n                controlPoint1 = (this.calcCurveCP(parent.points[l + 0], parent.points[l + 1], parent.points[l + 2])).controlPoint2;\n                controlPoint2 = (this.calcCurveCP(parent.points[l + 1], parent.points[l + 2], parent.points[l + 3])).controlPoint1;\n                startPoint = parent.points[l + 1];\n                endPoint = parent.points[l + 2];\n                this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n            }\n        }\n        context.closePath();\n        // Outer selection\n        var point = this.getSqPtFD(idx);\n        var tempLineWidth = context.lineWidth;\n        context.lineWidth = 2;\n        context.strokeStyle = parent.themeColl[parent.theme]['primaryColor'];\n        context.beginPath();\n        context.rect(point.startX, point.startY, point.width, point.height);\n        context.stroke();\n        context.closePath();\n        context.lineWidth = tempLineWidth;\n    };\n    FreehandDrawing.prototype.freehandDownHandler = function (e, canvas) {\n        this.parent.lowerCanvas = document.querySelector('#' + this.parent.element.id + '_lowerCanvas');\n        this.lowerContext = this.parent.lowerCanvas.getContext('2d');\n        this.parent.upperCanvas = document.querySelector('#' + this.parent.element.id + '_upperCanvas');\n        this.upperContext = this.parent.upperCanvas.getContext('2d');\n        this.fhdObj.time = new Date().getTime();\n        this.isFreehandDrawing = true;\n        if (e.type === 'mousedown') {\n            this.freehandDownPoint = { x: e.clientX, y: e.clientY };\n        }\n        else {\n            this.freehandDownPoint = { x: e.touches[0].clientX, y: e.touches[0].clientY };\n        }\n        this.isFreehandPointMoved = false;\n        EventHandler.add(canvas, 'mousemove touchmove', this.freehandMoveHandler, this);\n    };\n    FreehandDrawing.prototype.freehandUpHandler = function (e, canvas, context) {\n        var rect = canvas.getBoundingClientRect();\n        var parent = this.parent;\n        EventHandler.remove(canvas, 'mousemove touchmove', this.freehandMoveHandler);\n        if (parent.points.length === 0) {\n            if (e.type === 'mouseup') {\n                this.processPoint(e.clientX - rect.left, e.clientY - rect.top, true, context);\n            }\n            else {\n                if (!this.isFreehandPointMoved) {\n                    this.processPoint(this.freehandDownPoint.x - rect.left, this.freehandDownPoint.y - rect.top, true, context);\n                }\n            }\n        }\n        context.closePath();\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], parent.objColl, [], true);\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        var fhCnt = parent.freehandCounter;\n        parent.pointColl[fhCnt] = {};\n        parent.pointColl[fhCnt].points = extend([], parent.points);\n        parent.pointColl[fhCnt].strokeColor = parent.activeObj.strokeSettings.strokeColor;\n        parent.pointColl[fhCnt].strokeWidth = this.penStrokeWidth;\n        parent.pointColl[fhCnt].flipState = parent.transform.currFlipState;\n        parent.pointColl[fhCnt].id = 'pen_' + (this.currFHDIdx + 1);\n        parent.points = [];\n        this.selPointColl[fhCnt] = {};\n        this.selPointColl[fhCnt].points = extend([], this.selPoints);\n        this.selPoints = [];\n        this.pointCounter = 0;\n        parent.freehandCounter++;\n        this.currFHDIdx++;\n        this.isFreehandDrawing = false;\n        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: 'freehand-draw', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: null, isCircleCrop: null } });\n    };\n    FreehandDrawing.prototype.freehandMoveHandler = function (e) {\n        this.isFreehandPointMoved = true;\n        var rect = this.parent.upperCanvas.getBoundingClientRect();\n        var x;\n        var y;\n        if (e.type === 'mousemove') {\n            x = e.clientX - rect.left;\n            y = e.clientY - rect.top;\n        }\n        else {\n            x = e.touches[0].clientX - rect.left;\n            y = e.touches[0].clientY - rect.top;\n        }\n        if (this.isFreehandDrawing) {\n            this.processPoint(x, y, false, this.upperContext);\n        }\n    };\n    FreehandDrawing.prototype.processPoint = function (x, y, mouseDown, context) {\n        var parent = this.parent;\n        var lastPoint = this.point(x, y, new Date().getTime());\n        lastPoint = parent.points.length > 0 && parent.points[parent.points.length - 1];\n        var isLastPointTooClose = lastPoint ? this.distanceTo(lastPoint) <= 5 : false;\n        var controlPoint1;\n        var controlPoint2;\n        var startPoint;\n        var endPoint;\n        this.selPoints.push({ x: x, y: y, ratioX: (x - parent.img.destLeft) / parent.img.destWidth,\n            ratioY: (y - parent.img.destTop) / parent.img.destHeight,\n            time: this.fhdObj.time });\n        if (!lastPoint || !(lastPoint && isLastPointTooClose) || mouseDown) {\n            this.fhdObj.time = new Date().getTime();\n            parent.points.push({ x: x, y: y, ratioX: (x - parent.img.destLeft) / parent.img.destWidth,\n                ratioY: (y - parent.img.destTop) / parent.img.destHeight,\n                time: this.fhdObj.time });\n            if (parent.points.length > 3) {\n                var p0 = parent.points[this.pointCounter];\n                var p1 = parent.points[this.pointCounter + 1];\n                var p2 = parent.points[this.pointCounter + 2];\n                var p3 = parent.points[this.pointCounter + 3];\n                controlPoint1 = this.calcCurveCP(p0, p1, p2).controlPoint2;\n                controlPoint2 = this.calcCurveCP(p1, p2, p3).controlPoint1;\n                startPoint = parent.points[this.pointCounter + 1];\n                endPoint = parent.points[this.pointCounter + 2];\n                var minStrokeWidth = 0.5;\n                var maxStrokeWidth = 5;\n                if (!isNullOrUndefined(this.penStrokeWidth)) {\n                    minStrokeWidth = maxStrokeWidth = this.penStrokeWidth;\n                }\n                this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n                this.pointCounter++;\n            }\n            if (mouseDown) {\n                controlPoint1 = controlPoint2 = startPoint = endPoint = { x: x, y: y, time: new Date().getTime() };\n                var minStrokeWidth = 0.5;\n                var maxStrokeWidth = 5;\n                if (!isNullOrUndefined(this.penStrokeWidth)) {\n                    minStrokeWidth = maxStrokeWidth = this.penStrokeWidth;\n                }\n                this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n            }\n        }\n    };\n    FreehandDrawing.prototype.calcCurveCP = function (p1, p2, p3) {\n        if (!p2) {\n            p2 = p1;\n        }\n        if (!p3) {\n            p3 = p2;\n        }\n        var dx1 = p1.x - p2.x;\n        var dy1 = p1.y - p2.y;\n        var dx2 = p2.x - p3.x;\n        var dy2 = p2.y - p3.y;\n        var m1 = { x: (p1.x + p2.x) / 2.0, y: (p1.y + p2.y) / 2.0 };\n        var m2 = { x: (p2.x + p3.x) / 2.0, y: (p2.y + p3.y) / 2.0 };\n        var l1 = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n        var l2 = Math.sqrt(dx2 * dx2 + dy2 * dy2);\n        var dxm = (m1.x - m2.x);\n        var dym = (m1.y - m2.y);\n        var k = l2 / (l1 + l2);\n        var cm = { x: m2.x + dxm * k, y: m2.y + dym * k };\n        var tx = p2.x - cm.x;\n        var ty = p2.y - cm.y;\n        return {\n            controlPoint1: this.point(m1.x + tx, m1.y + ty, 0),\n            controlPoint2: this.point(m2.x + tx, m2.y + ty, 0)\n        };\n    };\n    FreehandDrawing.prototype.point = function (x, y, time) {\n        this.fhdObj.pointX = x;\n        this.fhdObj.pointY = y;\n        return { x: this.fhdObj.pointX, y: this.fhdObj.pointY, time: time };\n    };\n    FreehandDrawing.prototype.startDraw = function (context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth) {\n        var tempVelocity;\n        tempVelocity = this.pointVelocity(startPoint);\n        tempVelocity = 0.7 * tempVelocity + (1 - 0.7) * this.fhdObj.lastVelocity;\n        var newWidth = Math.max(maxStrokeWidth / (0.7 + 1), minStrokeWidth);\n        this.drawCurve(this.fhdObj.time, newWidth, context, controlPoint1, controlPoint2, startPoint, endPoint, maxStrokeWidth);\n        this.fhdObj.lastVelocity = tempVelocity;\n        this.fhdObj.time = newWidth;\n    };\n    FreehandDrawing.prototype.pointVelocity = function (startPoint) {\n        return (this.fhdObj.time !== startPoint.time) ? this.distanceTo(startPoint) /\n            (this.fhdObj.time - startPoint.time) : 0;\n    };\n    FreehandDrawing.prototype.distanceTo = function (start) {\n        return Math.sqrt(Math.pow(this.fhdObj.pointX - start.x, 2) + Math.pow(this.fhdObj.pointY - start.y, 2));\n    };\n    FreehandDrawing.prototype.drawCurve = function (startWidth, endWidth, context, controlPoint1, controlPoint2, startPoint, endPoint, maxStrokeWidth) {\n        var width;\n        var i;\n        var t1;\n        var t2;\n        var t3;\n        var u1;\n        var u2;\n        var u3;\n        var x;\n        var y;\n        var widthValue = endWidth - startWidth;\n        var bezierLength = this.bezierLength(controlPoint1, controlPoint2, startPoint, endPoint);\n        var drawSteps = Math.ceil(bezierLength) * 2;\n        context.beginPath();\n        for (i = 0; i < drawSteps; i++) {\n            t1 = i / drawSteps;\n            t2 = t1 * t1;\n            t3 = t2 * t1;\n            u1 = 1 - t1;\n            u2 = u1 * u1;\n            u3 = u2 * u1;\n            x = u3 * startPoint.x;\n            x += 3 * u2 * t1 * controlPoint1.x;\n            x += 3 * u1 * t2 * controlPoint2.x;\n            x += t3 * endPoint.x;\n            y = u3 * startPoint.y;\n            y += 3 * u2 * t1 * controlPoint1.y;\n            y += 3 * u1 * t2 * controlPoint2.y;\n            y += t3 * endPoint.y;\n            width = Math.min(startWidth + t3 * widthValue, maxStrokeWidth);\n            this.drawArc(x, y, width, context);\n        }\n        context.closePath();\n        context.fill();\n    };\n    FreehandDrawing.prototype.bezierLength = function (controlPoint1, controlPoint2, startPoint, endPoint) {\n        var steps = 10;\n        var length = 0;\n        var i;\n        var t;\n        var pointX1;\n        var pointY1;\n        var pointX2;\n        var pointY2;\n        var pointX3;\n        var pointY3;\n        for (i = 0; i <= steps; i++) {\n            t = i / steps;\n            pointX1 = this.bezierPoint(t, startPoint.x, controlPoint1.x, controlPoint2.x, endPoint.x);\n            pointY1 = this.bezierPoint(t, startPoint.y, controlPoint1.y, controlPoint2.y, endPoint.y);\n            if (i > 0) {\n                pointX3 = pointX1 - pointX2;\n                pointY3 = pointY1 - pointY2;\n                length += Math.sqrt(pointX3 * pointX3 + pointY3 * pointY3);\n            }\n            pointX2 = pointX1;\n            pointY2 = pointY1;\n        }\n        return length;\n    };\n    FreehandDrawing.prototype.bezierPoint = function (t, startPoint, cp1, cp2, endPoint) {\n        return startPoint * (1.0 - t) * (1.0 - t) * (1.0 - t) + 3.0 * cp1 * (1.0 - t) * (1.0 - t) * t + 3.0 *\n            cp2 * (1.0 - t) * t * t + endPoint * t * t * t;\n    };\n    FreehandDrawing.prototype.drawArc = function (x, y, size, context) {\n        if ((x > this.parent.img.destLeft && y > this.parent.img.destTop && x < (this.parent.img.destLeft + this.parent.img.destWidth) &&\n            y < (this.parent.img.destTop + this.parent.img.destHeight) ||\n            (context !== this.lowerContext && context !== this.upperContext))) {\n            context.moveTo(x, y);\n            context.arc(x, y, size, 0, 2 * Math.PI, false);\n        }\n    };\n    FreehandDrawing.prototype.freehandRedraw = function (context, points) {\n        var parent = this.parent;\n        parent.lowerCanvas = document.querySelector('#' + parent.element.id + '_lowerCanvas');\n        this.lowerContext = parent.lowerCanvas.getContext('2d');\n        parent.upperCanvas = document.querySelector('#' + parent.element.id + '_upperCanvas');\n        this.upperContext = parent.upperCanvas.getContext('2d');\n        var temp = context.filter;\n        context.filter = 'none';\n        if (points) {\n            parent.pointColl[parent.freehandCounter] = {};\n            parent.pointColl[parent.freehandCounter].points = points;\n            parent.pointColl[parent.freehandCounter].strokeColor = parent.activeObj.strokeSettings.strokeColor;\n            parent.pointColl[parent.freehandCounter].strokeWidth = this.penStrokeWidth;\n            parent.pointColl[parent.freehandCounter].flipState = parent.transform.currFlipState;\n            parent.freehandCounter++;\n        }\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            parent.points = extend([], parent.pointColl[n].points);\n            this.pointCounter = 0;\n            var len = parent.points.length;\n            var controlPoint1 = void 0;\n            var controlPoint2 = void 0;\n            var startPoint = void 0;\n            var endPoint = void 0;\n            var minStrokeWidth = void 0;\n            var maxStrokeWidth = void 0;\n            if (len > 0) {\n                context.fillStyle = parent.pointColl[n].strokeColor;\n                minStrokeWidth = maxStrokeWidth = this.penStrokeWidth = parent.pointColl[n].strokeWidth;\n            }\n            if (len === 1) {\n                controlPoint1 = controlPoint2 = startPoint = endPoint = parent.points[0];\n                this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n            }\n            for (var l = 0; l < len - 3; l++) {\n                if (parent.points[l + 1] && parent.points[l + 2] && parent.points[l + 2]) {\n                    controlPoint1 = (this.calcCurveCP(parent.points[l + 0], parent.points[l + 1], parent.points[l + 2])).controlPoint2;\n                    controlPoint2 = (this.calcCurveCP(parent.points[l + 1], parent.points[l + 2], parent.points[l + 3])).controlPoint1;\n                    startPoint = parent.points[l + 1];\n                    endPoint = parent.points[l + 2];\n                    this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n                }\n            }\n            context.closePath();\n        }\n        context.filter = temp;\n    };\n    FreehandDrawing.prototype.getSqPtFD = function (idx, obj) {\n        var activePoint = { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 };\n        var sPoints = extend([], this.selPointColl[idx].points, []);\n        this.parent.points = extend([], this.parent.pointColl[idx].points);\n        this.pointCounter = 0;\n        var len = sPoints.length;\n        for (var l = 0; l < len; l++) {\n            if (activePoint.startX === 0 && activePoint.startY === 0 && activePoint.endX === 0 && activePoint.endY === 0) {\n                activePoint.startX = sPoints[l].x;\n                activePoint.startY = sPoints[l].y;\n                activePoint.endX = sPoints[l].x;\n                activePoint.endY = sPoints[l].y;\n            }\n            else {\n                activePoint.startX = Math.min(activePoint.startX, sPoints[l].x);\n                activePoint.startY = Math.min(activePoint.startY, sPoints[l].y);\n                activePoint.endX = Math.max(activePoint.endX, sPoints[l].x);\n                activePoint.endY = Math.max(activePoint.endY, sPoints[l].y);\n            }\n        }\n        activePoint.startX -= this.penStrokeWidth;\n        activePoint.startY -= this.penStrokeWidth;\n        activePoint.endX += this.penStrokeWidth;\n        activePoint.endY += this.penStrokeWidth;\n        activePoint.width = activePoint.endX - activePoint.startX;\n        activePoint.height = activePoint.endY - activePoint.startY;\n        if (obj) {\n            obj['activePoint'] = activePoint;\n        }\n        return activePoint;\n    };\n    FreehandDrawing.prototype.applyPenDraw = function () {\n        var parent = this.parent;\n        if (parent.currObjType.shape === 'freehanddraw') {\n            parent.notify('shape', { prop: 'apply', onPropertyChange: false, value: { shape: null, obj: null, canvas: null } });\n            parent.upperCanvas.style.cursor = parent.cursor = 'default';\n            parent.currObjType.shape = '';\n        }\n        parent.notify('shape', { prop: 'clearActObj' });\n    };\n    FreehandDrawing.prototype.applyFhd = function () {\n        var parent = this.parent;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var selectedPoint = parent.pointColl[this.fhdSelIdx];\n        if (selectedPoint.strokeColor === '#42a5f5') {\n            selectedPoint.strokeColor = this.tempFHDStyles.strokeColor;\n        }\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'setSelectedFreehandColor', value: { color: '#42a5f5' } });\n        }\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n        }\n        if (selectedPoint) {\n            selectedPoint.isSelected = false;\n        }\n        parent.notify('selection', { prop: 'resetFreehandDrawVariables' });\n        this.fhdHovIdx = this.fhdSelIdx = null;\n    };\n    FreehandDrawing.prototype.cancelFhd = function () {\n        var parent = this.parent;\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'setSelectedFreehandColor', value: { color: '#42a5f5' } });\n        }\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        this.pointCounter = 0;\n        if (parent.pointColl[this.fhdSelIdx]) {\n            parent.pointColl[this.fhdSelIdx].strokeColor = this.tempFHDStyles.strokeColor;\n            parent.pointColl[this.fhdSelIdx].strokeWidth = this.tempFHDStyles.strokeWidth;\n            parent.pointColl[this.fhdSelIdx].isSelected = false;\n        }\n        this.fhdHovIdx = this.fhdSelIdx = this.fhdSelID = null;\n        parent.notify('selection', { prop: 'resetFreehandDrawVariables' });\n        parent.activeObj.strokeSettings.strokeColor = this.tempFHDStyles.strokeColor;\n        parent.activeObj.strokeSettings.strokeWidth = this.penStrokeWidth = this.tempFHDStyles.strokeWidth;\n        this.tempFHDStyles = { strokeColor: null, strokeWidth: null, fillColor: null };\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n        }\n    };\n    FreehandDrawing.prototype.selectFhd = function (index) {\n        var parent = this.parent;\n        parent.notify('selection', { prop: 'setFreehandDrawEditing', onPropertyChange: false, value: { bool: true } });\n        if (index || index === 0) {\n            if (this.isFHDIdx(index)) {\n                this.fhdSelIdx = this.fhdHovIdx = index;\n                this.hoverFhd();\n                parent.upperCanvas.style.cursor = parent.cursor = 'pointer';\n            }\n            else {\n                return;\n            }\n        }\n        this.fhdSelIdx = this.fhdHovIdx;\n        parent.pointColl[this.fhdSelIdx].isSelected = true;\n        this.fhdSelID = parent.pointColl[this.fhdSelIdx].id;\n        if (parent.pointColl[this.fhdHovIdx].strokeColor !== '#42a5f5') {\n            parent.activeObj.strokeSettings.strokeColor = this.tempFHDStyles.strokeColor =\n                parent.pointColl[this.fhdHovIdx].strokeColor;\n        }\n        parent.activeObj.strokeSettings.strokeWidth = this.tempFHDStyles.strokeWidth =\n            parent.pointColl[this.fhdHovIdx].strokeWidth;\n        var obj = { bool: false };\n        parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n        if (obj['bool']) {\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'pen',\n                        isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n            }\n        }\n        else {\n            parent.okBtn();\n        }\n    };\n    FreehandDrawing.prototype.deleteFhd = function (index, isId) {\n        var parent = this.parent;\n        if (this.isFHDIdx(index)) {\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            // eslint-disable-next-line\n            var tempPointColl = extend({}, parent.pointColl, {}, true);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var tempSelPointColl = extend({}, this.selPointColl, {}, true);\n            parent.pointColl = {};\n            this.selPointColl = {};\n            var count = 0;\n            if (isNullOrUndefined(isId)) {\n                for (var i = 0; i < parent.freehandCounter; i++) {\n                    if (i !== index) {\n                        parent.pointColl[count] = tempPointColl[i];\n                        this.selPointColl[count] = tempSelPointColl[i];\n                        count++;\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < parent.freehandCounter; i++) {\n                    if (parseInt(tempPointColl[i].id.split('_')[1], 10) - 1 !== index) {\n                        parent.pointColl[count] = tempPointColl[i];\n                        this.selPointColl[count] = tempSelPointColl[i];\n                        count++;\n                    }\n                }\n            }\n            parent.freehandCounter -= 1;\n            this.fhdHovIdx = this.fhdSelIdx = null;\n            parent.notify('selection', { prop: 'resetFreehandDrawVariables' });\n            parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: true } });\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            }\n        }\n    };\n    FreehandDrawing.prototype.zoomX = function (x) {\n        return (x * this.parent.img.destWidth) + this.parent.img.destLeft;\n    };\n    FreehandDrawing.prototype.zoomY = function (y) {\n        return (y * this.parent.img.destHeight) + this.parent.img.destTop;\n    };\n    FreehandDrawing.prototype.zoomFHDColl = function (isPreventApply) {\n        var parent = this.parent;\n        // Updating point collection for zoom\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            parent.points = extend([], parent.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = parent.points.length;\n            for (var l = 0; l < len; l++) {\n                parent.points[l].x = this.zoomX(parent.points[l].ratioX);\n                parent.points[l].y = this.zoomY(parent.points[l].ratioY);\n            }\n        }\n        // Updating each points for cursor styles for zoom\n        this.updateFHDCurPts();\n        if (isNullOrUndefined(isPreventApply)) {\n            this.freehandRedraw(this.lowerContext, null);\n        }\n    };\n    FreehandDrawing.prototype.updateFHDCurPts = function () {\n        var parent = this.parent;\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                this.selPoints = extend([], this.selPointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = this.selPoints.length;\n                for (var l = 0; l < len; l++) {\n                    this.selPoints[l].x = this.zoomX(this.selPoints[l].ratioX);\n                    this.selPoints[l].y = this.zoomY(this.selPoints[l].ratioY);\n                }\n            }\n        }\n    };\n    FreehandDrawing.prototype.rotateFhdColl = function () {\n        var parent = this.parent;\n        // Update rotation points for point collection\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            parent.points = extend([], parent.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = parent.points.length;\n            for (var l = 0; l < len; l++) {\n                parent.points[l].y = parent.img.destTop + (parent.img.destHeight * parent.points[l].ratioX);\n                parent.points[l].x = (parent.img.destLeft + parent.img.destWidth) - (parent.img.destWidth *\n                    parent.points[l].ratioY);\n                parent.points[l].ratioX = (parent.points[l].x - parent.img.destLeft) / parent.img.destWidth;\n                parent.points[l].ratioY = (parent.points[l].y - parent.img.destTop) / parent.img.destHeight;\n            }\n        }\n        // Update rotation points for each point for cursor styles\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                this.selPoints = extend([], this.selPointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = this.selPoints.length;\n                for (var l = 0; l < len; l++) {\n                    this.selPoints[l].y = parent.img.destTop + (parent.img.destHeight * this.selPoints[l].ratioX);\n                    this.selPoints[l].x = (parent.img.destLeft + parent.img.destWidth) - (parent.img.destWidth *\n                        this.selPoints[l].ratioY);\n                    this.selPoints[l].ratioX = (this.selPoints[l].x - parent.img.destLeft) / parent.img.destWidth;\n                    this.selPoints[l].ratioY = (this.selPoints[l].y - parent.img.destTop) / parent.img.destHeight;\n                }\n            }\n        }\n        this.updateFHDCurPts();\n    };\n    FreehandDrawing.prototype.flipFHDColl = function (value) {\n        var lowercaseValue = value.toLowerCase();\n        if (lowercaseValue === 'horizontal') {\n            this.pointsHorizontalFlip();\n        }\n        else if (lowercaseValue === 'vertical') {\n            this.pointsVerticalFlip();\n        }\n        else {\n            this.pointsHorizontalFlip();\n            for (var i = 0; i < this.parent.freehandCounter; i++) {\n                this.parent.pointColl[i].shapeFlip = '';\n            }\n            this.pointsVerticalFlip();\n        }\n    };\n    FreehandDrawing.prototype.pointsHorizontalFlip = function () {\n        var parent = this.parent;\n        // Update flip value for point collection\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (parent.pointColl[n].shapeFlip !== parent.transform.currFlipState) {\n                parent.points = extend([], parent.pointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = parent.points.length;\n                for (var l = 0; l < len; l++) {\n                    if (parent.points[l].x <= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                        parent.points[l].x = (parent.img.destLeft + parent.img.destWidth) - (parent.points[l].x\n                            - parent.img.destLeft);\n                    }\n                    else if (parent.points[l].x >= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                        parent.points[l].x = parent.img.destLeft + (parent.img.destLeft + parent.img.destWidth -\n                            parent.points[l].x);\n                    }\n                    parent.points[l].ratioX = (parent.points[l].x - parent.img.destLeft) / parent.img.destWidth;\n                    parent.points[l].ratioY = (parent.points[l].y - parent.img.destTop) / parent.img.destHeight;\n                }\n                parent.pointColl[n].shapeFlip = parent.transform.currFlipState;\n            }\n        }\n        // Update flip value for each points for cursor styles\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                if (this.selPointColl[n].shapeFlip !== parent.transform.currFlipState) {\n                    this.selPoints = extend([], this.selPointColl[n].points, []);\n                    this.pointCounter = 0;\n                    var len = this.selPoints.length;\n                    for (var l = 0; l < len; l++) {\n                        if (this.selPoints[l].x <= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                            this.selPoints[l].x = (parent.img.destLeft + parent.img.destWidth) - (this.selPoints[l].x -\n                                parent.img.destLeft);\n                        }\n                        else if (this.selPoints[l].x >= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                            this.selPoints[l].x = parent.img.destLeft + (parent.img.destLeft + parent.img.destWidth -\n                                this.selPoints[l].x);\n                        }\n                        this.selPoints[l].ratioX = (this.selPoints[l].x - parent.img.destLeft) / parent.img.destWidth;\n                        this.selPoints[l].ratioY = (this.selPoints[l].y - parent.img.destTop) / parent.img.destHeight;\n                    }\n                }\n            }\n        }\n        this.updateFHDCurPts();\n    };\n    FreehandDrawing.prototype.pointsVerticalFlip = function () {\n        var parent = this.parent;\n        // Update flip value for point collection\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (parent.pointColl[n].shapeFlip !== parent.transform.currFlipState) {\n                parent.points = extend([], parent.pointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = parent.points.length;\n                for (var l = 0; l < len; l++) {\n                    if (parent.points[l].y <= parent.img.destTop + (parent.img.destHeight / 2)) {\n                        parent.points[l].y = (parent.img.destTop + parent.img.destHeight) -\n                            (parent.points[l].y - parent.img.destTop);\n                    }\n                    else if (parent.points[l].y >= parent.img.destTop + (parent.img.destHeight / 2)) {\n                        parent.points[l].y = parent.img.destTop + (parent.img.destTop + parent.img.destHeight -\n                            parent.points[l].y);\n                    }\n                    parent.points[l].ratioX = (parent.points[l].x - parent.img.destLeft) / parent.img.destWidth;\n                    parent.points[l].ratioY = (parent.points[l].y - parent.img.destTop) / parent.img.destHeight;\n                }\n                parent.pointColl[n].shapeFlip = parent.transform.currFlipState;\n            }\n        }\n        // Update flip value for each points for cursor styles\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                if (this.selPointColl[n].shapeFlip !== parent.transform.currFlipState) {\n                    this.selPoints = extend([], this.selPointColl[n].points, []);\n                    this.pointCounter = 0;\n                    var len = this.selPoints.length;\n                    for (var l = 0; l < len; l++) {\n                        if (this.selPoints[l].y <= parent.img.destTop + (parent.img.destHeight / 2)) {\n                            this.selPoints[l].y = (parent.img.destTop + parent.img.destHeight) - (this.selPoints[l].y -\n                                parent.img.destTop);\n                        }\n                        else if (this.selPoints[l].y >= parent.img.destTop + (parent.img.destHeight / 2)) {\n                            this.selPoints[l].y = parent.img.destTop + (parent.img.destTop + parent.img.destHeight -\n                                this.selPoints[l].y);\n                        }\n                        this.selPoints[l].ratioX = (this.selPoints[l].x - parent.img.destLeft) / parent.img.destWidth;\n                        this.selPoints[l].ratioY = (this.selPoints[l].y - parent.img.destTop) / parent.img.destHeight;\n                    }\n                }\n            }\n        }\n        this.updateFHDCurPts();\n    };\n    FreehandDrawing.prototype.updateFHDColl = function () {\n        var parent = this.parent;\n        for (var i = 0; i < parent.objColl.length; i++) {\n            parent.objColl[i].imageRatio = { startX: ((parent.objColl[i].activePoint.startX - parent.img.destLeft) /\n                    parent.img.destWidth), startY: ((parent.objColl[i].activePoint.startY - parent.img.destTop) / parent.img.destHeight),\n                endX: ((parent.objColl[i].activePoint.endX - parent.img.destLeft) / parent.img.destWidth),\n                endY: ((parent.objColl[i].activePoint.endY - parent.img.destTop) / parent.img.destHeight),\n                width: parent.img.destWidth / parent.objColl[i].activePoint.width, height: parent.img.destHeight /\n                    parent.objColl[i].activePoint.height };\n            if (parent.objColl[i].shape === 'path') {\n                for (var j = 0; j < parent.objColl[i].pointColl.length; j++) {\n                    parent.objColl[i].pointColl[j].ratioX =\n                        (parent.objColl[i].pointColl[j].x - parent.img.destLeft) / parent.img.destWidth;\n                    parent.objColl[i].pointColl[j].ratioY =\n                        (parent.objColl[i].pointColl[j].y - parent.img.destTop) / parent.img.destHeight;\n                }\n            }\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        }\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            parent.points = extend([], parent.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = parent.points.length;\n            for (var l = 0; l < len; l++) {\n                parent.points[l].ratioX = (parent.points[l].x - parent.img.destLeft) / parent.img.destWidth;\n                parent.points[l].ratioY = (parent.points[l].y - parent.img.destTop) / parent.img.destHeight;\n            }\n        }\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                this.selPoints = extend([], this.selPointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = this.selPoints.length;\n                for (var l = 0; l < len; l++) {\n                    this.selPoints[l].ratioX = (this.selPoints[l].x - parent.img.destLeft) / parent.img.destWidth;\n                    this.selPoints[l].ratioY = (this.selPoints[l].y - parent.img.destTop) / parent.img.destHeight;\n                }\n            }\n        }\n    };\n    FreehandDrawing.prototype.panFHDColl = function (xDiff, yDiff, panRegion) {\n        var parent = this.parent;\n        // Updating point collection for panning\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            parent.points = extend([], parent.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = parent.points.length;\n            for (var l = 0; l < len; l++) {\n                if (panRegion === '' || panRegion === 'vertical') {\n                    parent.points[l].x += xDiff;\n                }\n                else {\n                    parent.points[l].x -= xDiff;\n                }\n                if (panRegion === '' || panRegion === 'horizontal') {\n                    parent.points[l].y += yDiff;\n                }\n                else {\n                    parent.points[l].y -= yDiff;\n                }\n            }\n        }\n        // Updating each points for cursor styles for panning\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                this.selPoints = extend([], this.selPointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = this.selPoints.length;\n                for (var l = 0; l < len; l++) {\n                    if (panRegion === '' || panRegion === 'vertical') {\n                        this.selPoints[l].x += xDiff;\n                    }\n                    else {\n                        this.selPoints[l].x -= xDiff;\n                    }\n                    if (panRegion === '' || panRegion === 'horizontal') {\n                        this.selPoints[l].y += yDiff;\n                    }\n                    else {\n                        this.selPoints[l].y -= yDiff;\n                    }\n                }\n            }\n        }\n        this.freehandRedraw(this.lowerContext, null);\n    };\n    FreehandDrawing.prototype.freeHandDraw = function (value) {\n        var parent = this.parent;\n        if (value) {\n            parent.points = [];\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.togglePen = true;\n            parent.upperCanvas.style.cursor = parent.cursor = 'crosshair';\n            parent.upperCanvas.style.display = 'block';\n            if (isNullOrUndefined(parent.activeObj.strokeSettings)) {\n                var obj = { strokeSettings: {} };\n                parent.notify('shape', { prop: 'getStrokeSettings', onPropertyChange: false,\n                    value: { obj: obj } });\n                parent.activeObj.strokeSettings = obj['strokeSettings'];\n            }\n            if (isNullOrUndefined(parent.activeObj.strokeSettings.strokeWidth)) {\n                parent.activeObj.strokeSettings.strokeWidth = 4;\n            }\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'pen',\n                        isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n            }\n            else {\n                parent.updateToolbar(parent.element, 'pen');\n            }\n        }\n        else {\n            parent.upperCanvas.style.cursor = parent.cursor = 'default';\n            parent.notify('shape', { prop: 'apply', onPropertyChange: false, value: { shape: null, obj: null, canvas: null } });\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n                parent.notify('toolbar', { prop: 'setCurrentToolbar', value: { type: 'main' } });\n            }\n            else {\n                parent.updateToolbar(parent.element, 'imageLoaded');\n            }\n            parent.notify('selection', { prop: 'setFreehandDrawCustomized', value: { isFreehandDrawCustomized: false } });\n        }\n    };\n    FreehandDrawing.prototype.isFHDIdx = function (index, obj) {\n        var isIndex = false;\n        for (var i = 0; i < this.parent.freehandCounter; i++) {\n            if (this.parent.pointColl[i].id &&\n                parseInt(this.parent.pointColl[i].id.split('_')[1], 10) - 1 === index) {\n                isIndex = true;\n                break;\n            }\n        }\n        if (obj) {\n            obj['isIndex'] = isIndex;\n        }\n        return isIndex;\n    };\n    FreehandDrawing.prototype.updateCropPtsForSel = function () {\n        var parent = this.parent;\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            var obj = { selPointColl: extend([], this.selPointColl) };\n            if (obj['selPointColl'][n]) {\n                this.selPoints = extend([], obj['selPointColl'][n].points, []);\n                this.pointCounter = 0;\n                var len = this.selPoints.length;\n                for (var l = 0; l < len; l++) {\n                    this.selPoints[l].ratioX = (this.selPoints[l].x -\n                        parent.activeObj.activePoint.startX) / parent.activeObj.activePoint.width;\n                    this.selPoints[l].ratioY = (this.selPoints[l].y -\n                        parent.activeObj.activePoint.startY) / parent.activeObj.activePoint.height;\n                }\n            }\n        }\n    };\n    return FreehandDrawing;\n}());\nexport { FreehandDrawing };\n","import { Browser, EventHandler, extend, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ZoomTrigger } from '../index';\nvar Selection = /** @class */ (function () {\n    function Selection(parent) {\n        this.diffPoint = { x: 0, y: 0 }; // updates resize points\n        this.oldPoint = {};\n        this.isTouch = false;\n        this.isObjSelected = false;\n        this.isFhdPoint = false; // Specifies whether mouse cursor is on freehand drawing point or not\n        this.dragPoint = { startX: 0, startY: 0, endX: 0, endY: 0 }; // updates drag start and end points in mousedown and mousemove\n        this.isShapeInserted = false;\n        this.tempActiveObj = { activePoint: { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 },\n            flipObjColl: [], triangle: [], triangleRatio: [] }; // for undo redo\n        this.isFirstMove = false; // for pinch zoom\n        this.startTouches = []; // for pinch zoom\n        this.tempTouches = []; // for pinch zoom\n        this.currMousePoint = { x: 0, y: 0 }; // To prevent mouse move event on pinch zoom\n        this.cursorTargetId = '';\n        this.isPreventDragging = false; // Shapes dragging is prevented when crop region is inside shape points\n        this.dragElement = '';\n        this.textRow = 1; // text area row count\n        this.mouseDownPoint = { x: 0, y: 0 };\n        this.previousPoint = { x: 0, y: 0 }; // updates prev x and y points in mouseMove\n        this.zoomType = 'Toolbar';\n        this.isInitialTextEdited = false;\n        this.dragCanvas = false;\n        this.isFhdCustomized = false;\n        this.touchEndPoint = {};\n        this.isFhdEditing = false; // Specifies whether freehand drawing is in editing mode or not\n        this.currentDrawingShape = '';\n        this.initialPrevObj = {};\n        this.touchTime = 0;\n        this.resizedElement = '';\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Selection.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Selection.prototype.addEventListener = function () {\n        this.parent.on('selection', this.selection, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Selection.prototype.removeEventListener = function () {\n        this.parent.off('selection', this.selection);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Selection.prototype.selection = function (args) {\n        var _this = this;\n        this.updatePrivateVariables();\n        switch (args.prop) {\n            case 'mouse-up':\n                this.selMouseUpEvent();\n                break;\n            case 'setCursor':\n                this.setCursor(args.value['x'], args.value['y']);\n                break;\n            case 'updateActivePoint':\n                this.updateActivePoint(args.value['x'], args.value['y'], args.value['isCropSelection']);\n                break;\n            case 'updateCursorStyles':\n                this.updateCursorStyles(args.value['x'], args.value['y'], args.value['type']);\n                break;\n            case 'setTextSelection':\n                this.setTextSelection(args.value['width'], args.value['height']);\n                break;\n            case 'setActivePoint':\n                this.setActivePoint(args.value['startX'], args.value['startY']);\n                break;\n            case 'clearSelection':\n                this.clearSelection();\n                break;\n            case 'calcShapeRatio':\n                this.calcShapeRatio(args.value['x'], args.value['y'], args.value['imgWidth'], args.value['imgHeight']);\n                break;\n            case 'applyCurrShape':\n                this.applyCurrShape(args.value['isShapeClick']);\n                break;\n            case 'tab':\n                this.performTabAction();\n                break;\n            case 'setDragDirection':\n                this.setDragDirection(args.value['width'], args.value['height']);\n                break;\n            case 'clearUpperCanvas':\n                if (this.isTouch) {\n                    setTimeout(function () {\n                        _this.parent.upperCanvas.getContext('2d').clearRect(0, 0, _this.parent.upperCanvas.width, _this.parent.upperCanvas.height);\n                    }, 550);\n                }\n                break;\n            case 'resetFreehandDrawVariables':\n                this.isFhdEditing = this.isFhdPoint = false;\n                break;\n            case 'isShapeInserted':\n                this.isShapeInserted = args.value['bool'];\n                break;\n            case 'redrawShape':\n                this.redrawShape(args.value['obj']);\n                break;\n            case 'setTextBoxStylesToActObj':\n                this.setTextBoxStylesToActObj();\n                break;\n            case 'mouseDownEventHandler':\n                this.mouseDownEventHandler(args.value['e']);\n                break;\n            case 'mouseMoveEventHandler':\n                this.mouseMoveEventHandler(args.value['e']);\n                break;\n            case 'mouseUpEventHandler':\n                this.mouseUpEventHandler(args.value['e']);\n                break;\n            case 'canvasMouseDownHandler':\n                this.canvasMouseDownHandler(args.value['e']);\n                break;\n            case 'canvasMouseMoveHandler':\n                this.canvasMouseMoveHandler(args.value['e']);\n                break;\n            case 'canvasMouseUpHandler':\n                this.canvasMouseUpHandler(args.value['e']);\n                break;\n            case 'touchStartHandler':\n                this.touchStartHandler(args.value['e']);\n                break;\n            case 'keyDownEventHandler':\n                this.keyDownEventHandler(args.value['e']);\n                break;\n            case 'handleScroll':\n                this.handleScroll(args.value['e']);\n                break;\n            case 'textKeyDown':\n                setTimeout(this.textKeyDown.bind(this), 1, args.value['e']);\n                break;\n            case 'deleteItem':\n                this.deleteItem();\n                break;\n            case 'updatePrevShapeSettings':\n                this.updatePrevShapeSettings(args.value['obj']);\n                break;\n            case 'getZoomType':\n                args.value['obj']['zoomType'] = this.zoomType;\n                break;\n            case 'setZoomType':\n                this.zoomType = args.value['zoomType'];\n                break;\n            case 'setInitialTextEdit':\n                this.isInitialTextEdited = args.value['bool'];\n                break;\n            case 'setDragCanvas':\n                this.dragCanvas = args.value['bool'];\n                break;\n            case 'setFreehandDrawCustomized':\n                this.isFhdCustomized = args.value['isFreehandDrawCustomized'];\n                break;\n            case 'setTouchEndPoint':\n                this.touchEndPoint.x = args.value['x'];\n                this.touchEndPoint.y = args.value['y'];\n                break;\n            case 'getPanDown':\n                args.value['obj']['panDown'] = this.panDown;\n                break;\n            case 'setPanDown':\n                this.panDown = args.value['panDown'];\n                break;\n            case 'getFreehandDrawEditing':\n                args.value['obj']['bool'] = this.isFhdEditing;\n                break;\n            case 'setFreehandDrawEditing':\n                this.isFhdEditing = args.value['bool'];\n                break;\n            case 'getTempActObj':\n                args.value['obj']['tempObj'] = this.tempActiveObj;\n                break;\n            case 'setTempActObj':\n                this.tempActiveObj = args.value['obj'];\n                break;\n            case 'isInside':\n                this.isInside(args.value['x'], args.value['y'], args.value['z1'], args.value['z2'], args.value['z3'], args.value['z4']);\n                break;\n            case 'setDragElement':\n                this.dragElement = args.value['value'];\n                break;\n            case 'setObjSelected':\n                this.isObjSelected = args.value['bool'];\n                break;\n            case 'adjustActObjForLineArrow':\n                this.adjustActObjForLineArrow(args.value['obj']);\n                break;\n            case 'findTarget':\n                this.findTarget(args.value['x'], args.value['y'], args.value['type']);\n                break;\n            case 'getCurrentFlipState':\n                this.getCurrentFlipState();\n                break;\n            case 'setDragWidth':\n                this.setDragWidth(args.value['width']);\n                break;\n            case 'setDragHeight':\n                this.setDragHeight(args.value['setDragHeight']);\n                break;\n            case 'annotate':\n                this.currentDrawingShape = args.value['shape'];\n                if (args.value['shape'] === 'text') {\n                    this.parent.activeObj.textSettings.fontSize = 100;\n                    this.parent.activeObj.keyHistory = 'Enter Text';\n                    this.parent.notify('shape', { prop: 'initializeTextShape', onPropertyChange: false,\n                        value: { text: null, fontFamily: null, fontSize: null, bold: null, italic: null, strokeColor: null } });\n                }\n                else if (args.value['shape'] === 'path') {\n                    this.parent.activeObj.pointColl = [];\n                }\n                break;\n            case 'getCurrentDrawingShape':\n                args.value['obj']['shape'] = this.currentDrawingShape;\n                break;\n            case 'setCurrentDrawingShape':\n                this.currentDrawingShape = args.value['value'];\n                break;\n            case 'getTransRotationPoint':\n                this.getTransRotationPoint(args.value['obj'], args.value['object']);\n                break;\n            case 'adjustNEPoints':\n                this.adjustNEPoints(args.value['rectangle'], args.value['x'], args.value['y'], args.value['angle']);\n                break;\n            case 'adjustRotationPoints':\n                this.adjustRotationPoints(args.value['rectangle'], args.value['x'], args.value['y'], args.value['angle']);\n                break;\n            case 'getResizeDirection':\n                this.getResizeDirection(args.value['rectangle'], args.value['x'], args.value['y'], args.value['angle']);\n                break;\n            case 'setResizedElement':\n                this.resizedElement = args.value['value'];\n                break;\n            case 'reset':\n                this.reset();\n                break;\n        }\n    };\n    Selection.prototype.getModuleName = function () {\n        return 'selection';\n    };\n    Selection.prototype.updatePrivateVariables = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n        if (parent.upperCanvas) {\n            this.upperContext = parent.upperCanvas.getContext('2d');\n        }\n    };\n    Selection.prototype.reset = function () {\n        this.diffPoint = { x: 0, y: 0 };\n        this.oldPoint = {};\n        this.isTouch = this.isObjSelected = this.isFhdPoint = this.isShapeInserted = false;\n        this.dragPoint = { startX: 0, startY: 0, endX: 0, endY: 0 };\n        this.tempActiveObj = { activePoint: { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 },\n            flipObjColl: [], triangle: [], triangleRatio: [] };\n        this.isFirstMove = false;\n        this.cursorTargetId = this.dragElement = '';\n        this.startTouches = [];\n        this.tempTouches = [];\n        this.currMousePoint = { x: 0, y: 0 };\n        this.isPreventDragging = false;\n        this.timer = undefined;\n        this.tempObjColl = undefined;\n        this.textRow = 1;\n        this.mouseDownPoint = { x: 0, y: 0 };\n        this.previousPoint = { x: 0, y: 0 };\n        this.zoomType = 'Toolbar';\n        this.isInitialTextEdited = false;\n        this.dragCanvas = false;\n        this.isFhdCustomized = false;\n        this.touchEndPoint = {};\n        this.panDown = null;\n        this.isFhdEditing = false;\n        this.pathAdjustedIndex = null;\n        this.touchTime = 0;\n        this.currentDrawingShape = '';\n        this.initialPrevObj = {};\n        this.resizedElement = '';\n    };\n    Selection.prototype.performTabAction = function () {\n        if (this.parent.textArea.style.display === 'block') {\n            var allowUndoRedoPush = this.applyCurrShape(false);\n            this.parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n            if (allowUndoRedoPush) {\n                this.parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n        }\n    };\n    Selection.prototype.selMouseUpEvent = function () {\n        this.oldPoint.x = undefined;\n        this.oldPoint.y = undefined;\n    };\n    Selection.prototype.getMouseCursor = function (actObj, x, y, isCropSelection, isApply) {\n        var rotationCirclePoint = this.getTransRotationPoint(actObj);\n        var cursor = 'default';\n        var ratio = isApply ? 0 : ((actObj.topLeftCircle.radius * 2));\n        if (x >= (actObj.topLeftCircle.startX - ratio) &&\n            x <= (actObj.topLeftCircle.startX + ratio) &&\n            y >= (actObj.topLeftCircle.startY - ratio) &&\n            y <= (actObj.topLeftCircle.startY + ratio)) {\n            cursor = 'nw-resize';\n        }\n        else if (x >= (actObj.topLeftCircle.startX - ratio) &&\n            x <= (actObj.topRightCircle.startX - ratio) &&\n            y >= (actObj.topCenterCircle.startY - ratio) &&\n            y <= (actObj.topCenterCircle.startY + ratio)) {\n            cursor = 'n-resize';\n        }\n        else if (x >= (actObj.topRightCircle.startX - ratio) &&\n            x <= (actObj.topRightCircle.startX + ratio) &&\n            y >= (actObj.topRightCircle.startY - ratio) &&\n            y <= (actObj.topRightCircle.startY + ratio)) {\n            cursor = 'ne-resize';\n        }\n        else if (x >= (actObj.centerLeftCircle.startX - ratio) &&\n            x <= (actObj.centerLeftCircle.startX + ratio) &&\n            y >= (actObj.topLeftCircle.startY - ratio) &&\n            y <= (actObj.bottomLeftCircle.startY - ratio)) {\n            cursor = 'w-resize';\n        }\n        else if (x >= (actObj.centerRightCircle.startX - ratio) &&\n            x <= (actObj.centerRightCircle.startX + ratio) &&\n            y >= (actObj.topRightCircle.startY - ratio) &&\n            y <= (actObj.bottomRightCircle.startY - ratio)) {\n            cursor = 'e-resize';\n        }\n        else if (x >= (actObj.bottomLeftCircle.startX - ratio) &&\n            x <= (actObj.bottomLeftCircle.startX + ratio) &&\n            y >= (actObj.bottomLeftCircle.startY - ratio) &&\n            y <= (actObj.bottomLeftCircle.startY + ratio)) {\n            cursor = 'sw-resize';\n        }\n        else if (x >= (actObj.bottomLeftCircle.startX - ratio) &&\n            x <= (actObj.bottomRightCircle.startX - ratio) &&\n            y >= (actObj.bottomCenterCircle.startY - ratio) &&\n            y <= (actObj.bottomCenterCircle.startY + ratio)) {\n            cursor = 's-resize';\n        }\n        else if (x >= (actObj.bottomRightCircle.startX - ratio) &&\n            x <= (actObj.bottomRightCircle.startX + ratio) &&\n            y >= (actObj.bottomRightCircle.startY - ratio) &&\n            y <= (actObj.bottomRightCircle.startY + ratio)) {\n            cursor = 'se-resize';\n        }\n        else if ((x >= actObj.activePoint.startX &&\n            x <= actObj.activePoint.endX) && (y >= actObj.activePoint.startY &&\n            y <= actObj.activePoint.endY)) {\n            if (isCropSelection) {\n                cursor = 'grab';\n            }\n            else {\n                cursor = 'move';\n            }\n        }\n        else if (rotationCirclePoint && !isApply &&\n            x >= (rotationCirclePoint.x - (actObj.bottomCenterCircle.radius + 2)) &&\n            x <= rotationCirclePoint.x + (actObj.bottomCenterCircle.radius + 2) &&\n            y >= rotationCirclePoint.y - (actObj.bottomCenterCircle.radius + 2) &&\n            y <= rotationCirclePoint.y + (actObj.bottomCenterCircle.radius + 2)) {\n            cursor = 'grabbing';\n        }\n        else {\n            cursor = 'default';\n        }\n        return cursor;\n    };\n    Selection.prototype.setCursor = function (x, y) {\n        var parent = this.parent;\n        var lowerCanvas = document.querySelector('#' + parent.element.id + '_lowerCanvas');\n        var upperCanvas = document.querySelector('#' + parent.element.id + '_upperCanvas');\n        var isCropSelection = false;\n        var splitWords;\n        if (this.currentDrawingShape !== '') {\n            upperCanvas.style.cursor = parent.cursor = 'crosshair';\n            return;\n        }\n        if (parent.currObjType.isDragging) {\n            if (this.dragElement === '') {\n                upperCanvas.style.cursor = parent.cursor = 'move';\n            }\n            else {\n                upperCanvas.style.cursor = parent.cursor = this.dragElement;\n            }\n            return;\n        }\n        if (parent.activeObj.horTopLine !== undefined) {\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (splitWords === undefined && parent.currObjType.isCustomCrop) {\n                isCropSelection = true;\n            }\n            else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                isCropSelection = true;\n            }\n            if (!isCropSelection && parent.togglePan) {\n                lowerCanvas.style.cursor = upperCanvas.style.cursor = parent.cursor = 'grab';\n            }\n            var cursor = upperCanvas.style.cursor;\n            var actObj = extend({}, parent.activeObj, {}, true);\n            this.cursorTargetId = actObj.currIndex;\n            var degree = void 0;\n            if (actObj.shapeDegree === 0) {\n                degree = parent.transform.degree;\n            }\n            else {\n                degree = parent.transform.degree - actObj.shapeDegree;\n            }\n            if (degree < 0) {\n                degree = 360 + degree;\n            }\n            if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n                this.setCursorForLineArrow(actObj, x, y, upperCanvas);\n            }\n            else if (actObj.shape === 'path') {\n                this.setCursorForPath(actObj, x, y, upperCanvas);\n            }\n            else if (!isNullOrUndefined(actObj.rotatedAngle) && actObj.rotatedAngle !== 0) {\n                this.setCursorForRotatedObject(actObj, x, y, upperCanvas);\n            }\n            else {\n                upperCanvas.style.cursor = parent.cursor = this.getMouseCursor(actObj, x, y, isCropSelection, false);\n                if ((actObj.shape === 'text') && (parent.cursor === 'n-resize' ||\n                    parent.cursor === 's-resize' || parent.cursor === 'e-resize' ||\n                    parent.cursor === 'w-resize')) {\n                    upperCanvas.style.cursor = parent.cursor = 'move';\n                }\n            }\n            if (cursor === 'default' && parent.cursor === 'default' && isCropSelection) {\n                upperCanvas.style.cursor = parent.cursor = 'grab';\n            }\n            if (cursor === 'grab' && parent.cursor === 'default') {\n                upperCanvas.style.cursor = parent.cursor = 'grab';\n            }\n        }\n        else if (parent.togglePan && !parent.togglePen) {\n            lowerCanvas.style.cursor = upperCanvas.style.cursor = parent.cursor = 'grab';\n        }\n        else {\n            if (parent.currObjType.isCustomCrop || parent.togglePen) {\n                upperCanvas.style.cursor = parent.cursor = 'crosshair';\n            }\n            else {\n                upperCanvas.style.cursor = parent.cursor = 'default';\n            }\n        }\n        if (parent.cursor === 'default' || parent.cursor === 'grab') {\n            var cursor = upperCanvas.style.cursor;\n            if (parent.objColl.length > 0 && (parent.cursor !== 'grab' || !isCropSelection)) {\n                this.setCursorFromObj(x, y, parent.objColl, upperCanvas, isCropSelection);\n            }\n            if (cursor === 'grab' && parent.cursor === 'default') {\n                upperCanvas.style.cursor = parent.cursor = 'grab';\n            }\n        }\n        if ((parent.cursor === 'default' || parent.cursor === 'grab')\n            && parent.pointColl[0] && (parent.cursor !== 'grab' || !isCropSelection)\n            && !parent.currObjType.isDragging && !parent.currObjType.isResize) {\n            this.setCursorForFreehandDrawing(x, y, upperCanvas);\n        }\n    };\n    Selection.prototype.setCursorForPath = function (actObj, x, y, upperCanvas) {\n        this.setCursorForLineArrow(actObj, x, y, upperCanvas);\n        var parent = this.parent;\n        if (parent.cursor === 'default') {\n            var obj = extend({}, actObj, null, true);\n            var isMove = false;\n            for (var i = 1; i < actObj.pointColl.length; i++) {\n                if (isMove) {\n                    break;\n                }\n                obj.activePoint.startX = actObj.pointColl[i - 1].x;\n                obj.activePoint.startY = actObj.pointColl[i - 1].y;\n                obj.activePoint.endX = actObj.pointColl[i].x;\n                obj.activePoint.endY = actObj.pointColl[i].y;\n                parent.notify('shape', { prop: 'setPointCollForLineArrow', onPropertyChange: false,\n                    value: { obj: obj } });\n                for (var j = 0; j < obj.pointColl.length; j++) {\n                    var point = obj.pointColl[j];\n                    if (!isNullOrUndefined(point.x - (actObj.topLeftCircle.radius * 2)) &&\n                        !isNullOrUndefined(point.x + (actObj.topLeftCircle.radius * 2)) &&\n                        !isNullOrUndefined(point.y - (actObj.topLeftCircle.radius * 2)) &&\n                        !isNullOrUndefined(point.y + (actObj.topLeftCircle.radius * 2)) &&\n                        x >= (point.x - (actObj.topLeftCircle.radius * 2)) &&\n                        x <= (point.x + (actObj.topLeftCircle.radius * 2)) &&\n                        y >= (point.y - (actObj.topLeftCircle.radius * 2)) &&\n                        y <= (point.y + (actObj.topLeftCircle.radius * 2))) {\n                        upperCanvas.style.cursor = parent.cursor = 'move';\n                        isMove = true;\n                        break;\n                    }\n                    else {\n                        upperCanvas.style.cursor = parent.cursor = 'default';\n                    }\n                }\n            }\n        }\n        return parent.cursor;\n    };\n    Selection.prototype.setCursorForLineArrow = function (actObj, x, y, upperCanvas) {\n        var index;\n        for (var i = 0; i < actObj.pointColl.length; i++) {\n            var point = actObj.pointColl[i];\n            if (x >= (point.x - (actObj.topLeftCircle.radius * 2)) && x <= (point.x + (actObj.topLeftCircle.radius * 2)) &&\n                y >= (point.y - (actObj.topLeftCircle.radius * 2)) && y <= (point.y + (actObj.topLeftCircle.radius * 2))) {\n                upperCanvas.style.cursor = this.parent.cursor = 'move';\n                index = i;\n                break;\n            }\n            else {\n                upperCanvas.style.cursor = this.parent.cursor = 'default';\n            }\n        }\n        return index;\n    };\n    Selection.prototype.setCursorForRotatedObject = function (actObj, x, y, upperCanvas) {\n        this.resizedElement = '';\n        var parent = this.parent;\n        if (x >= (actObj.horTopLinePointColl[0].x - (actObj.bottomCenterCircle.radius + 2)) &&\n            x <= (actObj.horTopLinePointColl[0].x + (actObj.bottomCenterCircle.radius + 2)) &&\n            y >= (actObj.horTopLinePointColl[0].y - (actObj.bottomCenterCircle.radius + 2)) &&\n            y <= (actObj.horTopLinePointColl[0].y + (actObj.bottomCenterCircle.radius + 2))) {\n            upperCanvas.style.cursor = parent.cursor = 'nw-resize';\n        }\n        else if (x >= (actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length / 2)].x - 5) &&\n            x <= (actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length / 2)].x + 5) &&\n            y >= (actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length / 2)].y - 5) &&\n            y <= (actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length / 2)].y + 5)) {\n            upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'n-resize';\n        }\n        else if (x >= (actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length - 1)].x -\n            (actObj.bottomCenterCircle.radius + 2)) &&\n            x <= (actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length - 1)].x +\n                (actObj.bottomCenterCircle.radius + 2)) &&\n            y >= (actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length - 1)].y -\n                (actObj.bottomCenterCircle.radius + 2)) &&\n            y <= (actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length - 1)].y +\n                (actObj.bottomCenterCircle.radius + 2))) {\n            upperCanvas.style.cursor = parent.cursor = 'ne-resize';\n        }\n        else if (x >= (actObj.verLeftLinePointColl[Math.round(actObj.verLeftLinePointColl.length / 2)].x - 5) &&\n            x <= (actObj.verLeftLinePointColl[Math.round(actObj.verLeftLinePointColl.length / 2)].x + 5) &&\n            y >= (actObj.verLeftLinePointColl[Math.round(actObj.verLeftLinePointColl.length / 2)].y - 5)\n            && y <= (actObj.verLeftLinePointColl[Math.round(actObj.verLeftLinePointColl.length / 2)].y + 5)) {\n            upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'w-resize';\n        }\n        else if (x >= (actObj.verRightLinePointColl[Math.round(actObj.verRightLinePointColl.length / 2)].x - 5) &&\n            x <= (actObj.verRightLinePointColl[Math.round(actObj.verRightLinePointColl.length / 2)].x + 5)\n            && y >= (actObj.verRightLinePointColl[Math.round(actObj.verRightLinePointColl.length / 2)].y - 5) &&\n            y <= (actObj.verRightLinePointColl[Math.round(actObj.verRightLinePointColl.length / 2)].y + 5)) {\n            upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'e-resize';\n        }\n        else if (x >= (actObj.horBottomLinePointColl[0].x - (actObj.bottomCenterCircle.radius + 2)) &&\n            x <= (actObj.horBottomLinePointColl[0].x + (actObj.bottomCenterCircle.radius + 2)) &&\n            y >= (actObj.horBottomLinePointColl[0].y - (actObj.bottomCenterCircle.radius + 2)) &&\n            y <= (actObj.horBottomLinePointColl[0].y + (actObj.bottomCenterCircle.radius + 2))) {\n            upperCanvas.style.cursor = parent.cursor = 'sw-resize';\n        }\n        else if (x >= (actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length / 2)].x - 5) &&\n            x <= (actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length / 2)].x + 5) &&\n            y >= (actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length / 2)].y - 5) &&\n            y <= (actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length / 2)].y + 5)) {\n            upperCanvas.style.cursor = parent.cursor = this.resizedElement = 's-resize';\n        }\n        else if (x >= (actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length - 1)].x -\n            (actObj.bottomCenterCircle.radius + 2)) &&\n            x <= (actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length - 1)].x +\n                (actObj.bottomCenterCircle.radius + 2)) &&\n            y >= (actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length - 1)].y -\n                (actObj.bottomCenterCircle.radius + 2)) &&\n            y <= (actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length - 1)].y +\n                (actObj.bottomCenterCircle.radius + 2))) {\n            upperCanvas.style.cursor = parent.cursor = 'se-resize';\n        }\n        else if (actObj.rotationCirclePointColl &&\n            x >= (actObj.rotationCirclePointColl.x - (actObj.bottomCenterCircle.radius + 2)) &&\n            x <= actObj.rotationCirclePointColl.x + (actObj.bottomCenterCircle.radius + 2) &&\n            y >= actObj.rotationCirclePointColl.y - (actObj.bottomCenterCircle.radius + 2) &&\n            y <= actObj.rotationCirclePointColl.y + (actObj.bottomCenterCircle.radius + 2)) {\n            upperCanvas.style.cursor = parent.cursor = 'grabbing';\n        }\n        else {\n            upperCanvas.style.cursor = parent.cursor = 'default';\n            var isPointsInsideRectangle = this.getRectanglePoints(actObj.activePoint.startX, actObj.activePoint.startY, actObj.activePoint.width, actObj.activePoint.height, actObj.rotatedAngle * (180 / Math.PI), x, y);\n            if (isPointsInsideRectangle) {\n                upperCanvas.style.cursor = parent.cursor = 'move';\n            }\n        }\n        if (parent.cursor === 'default') {\n            for (var i = 0, len = actObj.horTopLinePointColl.length; i < len; i++) {\n                if (x >= (actObj.horTopLinePointColl[i].x - 5) &&\n                    x <= (actObj.horTopLinePointColl[i].x + 5) &&\n                    y >= (actObj.horTopLinePointColl[i].y - 5) &&\n                    y <= (actObj.horTopLinePointColl[i].y + 5)) {\n                    upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'n-resize';\n                    break;\n                }\n            }\n        }\n        if (parent.cursor === 'default') {\n            for (var i = 0, len = actObj.horBottomLinePointColl.length; i < len; i++) {\n                if (x >= (actObj.horBottomLinePointColl[i].x - 5) &&\n                    x <= (actObj.horBottomLinePointColl[i].x + 5) &&\n                    y >= (actObj.horBottomLinePointColl[i].y - 5) &&\n                    y <= (actObj.horBottomLinePointColl[i].y + 5)) {\n                    upperCanvas.style.cursor = parent.cursor = this.resizedElement = 's-resize';\n                    break;\n                }\n            }\n        }\n        if (parent.cursor === 'default') {\n            for (var i = 0, len = actObj.verLeftLinePointColl.length; i < len; i++) {\n                if (x >= (actObj.verLeftLinePointColl[i].x - 5) &&\n                    x <= (actObj.verLeftLinePointColl[i].x + 5) &&\n                    y >= (actObj.verLeftLinePointColl[i].y - 5) &&\n                    y <= (actObj.verLeftLinePointColl[i].y + 5)) {\n                    upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'w-resize';\n                    break;\n                }\n            }\n        }\n        if (parent.cursor === 'default') {\n            for (var i = 0, len = actObj.verRightLinePointColl.length; i < len; i++) {\n                if (x >= (actObj.verRightLinePointColl[i].x - 5) &&\n                    x <= (actObj.verRightLinePointColl[i].x + 5) &&\n                    y >= (actObj.verRightLinePointColl[i].y - 5) &&\n                    y <= (actObj.verRightLinePointColl[i].y + 5)) {\n                    upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'e-resize';\n                    break;\n                }\n            }\n        }\n        this.adjustCursorStylesForRotatedState(actObj);\n        return parent.cursor;\n    };\n    Selection.prototype.adjustCursorStylesForRotatedState = function (actObj) {\n        var parent = this.parent;\n        var length = actObj.rotatedAngle * (180 / Math.PI);\n        length = length > 0 ? Math.floor(length) : Math.ceil(length);\n        if ((length >= 92 && length <= 182) || (length >= -178 && length <= -88)) {\n            var cursorMap = { 'nw-resize': 'ne-resize', 'n-resize': 's-resize',\n                'ne-resize': 'nw-resize', 'w-resize': 'e-resize', 'e-resize': 'w-resize',\n                'sw-resize': 'se-resize', 's-resize': 'n-resize', 'se-resize': 'sw-resize'\n            };\n            if (parent.cursor in cursorMap) {\n                parent.cursor = cursorMap[parent.cursor];\n            }\n        }\n        parent.upperCanvas.style.cursor = this.getResizeElement((actObj.rotatedAngle * (180 / Math.PI)), parent.cursor);\n        return parent.cursor;\n    };\n    Selection.prototype.getResizeElement = function (degree, element) {\n        var resizeMappings = [];\n        if (element === 'nw-resize') {\n            resizeMappings = [\n                [337.5, 22.5, 'nw-resize'], [22.5, 67.5, 'n-resize'], [67.5, 112.5, 'ne-resize'],\n                [112.5, 157.5, 'e-resize'], [157.5, 202.5, 'se-resize'],\n                [202.5, 247.5, 's-resize'], [247.5, 292.5, 'sw-resize'],\n                [292.5, 337.5, 'w-resize']\n            ];\n        }\n        else if (element === 'n-resize') {\n            resizeMappings = [\n                [337.5, 22.5, 'n-resize'], [22.5, 67.5, 'ne-resize'], [67.5, 112.5, 'e-resize'],\n                [112.5, 157.5, 'se-resize'], [157.5, 202.5, 's-resize'], [202.5, 247.5, 'sw-resize'],\n                [247.5, 292.5, 'w-resize'], [292.5, 337.5, 'nw-resize']\n            ];\n        }\n        else if (element === 'ne-resize') {\n            resizeMappings = [\n                [337.5, 22.5, 'ne-resize'], [22.5, 67.5, 'e-resize'],\n                [67.5, 112.5, 'se-resize'], [112.5, 157.5, 's-resize'], [157.5, 202.5, 'sw-resize'],\n                [202.5, 247.5, 'w-resize'], [247.5, 292.5, 'nw-resize'], [292.5, 337.5, 'n-resize']\n            ];\n        }\n        else if (element === 'e-resize') {\n            resizeMappings = [\n                [337.5, 22.5, 'e-resize'], [22.5, 67.5, 'se-resize'], [67.5, 112.5, 's-resize'],\n                [112.5, 157.5, 'sw-resize'], [157.5, 202.5, 'w-resize'], [202.5, 247.5, 'nw-resize'],\n                [247.5, 292.5, 'n-resize'], [292.5, 337.5, 'ne-resize']\n            ];\n        }\n        else if (element === 'se-resize') {\n            resizeMappings = [\n                [337.5, 22.5, 'se-resize'], [22.5, 67.5, 's-resize'], [67.5, 112.5, 'sw-resize'],\n                [112.5, 157.5, 'w-resize'], [157.5, 202.5, 'nw-resize'], [202.5, 247.5, 'n-resize'],\n                [247.5, 292.5, 'ne-resize'], [292.5, 337.5, 'e-resize']\n            ];\n        }\n        else if (element === 's-resize') {\n            resizeMappings = [\n                [337.5, 22.5, 's-resize'], [22.5, 67.5, 'sw-resize'], [67.5, 112.5, 'w-resize'],\n                [112.5, 157.5, 'nw-resize'], [157.5, 202.5, 'n-resize'], [202.5, 247.5, 'ne-resize'],\n                [247.5, 292.5, 'e-resize'], [292.5, 337.5, 'se-resize']\n            ];\n        }\n        else if (element === 'sw-resize') {\n            resizeMappings = [\n                [337.5, 22.5, 'sw-resize'], [22.5, 67.5, 'w-resize'], [67.5, 112.5, 'nw-resize'],\n                [112.5, 157.5, 'n-resize'], [157.5, 202.5, 'ne-resize'], [202.5, 247.5, 'e-resize'],\n                [247.5, 292.5, 'se-resize'], [292.5, 337.5, 's-resize']\n            ];\n        }\n        else if (element === 'w-resize') {\n            resizeMappings = [\n                [337.5, 22.5, 'w-resize'], [22.5, 67.5, 'nw-resize'], [67.5, 112.5, 'n-resize'],\n                [112.5, 157.5, 'ne-resize'], [157.5, 202.5, 'e-resize'], [202.5, 247.5, 'se-resize'],\n                [247.5, 292.5, 's-resize'], [292.5, 337.5, 'sw-resize']\n            ];\n        }\n        var positiveDegree = degree < 0 ? 360 - Math.abs(degree) : degree;\n        for (var _i = 0, resizeMappings_1 = resizeMappings; _i < resizeMappings_1.length; _i++) {\n            var _a = resizeMappings_1[_i], startDegree = _a[0], endDegree = _a[1], resizeElement = _a[2];\n            if ((positiveDegree > startDegree && positiveDegree <= endDegree) ||\n                (positiveDegree + 360 > startDegree && positiveDegree + 360 <= endDegree)) {\n                return resizeElement;\n            }\n        }\n        return element;\n    };\n    Selection.prototype.setCursorForFreehandDrawing = function (x, y, upperCanvas) {\n        var upperContext = upperCanvas.getContext('2d');\n        var parent = this.parent;\n        var textArea = document.querySelector('#' + parent.element.id + '_textArea');\n        var isEntered = false;\n        parent.notify('freehand-draw', { prop: 'setFreehandDrawHoveredIndex', onPropertyChange: false,\n            value: { index: -1 } });\n        var sPoints;\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            var obj = { selPointColl: {} };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false, value: { obj: obj } });\n            sPoints = extend([], obj['selPointColl'][n].points, []);\n            parent.points = extend([], parent.pointColl[n].points, []);\n            parent.notify('freehand-draw', { prop: 'setPointCounter', onPropertyChange: false, value: { value: 0 } });\n            var len = sPoints.length;\n            for (var l = 0; l < len; l++) {\n                if (l !== 0) {\n                    var isInside = false;\n                    if (sPoints[l - 1] && sPoints[l]) {\n                        isInside = this.isInside(x, y, sPoints[l - 1].x, sPoints[l - 1].y, sPoints[l].x, sPoints[l].y);\n                    }\n                    if (isInside) {\n                        this.isFhdPoint = true;\n                        parent.notify('freehand-draw', { prop: 'setFreehandDrawHoveredIndex', onPropertyChange: false,\n                            value: { index: n } });\n                        parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                            value: { strokeColor: null, strokeWidth: null } });\n                        upperCanvas.style.cursor = parent.cursor = 'pointer';\n                        isEntered = true;\n                        break;\n                    }\n                    else if (!this.isFhdEditing || parent.pointColl[n].isSelected) {\n                        if (this.isFhdPoint || this.isFhdEditing) {\n                            upperContext.clearRect(0, 0, upperCanvas.width, upperCanvas.height);\n                            if (parent.activeObj.shape && textArea.style.display === 'none') {\n                                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n                            }\n                        }\n                        if (this.isFhdEditing) {\n                            var strokeColor = parent.pointColl[n].strokeColor;\n                            parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                                value: { strokeColor: strokeColor, strokeWidth: parent.pointColl[n].strokeWidth } });\n                        }\n                        else {\n                            parent.notify('freehand-draw', { prop: 'setFreehandDrawHoveredIndex', onPropertyChange: false,\n                                value: { index: null } });\n                        }\n                        this.isFhdPoint = false;\n                    }\n                }\n                else {\n                    if (x > parent.points[l].x - parent.pointColl[n].strokeWidth &&\n                        x < parent.points[l].x + parent.pointColl[n].strokeWidth &&\n                        y > parent.points[l].y - parent.pointColl[n].strokeWidth &&\n                        y < parent.points[l].y + parent.pointColl[n].strokeWidth) {\n                        this.isFhdPoint = true;\n                        parent.notify('freehand-draw', { prop: 'setFreehandDrawHoveredIndex', onPropertyChange: false,\n                            value: { index: n } });\n                        parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                            value: { strokeColor: null, strokeWidth: null } });\n                        upperCanvas.style.cursor = parent.cursor = 'pointer';\n                        isEntered = true;\n                        break;\n                    }\n                    else if (!this.isFhdEditing || parent.pointColl[n].isSelected) {\n                        if (this.isFhdPoint || this.isFhdEditing) {\n                            upperContext.clearRect(0, 0, upperCanvas.width, upperCanvas.height);\n                            if (parent.activeObj.shape && textArea.style.display === 'none') {\n                                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n                            }\n                        }\n                        if (this.isFhdEditing) {\n                            var strokeColor = parent.pointColl[n].strokeColor;\n                            parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                                value: { strokeColor: strokeColor, strokeWidth: parent.pointColl[n].strokeWidth } });\n                        }\n                        this.isFhdPoint = false;\n                    }\n                }\n            }\n            if (isEntered) {\n                break;\n            }\n        }\n    };\n    Selection.prototype.setCursorFromObj = function (x, y, obj, upperCanvas, isCropSelection) {\n        var parent = this.parent;\n        for (var i = 0, len = obj.length; i < len; i++) {\n            if (parent.cursor === 'move') {\n                return;\n            }\n            var actObj = extend({}, obj[i], {}, true);\n            this.cursorTargetId = actObj.currIndex;\n            if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n                this.setCursorForLineArrow(actObj, x, y, upperCanvas);\n            }\n            else if (actObj.shape === 'path') {\n                this.setCursorForPath(actObj, x, y, upperCanvas);\n            }\n            else if (!isNullOrUndefined(actObj.rotatedAngle) && actObj.rotatedAngle !== 0) {\n                this.setCursorForRotatedObject(actObj, x, y, upperCanvas);\n            }\n            else {\n                upperCanvas.style.cursor = parent.cursor = this.getMouseCursor(actObj, x, y, isCropSelection, true);\n            }\n        }\n    };\n    Selection.prototype.isInside = function (x, y, z1, z2, z3, z4) {\n        var x1 = Math.min(z1, z3);\n        var x2 = Math.max(z1, z3);\n        var y1 = Math.min(z2, z4);\n        var y2 = Math.max(z2, z4);\n        if ((x1 <= x && x <= x2) && (y1 <= y && y <= y2)) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Selection.prototype.updateActivePoint = function (x, y, isCropSelection) {\n        var parent = this.parent;\n        var obj = { width: 0, height: 0 };\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: parent.activeObj.activePoint.width, height: parent.activeObj.activePoint.height, obj: obj } });\n        var maxDimension = obj;\n        var previousShapeSettings = this.updatePrevShapeSettings();\n        var shapeResizingArgs = { action: 'resize', previousShapeSettings: previousShapeSettings };\n        var shapeMovingArgs = { action: 'move', previousShapeSettings: previousShapeSettings };\n        if (isNullOrUndefined(this.shapeResizingArgs)) {\n            this.shapeResizingArgs = shapeResizingArgs;\n        }\n        if (isNullOrUndefined(this.shapeMovingArgs)) {\n            this.shapeMovingArgs = shapeMovingArgs;\n        }\n        if (parent.activeObj.shape === 'text' && this.dragElement !== '') {\n            parent.notify('shape', { prop: 'updateFontRatio', onPropertyChange: false,\n                value: { obj: parent.activeObj, isTextArea: null } });\n        }\n        if (this.currentDrawingShape !== '' && (this.dragElement === '' || this.dragElement === 'move')) {\n            if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' ||\n                parent.activeObj.shape === 'path') {\n                this.dragElement = 'e-resize';\n            }\n            else {\n                if (x > parent.activeObj.activePoint.startX && y > parent.activeObj.activePoint.startY) {\n                    this.dragElement = 'se-resize';\n                }\n                else if (x < parent.activeObj.activePoint.startX && y > parent.activeObj.activePoint.startY) {\n                    this.dragElement = 'sw-resize';\n                }\n                else if (x > parent.activeObj.activePoint.startX && y < parent.activeObj.activePoint.startY) {\n                    this.dragElement = 'ne-resize';\n                }\n                else if (x < parent.activeObj.activePoint.startX && y < parent.activeObj.activePoint.startY) {\n                    this.dragElement = 'nw-resize';\n                }\n            }\n        }\n        if (parent.activeObj.shape === 'arrow') {\n            if (Math.atan2(x - parent.lowerCanvas.width / 2, y - parent.lowerCanvas.height / 2) > 0) {\n                parent.activeObj.rotatedAngle = -Math.atan2(x - parent.lowerCanvas.width / 2, y - parent.lowerCanvas.height / 2);\n            }\n            else {\n                parent.activeObj.rotatedAngle = Math.abs(Math.atan2(x - parent.lowerCanvas.width / 2, y - parent.lowerCanvas.height / 2));\n            }\n        }\n        var degree;\n        var isHorizontalflip = false;\n        var isVerticalflip = false;\n        switch (this.dragElement.toLowerCase()) {\n            case 'nw-resize':\n                this.updateNWPoints(x, y, maxDimension);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'n-resize':\n                this.updateNPoints(x, y);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'ne-resize':\n                this.updateNEPoints(x, y, maxDimension);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'w-resize':\n                this.updateWPoints(x, y);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'e-resize':\n                this.updateEPoints(x, y);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'sw-resize':\n                this.updateSWPoints(x, y, maxDimension);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 's-resize':\n                this.updateSPoints(x, y);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'se-resize':\n                this.updateSEPoints(x, y, maxDimension);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'grabbing':\n                if (Math.atan2(x - (parent.activeObj.activePoint.startX + (parent.activeObj.activePoint.width / 2)), y - (parent.activeObj.activePoint.startY + (parent.activeObj.activePoint.height / 2))) > 0) {\n                    parent.activeObj.rotatedAngle = -Math.atan2(x - (parent.activeObj.activePoint.startX + (parent.activeObj.activePoint.width\n                        / 2)), y - (parent.activeObj.activePoint.startY + (parent.activeObj.activePoint.height / 2)));\n                }\n                else {\n                    parent.activeObj.rotatedAngle = Math.abs(Math.atan2(x - (parent.activeObj.activePoint.startX +\n                        (parent.activeObj.activePoint.width / 2)), y - (parent.activeObj.activePoint.startY +\n                        (parent.activeObj.activePoint.height / 2))));\n                }\n                if (parent.activeObj.shapeDegree === 0) {\n                    degree = parent.transform.degree;\n                }\n                else {\n                    degree = parent.transform.degree - parent.activeObj.shapeDegree;\n                }\n                if (degree < 0) {\n                    degree = 360 + degree;\n                }\n                for (var i = 0, len = parent.activeObj.flipObjColl.length; i < len; i++) {\n                    if (parent.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                        isHorizontalflip = true;\n                    }\n                    else if (parent.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                        isVerticalflip = true;\n                    }\n                }\n                parent.activeObj.rotatedAngle -= (degree * (Math.PI / 180));\n                if (degree === 0 || degree === 360) {\n                    if (isVerticalflip) {\n                        parent.activeObj.rotatedAngle -= (180 * (Math.PI / 180));\n                    }\n                }\n                else if (degree === 90 || degree === -270) {\n                    if (isHorizontalflip) {\n                        parent.activeObj.rotatedAngle -= (180 * (Math.PI / 180));\n                    }\n                }\n                else if (degree === 180 || degree === -180) {\n                    if (isVerticalflip) {\n                        parent.activeObj.rotatedAngle -= (180 * (Math.PI / 180));\n                    }\n                }\n                else if (degree === 270 || degree === -90) {\n                    if (isHorizontalflip) {\n                        parent.activeObj.rotatedAngle -= (180 * (Math.PI / 180));\n                    }\n                }\n                break;\n            case 'pathdrag':\n                if (!isNullOrUndefined(this.pathAdjustedIndex)) {\n                    parent.activeObj.pointColl[this.pathAdjustedIndex].x = x;\n                    parent.activeObj.pointColl[this.pathAdjustedIndex].y = y;\n                }\n                break;\n            default:\n                if (!isCropSelection && !parent.currObjType.isCustomCrop) {\n                    if (this.dragPoint.startX) {\n                        var width = (this.dragPoint.endX - this.previousPoint.x);\n                        var height = (this.dragPoint.endY - this.previousPoint.y);\n                        parent.activeObj.activePoint.startX += width;\n                        parent.activeObj.activePoint.endX += width;\n                        parent.activeObj.activePoint.startY += height;\n                        parent.activeObj.activePoint.endY += height;\n                        if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' &&\n                            parent.activeObj.rotationCirclePointColl) {\n                            parent.activeObj.rotationCirclePointColl.x += width;\n                            parent.activeObj.rotationCirclePointColl.y += height;\n                            parent.activeObj.rotationCirclePoint.x += width;\n                            parent.activeObj.rotationCirclePoint.y += height;\n                        }\n                        if (parent.activeObj.shape === 'path') {\n                            for (var i = 0, len = parent.activeObj.pointColl.length; i < len; i++) {\n                                parent.activeObj.pointColl[i].x += width;\n                                parent.activeObj.pointColl[i].y += height;\n                            }\n                        }\n                        if (!this.isPreventDragging && (parent.activeObj.activePoint.startX < parent.img.destLeft ||\n                            parent.activeObj.activePoint.startY < parent.img.destTop || parent.activeObj.activePoint.endX >\n                            parent.img.destLeft + parent.img.destWidth || parent.activeObj.activePoint.endY > parent.img.destTop\n                            + parent.img.destHeight)) {\n                            parent.activeObj.activePoint.startX -= width;\n                            parent.activeObj.activePoint.endX -= width;\n                            parent.activeObj.activePoint.startY -= height;\n                            parent.activeObj.activePoint.endY -= height;\n                            if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' &&\n                                parent.activeObj.rotationCirclePointColl) {\n                                parent.activeObj.rotationCirclePointColl.x -= width;\n                                parent.activeObj.rotationCirclePointColl.y -= height;\n                                parent.activeObj.rotationCirclePoint.x -= width;\n                                parent.activeObj.rotationCirclePoint.y -= height;\n                            }\n                            this.setDragWidth(width);\n                            this.setDragHeight(height);\n                        }\n                    }\n                    else {\n                        parent.activeObj.activePoint.startX = x < this.mouseDownPoint.x ? x : this.mouseDownPoint.x;\n                        parent.activeObj.activePoint.startY = y < this.mouseDownPoint.y ? y : this.mouseDownPoint.y;\n                        x = x < this.mouseDownPoint.x ? this.mouseDownPoint.x : x;\n                        y = y < this.mouseDownPoint.y ? this.mouseDownPoint.y : y;\n                        parent.activeObj.activePoint.endX = x;\n                        parent.activeObj.activePoint.endY = y;\n                    }\n                    this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'move');\n                }\n                break;\n        }\n    };\n    Selection.prototype.triggerShapeChange = function (shapeResizingArgs, shapeMovingArgs, type) {\n        var parent = this.parent;\n        parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n        parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n        var currentShapeSettings = this.updatePrevShapeSettings();\n        shapeResizingArgs.currentShapeSettings = currentShapeSettings;\n        shapeMovingArgs.currentShapeSettings = currentShapeSettings;\n        if (type === 'resize') {\n            this.isCropSelection = false;\n            var splitWords = void 0;\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (splitWords !== undefined && splitWords[0] === 'crop') {\n                this.isCropSelection = true;\n            }\n            if (!this.isCropSelection && this.parent.eventType !== 'resize' && isBlazor() && parent.events && this.parent.events.onShapeResizeStart.hasDelegate === true) {\n                shapeResizingArgs.action = 'resize-start';\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShapeResizeStart', shapeResizingArgs).then(function (shapeResizingArgs) {\n                    parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                        value: { shapeSettings: shapeResizingArgs.currentShapeSettings } });\n                });\n            }\n            else if (!this.isCropSelection) {\n                parent.trigger('shapeChanging', shapeResizingArgs);\n                parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                    value: { shapeSettings: shapeResizingArgs.currentShapeSettings } });\n            }\n            else {\n                var selectionResizingArgs = { action: shapeResizingArgs.action,\n                    previousSelectionSettings: { type: parent.getSelectionType(parent.activeObj.shape),\n                        startX: shapeResizingArgs.previousShapeSettings.startX,\n                        startY: shapeResizingArgs.previousShapeSettings.startY,\n                        width: shapeResizingArgs.previousShapeSettings.width,\n                        height: shapeResizingArgs.previousShapeSettings.height },\n                    currentSelectionSettings: { type: parent.getSelectionType(parent.activeObj.shape),\n                        startX: shapeResizingArgs.currentShapeSettings.startX,\n                        startY: shapeResizingArgs.currentShapeSettings.startY,\n                        width: shapeResizingArgs.currentShapeSettings.width,\n                        height: shapeResizingArgs.currentShapeSettings.height } };\n                if (isNullOrUndefined(this.selectionResizingArgs)) {\n                    this.selectionResizingArgs = selectionResizingArgs;\n                }\n                if (isBlazor() && isNullOrUndefined(this.parent.eventType) && parent.events &&\n                    parent.events.onSelectionResizeStart.hasDelegate === true) {\n                    selectionResizingArgs.action = 'resize-start';\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    parent.dotNetRef.invokeMethodAsync('SelectionEventAsync', 'OnSelectionResizeStart', selectionResizingArgs).then(function (selectionResizingArgs) {\n                        parent.notify('shape', { prop: 'updSelChangeEventArgs', onPropertyChange: false,\n                            value: { selectionSettings: selectionResizingArgs.currentSelectionSettings } });\n                    });\n                }\n                else {\n                    parent.trigger('selectionChanging', selectionResizingArgs);\n                    parent.notify('shape', { prop: 'updSelChangeEventArgs', onPropertyChange: false,\n                        value: { selectionSettings: selectionResizingArgs.currentSelectionSettings } });\n                }\n            }\n        }\n        else {\n            if (isBlazor() && isNullOrUndefined(this.parent.eventType) && parent.events &&\n                parent.events.onShapeDragStart.hasDelegate === true) {\n                shapeMovingArgs.action = 'drag-start';\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShapeDragStart', shapeMovingArgs).then(function (shapeMovingArgs) {\n                    parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                        value: { shapeSettings: shapeMovingArgs.currentShapeSettings } });\n                });\n            }\n            else {\n                parent.trigger('shapeChanging', shapeMovingArgs);\n                parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                    value: { shapeSettings: shapeMovingArgs.currentShapeSettings } });\n            }\n        }\n        this.parent.eventType = type;\n    };\n    Selection.prototype.setDragWidth = function (width) {\n        var parent = this.parent;\n        var tempWidth = width;\n        if (tempWidth >= 0) {\n            for (var i = 0; i < tempWidth; i++) {\n                width = tempWidth - i;\n                parent.activeObj.activePoint.startX += width;\n                parent.activeObj.activePoint.endX += width;\n                if (parent.activeObj.activePoint.startX >= parent.img.destLeft &&\n                    parent.activeObj.activePoint.endX <= parent.img.destLeft + parent.img.destWidth) {\n                    break;\n                }\n                else {\n                    parent.activeObj.activePoint.startX -= width;\n                    parent.activeObj.activePoint.endX -= width;\n                }\n            }\n        }\n        else {\n            for (var i = 1; i < Math.abs(tempWidth); i++) {\n                width = tempWidth + i;\n                parent.activeObj.activePoint.startX += width;\n                parent.activeObj.activePoint.endX += width;\n                if (parent.activeObj.activePoint.startX >= parent.img.destLeft &&\n                    parent.activeObj.activePoint.endX <= parent.img.destLeft + parent.img.destWidth) {\n                    break;\n                }\n                else {\n                    parent.activeObj.activePoint.startX -= width;\n                    parent.activeObj.activePoint.endX -= width;\n                }\n            }\n        }\n    };\n    Selection.prototype.setDragHeight = function (height) {\n        var parent = this.parent;\n        var tempHeight = height;\n        if (tempHeight >= 0) {\n            for (var i = 1; i < tempHeight; i++) {\n                height = tempHeight - i;\n                parent.activeObj.activePoint.startY += height;\n                parent.activeObj.activePoint.endY += height;\n                if (parent.activeObj.activePoint.startY >= parent.img.destTop &&\n                    parent.activeObj.activePoint.endY <= parent.img.destTop + parent.img.destHeight) {\n                    break;\n                }\n                else {\n                    parent.activeObj.activePoint.startY -= height;\n                    parent.activeObj.activePoint.endY -= height;\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < Math.abs(tempHeight); i++) {\n                height = tempHeight + i;\n                parent.activeObj.activePoint.startY += height;\n                parent.activeObj.activePoint.endY += height;\n                if (parent.activeObj.activePoint.startY >= parent.img.destTop &&\n                    parent.activeObj.activePoint.endY <= parent.img.destTop + parent.img.destHeight) {\n                    break;\n                }\n                else {\n                    parent.activeObj.activePoint.startY -= height;\n                    parent.activeObj.activePoint.endY -= height;\n                }\n            }\n        }\n    };\n    Selection.prototype.limitDrag = function (isStart) {\n        var parent = this.parent;\n        var startX = isStart ? parent.activeObj.activePoint.startX : parent.activeObj.activePoint.endX;\n        var startY = isStart ? parent.activeObj.activePoint.startY : parent.activeObj.activePoint.endY;\n        var endX = isStart ? parent.activeObj.activePoint.endX : parent.activeObj.activePoint.startX;\n        var endY = isStart ? parent.activeObj.activePoint.endY : parent.activeObj.activePoint.startY;\n        if (startX < parent.img.destLeft) {\n            startX = parent.img.destLeft;\n        }\n        if (startY < parent.img.destTop) {\n            startY = parent.img.destTop;\n        }\n        if (endX > parent.img.destLeft + parent.img.destWidth) {\n            endX = parent.img.destLeft + parent.img.destWidth;\n        }\n        if (endY > parent.img.destTop + parent.img.destHeight) {\n            endY = parent.img.destTop + parent.img.destHeight;\n        }\n        if (isStart) {\n            parent.activeObj.activePoint.startX = startX;\n            parent.activeObj.activePoint.startY = startY;\n            parent.activeObj.activePoint.endX = endX;\n            parent.activeObj.activePoint.endY = endY;\n        }\n        else {\n            parent.activeObj.activePoint.startX = endX;\n            parent.activeObj.activePoint.startY = endY;\n            parent.activeObj.activePoint.endX = startX;\n            parent.activeObj.activePoint.endY = startY;\n        }\n    };\n    Selection.prototype.preventDraggingInvertly = function () {\n        var parent = this.parent;\n        if (!this.isPreventDragging && parent.activeObj.rotatedAngle === 0) {\n            this.limitDrag(true);\n            if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' ||\n                parent.activeObj.shape === 'path') {\n                this.limitDrag(false);\n            }\n        }\n    };\n    Selection.prototype.preventTextDraggingInvertly = function () {\n        var parent = this.parent;\n        var isLimiting = false;\n        if (!this.isPreventDragging) {\n            if (parent.activeObj.activePoint.startX < parent.img.destLeft ||\n                parent.activeObj.activePoint.startY < parent.img.destTop ||\n                parent.activeObj.activePoint.endX > parent.img.destLeft + parent.img.destWidth ||\n                parent.activeObj.activePoint.endY > parent.img.destTop + parent.img.destHeight) {\n                isLimiting = true;\n            }\n        }\n        return isLimiting;\n    };\n    Selection.prototype.preventInverseResize = function (tempActiveObj) {\n        var parent = this.parent;\n        if (parent.activeObj.activePoint.width < 0) {\n            parent.activeObj.activePoint.width = 0;\n            parent.activeObj.activePoint.startX = tempActiveObj.activePoint.startX;\n            parent.activeObj.activePoint.endX = tempActiveObj.activePoint.endX;\n        }\n        if (parent.activeObj.activePoint.height < 0) {\n            parent.activeObj.activePoint.height = 0;\n            parent.activeObj.activePoint.startY = tempActiveObj.activePoint.startY;\n            parent.activeObj.activePoint.endY = tempActiveObj.activePoint.endY;\n        }\n    };\n    Selection.prototype.getScaleRatio = function (scale) {\n        var parent = this.parent;\n        var point = { x: scale, y: scale };\n        if (parent.activeObj.shape && parent.activeObj.shape !== 'crop-custom' &&\n            parent.activeObj.shape !== 'crop-circle' && parent.activeObj.shape !== 'crop-square') {\n            var ratio = parent.activeObj.shape.split('-');\n            if (ratio.length > 1) {\n                ratio = ratio[1].split(':');\n                var newScale = scale / (parseInt(ratio[1], 10));\n                point.x = newScale * (parseInt(ratio[0], 10));\n                point.y = newScale * (parseInt(ratio[1], 10));\n            }\n        }\n        return point;\n    };\n    Selection.prototype.updateNWPoints = function (x, y, maxDimension) {\n        var parent = this.parent;\n        var diff;\n        var width;\n        var height;\n        var scale;\n        var percentage;\n        var prevDiffX = this.diffPoint.x;\n        var prevDiffY = this.diffPoint.y;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shape === 'text') {\n            if (this.oldPoint.x === undefined && this.oldPoint.y === undefined) {\n                this.diffPoint.x = parent.activeObj.activePoint.startX - x;\n                this.diffPoint.y = parent.activeObj.activePoint.startY - y;\n            }\n            else {\n                this.diffPoint.x = this.oldPoint.x - x;\n                this.diffPoint.y = this.oldPoint.y - y;\n            }\n            this.oldPoint.x = x;\n            this.oldPoint.y = y;\n            if (this.diffPoint.x <= prevDiffX && this.diffPoint.y >= prevDiffY) {\n                diff = Math.min(this.diffPoint.x, this.diffPoint.y);\n            }\n            else {\n                diff = Math.max(this.diffPoint.x, this.diffPoint.y);\n            }\n            percentage = (diff / 10);\n            parent.activeObj.activePoint.startX -= (maxDimension.width / 100) * percentage;\n            parent.activeObj.activePoint.startY -= (maxDimension.height / 100) * percentage;\n            if (this.preventTextDraggingInvertly()) {\n                parent.activeObj.activePoint.startX += (maxDimension.width / 100) * percentage;\n                parent.activeObj.activePoint.startY += (maxDimension.height / 100) * percentage;\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            parent.notify('shape', { prop: 'updateFontSize', onPropertyChange: false,\n                value: { obj: parent.activeObj } });\n        }\n        else {\n            var splitWords = void 0;\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.adjustNWPoints(parent.activeObj.activePoint, x, y, parent.activeObj.rotatedAngle);\n                if (parent.activeObj.activePoint.startX > parent.activeObj.activePoint.endX) {\n                    var temp = parent.activeObj.activePoint.startX;\n                    parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX;\n                    parent.activeObj.activePoint.endX = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'ne-resize';\n                }\n                if (parent.activeObj.activePoint.startY > parent.activeObj.activePoint.endY) {\n                    var temp = parent.activeObj.activePoint.startY;\n                    parent.activeObj.activePoint.startY = parent.activeObj.activePoint.endY;\n                    parent.activeObj.activePoint.endY = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'sw-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (parent.activeObj.activePoint.startX < x && parent.activeObj.activePoint.startY < y) {\n                    width = x - parent.activeObj.activePoint.startX;\n                    height = y - parent.activeObj.activePoint.startY;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.startX += newScale.x;\n                    parent.activeObj.activePoint.startY += newScale.y;\n                    var left = parent.img.destLeft > 0 ? parent.img.destLeft : 0;\n                    var top_1 = parent.img.destTop > 0 ? parent.img.destTop : 0;\n                    if (parent.activeObj.activePoint.startX < left || parent.activeObj.activePoint.startY < top_1) {\n                        parent.activeObj.activePoint.startX -= newScale.x;\n                        parent.activeObj.activePoint.startY -= newScale.y;\n                    }\n                }\n                else {\n                    width = parent.activeObj.activePoint.startX - x;\n                    height = y - parent.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.startX -= newScale.x;\n                    parent.activeObj.activePoint.startY -= newScale.y;\n                    var left = parent.img.destLeft > 0 ? parent.img.destLeft : 0;\n                    var top_2 = parent.img.destTop > 0 ? parent.img.destTop : 0;\n                    if (parent.activeObj.activePoint.startX < left || parent.activeObj.activePoint.startY < top_2) {\n                        parent.activeObj.activePoint.startX += newScale.x;\n                        parent.activeObj.activePoint.startY += newScale.y;\n                    }\n                }\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            this.preventInverseResize(tempActiveObj);\n        }\n    };\n    Selection.prototype.updateNPoints = function (x, y) {\n        var parent = this.parent;\n        var width;\n        var height;\n        var scale;\n        if (parent.activeObj.shape !== 'text') {\n            var splitWords = void 0;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape && splitWords[0] !== 'crop')) {\n                if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' && parent.activeObj.shape !== 'path' &&\n                    parent.activeObj.rotatedAngle !== 0 && this.dragPoint.startX) {\n                    if (this.dragPoint.startX && this.dragPoint.startY) {\n                        this.previousPoint.x = this.dragPoint.endX;\n                        this.previousPoint.y = this.dragPoint.endY;\n                        this.dragPoint.endX = x;\n                        this.dragPoint.endY = y;\n                    }\n                    width = (this.dragPoint.endX - this.previousPoint.x);\n                    height = (this.dragPoint.endY - this.previousPoint.y);\n                    this.adjustRotationPoints(parent.activeObj.activePoint, width, height, parent.activeObj.rotatedAngle);\n                }\n                else {\n                    parent.activeObj.activePoint.startY = y;\n                    parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n                }\n                if (parent.activeObj.activePoint.startY > parent.activeObj.activePoint.endY) {\n                    var temp = parent.activeObj.activePoint.startY;\n                    parent.activeObj.activePoint.startY = parent.activeObj.activePoint.endY;\n                    parent.activeObj.activePoint.endY = temp;\n                    this.dragElement = this.resizedElement = 's-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (parent.activeObj.activePoint.endX > x && parent.activeObj.activePoint.startY < y) {\n                    width = parent.activeObj.activePoint.endX - x;\n                    height = y - parent.activeObj.activePoint.startY;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX -= newScale.x;\n                    parent.activeObj.activePoint.startY += newScale.y;\n                    if (parent.activeObj.activePoint.endX > (parent.img.destLeft + parent.img.destWidth) ||\n                        parent.activeObj.activePoint.startY < parent.img.destTop) {\n                        parent.activeObj.activePoint.endX += newScale.x;\n                        parent.activeObj.activePoint.startY -= newScale.y;\n                    }\n                }\n                else {\n                    width = x - parent.activeObj.activePoint.endX;\n                    height = parent.activeObj.activePoint.startY - y;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX += newScale.x;\n                    parent.activeObj.activePoint.startY -= newScale.y;\n                    if (parent.activeObj.activePoint.endX > (parent.img.destLeft + parent.img.destWidth) ||\n                        parent.activeObj.activePoint.startY < parent.img.destTop) {\n                        parent.activeObj.activePoint.endX -= newScale.x;\n                        parent.activeObj.activePoint.startY += newScale.y;\n                    }\n                }\n                parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n                parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            }\n        }\n    };\n    Selection.prototype.updateNEPoints = function (x, y, maxDimension) {\n        var parent = this.parent;\n        var diff;\n        var width;\n        var height;\n        var scale;\n        var percentage;\n        var prevDiffX = this.diffPoint.x;\n        var prevDiffY = this.diffPoint.y;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shape === 'text') {\n            if (this.oldPoint.x === undefined && this.oldPoint.y === undefined) {\n                this.diffPoint.x = x - parent.activeObj.activePoint.endX;\n                this.diffPoint.y = parent.activeObj.activePoint.startY - y;\n            }\n            else {\n                this.diffPoint.x = x - this.oldPoint.x;\n                this.diffPoint.y = this.oldPoint.y - y;\n            }\n            this.oldPoint.x = x;\n            this.oldPoint.y = y;\n            if (this.diffPoint.x <= prevDiffX && this.diffPoint.y >= prevDiffY) {\n                diff = Math.min(this.diffPoint.x, this.diffPoint.y);\n            }\n            else {\n                diff = Math.max(this.diffPoint.x, this.diffPoint.y);\n            }\n            percentage = (diff / 10);\n            parent.activeObj.activePoint.endX += (maxDimension.width / 100) * percentage;\n            parent.activeObj.activePoint.startY -= (maxDimension.height / 100) * percentage;\n            if (this.preventTextDraggingInvertly()) {\n                parent.activeObj.activePoint.endX -= (maxDimension.width / 100) * percentage;\n                parent.activeObj.activePoint.startY += (maxDimension.height / 100) * percentage;\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            parent.notify('shape', { prop: 'updateFontSize', onPropertyChange: false,\n                value: { obj: parent.activeObj } });\n        }\n        else {\n            var splitWords = void 0;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.adjustNEPoints(parent.activeObj.activePoint, x, y, parent.activeObj.rotatedAngle);\n                if (parent.activeObj.activePoint.endX < parent.activeObj.activePoint.startX) {\n                    var temp = parent.activeObj.activePoint.endX;\n                    parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX;\n                    parent.activeObj.activePoint.startX = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'nw-resize';\n                }\n                if (parent.activeObj.activePoint.startY > parent.activeObj.activePoint.endY) {\n                    var temp = parent.activeObj.activePoint.startY;\n                    parent.activeObj.activePoint.startY = parent.activeObj.activePoint.endY;\n                    parent.activeObj.activePoint.endY = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'se-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (parent.activeObj.activePoint.endX > x && parent.activeObj.activePoint.startY < y) {\n                    width = parent.activeObj.activePoint.endX - x;\n                    height = y - parent.activeObj.activePoint.startY;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX -= newScale.x;\n                    parent.activeObj.activePoint.startY += newScale.y;\n                    var endX = parent.img.destLeft + parent.img.destWidth < parent.lowerCanvas.width ?\n                        parent.img.destLeft + parent.img.destWidth : parent.lowerCanvas.width;\n                    var endY = parent.img.destTop > 0 ? parent.img.destTop : 0;\n                    if (parent.activeObj.activePoint.endX > endX || parent.activeObj.activePoint.startY < endY) {\n                        parent.activeObj.activePoint.endX += newScale.x;\n                        parent.activeObj.activePoint.startY -= newScale.y;\n                    }\n                }\n                else {\n                    width = x - parent.activeObj.activePoint.endX;\n                    height = parent.activeObj.activePoint.startY - y;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX += newScale.x;\n                    parent.activeObj.activePoint.startY -= newScale.y;\n                    var endX = parent.img.destLeft + parent.img.destWidth < parent.lowerCanvas.width ?\n                        parent.img.destLeft + parent.img.destWidth : parent.lowerCanvas.width;\n                    var endY = parent.img.destTop > 0 ? parent.img.destTop : 0;\n                    if (parent.activeObj.activePoint.endX > endX || parent.activeObj.activePoint.startY < endY) {\n                        parent.activeObj.activePoint.endX -= newScale.x;\n                        parent.activeObj.activePoint.startY += newScale.y;\n                    }\n                }\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            this.preventInverseResize(tempActiveObj);\n        }\n    };\n    Selection.prototype.updateWPoints = function (x, y) {\n        var parent = this.parent;\n        var width;\n        var height;\n        var scale;\n        if (parent.activeObj.shape !== 'text') {\n            var splitWords = void 0;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape && splitWords[0] !== 'crop')) {\n                if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' && parent.activeObj.shape !== 'path' &&\n                    parent.activeObj.rotatedAngle !== 0 && this.dragPoint.startX) {\n                    if (this.dragPoint.startX && this.dragPoint.startY) {\n                        this.previousPoint.x = this.dragPoint.endX;\n                        this.previousPoint.y = this.dragPoint.endY;\n                        this.dragPoint.endX = x;\n                        this.dragPoint.endY = y;\n                    }\n                    width = (this.dragPoint.endX - this.previousPoint.x);\n                    height = (this.dragPoint.endY - this.previousPoint.y);\n                    this.adjustRotationPoints(parent.activeObj.activePoint, width, height, parent.activeObj.rotatedAngle);\n                }\n                else {\n                    parent.activeObj.activePoint.startX = x;\n                    parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n                }\n                if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'path') {\n                    parent.activeObj.activePoint.startY = y;\n                    parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n                    if (this.adjustActObjForLineArrow()) {\n                        this.dragElement = 'e-resize';\n                        if (parent.activeObj.triangleDirection === 'right') {\n                            parent.activeObj.triangleDirection = 'left';\n                        }\n                        else if (parent.activeObj.triangleDirection === 'left') {\n                            parent.activeObj.triangleDirection = 'right';\n                        }\n                    }\n                }\n                else if (parent.activeObj.activePoint.startX > parent.activeObj.activePoint.endX) {\n                    var temp = parent.activeObj.activePoint.startX;\n                    parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX;\n                    parent.activeObj.activePoint.endX = temp;\n                    this.dragElement = this.resizedElement = 'e-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (parent.activeObj.activePoint.startX < x && parent.activeObj.activePoint.endY > y) {\n                    width = x - parent.activeObj.activePoint.startX;\n                    height = parent.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.startX += newScale.x;\n                    parent.activeObj.activePoint.endY -= newScale.y;\n                    if (parent.activeObj.activePoint.startX < parent.img.destLeft || parent.activeObj.activePoint.endY >\n                        (parent.img.destTop + parent.img.destHeight)) {\n                        parent.activeObj.activePoint.startX -= newScale.x;\n                        parent.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = parent.activeObj.activePoint.startX - x;\n                    height = y - parent.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.startX -= newScale.x;\n                    parent.activeObj.activePoint.endY += newScale.y;\n                    if (parent.activeObj.activePoint.startX < parent.img.destLeft || parent.activeObj.activePoint.endY >\n                        (parent.img.destTop + parent.img.destHeight)) {\n                        parent.activeObj.activePoint.startX += newScale.x;\n                        parent.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n                parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n                parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            }\n        }\n    };\n    Selection.prototype.updateEPoints = function (x, y) {\n        var parent = this.parent;\n        var width;\n        var height;\n        var scale;\n        if (parent.activeObj.shape !== 'text') {\n            var splitWords = void 0;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape && splitWords[0] !== 'crop')) {\n                if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' && parent.activeObj.shape !== 'path' &&\n                    parent.activeObj.rotatedAngle !== 0 && this.dragPoint.startX) {\n                    if (this.dragPoint.startX && this.dragPoint.startY) {\n                        this.previousPoint.x = this.dragPoint.endX;\n                        this.previousPoint.y = this.dragPoint.endY;\n                        this.dragPoint.endX = x;\n                        this.dragPoint.endY = y;\n                    }\n                    width = (this.dragPoint.endX - this.previousPoint.x);\n                    height = (this.dragPoint.endY - this.previousPoint.y);\n                    this.adjustRotationPoints(parent.activeObj.activePoint, width, height, parent.activeObj.rotatedAngle);\n                }\n                else {\n                    parent.activeObj.activePoint.endX = x;\n                    parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n                }\n                if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'path') {\n                    parent.activeObj.activePoint.endY = y;\n                    parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n                    if (this.adjustActObjForLineArrow()) {\n                        this.dragElement = 'w-resize';\n                        if (parent.activeObj.triangleDirection === 'right') {\n                            parent.activeObj.triangleDirection = 'left';\n                        }\n                        else if (parent.activeObj.triangleDirection === 'left') {\n                            parent.activeObj.triangleDirection = 'right';\n                        }\n                    }\n                }\n                else if (parent.activeObj.activePoint.endX < parent.activeObj.activePoint.startX) {\n                    var temp = parent.activeObj.activePoint.endX;\n                    parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX;\n                    parent.activeObj.activePoint.startX = temp;\n                    this.dragElement = this.resizedElement = 'w-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (parent.activeObj.activePoint.endX > x && parent.activeObj.activePoint.endY > y) {\n                    width = parent.activeObj.activePoint.endX - x;\n                    height = parent.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX -= newScale.x;\n                    parent.activeObj.activePoint.endY -= newScale.y;\n                    if (parent.activeObj.activePoint.endX > (parent.img.destLeft + parent.img.destWidth) ||\n                        parent.activeObj.activePoint.endY > (parent.img.destTop + parent.img.destHeight)) {\n                        parent.activeObj.activePoint.endX += newScale.x;\n                        parent.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = x - parent.activeObj.activePoint.endX;\n                    height = y - parent.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX += newScale.x;\n                    parent.activeObj.activePoint.endY += newScale.y;\n                    if (parent.activeObj.activePoint.endX > (parent.img.destLeft + parent.img.destWidth) ||\n                        parent.activeObj.activePoint.endY > (parent.img.destTop + parent.img.destHeight)) {\n                        parent.activeObj.activePoint.endX -= newScale.x;\n                        parent.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n                parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n                parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            }\n        }\n    };\n    Selection.prototype.updateSWPoints = function (x, y, maxDimension) {\n        var parent = this.parent;\n        var diff;\n        var width;\n        var height;\n        var scale;\n        var percentage;\n        var prevDiffX = this.diffPoint.x;\n        var prevDiffY = this.diffPoint.y;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shape === 'text') {\n            if (isNullOrUndefined(this.oldPoint.x) && isNullOrUndefined(this.oldPoint.y)) {\n                this.diffPoint.x = parent.activeObj.activePoint.startX - x;\n                this.diffPoint.y = y - parent.activeObj.activePoint.endY;\n            }\n            else {\n                this.diffPoint.x = this.oldPoint.x - x;\n                this.diffPoint.y = y - this.oldPoint.y;\n            }\n            this.oldPoint.x = x;\n            this.oldPoint.y = y;\n            if (this.diffPoint.x <= prevDiffX && this.diffPoint.y >= prevDiffY) {\n                diff = Math.min(this.diffPoint.x, this.diffPoint.y);\n            }\n            else {\n                diff = Math.max(this.diffPoint.x, this.diffPoint.y);\n            }\n            percentage = (diff / 10);\n            parent.activeObj.activePoint.startX -= (maxDimension.width / 100) * percentage;\n            parent.activeObj.activePoint.endY += (maxDimension.height / 100) * percentage;\n            if (this.preventTextDraggingInvertly()) {\n                parent.activeObj.activePoint.startX += (maxDimension.width / 100) * percentage;\n                parent.activeObj.activePoint.endY -= (maxDimension.height / 100) * percentage;\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            parent.notify('shape', { prop: 'updateFontSize', onPropertyChange: false,\n                value: { obj: parent.activeObj } });\n        }\n        else {\n            var splitWords = void 0;\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.adjustSWPoints(parent.activeObj.activePoint, x, y, parent.activeObj.rotatedAngle);\n                if (parent.activeObj.activePoint.startX > parent.activeObj.activePoint.endX) {\n                    var temp = parent.activeObj.activePoint.startX;\n                    parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX;\n                    parent.activeObj.activePoint.endX = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'se-resize';\n                }\n                if (parent.activeObj.activePoint.endY < parent.activeObj.activePoint.startY) {\n                    var temp = parent.activeObj.activePoint.endY;\n                    parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY;\n                    parent.activeObj.activePoint.startY = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'nw-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (parent.activeObj.activePoint.startX < x && parent.activeObj.activePoint.endY > y) {\n                    width = x - parent.activeObj.activePoint.startX;\n                    height = parent.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.startX += newScale.x;\n                    parent.activeObj.activePoint.endY -= newScale.y;\n                    var endX = parent.img.destLeft > 0 ? parent.img.destLeft : 0;\n                    var endY = parent.img.destTop + parent.img.destHeight < parent.lowerCanvas.height ? parent.img.destTop +\n                        parent.img.destHeight : parent.lowerCanvas.height;\n                    if (parent.activeObj.activePoint.startX < endX || parent.activeObj.activePoint.endY > endY) {\n                        parent.activeObj.activePoint.startX -= newScale.x;\n                        parent.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = parent.activeObj.activePoint.startX - x;\n                    height = y - parent.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.startX -= newScale.x;\n                    parent.activeObj.activePoint.endY += newScale.y;\n                    var endX = parent.img.destLeft > 0 ? parent.img.destLeft : 0;\n                    var endY = parent.img.destTop + parent.img.destHeight < parent.lowerCanvas.height ? parent.img.destTop +\n                        parent.img.destHeight : parent.lowerCanvas.height;\n                    if (parent.activeObj.activePoint.startX < endX || parent.activeObj.activePoint.endY > endY) {\n                        parent.activeObj.activePoint.startX += newScale.x;\n                        parent.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            this.preventInverseResize(tempActiveObj);\n        }\n    };\n    Selection.prototype.updateSPoints = function (x, y) {\n        var parent = this.parent;\n        var width;\n        var height;\n        var scale;\n        if (parent.activeObj.shape !== 'text') {\n            var splitWords = void 0;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape && splitWords[0] !== 'crop')) {\n                if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' && parent.activeObj.shape !== 'path' &&\n                    parent.activeObj.rotatedAngle !== 0 && this.dragPoint.startX) {\n                    if (this.dragPoint.startX && this.dragPoint.startY) {\n                        this.previousPoint.x = this.dragPoint.endX;\n                        this.previousPoint.y = this.dragPoint.endY;\n                        this.dragPoint.endX = x;\n                        this.dragPoint.endY = y;\n                    }\n                    width = (this.dragPoint.endX - this.previousPoint.x);\n                    height = (this.dragPoint.endY - this.previousPoint.y);\n                    this.adjustRotationPoints(parent.activeObj.activePoint, width, height, parent.activeObj.rotatedAngle);\n                }\n                else {\n                    parent.activeObj.activePoint.endY = y;\n                    parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n                }\n                if (parent.activeObj.activePoint.endY < parent.activeObj.activePoint.startY) {\n                    var temp = parent.activeObj.activePoint.endY;\n                    parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY;\n                    parent.activeObj.activePoint.startY = temp;\n                    this.dragElement = this.resizedElement = 'n-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (parent.activeObj.activePoint.endX > x && parent.activeObj.activePoint.endY > y) {\n                    width = parent.activeObj.activePoint.endX - x;\n                    height = parent.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX -= newScale.x;\n                    parent.activeObj.activePoint.endY -= newScale.y;\n                    if (parent.activeObj.activePoint.endX > (parent.img.destLeft + parent.img.destWidth) ||\n                        parent.activeObj.activePoint.endY > (parent.img.destTop + parent.img.destHeight)) {\n                        parent.activeObj.activePoint.endX += newScale.x;\n                        parent.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = x - parent.activeObj.activePoint.endX;\n                    height = y - parent.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX += newScale.x;\n                    parent.activeObj.activePoint.endY += newScale.x;\n                    if (parent.activeObj.activePoint.endX > (parent.img.destLeft + parent.img.destWidth) ||\n                        parent.activeObj.activePoint.endY > (parent.img.destTop + parent.img.destHeight)) {\n                        parent.activeObj.activePoint.endX -= newScale.x;\n                        parent.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n                parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n                parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            }\n        }\n    };\n    Selection.prototype.updateSEPoints = function (x, y, maxDimension) {\n        var parent = this.parent;\n        var diff;\n        var width;\n        var height;\n        var scale;\n        var percentage;\n        var prevDiffX = this.diffPoint.x;\n        var prevDiffY = this.diffPoint.y;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shape === 'text') {\n            if (this.oldPoint.x === undefined && this.oldPoint.y === undefined) {\n                this.diffPoint.x = x - parent.activeObj.activePoint.endX;\n                this.diffPoint.y = y - parent.activeObj.activePoint.endY;\n            }\n            else {\n                this.diffPoint.x = x - this.oldPoint.x;\n                this.diffPoint.y = y - this.oldPoint.y;\n            }\n            this.oldPoint.x = x;\n            this.oldPoint.y = y;\n            if (this.diffPoint.x >= prevDiffX && this.diffPoint.y >= prevDiffY) {\n                diff = Math.max(this.diffPoint.x, this.diffPoint.y);\n            }\n            else {\n                diff = Math.min(this.diffPoint.x, this.diffPoint.y);\n            }\n            percentage = (diff / 10);\n            parent.activeObj.activePoint.endX += (maxDimension.width / 50) * percentage;\n            parent.activeObj.activePoint.endY += (maxDimension.height / 50) * percentage;\n            if (this.preventTextDraggingInvertly()) {\n                parent.activeObj.activePoint.endX -= (maxDimension.width / 50) * percentage;\n                parent.activeObj.activePoint.endY -= (maxDimension.height / 50) * percentage;\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            parent.notify('shape', { prop: 'updateFontSize', onPropertyChange: false,\n                value: { obj: parent.activeObj } });\n        }\n        else {\n            var splitWords = void 0;\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.adjustSEPoints(parent.activeObj.activePoint, x, y, parent.activeObj.rotatedAngle);\n                if (parent.activeObj.activePoint.endX < parent.activeObj.activePoint.startX) {\n                    var temp = parent.activeObj.activePoint.endX;\n                    parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX;\n                    parent.activeObj.activePoint.startX = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'sw-resize';\n                }\n                if (parent.activeObj.activePoint.endY < parent.activeObj.activePoint.startY) {\n                    var temp = parent.activeObj.activePoint.endY;\n                    parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY;\n                    parent.activeObj.activePoint.startY = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'ne-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (parent.activeObj.activePoint.endX > x && parent.activeObj.activePoint.endY > y) {\n                    width = parent.activeObj.activePoint.endX - x;\n                    height = parent.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX -= newScale.x;\n                    parent.activeObj.activePoint.endY -= newScale.y;\n                    var endX = parent.img.destLeft + parent.img.destWidth < parent.lowerCanvas.width ?\n                        parent.img.destLeft + parent.img.destWidth : parent.lowerCanvas.width;\n                    var endY = parent.img.destTop + parent.img.destHeight < parent.lowerCanvas.height ?\n                        parent.img.destTop + parent.img.destHeight : parent.lowerCanvas.height;\n                    if (parent.activeObj.activePoint.endX > endX || parent.activeObj.activePoint.endY > endY) {\n                        parent.activeObj.activePoint.endX += newScale.x;\n                        parent.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = x - parent.activeObj.activePoint.endX;\n                    height = y - parent.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX += newScale.x;\n                    parent.activeObj.activePoint.endY += newScale.y;\n                    var endX = parent.img.destLeft + parent.img.destWidth < parent.lowerCanvas.width ? parent.img.destLeft +\n                        parent.img.destWidth : parent.lowerCanvas.width;\n                    var endY = parent.img.destTop + parent.img.destHeight < parent.lowerCanvas.height ? parent.img.destTop +\n                        parent.img.destHeight : parent.lowerCanvas.height;\n                    if (parent.activeObj.activePoint.endX > endX || parent.activeObj.activePoint.endY > endY) {\n                        parent.activeObj.activePoint.endX -= newScale.x;\n                        parent.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            this.preventInverseResize(tempActiveObj);\n        }\n    };\n    Selection.prototype.adjustNWPoints = function (rectangle, x, y, angle) {\n        var cx = rectangle.startX + rectangle.width / 2;\n        var cy = rectangle.startY + rectangle.height / 2;\n        var rotatedC = this.rotatePoints(rectangle.endX, rectangle.endY, cx, cy, angle);\n        var newCenter = [(rotatedC[0] + x) / 2, (rotatedC[1] + y) / 2];\n        var newBottomRight = this.rotatePoints(rotatedC[0], rotatedC[1], newCenter[0], newCenter[1], -angle);\n        var newTopLeft = this.rotatePoints(x, y, newCenter[0], newCenter[1], -angle);\n        rectangle.endX = newBottomRight[0];\n        rectangle.endY = newBottomRight[1];\n        rectangle.startY = newTopLeft[1];\n        rectangle.startX = newTopLeft[0];\n        rectangle.width = rectangle.endX - rectangle.startX;\n        rectangle.height = rectangle.endY - rectangle.startY;\n        return rectangle;\n    };\n    Selection.prototype.adjustNEPoints = function (rectangle, x, y, angle) {\n        var cx = rectangle.startX + rectangle.width / 2;\n        var cy = rectangle.startY + rectangle.height / 2;\n        var rotatedD = this.rotatePoints(rectangle.startX, rectangle.endY, cx, cy, angle);\n        var newCenter = [(rotatedD[0] + x) / 2, (rotatedD[1] + y) / 2];\n        var newBottomLeft = this.rotatePoints(rotatedD[0], rotatedD[1], newCenter[0], newCenter[1], -angle);\n        var newTopRight = this.rotatePoints(x, y, newCenter[0], newCenter[1], -angle);\n        rectangle.startX = newBottomLeft[0];\n        rectangle.endY = newBottomLeft[1];\n        rectangle.width = newTopRight[0] - newBottomLeft[0];\n        rectangle.height = newBottomLeft[1] - newTopRight[1];\n        rectangle.endX = rectangle.startX + rectangle.width;\n        rectangle.startY = rectangle.endY - rectangle.height;\n        return rectangle;\n    };\n    Selection.prototype.adjustSWPoints = function (rectangle, x, y, angle) {\n        var cx = rectangle.startX + rectangle.width / 2;\n        var cy = rectangle.startY + rectangle.height / 2;\n        var rotatedB = this.rotatePoints(rectangle.endX, rectangle.startY, cx, cy, angle);\n        var newCenter = [(rotatedB[0] + x) / 2, (rotatedB[1] + y) / 2];\n        var newTopRight = this.rotatePoints(rotatedB[0], rotatedB[1], newCenter[0], newCenter[1], -angle);\n        var newBottomLeft = this.rotatePoints(x, y, newCenter[0], newCenter[1], -angle);\n        rectangle.endX = newTopRight[0];\n        rectangle.startY = newTopRight[1];\n        rectangle.startX = newBottomLeft[0];\n        rectangle.endY = newBottomLeft[1];\n        rectangle.width = rectangle.endX - rectangle.startX;\n        rectangle.height = rectangle.endY - rectangle.startY;\n        return rectangle;\n    };\n    Selection.prototype.adjustSEPoints = function (rectangle, x, y, angle) {\n        var cx = rectangle.startX + rectangle.width / 2;\n        var cy = rectangle.startY + rectangle.height / 2;\n        var rotatedA = this.rotatePoints(rectangle.startX, rectangle.startY, cx, cy, angle);\n        var newCenter = [(rotatedA[0] + x) / 2, (rotatedA[1] + y) / 2];\n        var newTopLeft = this.rotatePoints(rotatedA[0], rotatedA[1], newCenter[0], newCenter[1], -angle);\n        var newBottomRight = this.rotatePoints(x, y, newCenter[0], newCenter[1], -angle);\n        rectangle.startX = newTopLeft[0];\n        rectangle.startY = newTopLeft[1];\n        rectangle.width = newBottomRight[0] - newTopLeft[0];\n        rectangle.height = newBottomRight[1] - newTopLeft[1];\n        rectangle.endX = rectangle.startX + rectangle.width;\n        rectangle.endY = rectangle.startY + rectangle.height;\n        return rectangle;\n    };\n    Selection.prototype.adjustRotationPoints = function (rectangle, x, y, angle) {\n        var cx = rectangle.startX + rectangle.width / 2;\n        var cy = rectangle.startY + rectangle.height / 2;\n        this.getResizeDirection(rectangle, x, y, angle);\n        var rotatedA = this.rotatePoints(rectangle.startX, rectangle.startY, cx, cy, angle);\n        var rotatedB = this.rotatePoints(rectangle.endX, rectangle.startY, cx, cy, angle);\n        var rotatedC = this.rotatePoints(rectangle.endX, rectangle.endY, cx, cy, angle);\n        var rotatedD = this.rotatePoints(rectangle.startX, rectangle.endY, cx, cy, angle);\n        var newCenter = [(rotatedA[0] + rotatedC[0]) / 2, (rotatedA[1] + rotatedC[1]) / 2];\n        var newTopLeft = this.rotatePoints(rotatedA[0], rotatedA[1], newCenter[0], newCenter[1], -angle);\n        var newBottomLeft = this.rotatePoints(rotatedD[0], rotatedD[1], newCenter[0], newCenter[1], -angle);\n        var newTopRight = this.rotatePoints(rotatedB[0], rotatedB[1], newCenter[0], newCenter[1], -angle);\n        rectangle.startX = newTopLeft[0];\n        rectangle.startY = newTopLeft[1];\n        rectangle.endX = newTopRight[0];\n        rectangle.endY = newBottomLeft[1];\n        rectangle.width = rectangle.endX - rectangle.startX;\n        rectangle.height = rectangle.endY - rectangle.startY;\n        return rectangle;\n    };\n    Selection.prototype.rotatePoints = function (x, y, cx, cy, angle) {\n        return [\n            (x - cx) * Math.cos(angle) - (y - cy) * Math.sin(angle) + cx,\n            (x - cx) * Math.sin(angle) + (y - cy) * Math.cos(angle) + cy\n        ];\n    };\n    Selection.prototype.setResizedValue = function (element, value, x, y) {\n        switch (element) {\n            case 'x':\n                value += x;\n                break;\n            case 'y':\n                value += y;\n                break;\n            case 'abs-x':\n                value += (x > 0 ? -x : Math.abs(x));\n                break;\n            case 'abs-y':\n                value += (y > 0 ? -y : Math.abs(y));\n                break;\n            case 'y-abs-x':\n                value += (y + ((x > 0 ? -x : Math.abs(x)) / 2));\n                break;\n            case 'abs-x-abs-y':\n                value += ((x > 0 ? -x : Math.abs(x)) + ((y > 0 ? -y : Math.abs(y)) / 2));\n                break;\n            case 'abs-y-x':\n                value += ((y > 0 ? -y : Math.abs(y)) + (x / 2));\n                break;\n            case 'x-y':\n                value += (x + (y / 2));\n                break;\n        }\n        return value;\n    };\n    Selection.prototype.getResizeDirection = function (rectangle, x, y, angle) {\n        var rotatedAngle = angle * (180 / Math.PI);\n        var element = this.getResizedElement(rotatedAngle, this.resizedElement);\n        if (this.resizedElement === 'e-resize') {\n            rectangle.width = this.setResizedValue(element, rectangle.width, x, y);\n            rectangle.endX = rectangle.width + rectangle.startX;\n        }\n        else if (this.resizedElement === 'n-resize') {\n            rectangle.startY = this.setResizedValue(element, rectangle.startY, x, y);\n            rectangle.height = rectangle.endY - rectangle.startY;\n        }\n        else if (this.resizedElement === 'w-resize') {\n            rectangle.startX = this.setResizedValue(element, rectangle.startX, x, y);\n            rectangle.width = rectangle.startX + rectangle.endX;\n        }\n        else if (this.resizedElement === 's-resize') {\n            rectangle.height = this.setResizedValue(element, rectangle.height, x, y);\n            rectangle.endY = rectangle.height + rectangle.startY;\n        }\n    };\n    Selection.prototype.getResizedElement = function (degree, element) {\n        var resizeMappings = [];\n        if (element === 'n-resize') {\n            resizeMappings = [\n                [337.5, 360, 'y'],\n                [0, 22.5, 'y'],\n                [22.5, 67.5, 'y-abs-x'],\n                [67.5, 112.5, 'abs-x'],\n                [112.5, 157.5, 'abs-x-abs-y'],\n                [157.5, 202.5, 'abs-y'],\n                [202.5, 247.5, 'abs-y-x'],\n                [247.5, 292.5, 'x'],\n                [292.5, 337.5, 'x-y']\n            ];\n        }\n        else if (element === 'e-resize') {\n            resizeMappings = [\n                [337.5, 360, 'x'],\n                [0, 22.5, 'x'],\n                [22.5, 67.5, 'x-y'],\n                [67.5, 112.5, 'y'],\n                [112.5, 157.5, 'y-abs-x'],\n                [157.5, 202.5, 'abs-x'],\n                [202.5, 247.5, 'abs-x-abs-y'],\n                [247.5, 292.5, 'abs-y'],\n                [292.5, 337.5, 'abs-y-x']\n            ];\n        }\n        else if (element === 's-resize') {\n            resizeMappings = [\n                [337.5, 360, 'y'],\n                [0, 22.5, 'y'],\n                [22.5, 67.5, 'y-abs-x'],\n                [67.5, 112.5, 'abs-x'],\n                [112.5, 157.5, 'abs-x-abs-y'],\n                [157.5, 202.5, 'abs-y'],\n                [202.5, 247.5, 'abs-y-x'],\n                [247.5, 292.5, 'x'],\n                [292.5, 337.5, 'x-y']\n            ];\n        }\n        else if (element === 'w-resize') {\n            resizeMappings = [\n                [337.5, 360, 'x'],\n                [0, 22.5, 'x'],\n                [22.5, 67.5, 'x-y'],\n                [67.5, 112.5, 'y'],\n                [112.5, 157.5, 'y-abs-x'],\n                [157.5, 202.5, 'abs-x'],\n                [202.5, 247.5, 'abs-x-abs-y'],\n                [247.5, 292.5, 'abs-y'],\n                [292.5, 337.5, 'abs-y-x']\n            ];\n        }\n        var positiveDegree = degree < 0 ? 360 - Math.abs(degree) : degree;\n        for (var _i = 0, resizeMappings_2 = resizeMappings; _i < resizeMappings_2.length; _i++) {\n            var _a = resizeMappings_2[_i], startDegree = _a[0], endDegree = _a[1], resizeElement = _a[2];\n            if ((positiveDegree > startDegree && positiveDegree <= endDegree) ||\n                (positiveDegree + 360 > startDegree && positiveDegree + 360 <= endDegree)) {\n                return resizeElement;\n            }\n        }\n        return element;\n    };\n    Selection.prototype.updateCursorStyles = function (x, y, type) {\n        var parent = this.parent;\n        var isResize = false;\n        if (parent.activeObj.keyHistory !== '' && parent.activeObj.shape === undefined && !parent.currObjType.isCustomCrop &&\n            !parent.currObjType.isLine && parent.currObjType.isText) {\n            parent.activeObj.shape = 'text';\n        }\n        var actObj = extend({}, parent.activeObj, {}, true);\n        if (isNullOrUndefined(actObj.topLeftCircle)) {\n            return;\n        }\n        var degree;\n        if (actObj.shapeDegree === 0) {\n            degree = parent.transform.degree;\n        }\n        else {\n            degree = parent.transform.degree - actObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (this.isObjSelected) {\n            if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n                isResize = this.updateCursorStylesForLineArrow(x, y, actObj);\n            }\n            else if (actObj.shape === 'path') {\n                isResize = this.updateCursorStylesForPath(x, y, actObj);\n            }\n            else if (actObj.rotatedAngle) {\n                this.setCursorForRotatedObject(actObj, x, y, parent.upperCanvas);\n                if (parent.cursor === 'grabbing') {\n                    parent.upperCanvas.style.cursor = this.parent.cursor = 'grabbing';\n                    this.dragElement = parent.cursor;\n                }\n                else if (parent.cursor === 'move') {\n                    this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n                    this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n                }\n                else if (parent.cursor !== 'default') {\n                    isResize = true;\n                    this.dragElement = parent.cursor;\n                    parent.currObjType.isResize = true;\n                }\n            }\n            else {\n                var rotationCirclePoint = this.getTransRotationPoint(actObj);\n                if (x >= (actObj.topLeftCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.topLeftCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.topLeftCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.topLeftCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'nw-resize') {\n                    actObj.topLeftCircle.startX = actObj.topLeftCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'nw-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.topLeftCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.topRightCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.topCenterCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.topCenterCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'n-resize') {\n                    actObj.topCenterCircle.startX = actObj.topCenterCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'n-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.topRightCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.topRightCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.topRightCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.topRightCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'ne-resize') {\n                    actObj.topRightCircle.startX = actObj.topRightCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'ne-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.centerLeftCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.centerLeftCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.topLeftCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.bottomLeftCircle.startY - (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'w-resize') {\n                    actObj.centerLeftCircle.startX = actObj.centerLeftCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'w-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.centerRightCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.centerRightCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.topRightCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.bottomRightCircle.startY - (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'e-resize') {\n                    actObj.centerRightCircle.startX = actObj.centerRightCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'e-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.bottomLeftCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.bottomLeftCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.bottomLeftCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.bottomLeftCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'sw-resize') {\n                    actObj.bottomLeftCircle.startX = actObj.bottomLeftCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'sw-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.bottomLeftCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.bottomRightCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.bottomCenterCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.bottomCenterCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 's-resize') {\n                    actObj.bottomCenterCircle.startX = actObj.bottomCenterCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 's-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.bottomRightCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.bottomRightCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.bottomRightCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.bottomRightCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'se-resize') {\n                    actObj.bottomRightCircle.startX = actObj.bottomRightCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'se-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (rotationCirclePoint &&\n                    x >= rotationCirclePoint.x - (actObj.topLeftCircle.radius * 2) &&\n                    x <= rotationCirclePoint.x + (actObj.topLeftCircle.radius * 2) &&\n                    y >= rotationCirclePoint.y - (actObj.topLeftCircle.radius * 2) &&\n                    y <= rotationCirclePoint.y + (actObj.topLeftCircle.radius * 2) && this.dragElement !== 'grabbing') {\n                    parent.upperCanvas.style.cursor = parent.cursor = 'grabbing';\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else {\n                    this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n                    this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n                }\n                if ((actObj.shape === 'text') && (parent.cursor === 'n-resize' ||\n                    parent.cursor === 's-resize' || parent.cursor === 'e-resize' ||\n                    parent.cursor === 'w-resize')) {\n                    parent.upperCanvas.style.cursor = parent.cursor = 'move';\n                    this.dragElement = '';\n                    this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n                    this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n                }\n            }\n        }\n        else {\n            this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n            this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n        }\n        this.previousPoint.x = this.previousPoint.y = this.diffPoint.x = this.diffPoint.y = 0;\n        if (type === 'touchstart') {\n            if (isResize || (x >= actObj.activePoint.startX && x <= actObj.activePoint.endX\n                && y >= actObj.activePoint.startY && y <= actObj.activePoint.endY) || this.dragElement === 'grabbing') {\n                parent.currObjType.isDragging = true;\n            }\n            else if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n                this.setCursorForLineArrow(actObj, x, y, parent.upperCanvas);\n                if (parent.cursor === 'move') {\n                    parent.currObjType.isDragging = true;\n                }\n            }\n            else if (actObj.shape === 'path') {\n                this.setCursorForPath(actObj, x, y, parent.upperCanvas);\n                if (parent.cursor === 'move') {\n                    parent.currObjType.isDragging = true;\n                }\n            }\n        }\n        else {\n            parent.currObjType.isDragging = true;\n        }\n        if (actObj.rotatedAngle !== 0 && (this.dragElement === 'e-resize' ||\n            this.dragElement === 'w-resize' || this.dragElement === 'n-resize' ||\n            this.dragElement === 's-resize')) {\n            this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n            this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n        }\n    };\n    Selection.prototype.updateCursorStylesForLineArrow = function (x, y, actObj) {\n        var isResize = false;\n        var parent = this.parent;\n        var point;\n        for (var i = 0; i < 5; i++) {\n            point = actObj.pointColl[i];\n            if (x >= (point.x - (actObj.topLeftCircle.radius * 2)) && x <= (point.x + (actObj.topLeftCircle.radius * 2)) &&\n                y >= (point.y - (actObj.topLeftCircle.radius * 2)) && y <= (point.y + (actObj.topLeftCircle.radius * 2))) {\n                actObj.centerLeftCircle.startX = actObj.centerLeftCircle.startY = 0;\n                this.dragElement = 'w-resize';\n                isResize = true;\n                break;\n            }\n        }\n        if (!isResize) {\n            for (var i = 1; i < 6; i++) {\n                point = actObj.pointColl[actObj.pointColl.length - i];\n                if (x >= (point.x - (actObj.topLeftCircle.radius * 2)) && x <= (point.x + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (point.y - (actObj.topLeftCircle.radius * 2)) && y <= (point.y + (actObj.topLeftCircle.radius * 2))) {\n                    actObj.centerRightCircle.startX = actObj.centerRightCircle.startY = 0;\n                    this.dragElement = 'e-resize';\n                    isResize = true;\n                    break;\n                }\n            }\n        }\n        if (!isResize) {\n            for (var i = 0; i < actObj.pointColl.length; i++) {\n                point = actObj.pointColl[i];\n                if (x >= (point.x - (actObj.topLeftCircle.radius * 2)) && x <= (point.x + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (point.y - (actObj.topLeftCircle.radius * 2)) && y <= (point.y + (actObj.topLeftCircle.radius * 2))) {\n                    parent.upperCanvas.style.cursor = parent.cursor = 'move';\n                    this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n                    this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n                    break;\n                }\n                else {\n                    parent.upperCanvas.style.cursor = parent.cursor = 'default';\n                }\n            }\n        }\n        return isResize;\n    };\n    Selection.prototype.updateCursorStylesForPath = function (x, y, actObj) {\n        var isResize = false;\n        this.pathAdjustedIndex = this.setCursorForLineArrow(actObj, x, y, this.parent.upperCanvas);\n        if (this.parent.cursor === 'move') {\n            isResize = true;\n            this.dragElement = 'pathDrag';\n        }\n        if (!isResize) {\n            this.parent.upperCanvas.style.cursor = this.parent.cursor = 'move';\n            this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n            this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n        }\n        return isResize;\n    };\n    Selection.prototype.setTextSelection = function (width, height) {\n        var parent = this.parent;\n        var degree = parent.transform.degree;\n        if (parent.activeObj.shapeDegree === 0) {\n            degree = parent.transform.degree;\n        }\n        else {\n            degree = parent.transform.degree - parent.activeObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        for (var i = 0, len = parent.activeObj.flipObjColl.length; i < len; i++) {\n            var flip = parent.activeObj.flipObjColl[i].toLowerCase();\n            switch (degree) {\n                case 0:\n                    switch (flip) {\n                        case 'horizontal':\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.endX - width,\n                                startY: parent.activeObj.activePoint.startY,\n                                endX: (parent.activeObj.activePoint.endX),\n                                endY: parent.activeObj.activePoint.startY + (height ? height : 0) };\n                            break;\n                        case 'vertical':\n                            parent.activeObj.activePoint.startY = parent.activeObj.activePoint.endY - height;\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.startY,\n                                endX: (parent.activeObj.activePoint.startX + (width ? width : 0)),\n                                endY: parent.activeObj.activePoint.endY };\n                            break;\n                        default:\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.startY,\n                                endX: (parent.activeObj.activePoint.startX + (width ? width : 0)),\n                                endY: parent.activeObj.activePoint.startY + (height ? height : 0) };\n                            break;\n                    }\n                    break;\n                case 90:\n                    switch (flip) {\n                        case 'horizontal':\n                            parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + height;\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.startY, endX: (parent.activeObj.activePoint.endX),\n                                endY: parent.activeObj.activePoint.startY + (width ? width : 0) };\n                            break;\n                        case 'vertical':\n                            parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX - height;\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.endY - width,\n                                endX: (parent.activeObj.activePoint.endX),\n                                endY: parent.activeObj.activePoint.endY };\n                            break;\n                        default:\n                            parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX - height;\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.startY, endX: (parent.activeObj.activePoint.endX),\n                                endY: parent.activeObj.activePoint.startY + (width ? width : 0) };\n                            break;\n                    }\n                    break;\n                case 180:\n                    switch (flip) {\n                        case 'horizontal':\n                            parent.activeObj.activePoint.startY = parent.activeObj.activePoint.endY - height;\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.startY,\n                                endX: (parent.activeObj.activePoint.startX + width),\n                                endY: parent.activeObj.activePoint.endY };\n                            break;\n                        case 'vertical':\n                            parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY + height;\n                            parent.activeObj.activePoint = { endX: parent.activeObj.activePoint.endX, endY: parent.activeObj.activePoint.endY,\n                                startX: (parent.activeObj.activePoint.endX - (width ? width : 0)),\n                                startY: parent.activeObj.activePoint.startY };\n                            break;\n                        default:\n                            parent.activeObj.activePoint = { endX: parent.activeObj.activePoint.endX, endY: parent.activeObj.activePoint.endY,\n                                startX: (parent.activeObj.activePoint.endX - (width ? width : 0)),\n                                startY: parent.activeObj.activePoint.endY - (height ? height : 0) };\n                            break;\n                    }\n                    break;\n                case 270:\n                    switch (flip) {\n                        case 'horizontal':\n                            parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX - height;\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.endY - (width ? width : 0),\n                                endX: parent.activeObj.activePoint.endX,\n                                endY: parent.activeObj.activePoint.endY };\n                            break;\n                        case 'vertical':\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.startY,\n                                endX: (parent.activeObj.activePoint.startX + height),\n                                endY: parent.activeObj.activePoint.startY + (width ? width : 0) };\n                            break;\n                        default:\n                            parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + height;\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.endY - (width ? width : 0),\n                                endX: parent.activeObj.activePoint.endX,\n                                endY: parent.activeObj.activePoint.endY };\n                            break;\n                    }\n                    break;\n            }\n        }\n        if (parent.activeObj.flipObjColl.length === 0) {\n            switch (degree) {\n                case 0:\n                    parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX, startY: parent.activeObj.activePoint.startY,\n                        endX: (parent.activeObj.activePoint.startX + (width ? width : 0)),\n                        endY: parent.activeObj.activePoint.startY + (height ? height : 0) };\n                    break;\n                case 90:\n                    parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX - height;\n                    parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX, startY: parent.activeObj.activePoint.startY,\n                        endX: (parent.activeObj.activePoint.endX),\n                        endY: parent.activeObj.activePoint.startY + (width ? width : 0) };\n                    break;\n                case 180:\n                    parent.activeObj.activePoint = { endX: parent.activeObj.activePoint.endX, endY: parent.activeObj.activePoint.endY,\n                        startX: (parent.activeObj.activePoint.endX - (width ? width : 0)),\n                        startY: parent.activeObj.activePoint.endY - (height ? height : 0) };\n                    break;\n                case 270:\n                    parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + height;\n                    parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                        startY: parent.activeObj.activePoint.endY - (width ? width : 0),\n                        endX: parent.activeObj.activePoint.endX,\n                        endY: parent.activeObj.activePoint.endY };\n                    break;\n            }\n        }\n        parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n        parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n        if (parent.transform.degree === 360 || parent.transform.degree === -360) {\n            parent.transform.degree = 0;\n        }\n    };\n    Selection.prototype.setActivePoint = function (startX, startY) {\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.activeObj.activePoint)) {\n            return;\n        }\n        if (parent.currObjType.isText) {\n            var textWidth = startX ? startX : 0;\n            var textHeight = startY ? startY : parent.activeObj.textSettings.fontSize;\n            if (parent.activeObj.textSettings.fontSize === undefined) {\n                parent.activeObj.textSettings.fontSize = (Math.abs(parent.baseImg.width - parent.baseImg.height)) * 0.1;\n            }\n            this.setTextSelection(textWidth, textHeight);\n            this.mouseDownPoint.x = parent.activeObj.activePoint.endX;\n            this.mouseDownPoint.y = parent.activeObj.activePoint.endY;\n            if (parent.activeObj.horTopLine !== undefined) {\n                parent.activeObj.activePoint = extend({}, parent.activeObj.activePoint, {}, true);\n            }\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        }\n        else if (startX && startY) {\n            parent.activeObj.activePoint.startX = this.mouseDownPoint.x = startX;\n            parent.activeObj.activePoint.startY = this.mouseDownPoint.y = startY;\n            parent.currObjType.isDragging = true;\n        }\n        else {\n            var selectInfo = parent.activeObj;\n            parent.activeObj.activePoint = { startX: selectInfo.horTopLine.startX, startY: selectInfo.horTopLine.startY,\n                endX: selectInfo.horTopLine.endX, endY: selectInfo.horTopLine.endY };\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n        }\n    };\n    Selection.prototype.mouseDownEventHandler = function (e) {\n        var _this = this;\n        var parent = this.parent;\n        if (e.type === 'touchstart') {\n            this.isTouch = true;\n        }\n        else {\n            this.isTouch = false;\n        }\n        if (e.type === 'touchstart' && e.currentTarget === parent.lowerCanvas && !parent.isImageLoaded) {\n            return;\n        }\n        this.isCropSelection = false;\n        this.isPan = true;\n        var splitWords;\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords !== undefined && splitWords[0] === 'crop') {\n            this.isCropSelection = true;\n        }\n        if (this.isCropSelection) {\n            this.dragCanvas = parent.togglePan = true;\n        }\n        var imageEditorClickEventArgs = { point: this.setXYPoints(e) };\n        if (isBlazor() && parent.events && parent.events.clicked.hasDelegate === true) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            parent.dotNetRef.invokeMethodAsync('ClickEventAsync', 'click', imageEditorClickEventArgs).then(function (imageEditorClickEventArgs) {\n                _this.clickEvent(imageEditorClickEventArgs, e);\n            });\n        }\n        else {\n            parent.trigger('click', imageEditorClickEventArgs);\n            this.clickEvent(imageEditorClickEventArgs, e);\n        }\n    };\n    Selection.prototype.getImagePoints = function (x, y) {\n        var parent = this.parent;\n        if (x < parent.img.destLeft) {\n            x = parent.img.destLeft;\n        }\n        else if (x > parent.img.destLeft + parent.img.destWidth) {\n            x = parent.img.destLeft + parent.img.destWidth;\n        }\n        if (y < parent.img.destTop) {\n            y = parent.img.destTop;\n        }\n        else if (y > parent.img.destTop + parent.img.destHeight) {\n            y = parent.img.destTop + parent.img.destHeight;\n        }\n        return { x: x, y: y };\n    };\n    Selection.prototype.clickEvent = function (imageEditorClickEventArgs, e) {\n        var parent = this.parent;\n        var x = imageEditorClickEventArgs.point.x;\n        var y = imageEditorClickEventArgs.point.y;\n        var cursor = parent.activeObj.shape && parent.activeObj.shape === 'text' ?\n            parent.cursor : 'default';\n        if (this.currentDrawingShape !== '') {\n            var object_1 = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object_1 } });\n            this.initialPrevObj = object_1['currObj'];\n            this.initialPrevObj.objColl = extend([], parent.objColl, [], true);\n            this.initialPrevObj.pointColl = extend([], parent.pointColl, [], true);\n            this.initialPrevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            this.initialPrevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            this.setActivePoint(x, y);\n            if (this.currentDrawingShape === 'path') {\n                var point = this.getImagePoints(x, y);\n                parent.activeObj.pointColl.push({ x: point.x, y: point.y });\n                if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n                    parent.activeObj.activePoint.width = 0;\n                    parent.activeObj.activePoint.height = 0;\n                    parent.activeObj.activePoint.startX = parent.activeObj.pointColl[parent.activeObj.pointColl.length - 1].x;\n                    parent.activeObj.activePoint.startY = parent.activeObj.pointColl[parent.activeObj.pointColl.length - 1].y;\n                }\n            }\n            parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY;\n            parent.currObjType.isDragging = true;\n            return;\n        }\n        if (this.isCropSelection && this.dragCanvas) {\n            this.setCursor(x, y);\n            if (parent.cursor !== 'move' && parent.cursor !== 'crosshair' &&\n                parent.cursor !== 'default' && parent.cursor !== 'grab') {\n                this.isPan = false;\n            }\n        }\n        if (parent.activeObj.shape) {\n            this.isObjSelected = true;\n        }\n        else {\n            this.isObjSelected = false;\n        }\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        var activeObj = extend({}, parent.activeObj, null, true);\n        var isShape = this.isShapeTouch(e, this.isCropSelection);\n        var isFreehandDraw = this.isFreehandDrawTouch(e, this.isCropSelection);\n        var isShapeClick = isShape ? isShape : this.isShapeClick(e, this.isCropSelection);\n        var allowUndoRedoPush = this.applyCurrShape(isShapeClick);\n        if (this.isTouch && !isShape && activeObj.shape && !this.isCropSelection) {\n            if (this.applyObj(x, y)) {\n                parent.okBtn(true);\n                parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false, value: { prevActObj: null } });\n            }\n            var prevCropObj = extend({}, parent.cropObj, {}, true);\n            parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: parent.isCircleCrop } });\n            if (allowUndoRedoPush) {\n                parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n        }\n        if (!isShape && !parent.togglePen && !this.isCropSelection) {\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n                parent.notify('toolbar', { prop: 'close-contextual-toolbar', onPropertyChange: false });\n            }\n            else if (parent.isImageLoaded) {\n                parent.updateToolbar(parent.element, 'imageLoaded', 'okBtnClick');\n            }\n        }\n        if (this.dragCanvas && this.isPan && (parent.cursor === 'grab' || this.isTouch)\n            && !isShape && !isFreehandDraw && !parent.togglePen) {\n            if (this.applyObj(x, y)) {\n                parent.okBtn(true);\n                if (allowUndoRedoPush) {\n                    parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                }\n                parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false, value: { prevActObj: null } });\n            }\n            if (this.isFhdEditing) {\n                parent.notify('freehand-draw', { prop: 'applyFhd', onPropertyChange: false });\n                this.isFhdCustomized = false;\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                }\n            }\n            if (parent.activeObj.shape && (parent.activeObj.shape === 'rectangle' ||\n                parent.activeObj.shape === 'ellipse' || parent.activeObj.shape === 'line' ||\n                parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'path' || parent.activeObj.shape === 'text')) {\n                parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                    value: { x: null, y: null, isMouseDown: null } });\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'setCurrentToolbar', value: { type: 'main' } });\n                    parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'imageLoaded');\n                }\n            }\n            this.canvasMouseDownHandler(e);\n        }\n        else {\n            var isLineArrow = false;\n            if (parent.activeObj.shape && (parent.activeObj.shape === 'line' ||\n                parent.activeObj.shape === 'arrow')) {\n                isLineArrow = true;\n            }\n            var points = this.setXYPoints(e);\n            var x_1 = points.x;\n            var y_1 = points.y;\n            if (this.applyObj(x_1, y_1)) {\n                parent.okBtn(true);\n                if (allowUndoRedoPush) {\n                    parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                }\n                parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false, value: { prevActObj: null } });\n            }\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: x_1, y: y_1, isMouseDown: true } });\n            var obj = { index: null };\n            parent.notify('freehand-draw', { prop: 'getFreehandDrawHoveredIndex', onPropertyChange: false, value: { obj: obj } });\n            var indexObj = { freehandSelectedIndex: null };\n            parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n            if (this.isFhdPoint || (this.isFhdCustomized && !parent.togglePen)) {\n                if (!isNullOrUndefined(indexObj['freehandSelectedIndex']) &&\n                    indexObj['freehandSelectedIndex'] !== obj['index']) {\n                    var tempHoveredIndex = obj['index'];\n                    parent.okBtn();\n                    this.isFhdCustomized = false;\n                    parent.notify('freehand-draw', { prop: 'setFreehandDrawHoveredIndex', onPropertyChange: false,\n                        value: { index: tempHoveredIndex } });\n                    if (obj['index'] > -1) {\n                        var strokeColor = parent.pointColl[obj['index']].strokeColor;\n                        parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                            value: { strokeColor: strokeColor, strokeWidth: parent.pointColl[obj['index']].strokeWidth } });\n                    }\n                }\n                indexObj['freehandSelectedIndex'] = null;\n                parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n                if (!isNullOrUndefined(obj['index']) && obj['index'] > -1) {\n                    parent.notify('freehand-draw', { prop: 'selectFhd', value: { type: 'ok' } });\n                    if (!isBlazor()) {\n                        parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: true } });\n                    }\n                    else {\n                        parent.updateToolbar(parent.element, 'pen');\n                        parent.updateToolbar(parent.element, 'quickAccessToolbar', 'pen');\n                    }\n                }\n                else if (indexObj['freehandSelectedIndex']) {\n                    parent.okBtn();\n                    var strokeColor = parent.pointColl[indexObj['freehandSelectedIndex']].strokeColor;\n                    parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                        value: { strokeColor: strokeColor, strokeWidth: parent.pointColl[indexObj['freehandSelectedIndex']].strokeWidth } });\n                }\n            }\n            else {\n                if (this.isFhdEditing) {\n                    parent.notify('freehand-draw', { prop: 'cancelFhd', value: { type: 'ok' } });\n                    if (document.getElementById(parent.element.id + '_quickAccessToolbarArea')) {\n                        document.getElementById(parent.element.id + '_quickAccessToolbarArea').style.display = 'none';\n                    }\n                }\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'close-contextual-toolbar', onPropertyChange: false });\n                }\n                this.isFhdEditing = false;\n                if (isLineArrow) {\n                    this.setCursor(x_1, y_1);\n                }\n                else if (cursor !== 'default') {\n                    parent.upperCanvas.style.cursor = parent.cursor = cursor;\n                }\n                // this.setCursor(x, y);\n                if (parent.cursor === 'crosshair' || (Browser.isDevice && parent.togglePen)) {\n                    if (parent.togglePen) {\n                        if (isNullOrUndefined(parent.activeObj.strokeSettings)) {\n                            var obj_1 = { strokeSettings: {} };\n                            parent.notify('shape', { prop: 'getStrokeSettings', onPropertyChange: false,\n                                value: { obj: obj_1 } });\n                            parent.activeObj.strokeSettings = obj_1['strokeSettings'];\n                        }\n                        var obj_2 = { penStrokeWidth: null };\n                        parent.notify('freehand-draw', { prop: 'getPenStrokeWidth', onPropertyChange: false, value: { obj: obj_2 } });\n                        if (isNullOrUndefined(obj_2['penStrokeWidth'])) {\n                            parent.notify('freehand-draw', { prop: 'setPenStrokeWidth', onPropertyChange: false, value: { value: 2 } });\n                        }\n                        this.upperContext.strokeStyle = parent.activeObj.strokeSettings.strokeColor;\n                        this.upperContext.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n                        parent.notify('freehand-draw', { prop: 'freehandDownHandler', onPropertyChange: false,\n                            value: { e: e, canvas: parent.upperCanvas } });\n                    }\n                    else {\n                        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                    }\n                    parent.currObjType.isActiveObj = false;\n                    this.dragElement = '';\n                    this.dragPoint.startX = this.dragPoint.startY = this.dragPoint.endX = this.dragPoint.endY = 0;\n                }\n                if ((parent.cursor !== 'crosshair' && e.type.toLowerCase() === 'touchstart') ||\n                    (parent.currObjType.isActiveObj && parent.cursor !== 'default' && !parent.togglePen)) {\n                    if (parent.currObjType.isUndoAction) {\n                        parent.notify('undo-redo', { prop: 'refreshUrc', value: { bool: null } });\n                    }\n                    this.findTarget(x_1, y_1, e.type);\n                }\n                else if ((parent.currObjType.shape === '' || parent.currObjType.isCustomCrop) && !parent.togglePen && parent.cursor !== 'default') {\n                    this.setActivePoint(x_1, y_1);\n                }\n            }\n        }\n        this.isShapeInserted = false;\n        this.tempActiveObj = extend({}, parent.activeObj, {}, true);\n    };\n    Selection.prototype.mouseMoveEventHandler = function (e) {\n        var parent = this.parent;\n        var cursor = parent.cursor;\n        var canvasCursor = parent.upperCanvas.style.cursor;\n        e.preventDefault();\n        var bbox = parent.lowerCanvas.getBoundingClientRect();\n        if (e.type === 'touchmove' && e.touches.length === 2) {\n            if (this.isFirstMove) {\n                this.startTouches = this.targetTouches(e.touches);\n                this.tempTouches = [];\n                this.tempTouches.push({ x: (e.touches[0].clientX || (e.touches[0].pageX - parent.lowerCanvas.offsetLeft) - bbox.left),\n                    y: (e.touches[0].clientY || (e.touches[0].pageY - parent.lowerCanvas.offsetTop)) - bbox.top });\n                this.tempTouches.push({ x: (e.touches[1].clientX || (e.touches[1].pageX - parent.lowerCanvas.offsetLeft)) - bbox.left,\n                    y: (e.touches[1].clientY || (e.touches[1].pageY - parent.lowerCanvas.offsetTop)) - bbox.top });\n            }\n            else {\n                var firstFingerX = (e.touches[0].clientX || (e.touches[0].pageX - parent.lowerCanvas.offsetLeft)) - bbox.left;\n                var firstFingerY = (e.touches[0].clientY || (e.touches[0].pageY - parent.lowerCanvas.offsetTop)) - bbox.top;\n                var secondFingerX = (e.touches[1].clientX || (e.touches[1].pageX - parent.lowerCanvas.offsetLeft)) - bbox.left;\n                var secondFingerY = (e.touches[1].clientY || (e.touches[1].pageY - parent.lowerCanvas.offsetTop)) - bbox.top;\n                var center = { x: firstFingerX < secondFingerX ? secondFingerX - ((secondFingerX - firstFingerX) / 2) :\n                        firstFingerX - ((firstFingerX - secondFingerX) / 2), y: firstFingerY < secondFingerY ?\n                        secondFingerY - ((secondFingerY - firstFingerY) / 2) : firstFingerY - ((firstFingerY - secondFingerY) / 2) };\n                if (this.currMousePoint.x !== center.x && this.currMousePoint.y !== center.y) {\n                    var type = '';\n                    if (e.type === 'touchmove' && (parent.zoomSettings.zoomTrigger & ZoomTrigger.Pinch) === ZoomTrigger.Pinch) {\n                        this.zoomType = 'Pinch';\n                        var scale = this.calculateScale(this.startTouches, this.targetTouches(e.touches));\n                        this.startTouches = this.targetTouches(e.touches);\n                        if (scale > 1) {\n                            type = 'zoomIn';\n                        }\n                        else if (scale < 1) {\n                            type = 'zoomOut';\n                        }\n                    }\n                    if (type !== '') {\n                        parent.notify('draw', { prop: 'performPointZoom', onPropertyChange: false,\n                            value: { x: center.x, y: center.y, type: type } });\n                    }\n                    this.tempTouches = [];\n                    this.tempTouches.push({ x: e.touches[0].clientX || (e.touches[0].pageX - parent.lowerCanvas.offsetLeft),\n                        y: e.touches[0].clientY || (e.touches[0].pageY - parent.lowerCanvas.offsetTop) });\n                    this.tempTouches.push({ x: e.touches[1].clientX || (e.touches[1].pageX - parent.lowerCanvas.offsetLeft),\n                        y: e.touches[1].clientY || (e.touches[1].pageY - parent.lowerCanvas.offsetTop) });\n                    this.currMousePoint.x = center.x;\n                    this.currMousePoint.y = center.y;\n                }\n            }\n            this.isFirstMove = false;\n            return;\n        }\n        var x;\n        var y;\n        if (e.type === 'mousemove') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else {\n            this.touchEndPoint.x = x = e.touches[0].clientX;\n            this.touchEndPoint.y = y = e.touches[0].clientY;\n        }\n        x -= bbox.left;\n        y -= bbox.top;\n        this.canvasMouseMoveHandler(e);\n        var isCropSelection = false;\n        var splitWords;\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (isCropSelection) {\n            parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n        }\n        parent.upperCanvas.style.cursor = canvasCursor;\n        parent.cursor = cursor;\n        if (parent.currObjType.isActiveObj && (parent.activeObj.activePoint !== undefined || parent.objColl.length > 0) &&\n            !this.dragCanvas || parent.activeObj.activePoint !== undefined) {\n            if (this.dragElement === '') {\n                this.setCursor(x, y);\n                if ((parent.activeObj.activePoint &&\n                    (parent.activeObj.activePoint.width === 0 || (!isNullOrUndefined(parent.activeObj.currIndex) &&\n                        this.cursorTargetId !== parent.activeObj.currIndex)))\n                    && parent.cursor !== 'default' &&\n                    parent.cursor !== 'move' && parent.cursor !== 'crosshair'\n                    && parent.cursor !== 'grab' && parent.cursor !== 'pointer') {\n                    parent.upperCanvas.style.cursor = parent.cursor = 'move';\n                }\n                this.findTarget(x, y, e.type);\n            }\n        }\n        if (parent.currObjType.isDragging) {\n            this.upperContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            this.updateActivePoint(x, y, isCropSelection);\n            parent.notify('shape', { prop: 'updateTrianglePoints', onPropertyChange: false, value: { obj: parent.activeObj } });\n            if (this.isPreventDragging) {\n                if ((parent.activeObj.activePoint.startX > parent.img.destLeft) &&\n                    (parent.activeObj.activePoint.endX < parent.img.destLeft + parent.img.destWidth) &&\n                    (parent.activeObj.activePoint.startY > parent.img.destTop)\n                    && (parent.activeObj.activePoint.endY < parent.img.destTop + parent.img.destHeight)) {\n                    this.isPreventDragging = false;\n                }\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            }\n            else {\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: null, saveContext: null, isPreventSelection: null } });\n            }\n            if (isCropSelection) {\n                this.dragCanvas = parent.togglePan = true;\n            }\n        }\n    };\n    Selection.prototype.mouseUpEventHandler = function (e) {\n        var _this = this;\n        var parent = this.parent;\n        if (e.type === 'touchstart') {\n            this.isTouch = false;\n        }\n        else if (e.type === 'touchend') {\n            e.stopImmediatePropagation();\n        }\n        e.preventDefault();\n        if (parent.togglePan) {\n            this.canvasMouseUpHandler(e);\n        }\n        var x;\n        var y;\n        if (e.type === 'mouseup') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else {\n            x = this.touchEndPoint.x;\n            y = this.touchEndPoint.y;\n        }\n        var bbox = parent.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        if (e.type === 'touchend') {\n            this.startTouches = this.tempTouches = [];\n            this.isFirstMove = false;\n            if (parent.textArea.style.display === 'none') {\n                this.timer = 0;\n            }\n        }\n        var isCropSelection = false;\n        var splitWords;\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (isBlazor() && this.parent.eventType) {\n            if (this.parent.eventType === 'pan') {\n                if (parent.events && parent.events.onPanEnd.hasDelegate === true) {\n                    parent.dotNetRef.invokeMethodAsync('PanEventAsync', 'OnPanEnd', this.parent.panEventArgs);\n                }\n            }\n            else if (this.parent.eventType === 'resize') {\n                if (!this.isCropSelection && this.parent.events && this.parent.events.onShapeResizeEnd.hasDelegate === true) {\n                    this.shapeResizingArgs.currentShapeSettings = this.updatePrevShapeSettings();\n                    this.shapeResizingArgs.action = 'resize-end';\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    this.parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShapeResizeEnd', this.shapeResizingArgs).then(function (shapeResizingArgs) {\n                        _this.parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                            value: { shapeSettings: shapeResizingArgs.currentShapeSettings } });\n                    });\n                }\n                else if (this.shapeResizingArgs && this.selectionResizingArgs && this.parent.events &&\n                    this.parent.events.onSelectionResizeEnd.hasDelegate === true) {\n                    var currentSelectionSettings = { type: this.parent.activeObj.shape,\n                        startX: this.shapeResizingArgs.currentShapeSettings.startX,\n                        startY: this.shapeResizingArgs.currentShapeSettings.startY,\n                        width: this.shapeResizingArgs.currentShapeSettings.width,\n                        height: this.shapeResizingArgs.currentShapeSettings.height };\n                    this.selectionResizingArgs.currentSelectionSettings = currentSelectionSettings;\n                    this.selectionResizingArgs.action = 'resize-end';\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    this.parent.dotNetRef.invokeMethodAsync('SelectionEventAsync', 'OnSelectionResizeEnd', this.selectionResizingArgs).then(function (selectionResizingArgs) {\n                        _this.parent.notify('shape', { prop: 'updateSelectionChangeEventArgs', onPropertyChange: false,\n                            value: { selectionSettings: selectionResizingArgs.currentSelectionSettings } });\n                    });\n                }\n            }\n            else {\n                if (this.shapeMovingArgs && this.parent.events && this.parent.events.onShapeDragEnd.hasDelegate === true) {\n                    this.shapeMovingArgs.currentShapeSettings = this.updatePrevShapeSettings();\n                    this.shapeMovingArgs.action = 'drag-end';\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    this.parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShapeDragEnd', this.shapeMovingArgs).then(function (shapeMovingArgs) {\n                        _this.parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                            value: { shapeSettings: shapeMovingArgs.currentShapeSettings } });\n                    });\n                }\n            }\n            this.shapeResizingArgs = null;\n            this.shapeMovingArgs = null;\n            this.parent.panEventArgs = null;\n            this.parent.eventType = null;\n        }\n        if (this.currentDrawingShape === 'path') {\n            return;\n        }\n        if (e.currentTarget === parent.upperCanvas) {\n            this.pathAdjustedIndex = null;\n            if (this.currentDrawingShape !== '') {\n                if (this.currentDrawingShape === 'text') {\n                    var prevCropObj_1 = extend({}, parent.cropObj, {}, true);\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                        value: { operation: 'shapeTransform', previousObj: this.initialPrevObj, previousObjColl: this.initialPrevObj.objColl,\n                            previousPointColl: this.initialPrevObj.pointColl, previousSelPointColl: this.initialPrevObj.selPointColl,\n                            previousCropObj: prevCropObj_1, previousText: null,\n                            currentText: null, previousFilter: null, isCircleCrop: null } });\n                }\n                else {\n                    parent.notify('undo-redo', { prop: 'updateUrObj', onPropertyChange: false, value: { objColl: this.initialPrevObj.objColl } });\n                }\n                this.isShapeInserted = true;\n                this.currentDrawingShape = '';\n                if (parent.activeObj.activePoint.width === 0 && parent.activeObj.activePoint.height === 0) {\n                    parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n                }\n            }\n            this.adjustActObjForLineArrow();\n            this.updPtCollForShpRot();\n            parent.currObjType.shape = parent.currObjType.shape.toLowerCase();\n            var prevCropObj = extend({}, parent.cropObj, {}, true);\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var prevObj = object['currObj'];\n            prevObj.objColl = extend([], parent.objColl, [], true);\n            prevObj.pointColl = extend([], parent.pointColl, [], true);\n            prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            if (!parent.togglePen && !isCropSelection) {\n                if (this.tempObjColl && parent.activeObj.activePoint.width !== 0) {\n                    parent.objColl.push(parent.activeObj);\n                    if (JSON.stringify(parent.activeObj.activePoint) !== JSON.stringify(this.tempActiveObj.activePoint)) {\n                        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                            value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: this.tempObjColl,\n                                previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                                previousCropObj: prevCropObj, previousText: null,\n                                currentText: null, previousFilter: null, isCircleCrop: null } });\n                    }\n                    this.redrawShape(parent.objColl[parent.objColl.length - 1], true);\n                    this.tempObjColl = undefined;\n                }\n                if (!this.isFhdEditing) {\n                    this.applyCurrActObj(x, y);\n                    parent.currObjType.isResize = false;\n                }\n            }\n            if (parent.activeObj) {\n                var isCropSelection_1 = false;\n                var splitWords_1;\n                if (parent.activeObj.shape !== undefined) {\n                    splitWords_1 = parent.activeObj.shape.split('-');\n                }\n                if (splitWords_1 === undefined && (parent.currObjType.isCustomCrop || parent.togglePen)) {\n                    isCropSelection_1 = true;\n                }\n                else if (splitWords_1 !== undefined && splitWords_1[0] === 'crop') {\n                    isCropSelection_1 = true;\n                }\n                if (!isBlazor()) {\n                    if ((parent.activeObj.shape === 'rectangle') || (parent.activeObj.shape === 'ellipse')\n                        || (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'path')) {\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    else if (parent.activeObj.shape === 'text') {\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'text',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    else if (this.isFhdEditing) {\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'pen',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    else if (!isCropSelection_1) {\n                        var eventargs = { type: 'main', isApplyBtn: null, isCropping: false, isZooming: null };\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: eventargs });\n                    }\n                    parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                }\n                else {\n                    if ((parent.activeObj.shape === 'rectangle') || (parent.activeObj.shape === 'ellipse')\n                        || (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'path')) {\n                        parent.updateToolbar(parent.element, parent.activeObj.shape);\n                    }\n                    else if (parent.activeObj.shape === 'text') {\n                        parent.updateToolbar(parent.element, 'text');\n                    }\n                }\n            }\n        }\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (parent.activeObj.shape && !isCropSelection && e.currentTarget === parent.upperCanvas &&\n            parent.textArea.style.display === 'none') {\n            if (parent.activeObj.shape === 'text') {\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'text',\n                            isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                }\n            }\n            else {\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                            isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                }\n            }\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n            }\n            else {\n                parent.updateToolbar(parent.element, 'quickAccessToolbar', parent.activeObj.shape);\n            }\n        }\n        if (parent.togglePen && e.currentTarget === parent.upperCanvas) {\n            parent.notify('freehand-draw', { prop: 'freehandUpHandler', onPropertyChange: false,\n                value: { e: e, canvas: parent.upperCanvas, context: this.upperContext } });\n        }\n        else {\n            parent.currObjType.shape = '';\n        }\n        this.dragElement = '';\n        parent.currObjType.isInitialLine = parent.currObjType.isDragging = false;\n        this.selMouseUpEvent();\n    };\n    Selection.prototype.adjustActObjForLineArrow = function (obj) {\n        var isAdjusted = false;\n        var parent = this.parent;\n        obj = obj ? obj : parent.activeObj;\n        if (obj.shape && (obj.shape === 'line' || parent.activeObj.shape === 'arrow')) {\n            var temp = void 0;\n            if ((this.dragElement === 'e-resize' && obj.activePoint.endX < obj.activePoint.startX) ||\n                (this.dragElement === 'w-resize' && obj.activePoint.startX > obj.activePoint.endX)) {\n                isAdjusted = true;\n                temp = obj.activePoint.startX;\n                obj.activePoint.startX = obj.activePoint.endX;\n                obj.activePoint.endX = temp;\n                temp = obj.activePoint.startY;\n                obj.activePoint.startY = obj.activePoint.endY;\n                obj.activePoint.endY = temp;\n            }\n            obj.activePoint.width = Math.abs(obj.activePoint.endX - obj.activePoint.startX);\n            obj.activePoint.height = Math.abs(obj.activePoint.endY - obj.activePoint.startY);\n            if (parent.activeObj.shape !== 'path') {\n                parent.notify('shape', { prop: 'setPointCollForLineArrow', onPropertyChange: false,\n                    value: { obj: obj } });\n                // Updating ratio for point collection\n                for (var i = 0; i < obj.pointColl.length; i++) {\n                    obj.pointColl[i].ratioX = (obj.pointColl[i].x -\n                        parent.img.destLeft) / parent.img.destWidth;\n                    obj.pointColl[i].ratioY = (obj.pointColl[i].y -\n                        parent.img.destTop) / parent.img.destHeight;\n                }\n            }\n        }\n        return isAdjusted;\n    };\n    Selection.prototype.updPtCollForShpRot = function (obj) {\n        var parent = this.parent;\n        obj = obj ? obj : parent.activeObj;\n        if (obj.shape && obj.rotatedAngle !== 0) {\n            parent.notify('shape', { prop: 'setPointCollForShapeRotation', onPropertyChange: false,\n                value: { obj: obj } });\n            // Updating ratio for point collection\n            for (var i = 0; i < obj.horTopLinePointColl.length; i++) {\n                obj.horTopLinePointColl[i].ratioX = (obj.horTopLinePointColl[i].x -\n                    parent.img.destLeft) / parent.img.destWidth;\n                obj.horTopLinePointColl[i].ratioY = (obj.horTopLinePointColl[i].y -\n                    parent.img.destTop) / parent.img.destHeight;\n            }\n            for (var i = 0; i < obj.horBottomLinePointColl.length; i++) {\n                obj.horBottomLinePointColl[i].ratioX = (obj.horBottomLinePointColl[i].x -\n                    parent.img.destLeft) / parent.img.destWidth;\n                obj.horBottomLinePointColl[i].ratioY = (obj.horBottomLinePointColl[i].y -\n                    parent.img.destTop) / parent.img.destHeight;\n            }\n            for (var i = 0; i < obj.verLeftLinePointColl.length; i++) {\n                obj.verLeftLinePointColl[i].ratioX = (obj.verLeftLinePointColl[i].x -\n                    parent.img.destLeft) / parent.img.destWidth;\n                obj.verLeftLinePointColl[i].ratioY = (obj.verLeftLinePointColl[i].y -\n                    parent.img.destTop) / parent.img.destHeight;\n            }\n            for (var i = 0; i < obj.verRightLinePointColl.length; i++) {\n                obj.verRightLinePointColl[i].ratioX = (obj.verRightLinePointColl[i].x -\n                    parent.img.destLeft) / parent.img.destWidth;\n                obj.verRightLinePointColl[i].ratioY = (obj.verRightLinePointColl[i].y -\n                    parent.img.destTop) / parent.img.destHeight;\n            }\n        }\n    };\n    Selection.prototype.setXYPoints = function (e) {\n        e.preventDefault();\n        var x;\n        var y;\n        if (e.type === 'mousedown') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else {\n            this.touchEndPoint.x = x = e.touches[0].clientX;\n            this.touchEndPoint.y = y = e.touches[0].clientY;\n        }\n        var bbox = this.parent.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        return { x: x, y: y };\n    };\n    Selection.prototype.getCurrentIndex = function () {\n        var index;\n        var parent = this.parent;\n        for (var i = 0; i < parent.objColl.length; i++) {\n            if (parent.activeObj.currIndex === parent.objColl[i].currIndex) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    };\n    Selection.prototype.isShapeClick = function (e, isCropSelection) {\n        var parent = this.parent;\n        var isShape = false;\n        if (parent.togglePen) {\n            return isShape;\n        }\n        if (parent.activeObj.shape && parent.activeObj.shape === 'text' && this.isShapeInserted) {\n            var isTextArea = parent.textArea.style.display === 'block' ? true : false;\n            var activeObj = extend({}, parent.activeObj, null, true);\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: true } });\n            var points = this.setXYPoints(e);\n            var x = points.x;\n            var y = points.y;\n            isShape = this.findTargetObj(x, y, isCropSelection);\n            if (!isCropSelection) {\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            }\n            if (isTextArea) {\n                parent.textArea.value = parent.objColl[parent.objColl.length - 1].keyHistory;\n                parent.textArea.style.display = 'block';\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if (isNullOrUndefined(index)) {\n                    parent.objColl.pop();\n                }\n                else {\n                    parent.objColl.splice(index, 1);\n                }\n            }\n            else if (!isShape && activeObj.shape) {\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if ((!isNullOrUndefined(index) &&\n                    JSON.stringify(parent.activeObj.activePoint) === JSON.stringify(parent.objColl[index].activePoint))) {\n                    parent.objColl.splice(index, 1);\n                }\n                else if (isNullOrUndefined(parent.activeObj.currIndex)) {\n                    parent.objColl.pop();\n                }\n            }\n        }\n        return isShape;\n    };\n    Selection.prototype.isShapeTouch = function (e, isCropSelection) {\n        var parent = this.parent;\n        var isShape = false;\n        if (e.type === 'touchstart' && !parent.togglePen) {\n            if (parent.activeObj && parent.activeObj.shape === 'text') {\n                this.timer = setTimeout(this.setTimer.bind(this), 1000, e);\n            }\n            var isTextArea = parent.textArea.style.display === 'block' ? true : false;\n            var activeObj = extend({}, parent.activeObj, null, true);\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: true } });\n            var points = this.setXYPoints(e);\n            var x = points.x;\n            var y = points.y;\n            isShape = this.findTargetObj(x, y, isCropSelection);\n            if (!isCropSelection) {\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            }\n            if (isTextArea) {\n                parent.textArea.value = parent.objColl[parent.objColl.length - 1].keyHistory;\n                parent.textArea.style.display = 'block';\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if (isNullOrUndefined(index)) {\n                    parent.objColl.pop();\n                }\n                else {\n                    parent.objColl.splice(index, 1);\n                }\n            }\n            else if (!isShape && activeObj.shape) {\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if (!isCropSelection) {\n                    if ((!isNullOrUndefined(index) && JSON.stringify(parent.activeObj.activePoint) ===\n                        JSON.stringify(parent.objColl[index].activePoint))) {\n                        parent.objColl.splice(index, 1);\n                    }\n                    else if (isNullOrUndefined(parent.activeObj.currIndex)) {\n                        parent.objColl.pop();\n                    }\n                }\n            }\n            // this.timer = null;\n        }\n        return isShape;\n    };\n    Selection.prototype.isFreehandDrawTouch = function (e, isCropSelection) {\n        var parent = this.parent;\n        var isFreehandDraw = false;\n        if (e.type === 'touchstart' && !isCropSelection && !parent.togglePen) {\n            var isTextArea = parent.textArea.style.display === 'block' ? true : false;\n            var activeObj = extend({}, parent.activeObj, null, true);\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: true } });\n            var points = this.setXYPoints(e);\n            var x = points.x;\n            var y = points.y;\n            this.setCursor(x, y);\n            if (this.isFhdPoint) {\n                isFreehandDraw = true;\n            }\n            if (isTextArea) {\n                parent.textArea.value = parent.objColl[parent.objColl.length - 1].keyHistory;\n                parent.textArea.style.display = 'block';\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if (isNullOrUndefined(index)) {\n                    parent.objColl.pop();\n                }\n                else {\n                    parent.objColl.splice(index, 1);\n                }\n            }\n            else if (activeObj.shape) {\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if (!isCropSelection) {\n                    if ((!isNullOrUndefined(index) && JSON.stringify(parent.activeObj.activePoint) ===\n                        JSON.stringify(parent.objColl[index].activePoint))) {\n                        parent.objColl.splice(index, 1);\n                    }\n                    else if (isNullOrUndefined(parent.activeObj.currIndex)) {\n                        parent.objColl.pop();\n                    }\n                }\n            }\n        }\n        return isFreehandDraw;\n    };\n    Selection.prototype.applyObj = function (x, y) {\n        var parent = this.parent;\n        var isApply = false;\n        if (parent.activeObj.shape && (parent.activeObj.shape === 'rectangle' || parent.activeObj.shape === 'ellipse' ||\n            parent.activeObj.shape === 'text' || parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' ||\n            parent.activeObj.shape === 'path')) {\n            if (x >= (parent.activeObj.activePoint.startX - (parent.activeObj.topLeftCircle.radius * 2)) &&\n                x <= (parent.activeObj.activePoint.endX + (parent.activeObj.topLeftCircle.radius * 2)) &&\n                y >= (parent.activeObj.activePoint.startY - (parent.activeObj.topLeftCircle.radius * 2)) &&\n                y <= (parent.activeObj.activePoint.endY + (parent.activeObj.topLeftCircle.radius * 2))) {\n                isApply = false;\n            }\n            else if (parent.upperCanvas.style.cursor !== 'default' && parent.upperCanvas.style.cursor !== 'grab' &&\n                parent.upperCanvas.style.cursor !== 'crosshair' && parent.upperCanvas.style.cursor !== 'pointer') {\n                isApply = false;\n            }\n            else {\n                isApply = true;\n            }\n        }\n        return isApply;\n    };\n    Selection.prototype.applyCurrShape = function (isShapeClick) {\n        var parent = this.parent;\n        var isApply = false;\n        if (parent.togglePen) {\n            return isApply;\n        }\n        var obj = extend({}, parent.activeObj, null, true);\n        if (this.isShapeInserted && parent.activeObj.shape === 'text' && isShapeClick) {\n            this.isInitialTextEdited = true;\n            parent.notify('draw', { prop: 'setShapeTextInsert', onPropertyChange: false, value: { bool: true } });\n        }\n        if (parent.textArea.style.display === 'block') {\n            var activeObj = extend({}, parent.activeObj, null, true);\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n            obj = extend({}, parent.objColl[parent.objColl.length - 1], null, true);\n            parent.objColl.pop();\n            parent.activeObj = extend({}, activeObj, null, true);\n            parent.textArea.value = obj.keyHistory;\n            parent.textArea.style.display = 'block';\n            var strokeColor = obj.strokeSettings.strokeColor.split('(')[0] === 'rgb' ?\n                this.rgbToHex(parseFloat(obj.strokeSettings.strokeColor.split('(')[1].split(',')[0]), parseFloat(obj.strokeSettings.strokeColor.split('(')[1].split(',')[1]), parseFloat(obj.strokeSettings.strokeColor.split('(')[1].split(',')[2])) :\n                obj.strokeSettings.strokeColor;\n            if (strokeColor === '#ffffff') {\n                strokeColor = '#fff';\n            }\n            if (this.tempActiveObj.strokeSettings.strokeColor === '#ffffff') {\n                this.tempActiveObj.strokeSettings.strokeColor = '#fff';\n            }\n            if (obj.keyHistory !== this.tempActiveObj.keyHistory ||\n                strokeColor !== this.tempActiveObj.strokeSettings.strokeColor ||\n                obj.textSettings.fontFamily !== this.tempActiveObj.textSettings.fontFamily ||\n                Math.round(obj.textSettings.fontSize) !== Math.round(this.tempActiveObj.textSettings.fontSize) ||\n                Math.round(obj.textSettings.fontRatio) !== Math.round(this.tempActiveObj.textSettings.fontRatio) ||\n                obj.textSettings.bold !== this.tempActiveObj.textSettings.bold ||\n                obj.textSettings.italic !== this.tempActiveObj.textSettings.italic ||\n                obj.textSettings.underline !== this.tempActiveObj.textSettings.underline) {\n                isApply = true;\n            }\n            if (this.isInitialTextEdited && !isApply) {\n                isApply = true;\n                this.isInitialTextEdited = false;\n            }\n        }\n        else {\n            this.tempActiveObj.activePoint.height = Math.abs(this.tempActiveObj.activePoint.height);\n            isApply = JSON.stringify(obj) !== JSON.stringify(this.tempActiveObj);\n        }\n        return isApply;\n    };\n    Selection.prototype.canvasMouseDownHandler = function (e) {\n        var parent = this.parent;\n        e.preventDefault();\n        var x;\n        var y;\n        if (e.type === 'mousedown') {\n            x = e.offsetX || (e.pageX - parent.lowerCanvas.offsetLeft);\n            y = e.offsetY || (e.pageY - parent.lowerCanvas.offsetTop);\n        }\n        else {\n            x = e.touches[0].clientX || (e.touches[0].pageX - parent.lowerCanvas.offsetLeft);\n            y = e.touches[0].clientY || (e.touches[0].pageY - parent.lowerCanvas.offsetTop);\n        }\n        var bbox = parent.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        this.panDown = { x: x, y: y };\n        var tempPanMoveObj = { tempPanMove: null };\n        parent.notify('transform', { prop: 'getTempPanMove', onPropertyChange: false,\n            value: { obj: tempPanMoveObj } });\n        if (isNullOrUndefined(tempPanMoveObj['tempPanMove'])) {\n            parent.notify('transform', { prop: 'setTempPanMove', onPropertyChange: false,\n                value: { point: { x: x, y: y } } });\n        }\n    };\n    Selection.prototype.canvasMouseMoveHandler = function (e) {\n        var parent = this.parent;\n        if (this.dragCanvas) {\n            parent.lowerCanvas.style.cursor = 'grab';\n        }\n        else {\n            this.dragCanvas = parent.togglePan = false;\n            parent.lowerCanvas.style.cursor = parent.upperCanvas.style.cursor = parent.cursor = 'default';\n        }\n        var x;\n        var y;\n        if (e.type === 'mousemove') {\n            x = e.offsetX;\n            y = e.offsetY;\n        }\n        else {\n            x = e.touches[0].clientX || (e.touches[0].pageX - parent.lowerCanvas.offsetLeft);\n            y = e.touches[0].clientY || (e.touches[0].pageY - parent.lowerCanvas.offsetTop);\n        }\n        var bbox = parent.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        var panMove = { x: x, y: y };\n        parent.notify('transform', { prop: 'setPanMove', onPropertyChange: false,\n            value: { point: { x: x, y: y } } });\n        if (this.panDown && panMove && parent.togglePan && this.dragCanvas) {\n            parent.notify('transform', { prop: 'drawPannedImage', onPropertyChange: false,\n                value: { xDiff: null, yDiff: null } });\n        }\n    };\n    Selection.prototype.canvasMouseUpHandler = function (e) {\n        var parent = this.parent;\n        e.preventDefault();\n        var panMoveObj = { panMove: null };\n        parent.notify('transform', { prop: 'getPanMove', onPropertyChange: false,\n            value: { obj: panMoveObj } });\n        if (parent.togglePan) {\n            if (this.panDown && panMoveObj['panMove'] && parent.togglePan && this.dragCanvas) {\n                this.panDown = null;\n                parent.notify('transform', { prop: 'setPanMove', onPropertyChange: false,\n                    value: { point: null } });\n                parent.notify('transform', { prop: 'setTempPanMove', onPropertyChange: false,\n                    value: { point: null } });\n            }\n        }\n        if (this.currentDrawingShape !== 'path') {\n            parent.currObjType.isDragging = false;\n        }\n    };\n    Selection.prototype.touchStartHandler = function (e) {\n        e.preventDefault();\n        if (this.touchTime === 0) {\n            this.touchTime = new Date().getTime();\n        }\n        else {\n            if (((new Date().getTime()) - this.touchTime) < 400) {\n                this.parent.notify('shape', { prop: 'stopPathDrawing', onPropertyChange: false, value: { e: e } });\n                this.touchTime = 0;\n            }\n            else {\n                this.touchTime = new Date().getTime();\n            }\n        }\n        if (e.touches.length === 2) {\n            this.isFirstMove = true;\n        }\n        else {\n            this.mouseDownEventHandler(e);\n        }\n        EventHandler.add(this.parent.lowerCanvas, 'touchend', this.mouseUpEventHandler, this);\n        EventHandler.add(this.parent.lowerCanvas, 'touchmove', this.mouseMoveEventHandler, this);\n        EventHandler.add(this.parent.upperCanvas, 'touchend', this.mouseUpEventHandler, this);\n        EventHandler.add(this.parent.upperCanvas, 'touchmove', this.mouseMoveEventHandler, this);\n    };\n    Selection.prototype.keyDownEventHandler = function (e) {\n        var _this = this;\n        var parent = this.parent;\n        if (e.ctrlKey && (e.key === '+' || e.key === '-')) {\n            e.preventDefault();\n        }\n        var obj = { fileName: '', fileType: null };\n        parent.notify('draw', { prop: 'getFileName', onPropertyChange: false, value: { obj: obj } });\n        var beforeSave = { fileName: obj['fileName'], fileType: obj['fileType'], cancel: false };\n        var splitWords;\n        switch (e.key) {\n            case (e.ctrlKey && 's'):\n                if (isBlazor() && parent.events && parent.events.saving.hasDelegate === true) {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    parent.dotNetRef.invokeMethodAsync('BeforeSaveEventAsync', 'BeforeSave', beforeSave).then(function (args) {\n                        _this.beforeSaveEvent(args, e);\n                    });\n                }\n                else {\n                    parent.trigger('beforeSave', beforeSave);\n                    this.beforeSaveEvent(beforeSave, e);\n                }\n                break;\n            case (e.ctrlKey && 'z'):\n                if (parent.allowUndoRedo) {\n                    parent.notify('undo-redo', { prop: 'call-undo' });\n                }\n                break;\n            case (e.ctrlKey && 'y'):\n                if (parent.allowUndoRedo) {\n                    parent.notify('undo-redo', { prop: 'call-redo' });\n                }\n                break;\n            case (e.ctrlKey && '+'):\n                if ((parent.zoomSettings.zoomTrigger & ZoomTrigger.Commands) === ZoomTrigger.Commands) {\n                    this.zoomType = 'Commands';\n                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: .1, zoomPoint: null } });\n                }\n                break;\n            case (e.ctrlKey && '-'):\n                if ((parent.zoomSettings.zoomTrigger & ZoomTrigger.Commands) === ZoomTrigger.Commands) {\n                    this.zoomType = 'Commands';\n                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: -.1, zoomPoint: null } });\n                }\n                break;\n            case 'Delete':\n                this.deleteItem();\n                break;\n            case 'Escape':\n                parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n                break;\n            case 'Enter':\n                if (parent.activeObj.shape) {\n                    splitWords = parent.activeObj.shape.split('-');\n                }\n                if (this.isKeyBoardCrop(e) &&\n                    parent.activeObj.horTopLine && (parent.activeObj.shape && splitWords[0] === 'crop')) {\n                    parent.crop();\n                }\n                break;\n            case 'Tab':\n                this.performTabAction();\n                break;\n            default:\n                if (Browser.isDevice && parent.textArea.style.display === 'block') {\n                    setTimeout(this.textKeyDown.bind(this), 1, e);\n                }\n                break;\n        }\n    };\n    Selection.prototype.isKeyBoardCrop = function (e) {\n        var bool = false;\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var target = e.target;\n        if ((target.id === this.parent.element.id + '_ok' || target.id === '') && !isBlazor()) {\n            bool = true;\n        }\n        return bool;\n    };\n    Selection.prototype.beforeSaveEvent = function (observableSaveArgs, e) {\n        var parent = this.parent;\n        if (!observableSaveArgs.cancel) {\n            parent.notify('export', { prop: 'export', onPropertyChange: false,\n                value: { type: observableSaveArgs.fileType, fileName: observableSaveArgs.fileName } });\n        }\n        e.preventDefault();\n        e.stopImmediatePropagation();\n    };\n    Selection.prototype.handleScroll = function (e) {\n        var parent = this.parent;\n        var x;\n        var y;\n        var isInsideCanvas = false;\n        if (e.type === 'mousewheel') {\n            // eslint-disable-next-line\n            x = e.clientX;\n            y = e.clientY;\n        }\n        var bbox = parent.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        if (x > parent.img.destLeft && x < parent.img.destLeft + parent.img.destWidth && y > parent.img.destTop &&\n            y < parent.img.destTop + parent.img.destHeight) {\n            isInsideCanvas = true;\n        }\n        e.stopPropagation();\n        if (e.ctrlKey === true && isInsideCanvas) {\n            e.preventDefault();\n            if (!parent.isCropTab && (parent.activeObj.shape && parent.activeObj.shape.split('-')[0] !== 'crop')) {\n                parent.okBtn();\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'close-contextual-toolbar', onPropertyChange: false });\n                }\n            }\n            var type = '';\n            if (e.type === 'mousewheel' && (parent.zoomSettings.zoomTrigger & ZoomTrigger.MouseWheel) === ZoomTrigger.MouseWheel) {\n                this.zoomType = 'MouseWheel';\n                // eslint-disable-next-line\n                if (e.wheelDelta > 0) {\n                    type = 'zoomIn';\n                }\n                else {\n                    type = 'zoomOut';\n                }\n            }\n            if (type !== '') {\n                parent.notify('draw', { prop: 'performPointZoom', onPropertyChange: false,\n                    value: { x: x, y: y, type: type } });\n            }\n        }\n    };\n    Selection.prototype.textKeyDown = function (e) {\n        var parent = this.parent;\n        if (String.fromCharCode(e.which) === '\\r') {\n            this.textRow += 1;\n        }\n        parent.textArea.setAttribute('rows', this.textRow.toString());\n        parent.textArea.style.height = 'auto';\n        parent.textArea.style.height = parent.textArea.scrollHeight + 'px';\n        parent.notify('shape', { prop: 'setTextBoxWidth', onPropertyChange: false, value: { e: e } });\n        if (Browser.isDevice) {\n            parent.textArea.style.width = parseFloat(parent.textArea.style.width) + parent.textArea.style.fontSize + 'px';\n        }\n        var rows = parent.textArea.value.split('\\n');\n        this.textRow = rows.length;\n        parent.textArea.setAttribute('rows', this.textRow.toString());\n        this.isInitialTextEdited = false;\n    };\n    Selection.prototype.clearSelection = function () {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            parent.togglePen = false;\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.dragElement = '';\n            this.dragPoint.startX = this.dragPoint.startY = this.dragPoint.endX = this.dragPoint.endY = 0;\n            parent.currObjType.shape = '';\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            parent.currObjType.isActiveObj = true;\n            parent.currObjType.isCustomCrop = false;\n            parent.upperCanvas.style.cursor = parent.cursor = 'default';\n        }\n    };\n    Selection.prototype.setDragDirection = function (width, height) {\n        var arcRadius = (7.5);\n        var parent = this.parent;\n        if (parent.img.destWidth > parent.img.destHeight) {\n            parent.activeObj.activePoint.startX = this.dragPoint.startX = ((width / 2) - (height / 2))\n                + arcRadius;\n            parent.activeObj.activePoint.startY = this.dragPoint.startY = ((height / 2) - (height / 2))\n                + arcRadius;\n            parent.activeObj.activePoint.endX = ((width / 2) + (height / 2)) - arcRadius;\n            parent.activeObj.activePoint.endY = ((height / 2) + (height / 2)) - arcRadius;\n        }\n        else {\n            parent.activeObj.activePoint.startY = this.dragPoint.startX = ((height / 2) - (width) / 2)\n                + arcRadius;\n            parent.activeObj.activePoint.endY = ((height / 2) + (width) / 2) - arcRadius;\n            parent.activeObj.activePoint.startX = this.dragPoint.startX = arcRadius;\n            parent.activeObj.activePoint.endX = width - arcRadius;\n        }\n    };\n    Selection.prototype.calcShapeRatio = function (x, y, imgWidth, imgHeight) {\n        var parent = this.parent;\n        var arcRadius = (7.5);\n        var originalWidth = imgWidth;\n        var originalHeight = imgHeight;\n        var presetRatio = x / y;\n        var standardSize = originalWidth >= originalHeight ? originalWidth : originalHeight;\n        var width = standardSize * presetRatio;\n        var height = standardSize;\n        var scaleWidth = this.getScale(width, originalWidth);\n        var snippetArray = [];\n        for (var i = 0; i < 2; i++) {\n            if (i === 0) {\n                snippetArray.push(width * scaleWidth);\n            }\n            else {\n                snippetArray.push(height * scaleWidth);\n            }\n        }\n        width = snippetArray[0];\n        height = snippetArray[1];\n        var scaleHeight = this.getScale(height, originalHeight);\n        var snippetArray1 = [];\n        for (var i = 0; i < 2; i++) {\n            if (i === 0) {\n                snippetArray1.push(width * scaleHeight);\n            }\n            else {\n                snippetArray1.push(height * scaleHeight);\n            }\n        }\n        width = snippetArray1[0];\n        height = snippetArray1[1];\n        parent.activeObj.activePoint.width = width;\n        parent.activeObj.activePoint.height = height;\n        parent.activeObj.activePoint.startX = (this.dragPoint.startX = (originalWidth - width) / 2) + arcRadius;\n        parent.activeObj.activePoint.startY = (this.dragPoint.startY = (originalHeight - height) / 2) + arcRadius;\n        parent.activeObj.activePoint.endX = ((originalWidth - width) / 2 + width) - arcRadius;\n        parent.activeObj.activePoint.endY = ((originalHeight - height) / 2 + height) - arcRadius;\n        if (parent.activeObj.activePoint.startX < parent.img.destLeft && parent.img.destLeft + parent.img.destWidth >\n            parent.lowerCanvas.clientWidth) {\n            parent.activeObj.activePoint.startX = parent.img.destLeft;\n            parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + width - arcRadius;\n        }\n        if (parent.activeObj.activePoint.startY < parent.img.destTop && parent.img.destTop + parent.img.destHeight >\n            parent.lowerCanvas.clientHeight) {\n            parent.activeObj.activePoint.startY = parent.img.destTop;\n            parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY + height - arcRadius;\n        }\n        parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n        parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n    };\n    Selection.prototype.getScale = function (value, originalValue) {\n        return value > originalValue ? originalValue / value : 1;\n    };\n    Selection.prototype.findTarget = function (x, y, type) {\n        var parent = this.parent;\n        if (type.toLowerCase() === 'mousedown' || type.toLowerCase() === 'touchstart') {\n            var splitWords = void 0;\n            var isCrop = false;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n                if (splitWords[0] === 'crop') {\n                    isCrop = true;\n                }\n            }\n            this.findTargetObj(x, y, isCrop);\n            this.updateCursorStyles(x, y, type);\n        }\n        else {\n            switch (this.dragElement.toLowerCase()) {\n                case 'nw-resize':\n                    parent.activeObj.topLeftCircle.startX = x;\n                    parent.activeObj.topLeftCircle.startY = y;\n                    break;\n                case 'n-resize':\n                    parent.activeObj.topCenterCircle.startX = x;\n                    parent.activeObj.topCenterCircle.startY = y;\n                    break;\n                case 'ne-resize':\n                    parent.activeObj.topRightCircle.startX = x;\n                    parent.activeObj.topRightCircle.startY = y;\n                    break;\n                case 'w-resize':\n                    parent.activeObj.centerLeftCircle.startX = x;\n                    parent.activeObj.centerLeftCircle.startY = y;\n                    break;\n                case 'e-resize':\n                    parent.activeObj.centerRightCircle.startX = x;\n                    parent.activeObj.centerRightCircle.startY = y;\n                    break;\n                case 'sw-resize':\n                    parent.activeObj.bottomLeftCircle.startX = x;\n                    parent.activeObj.bottomLeftCircle.startY = y;\n                    break;\n                case 's-resize':\n                    parent.activeObj.bottomCenterCircle.startX = x;\n                    parent.activeObj.bottomCenterCircle.startY = y;\n                    break;\n                case 'se-resize':\n                    parent.activeObj.bottomRightCircle.startX = x;\n                    parent.activeObj.bottomRightCircle.startY = y;\n                    break;\n                default:\n                    if (this.dragPoint.startX && this.dragPoint.startY) {\n                        this.previousPoint.x = this.dragPoint.endX;\n                        this.previousPoint.y = this.dragPoint.endY;\n                        this.dragPoint.endX = x;\n                        this.dragPoint.endY = y;\n                    }\n                    break;\n            }\n        }\n    };\n    Selection.prototype.findTargetObj = function (x, y, isCrop) {\n        var _this = this;\n        var parent = this.parent;\n        var isShape = false;\n        if (parent.objColl.length !== 0 && !parent.currObjType.isCustomCrop && !isCrop) {\n            var diffX = 0;\n            var i = void 0;\n            for (var index = 0; index < parent.objColl.length; index++) {\n                var cursor = parent.upperCanvas.style.cursor;\n                this.setCursor(x, y);\n                var actObj = extend({}, parent.objColl[index], {}, true);\n                if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n                    for (var j = 0; j < actObj.pointColl.length; j++) {\n                        if (x >= actObj.pointColl[j].x - (actObj.topLeftCircle.radius * 2) &&\n                            x <= actObj.pointColl[j].x + (actObj.topLeftCircle.radius * 2) &&\n                            y >= actObj.pointColl[j].y - (actObj.topLeftCircle.radius * 2) &&\n                            y <= actObj.pointColl[j].y + (actObj.topLeftCircle.radius * 2)) {\n                            if (this.isTouch || parent.cursor === 'move' ||\n                                parent.cursor === 'grab' || this.isShapeInserted) {\n                                if (diffX === 0 || diffX > x - actObj.activePoint.startX) {\n                                    diffX = x - parent.objColl[index].activePoint.startX;\n                                    i = index;\n                                }\n                            }\n                            else if (parent.objColl[index].currIndex === this.tempActiveObj.currIndex) {\n                                i = index;\n                            }\n                            break;\n                        }\n                    }\n                }\n                else if (actObj.shape === 'path') {\n                    var cursor_1 = this.setCursorForPath(actObj, x, y, parent.upperCanvas);\n                    if (cursor_1 !== 'default' && cursor_1 !== 'grab') {\n                        if (this.isTouch || parent.cursor === 'move' || parent.cursor === 'grab' || this.isShapeInserted) {\n                            if (diffX === 0 || diffX > x - actObj.activePoint.startX) {\n                                diffX = x - parent.objColl[index].activePoint.startX;\n                                i = index;\n                            }\n                        }\n                        else if (parent.objColl[index].currIndex === this.tempActiveObj.currIndex) {\n                            i = index;\n                        }\n                    }\n                }\n                else if (actObj.rotatedAngle !== 0) {\n                    var cursor_2 = this.setCursorForRotatedObject(actObj, x, y, parent.upperCanvas);\n                    if (cursor_2 !== 'default' && cursor_2 !== 'grab') {\n                        if (this.isTouch || parent.cursor === 'move' || parent.cursor === 'grab' || this.isShapeInserted) {\n                            if (diffX === 0 || diffX > x - actObj.activePoint.startX) {\n                                diffX = x - parent.objColl[index].activePoint.startX;\n                                i = index;\n                            }\n                        }\n                        else if (parent.objColl[index].currIndex === this.tempActiveObj.currIndex) {\n                            i = index;\n                        }\n                    }\n                }\n                else {\n                    var rotationCirclePoint = this.getTransRotationPoint(actObj);\n                    if ((x >= (actObj.activePoint.startX - (actObj.topLeftCircle.radius * 2)) &&\n                        x <= (actObj.activePoint.endX + (actObj.topLeftCircle.radius * 2)) &&\n                        y >= (actObj.activePoint.startY - (actObj.topLeftCircle.radius * 2)) &&\n                        y <= (actObj.activePoint.endY + (actObj.topLeftCircle.radius * 2))) ||\n                        (rotationCirclePoint &&\n                            x >= (rotationCirclePoint.x - (actObj.topLeftCircle.radius * 2)) &&\n                            x <= (rotationCirclePoint.x + (actObj.topLeftCircle.radius * 2)) &&\n                            y >= (rotationCirclePoint.y - (actObj.topLeftCircle.radius * 2)) &&\n                            y <= (rotationCirclePoint.y + (actObj.topLeftCircle.radius * 2)))) {\n                        if (this.isTouch || cursor === 'move' || cursor === 'grabbing' || this.isShapeInserted\n                            || parent.cursor === 'move' || parent.cursor === 'grabbing') {\n                            if (diffX === 0 || diffX > x - actObj.activePoint.startX) {\n                                diffX = x - parent.objColl[index].activePoint.startX;\n                                i = index;\n                            }\n                        }\n                        else if (parent.objColl[index].currIndex === this.tempActiveObj.currIndex) {\n                            i = index;\n                        }\n                    }\n                }\n            }\n            if (isNullOrUndefined(i)) {\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                isShape = false;\n            }\n            else {\n                this.tempObjColl = extend([], parent.objColl, [], true);\n                parent.currObjType.isCustomCrop = false;\n                parent.activeObj = extend({}, parent.objColl[i], {}, true);\n                var temp = extend({}, parent.objColl[i], {}, true);\n                parent.objColl.splice(i, 1);\n                if (parent.transform.degree === 0) {\n                    var temp_1 = this.lowerContext.filter;\n                    this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n                    parent.notify('filter', { prop: 'updateBrightFilter', onPropertyChange: false });\n                    this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n                    this.lowerContext.filter = 'none';\n                    parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n                    parent.activeObj = extend({}, temp_1, {}, true);\n                    parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                        value: { context: this.lowerContext, points: null } });\n                    this.lowerContext.filter = temp_1;\n                    this.getCurrentFlipState();\n                }\n                else {\n                    parent.notify('draw', { prop: 'callUpdateCurrTransState', onPropertyChange: false });\n                    parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                        value: { context: this.lowerContext, points: null } });\n                }\n                parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n                if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n                    parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                        value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                }\n                this.setActivePoint();\n                parent.activeObj = extend({}, temp, {}, true);\n                var tempStrokeSettings = extend({}, parent.activeObj.strokeSettings, {}, true);\n                parent.notify('draw', { prop: 'setTempStrokeSettings', onPropertyChange: false,\n                    value: { tempStrokeSettings: tempStrokeSettings } });\n                var tempTextSettings = extend({}, parent.activeObj.textSettings, {}, true);\n                parent.notify('draw', { prop: 'setTempTextSettings', onPropertyChange: false, value: { tempTextSettings: tempTextSettings } });\n                var shapeSettings = this.updatePrevShapeSettings();\n                var shapeChangingArgs_1 = { action: 'select', previousShapeSettings: shapeSettings,\n                    currentShapeSettings: shapeSettings };\n                if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow') {\n                    shapeChangingArgs_1.currentShapeSettings.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n                    shapeChangingArgs_1.currentShapeSettings.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n                }\n                this.isCropSelection = false;\n                var splitWords = void 0;\n                if (parent.activeObj.shape !== undefined) {\n                    splitWords = parent.activeObj.shape.split('-');\n                }\n                if (splitWords !== undefined && splitWords[0] === 'crop') {\n                    this.isCropSelection = true;\n                }\n                if (!this.isCropSelection && isBlazor() && isNullOrUndefined(this.parent.eventType) &&\n                    parent.events && parent.events.shapeChanging.hasDelegate === true) {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShape', shapeChangingArgs_1).then(function (shapeChangingArgs) {\n                        _this.shapeEvent(shapeChangingArgs);\n                    });\n                }\n                else if (!this.isCropSelection) {\n                    parent.trigger('shapeChanging', shapeChangingArgs_1);\n                    this.shapeEvent(shapeChangingArgs_1);\n                }\n                else {\n                    var selectionChangingArgs = { action: shapeChangingArgs_1.action,\n                        previousSelectionSettings: { type: parent.getSelectionType(parent.activeObj.shape),\n                            startX: shapeChangingArgs_1.previousShapeSettings.startX,\n                            startY: shapeChangingArgs_1.previousShapeSettings.startY,\n                            width: shapeChangingArgs_1.previousShapeSettings.width,\n                            height: shapeChangingArgs_1.previousShapeSettings.height },\n                        currentSelectionSettings: { type: parent.getSelectionType(parent.activeObj.shape),\n                            startX: shapeChangingArgs_1.currentShapeSettings.startX,\n                            startY: shapeChangingArgs_1.currentShapeSettings.startY,\n                            width: shapeChangingArgs_1.currentShapeSettings.width,\n                            height: shapeChangingArgs_1.currentShapeSettings.height } };\n                    if (isBlazor() && parent.events && parent.events.onSelectionResizeStart.hasDelegate === true) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        parent.dotNetRef.invokeMethodAsync('SelectionEventAsync', 'OnSelectionResizeStart', selectionChangingArgs).then(function (selectionChangingArgs) {\n                            shapeChangingArgs_1.currentShapeSettings.startX = selectionChangingArgs.currentSelectionSettings.startX;\n                            shapeChangingArgs_1.currentShapeSettings.startY = selectionChangingArgs.currentSelectionSettings.startY;\n                            shapeChangingArgs_1.currentShapeSettings.width = selectionChangingArgs.currentSelectionSettings.width;\n                            shapeChangingArgs_1.currentShapeSettings.height = selectionChangingArgs.currentSelectionSettings.height;\n                            _this.shapeEvent(shapeChangingArgs_1);\n                        });\n                    }\n                    else {\n                        parent.trigger('selectionChanging', selectionChangingArgs);\n                        shapeChangingArgs_1.currentShapeSettings.startX = selectionChangingArgs.currentSelectionSettings.startX;\n                        shapeChangingArgs_1.currentShapeSettings.startY = selectionChangingArgs.currentSelectionSettings.startY;\n                        shapeChangingArgs_1.currentShapeSettings.width = selectionChangingArgs.currentSelectionSettings.width;\n                        shapeChangingArgs_1.currentShapeSettings.height = selectionChangingArgs.currentSelectionSettings.height;\n                        this.shapeEvent(shapeChangingArgs_1);\n                    }\n                }\n                isShape = true;\n            }\n        }\n        return isShape;\n    };\n    Selection.prototype.shapeEvent = function (shapeChangingArgs) {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n            value: { shapeSettings: shapeChangingArgs.currentShapeSettings } });\n        if (parent.activeObj.activePoint) {\n            var obj = { prevActObj: null };\n            parent.notify('draw', { prop: 'getPrevActObj', onPropertyChange: false, value: { obj: obj } });\n            if (isNullOrUndefined(obj['prevActObj'])) {\n                parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false,\n                    value: { prevActObj: extend({}, parent.activeObj, {}, true) } });\n            }\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj, isCropRatio: null,\n                    points: null, isPreventDrag: true, saveContext: null, isPreventSelection: true } });\n            if (!this.isShapeInserted) {\n                if (parent.activeObj.activePoint.startX < parent.img.destLeft) {\n                    this.isPreventDragging = true;\n                }\n                else if (parent.activeObj.activePoint.endX > parent.img.destLeft + parent.img.destWidth) {\n                    this.isPreventDragging = true;\n                }\n                else if (parent.activeObj.activePoint.startY < parent.img.destTop) {\n                    this.isPreventDragging = true;\n                }\n                else if (parent.activeObj.activePoint.endY > parent.img.destTop + parent.img.destHeight) {\n                    this.isPreventDragging = true;\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    Selection.prototype.targetTouches = function (touches) {\n        var bbox = this.parent.lowerCanvas.getBoundingClientRect();\n        var p1 = { x: touches[0].pageX - bbox.left, y: touches[0].pageY - bbox.top };\n        var p2 = { x: touches[1].pageX - bbox.left, y: touches[1].pageY - bbox.top };\n        var points = [p1, p2];\n        return points;\n    };\n    Selection.prototype.calculateScale = function (startTouches, endTouches) {\n        var startDistance = this.getDistance(startTouches[0], startTouches[1]);\n        var endDistance = this.getDistance(endTouches[0], endTouches[1]);\n        return endDistance / startDistance;\n    };\n    Selection.prototype.getDistance = function (a, b) {\n        var x = 0;\n        var y = 0;\n        if (a && b) {\n            x = a.x - b.x;\n            y = a.y - b.y;\n        }\n        return Math.sqrt(x * x + y * y);\n    };\n    Selection.prototype.redrawShape = function (obj, isMouseUp) {\n        var parent = this.parent;\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            if (JSON.stringify(obj) === JSON.stringify(parent.objColl[i])) {\n                parent.objColl.splice(i, 1);\n                break;\n            }\n        }\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        if (this.isPreventDragging) {\n            if (parent.activeObj.activePoint.startX > parent.img.destLeft) {\n                this.isPreventDragging = false;\n            }\n            if (isMouseUp && parent.activeObj.rotatedAngle !== 0) {\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            }\n            else {\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            }\n        }\n        else {\n            if (isMouseUp && parent.activeObj.rotatedAngle !== 0) {\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            }\n            else {\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            }\n        }\n    };\n    Selection.prototype.setTimer = function (e) {\n        if (this.timer > 10) {\n            clearTimeout(this.timer);\n            this.timer = 0;\n            this.parent.notify('shape', { prop: 'findTextTarget', onPropertyChange: false, value: { e: e } });\n            if (Browser.isDevice) {\n                this.upperContext.clearRect(0, 0, this.parent.upperCanvas.width, this.parent.upperCanvas.height);\n            }\n        }\n    };\n    Selection.prototype.applyCurrActObj = function (x, y) {\n        var parent = this.parent;\n        var isInside = false;\n        var actObj = extend({}, parent.activeObj, {}, true);\n        if (isNullOrUndefined(actObj.activePoint)) {\n            return;\n        }\n        if ((x >= Math.floor(actObj.activePoint.startX) && x <= Math.ceil(actObj.activePoint.endX) &&\n            y >= Math.floor(actObj.activePoint.startY) && y <= Math.ceil(actObj.activePoint.endY))) {\n            isInside = true;\n        }\n        else if (actObj.shape === 'text' && this.dragElement !== '') {\n            isInside = true;\n        }\n        else if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n            var smallPoint = { x: actObj.activePoint.startX < actObj.activePoint.endX ? actObj.activePoint.startX :\n                    actObj.activePoint.endX,\n                y: actObj.activePoint.startY < actObj.activePoint.endY ? actObj.activePoint.startY : actObj.activePoint.endY };\n            var largePoint = { x: actObj.activePoint.startX > actObj.activePoint.endX ? actObj.activePoint.startX :\n                    actObj.activePoint.endX,\n                y: actObj.activePoint.startY > actObj.activePoint.endY ? actObj.activePoint.startY : actObj.activePoint.endY };\n            if (x >= (Math.floor(smallPoint.x) - 5) && x <= (Math.ceil(largePoint.x) + 5) &&\n                y >= (Math.floor(smallPoint.y) - 5) && y <= (Math.ceil(largePoint.y) + 5)) {\n                isInside = true;\n            }\n        }\n        else if (actObj.shape === 'path') {\n            var cursor = this.setCursorForPath(actObj, x, y, parent.upperCanvas);\n            if (cursor === 'move') {\n                isInside = true;\n            }\n        }\n        else if (this.dragElement === 'grabbing') {\n            isInside = true;\n        }\n        else if (actObj.rotatedAngle !== 0) {\n            var cursor = this.setCursorForRotatedObject(actObj, x, y, parent.upperCanvas);\n            if ((cursor !== 'default' && cursor !== 'grab') || this.dragElement === 'n-resize' || this.dragElement === 'e-resize' ||\n                this.dragElement === 's-resize' || this.dragElement === 'w-resize') {\n                isInside = true;\n            }\n        }\n        if (!isInside) {\n            if (isNullOrUndefined(parent.activeObj.currIndex)) {\n                parent.activeObj.currIndex = 'shape_' + (parent.objColl.length + 1);\n            }\n            parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n            if (parent.activeObj.horTopLine !== undefined && parent.activeObj.horTopLine.startX !== 0 && parent.activeObj.horTopLine.endX\n                !== 0 && !parent.currObjType.isCustomCrop && parent.currObjType.shape !== '') {\n                parent.objColl.push(extend({}, parent.activeObj, {}, true));\n            }\n            if (parent.activeObj.shape === 'text' || (parent.currObjType.shape === 'ellipse' || parent.currObjType.shape === 'rectangle' ||\n                parent.currObjType.shape === 'line' || parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'path')) {\n                var tempFilter = this.lowerContext.filter;\n                this.lowerContext.filter = 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n                    'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' +\n                    'invert(0%)';\n                for (var i = 0; i < parent.objColl.length; i++) {\n                    var obj = { isInside: false };\n                    parent.notify('crop', { prop: 'isObjInImage', onPropertyChange: false,\n                        value: { obj: parent.objColl[i], object: obj } });\n                    if (obj['isInside']) {\n                        parent.notify('shape', { prop: 'apply', onPropertyChange: false,\n                            value: { shape: parent.objColl[i].shape, obj: parent.objColl[i], canvas: null } });\n                        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                    }\n                }\n                parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n                this.lowerContext.filter = tempFilter;\n                if (parent.activeObj.shape) {\n                    parent.notify('shape', { prop: 'apply', onPropertyChange: false,\n                        value: { shape: null, obj: null, canvas: null } });\n                }\n                parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n                parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n                if (parent.isCircleCrop) {\n                    parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                        value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                }\n            }\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            }\n        }\n    };\n    Selection.prototype.getCurrentFlipState = function () {\n        var parent = this.parent;\n        if (parent.rotateFlipColl.length !== 0) {\n            var totalPannedInternalPoint = extend({}, parent.panPoint.totalPannedInternalPoint, {}, true);\n            parent.notify('draw', { prop: 'callUpdateCurrTransState', onPropertyChange: false });\n            parent.panPoint.totalPannedInternalPoint = totalPannedInternalPoint;\n        }\n        else {\n            parent.notify('draw', { prop: 'callUpdateCurrTransState', onPropertyChange: false });\n        }\n    };\n    Selection.prototype.setTextBoxStylesToActObj = function () {\n        var parent = this.parent;\n        parent.activeObj.textSettings.fontFamily = parent.textArea.style.fontFamily;\n        parent.activeObj.strokeSettings.strokeColor = parent.textArea.style.color !== '' ?\n            this.rgbToHex(parseFloat(parent.textArea.style.color.split('(')[1].split(',')[0]), parseFloat(parent.textArea.style.color.split('(')[1].split(',')[1]), parseFloat(parent.textArea.style.color.split('(')[1].split(',')[2])) :\n            parent.textArea.style.color;\n        if (parent.textArea.style.fontWeight === 'bold') {\n            parent.activeObj.textSettings.bold = true;\n        }\n        else {\n            parent.activeObj.textSettings.bold = false;\n        }\n        if (parent.textArea.style.fontStyle === 'italic') {\n            parent.activeObj.textSettings.italic = true;\n        }\n        else {\n            parent.activeObj.textSettings.italic = false;\n        }\n        parent.activeObj.textSettings.fontSize = (parseFloat(parent.textArea.style.fontSize));\n    };\n    Selection.prototype.rgbToHex = function (r, g, b) {\n        return '#' + this.componentToHex(r) + this.componentToHex(g) + this.componentToHex(b);\n    };\n    Selection.prototype.componentToHex = function (rgb) {\n        var hex = rgb.toString(16);\n        return hex.length === 1 ? '0' + hex : hex;\n    };\n    Selection.prototype.deleteItem = function () {\n        var parent = this.parent;\n        var shapeChangingArgs = {};\n        var previousShapeSettings = {};\n        if (this.isFhdEditing) {\n            this.updateFreehandDrawColorChange();\n            var prevCropObj = extend({}, parent.cropObj, {}, true);\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var prevObj = object['currObj'];\n            prevObj.objColl = extend([], parent.objColl, [], true);\n            prevObj.pointColl = extend([], parent.pointColl, [], true);\n            prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            var obj = { freehandDrawSelectedId: null };\n            parent.notify('freehand-draw', { prop: 'getFreehandDrawSelectedId', onPropertyChange: false, value: { obj: obj } });\n            parent.notify('freehand-draw', { prop: 'deleteFhd', value: { id: obj['freehandDrawSelectedId'] } });\n            parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'deleteFreehandDrawing', previousObj: prevObj, previousObjColl: this.tempObjColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            parent.notify('freehand-draw', { prop: 'resetFreehandDrawSelectedId' });\n        }\n        else if (parent.textArea.style.display === 'none') {\n            var obj = { prevActObj: null };\n            parent.notify('draw', { prop: 'getPrevActObj', onPropertyChange: false, value: { obj: obj } });\n            if (obj['prevActObj']) {\n                obj['prevActObj']['activePoint']['width'] = Math.abs(obj['prevActObj']['activePoint']['width']);\n                obj['prevActObj']['activePoint']['height'] = Math.abs(obj['prevActObj']['activePoint']['height']);\n            }\n            if (obj['prevActObj'] && JSON.stringify(obj['prevActObj']) !== JSON.stringify(parent.activeObj)) {\n                var index = parent.activeObj.currIndex;\n                parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n                for (var i = 0; i < parent.objColl.length; i++) {\n                    if (parent.objColl[i].currIndex === index) {\n                        parent.objColl.splice(i, 1);\n                        parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n                        break;\n                    }\n                }\n            }\n            var object = { isNewPath: null };\n            parent.notify('draw', { prop: 'getNewPath', value: { obj: object } });\n            if (object['isNewPath']) {\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'imageLoaded');\n                }\n            }\n            else if (parent.activeObj.shape) {\n                parent.objColl.push(parent.activeObj);\n                var prevCropObj = extend({}, parent.cropObj, {}, true);\n                var object_2 = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object_2 } });\n                var prevObj = object_2['currObj'];\n                prevObj.objColl = extend([], parent.objColl, [], true);\n                prevObj.pointColl = extend([], parent.pointColl, [], true);\n                prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n                var selPointCollObj = { selPointColl: null };\n                parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                    value: { obj: selPointCollObj } });\n                prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n                parent.objColl.pop();\n                previousShapeSettings = this.updatePrevShapeSettings();\n                shapeChangingArgs = { action: 'delete', previousShapeSettings: previousShapeSettings, currentShapeSettings: null };\n                parent.notify('shape', { prop: 'setKeyHistory', onPropertyChange: false, value: { keyHistory: '' } });\n                parent.clearSelection();\n                if (isBlazor() && parent.events && parent.events.shapeChanging.hasDelegate === true) {\n                    parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShape', shapeChangingArgs);\n                }\n                else {\n                    parent.trigger('shapeChanging', shapeChangingArgs);\n                    if (!isBlazor()) {\n                        parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n                    }\n                }\n                if (!isNullOrUndefined(prevObj.objColl[prevObj.objColl.length - 1].currIndex)) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                        value: { operation: 'deleteObj', previousObj: prevObj, previousObjColl: this.tempObjColl,\n                            previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                            previousCropObj: prevCropObj, previousText: null,\n                            currentText: null, previousFilter: null, isCircleCrop: null } });\n                    parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                }\n            }\n            parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false, value: { prevActObj: null } });\n        }\n        if (document.getElementById(parent.element.id + '_quickAccessToolbarArea')) {\n            document.getElementById(parent.element.id + '_quickAccessToolbarArea').style.display = 'none';\n        }\n    };\n    Selection.prototype.updateFreehandDrawColorChange = function () {\n        var parent = this.parent;\n        var indexObj = { freehandSelectedIndex: null };\n        parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n        if (!isNullOrUndefined(indexObj['freehandSelectedIndex']) && !isNullOrUndefined(parent.pointColl[indexObj['freehandSelectedIndex']])\n            && parent.pointColl[indexObj['freehandSelectedIndex']].strokeColor === '#42a5f5') {\n            var obj = { tempFreeHandDrawEditingStyles: null };\n            parent.notify('freehand-draw', { prop: 'getTempFreeHandDrawEditingStyles', value: { obj: obj } });\n            parent.pointColl[indexObj['freehandSelectedIndex']].strokeColor = obj['tempFreeHandDrawEditingStyles'].strokeColor;\n        }\n    };\n    Selection.prototype.updatePrevShapeSettings = function (obj) {\n        var parent = this.parent;\n        var fontStyle = [];\n        if (parent.activeObj.shape === 'text' && parent.activeObj.textSettings) {\n            if (parent.activeObj.textSettings.bold) {\n                fontStyle.push('bold');\n            }\n            if (parent.activeObj.textSettings.italic) {\n                fontStyle.push('italic');\n            }\n            if (parent.activeObj.textSettings.underline) {\n                fontStyle.push('underline');\n            }\n        }\n        var shapeSettingsObj = {\n            id: !isNullOrUndefined(parent.activeObj.currIndex) ? parent.activeObj.currIndex : null,\n            type: parent.toPascalCase(parent.activeObj.shape),\n            startX: parent.activeObj.activePoint.startX, startY: parent.activeObj.activePoint.startY,\n            width: parent.activeObj.activePoint.width, height: parent.activeObj.activePoint.height,\n            strokeColor: parent.activeObj.strokeSettings ? parent.activeObj.strokeSettings.strokeColor : null,\n            strokeWidth: parent.activeObj.strokeSettings ? parent.activeObj.strokeSettings.strokeWidth : null,\n            fillColor: parent.activeObj.strokeSettings ? parent.activeObj.strokeSettings.fillColor : null,\n            radius: parent.activeObj.shape === 'ellipse' ? parent.activeObj.activePoint.width / 2 : null,\n            length: parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' ? parent.activeObj.activePoint.width : null,\n            text: parent.activeObj.shape === 'text' ? (parent.activeObj.keyHistory ? parent.activeObj.keyHistory : null) : null,\n            fontSize: parent.activeObj.shape === 'text' ? (parent.activeObj.textSettings ? parent.activeObj.textSettings.fontSize : null) : null,\n            fontStyle: parent.activeObj.shape === 'text' ? fontStyle : null,\n            color: parent.activeObj.shape === 'text' ? (parent.activeObj.strokeSettings ? parent.activeObj.strokeSettings.strokeColor : null) : null\n        };\n        if (obj) {\n            obj['shapeSettingsObj'] = shapeSettingsObj;\n        }\n        return shapeSettingsObj;\n    };\n    Selection.prototype.getRectanglePoints = function (rectX, rectY, rectWidth, rectHeight, rectAngle, pointX, pointY) {\n        var centerX = rectX + rectWidth / 2;\n        var centerY = rectY + rectHeight / 2;\n        var angleRad = rectAngle * (Math.PI / 180);\n        var cosAngle = Math.cos(angleRad);\n        var sinAngle = Math.sin(angleRad);\n        var localX = pointX - centerX;\n        var localY = pointY - centerY;\n        var rotatedX = localX * cosAngle + localY * sinAngle;\n        var rotatedY = -localX * sinAngle + localY * cosAngle;\n        var halfWidth = rectWidth / 2;\n        var halfHeight = rectHeight / 2;\n        // Check if the rotated point is within the bounds of the rectangle\n        if (rotatedX >= -halfWidth && rotatedX <= halfWidth && rotatedY >= -halfHeight &&\n            rotatedY <= halfHeight) {\n            return true; // Point is inside the rotated rectangle\n        }\n        else {\n            return false; // Point is outside the rotated rectangle\n        }\n    };\n    Selection.prototype.getTransRotationPoint = function (obj, object) {\n        var rotationCirclePoint;\n        var degree;\n        var isHorizontalflip = false;\n        var isVerticalflip = false;\n        if (obj.shapeDegree === 0) {\n            degree = this.parent.transform.degree;\n        }\n        else {\n            degree = this.parent.transform.degree - obj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        for (var i = 0; i < obj.flipObjColl.length; i++) {\n            if (obj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                isHorizontalflip = true;\n            }\n            else if (obj.flipObjColl[i].toLowerCase() === 'vertical') {\n                isVerticalflip = true;\n            }\n        }\n        if (degree === 0 || degree === 360) {\n            if (isVerticalflip) {\n                rotationCirclePoint = { x: obj.topCenterCircle.startX,\n                    y: obj.topCenterCircle.startY - obj.rotationCircleLine };\n            }\n            else {\n                rotationCirclePoint = { x: obj.bottomCenterCircle.startX,\n                    y: obj.bottomCenterCircle.startY + obj.rotationCircleLine };\n            }\n        }\n        else if (degree === 90 || degree === -270) {\n            if (isHorizontalflip) {\n                rotationCirclePoint = { x: obj.centerRightCircle.startX +\n                        obj.rotationCircleLine, y: obj.centerLeftCircle.startY };\n            }\n            else {\n                rotationCirclePoint = { x: obj.centerLeftCircle.startX -\n                        obj.rotationCircleLine, y: obj.centerLeftCircle.startY };\n            }\n        }\n        else if (degree === 180 || degree === -180) {\n            if (isVerticalflip) {\n                rotationCirclePoint = { x: obj.bottomCenterCircle.startX,\n                    y: obj.bottomCenterCircle.startY + obj.rotationCircleLine };\n            }\n            else {\n                rotationCirclePoint = { x: obj.topCenterCircle.startX,\n                    y: obj.topCenterCircle.startY - obj.rotationCircleLine };\n            }\n        }\n        else if (degree === 270 || degree === -90) {\n            if (isHorizontalflip) {\n                rotationCirclePoint = { x: obj.centerLeftCircle.startX -\n                        obj.rotationCircleLine, y: obj.centerLeftCircle.startY };\n            }\n            else {\n                rotationCirclePoint = { x: obj.centerRightCircle.startX +\n                        obj.rotationCircleLine, y: obj.centerLeftCircle.startY };\n            }\n        }\n        if (object) {\n            object['rotationCirclePoint'] = rotationCirclePoint;\n        }\n        return rotationCirclePoint;\n    };\n    return Selection;\n}());\nexport { Selection };\n","import { EventHandler, extend, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ShapeType } from '../index';\nvar Shape = /** @class */ (function () {\n    function Shape(parent) {\n        this.textSettings = { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, fontRatio: null, bold: false, italic: false, underline: false };\n        this.strokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n        this.keyHistory = ''; // text history\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Shape.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Shape.prototype.addEventListener = function () {\n        this.parent.on('shape', this.shape, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Shape.prototype.removeEventListener = function () {\n        this.parent.off('shape', this.shape);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Shape.prototype.shape = function (args) {\n        this.initShapePvtProps();\n        switch (args.prop) {\n            case 'drawEllipse':\n                this.drawEllipse(args.value['x'], args.value['y'], args.value['radiusX'], args.value['radiusY'], args.value['strokeWidth'], args.value['strokeColor'], args.value['fillColor']);\n                break;\n            case 'drawLine':\n                this.drawLine(args.value['startX'], args.value['startY'], args.value['endX'], args.value['endY'], args.value['strokeWidth'], args.value['strokeColor']);\n                break;\n            case 'drawArrow':\n                this.drawArrow(args.value['startX'], args.value['startY'], args.value['endX'], args.value['endY'], args.value['strokeWidth'], args.value['strokeColor'], args.value['arrowStart'], args.value['arrowEnd']);\n                break;\n            case 'drawPath':\n                this.drawPath(args.value['pointColl'], args.value['strokeWidth'], args.value['strokeColor']);\n                break;\n            case 'drawRectangle':\n                this.drawRectangle(args.value['x'], args.value['y'], args.value['width'], args.value['height'], args.value['strokeWidt'], args.value['strokeColor'], args.value['fillColor']);\n                break;\n            case 'drawText':\n                this.drawText(args.value['x'], args.value['y'], args.value['text'], args.value['fontFamily'], args.value['fontSize'], args.value['bold'], args.value['italic'], args.value['color']);\n                break;\n            case 'redrawActObj':\n                this.redrawActObj(args.value['x'], args.value['y'], args.value['isMouseDown']);\n                break;\n            case 'apply':\n                this.apply(args.value['shape'], args.value['obj'], args.value['canvas']);\n                break;\n            case 'updateShapeChangeEventArgs':\n                this.updateShapeChangeEventArgs(args.value['shapeSettings']);\n                break;\n            case 'updSelChangeEventArgs':\n                this.updSelChangeEventArgs(args.value['selectionSettings']);\n                break;\n            case 'iterateObjColl':\n                this.iterateObjColl();\n                break;\n            case 'updImgRatioForActObj':\n                this.updImgRatioForActObj();\n                break;\n            case 'zoomObjColl':\n                this.zoomObjColl(args.value['isPreventApply']);\n                break;\n            case 'redrawObj':\n                this.redrawObj(args.value['degree']);\n                break;\n            case 'rotateObjColl':\n                this.rotateObjColl();\n                break;\n            case 'draw-shape-text':\n                this.drawShapeText();\n                break;\n            case 'redraw-text':\n                this.redrawText();\n                break;\n            case 'draw-shape':\n                this.drawShape(args.value['obj'], args.value['strokeWidth'], args.value['strokeColor'], args.value['fillColor'], args.value['start'], args.value['width'], args.value['height']);\n                break;\n            case 'renderTextArea':\n                this.renderTextArea(args.value['x'], args.value['y'], args.value['actObj']);\n                break;\n            case 'setTextBoxWidth':\n                this.setTextBoxWidth(args.value['e']);\n                break;\n            case 'findTextTarget':\n                this.findTextTarget(args.value['e']);\n                break;\n            case 'panObjColl':\n                this.panObjColl(args.value['xDiff'], args.value['yDiff'], args.value['panRegion']);\n                break;\n            case 'updateFontStyles':\n                this.updateFontStyles(args.value['isTextBox']);\n                break;\n            case 'applyFontStyle':\n                this.applyFontStyle(args.value['item']);\n                break;\n            case 'updateFontRatio':\n                this.updateFontRatio(args.value['obj'], args.value['isTextArea']);\n                break;\n            case 'updateFontSize':\n                this.updateFontSize(args.value['obj']);\n                break;\n            case 'updateObjColl':\n                this.updateObjColl(args.value['item'], args.value['objColl']);\n                break;\n            case 'pushActItemIntoObj':\n                this.pushActItemIntoObj();\n                break;\n            case 'clearActObj':\n                this.clearActObj();\n                break;\n            case 'refreshActiveObj':\n                this.refreshActiveObj();\n                break;\n            case 'applyActObj':\n                this.applyActObj(args.value['isMouseDown']);\n                break;\n            case 'wireEvent':\n                EventHandler.add(this.parent.upperCanvas, 'dblclick', this.findTextTarget, this);\n                EventHandler.add(this.parent.textArea, 'mousedown', this.findTextTarget, this);\n                break;\n            case 'unWireEvent':\n                EventHandler.remove(this.parent.upperCanvas, 'dblclick', this.findTextTarget);\n                EventHandler.remove(this.parent.textArea, 'mousedown', this.findTextTarget);\n                break;\n            case 'getShapeSetting':\n                this.getShapeSetting(args.value['id'], args.value['obj']);\n                break;\n            case 'getShapeSettings':\n                this.getShapeSettings(args.value['obj']);\n                break;\n            case 'isPointsInRange':\n                this.isPointsInRange(args.value['x'], args.value['y'], args.value['obj']);\n                break;\n            case 'alignRotateFlipColl':\n                this.alignRotateFlipColl(args.value['collection'], args.value['isRotateFlipCollection'], args.value['obj']);\n                break;\n            case 'selectShape':\n                this.selectShape(args.value['id'], args.value['obj']);\n                break;\n            case 'deleteShape':\n                this.deleteShape(args.value['id']);\n                break;\n            case 'getMaxText':\n                this.getMaxText(args.value['isTextBox'], args.value['text'], args.value['obj']);\n                break;\n            case 'setPointCollForLineArrow':\n                args.value['obj'].pointColl = this.getLinePoints(args.value['obj'].activePoint.startX, args.value['obj'].activePoint.startY, args.value['obj'].activePoint.endX, args.value['obj'].activePoint.endY);\n                break;\n            case 'setPointCollForShapeRotation':\n                this.setPointCollForShapeRotation(args.value['obj']);\n                break;\n            case 'setTextSettings':\n                if (args.value['textSettings']) {\n                    this.textSettings = args.value['textSettings'];\n                }\n                else if (args.value['fontFamily']) {\n                    this.textSettings.fontFamily = args.value['fontFamily'];\n                }\n                else if (args.value['fontSize']) {\n                    this.textSettings.fontSize = args.value['fontSize'];\n                }\n                break;\n            case 'setStrokeSettings':\n                if (args.value['strokeSettings']) {\n                    this.strokeSettings = args.value['strokeSettings'];\n                }\n                else if (args.value['strokeColor']) {\n                    this.strokeSettings.strokeColor = args.value['strokeColor'];\n                }\n                else if (args.value['fillColor']) {\n                    this.strokeSettings.fillColor = args.value['fillColor'];\n                }\n                else if (args.value['strokeWidth']) {\n                    this.strokeSettings.strokeWidth = args.value['strokeWidth'];\n                }\n                break;\n            case 'getStrokeSettings':\n                args.value['obj']['strokeSettings'] = this.strokeSettings;\n                break;\n            case 'setKeyHistory':\n                this.keyHistory = args.value['keyHistory'];\n                break;\n            case 'getKeyHistory':\n                args.value['obj']['keyHistory'] = this.keyHistory;\n                break;\n            case 'setTextBoxPos':\n                this.setTextBoxPos(args.value['actObj'], args.value['degree'], args.value['flip'], args.value['x'], args.value['y']);\n                break;\n            case 'setTextBoxPoints':\n                this.setTextBoxPoints(args.value['actObj'], args.value['degree'], args.value['flip'], args.value['x'], args.value['y']);\n                break;\n            case 'alignTextAreaIntoCanvas':\n                this.alignTextAreaIntoCanvas();\n                break;\n            case 'initializeTextShape':\n                this.initializeTextShape(args.value['text'], args.value['fontFamily'], args.value['fontSize'], args.value['bold'], args.value['italic'], args.value['strokeColor']);\n                break;\n            case 'stopPathDrawing':\n                this.stopPathDrawing(args.value['e']);\n                break;\n            case 'updateArrowRatio':\n                this.updateArrowRatio(args.value['obj']);\n                break;\n            case 'getSquarePointForRotatedShape':\n                this.getSquarePointForRotatedShape(args.value['obj'], args.value['object']);\n                break;\n            case 'reset':\n                this.reset();\n                break;\n        }\n    };\n    Shape.prototype.getModuleName = function () {\n        return 'shape';\n    };\n    Shape.prototype.initShapePvtProps = function () {\n        if (this.parent.lowerCanvas) {\n            this.lowerContext = this.parent.lowerCanvas.getContext('2d');\n        }\n        if (this.parent.upperCanvas) {\n            this.upperContext = this.parent.upperCanvas.getContext('2d');\n        }\n    };\n    Shape.prototype.reset = function () {\n        this.textSettings =\n            { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, fontRatio: null, bold: false, italic: false, underline: false };\n        this.strokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n    };\n    Shape.prototype.drawEllipse = function (x, y, radiusX, radiusY, strokeWidth, strokeColor, fillColor) {\n        this.initializeShape('ellipse');\n        var start = x && y ? { x: x, y: y } : null;\n        this.drawShape('ellipse', strokeWidth, strokeColor, fillColor, start, radiusX, radiusY);\n    };\n    Shape.prototype.drawLine = function (startX, startY, endX, endY, strokeWidth, strokeColor) {\n        this.initializeShape('line');\n        var start = startX && startY ? { x: startX, y: startY } : null;\n        var width = endX - startX;\n        var height = endY - startY;\n        this.drawShape('line', strokeWidth, strokeColor, null, start, width, height);\n    };\n    Shape.prototype.drawPath = function (pointColl, strokeWidth, strokeColor) {\n        this.initializeShape('path');\n        if (pointColl) {\n            this.drawShape('path', strokeWidth, strokeColor, null, null, null, null, pointColl);\n        }\n        else {\n            this.drawShape('line', strokeWidth, strokeColor, null, null, null, null);\n            var obj = extend({}, this.parent.objColl[this.parent.objColl.length - 1], null, true);\n            obj.shape = 'path';\n            obj.lineDraw = null;\n            obj.pointColl = [{ x: obj.activePoint.startX, y: obj.activePoint.startY },\n                { x: obj.activePoint.endX, y: obj.activePoint.endY }];\n            this.parent.objColl[this.parent.objColl.length - 1] = obj;\n        }\n    };\n    Shape.prototype.drawArrow = function (startX, startY, endX, endY, strokeWidth, strokeColor, arrowStart, arrowEnd) {\n        this.initializeShape('arrow');\n        var start = startX && startY ? { x: startX, y: startY } : null;\n        var width = endX - startX;\n        var height = endY - startY;\n        this.drawShape('arrow', strokeWidth, strokeColor, null, start, width, height, null, arrowStart, arrowEnd);\n    };\n    Shape.prototype.drawRectangle = function (x, y, width, height, strokeWidth, strokeColor, fillColor) {\n        this.initializeShape('rectangle');\n        var start = x && y ? { x: x, y: y } : null;\n        this.drawShape('rectangle', strokeWidth, strokeColor, fillColor, start, width, height);\n    };\n    Shape.prototype.drawText = function (x, y, text, fontFamily, fontSize, bold, italic, color) {\n        this.drawShapeText(text, fontFamily, fontSize, bold, italic, color, x, y);\n    };\n    Shape.prototype.initializeShape = function (type) {\n        this.redrawActObj();\n        this.parent.activeObj.shape = type;\n        if (this.parent.currObjType.shape === 'freehanddraw') {\n            this.apply();\n            this.parent.upperCanvas.style.cursor = this.parent.cursor = 'default';\n            this.parent.currObjType.shape = '';\n        }\n        this.parent.currObjType.isCustomCrop = false;\n    };\n    Shape.prototype.updateWidthHeight = function (obj) {\n        obj.activePoint.width = obj.activePoint.endX - obj.activePoint.startX;\n        obj.activePoint.height = obj.activePoint.endY - obj.activePoint.startY;\n        return obj;\n    };\n    Shape.prototype.setDimension = function (width, height) {\n        if (width && height) {\n            this.parent.activeObj.activePoint.width = width;\n            this.parent.activeObj.activePoint.height = height;\n            if (this.parent.currObjType.shape.toLowerCase() === 'ellipse') {\n                this.parent.activeObj.activePoint.width = 2 * width;\n                this.parent.activeObj.activePoint.height = 2 * height;\n            }\n        }\n    };\n    Shape.prototype.getArrowType = function (type) {\n        var arrowType = type;\n        if (type) {\n            var typeToArrowType = { 'None': 'none', 'Arrow': 'arrow', 'SolidArrow': 'arrowSolid',\n                'Circle': 'circle', 'SolidCircle': 'circleSolid', 'Square': 'square', 'SolidSquare': 'squareSolid', 'Bar': 'bar' };\n            arrowType = typeToArrowType[\"\" + type];\n        }\n        return arrowType;\n    };\n    Shape.prototype.drawShape = function (type, strokeWidth, strokeColor, fillColor, start, width, height, pointColl, arrowStart, arrowEnd) {\n        var _this = this;\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n            this.redrawActObj();\n            var objColl_1 = extend([], parent.objColl, [], true);\n            parent.togglePen = false;\n            this.keyHistory = '';\n            this.parent.upperCanvas.style.display = 'block';\n            this.refreshActiveObj();\n            parent.currObjType.shape = type;\n            if (parent.currObjType.shape.toLowerCase() === 'path' && isNullOrUndefined(pointColl)) {\n                parent.activeObj.shape = parent.currObjType.shape.toLowerCase();\n                parent.activeObj.pointColl = [];\n                parent.upperCanvas.style.cursor = this.parent.cursor = 'crosshair';\n                parent.notify('selection', { prop: 'setCurrentDrawingShape', onPropertyChange: false, value: { value: 'path' } });\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                            isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                }\n            }\n            else {\n                if (parent.currObjType.shape.toLowerCase() !== 'freehanddraw' && parent.currObjType.shape.toLowerCase() !== '') {\n                    parent.activeObj.shape = parent.currObjType.shape.toLowerCase();\n                    this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                    if (isNullOrUndefined(parent.activeObj.strokeSettings)) {\n                        parent.activeObj.strokeSettings = this.strokeSettings;\n                    }\n                    if (parent.currObjType.shape.toLowerCase() === 'path' && pointColl) {\n                        parent.activeObj.pointColl = pointColl;\n                    }\n                    parent.activeObj.strokeSettings.strokeWidth = strokeWidth ? strokeWidth : parent.activeObj.strokeSettings.strokeWidth;\n                    parent.activeObj.strokeSettings.strokeColor = strokeColor ? strokeColor : parent.activeObj.strokeSettings.strokeColor;\n                    parent.activeObj.strokeSettings.fillColor = fillColor ? fillColor : parent.activeObj.strokeSettings.fillColor;\n                    var tempWidth = parent.img.destWidth > 100 ? 100 : parent.img.destWidth / 2;\n                    var tempHeight = parent.img.destHeight > 100 ? 100 : parent.img.destHeight / 2;\n                    parent.activeObj.activePoint.width = tempWidth;\n                    parent.activeObj.activePoint.height = tempHeight;\n                    if (parent.currObjType.shape.toLowerCase() === 'line' || parent.currObjType.shape.toLowerCase() === 'arrow') {\n                        parent.activeObj.lineDraw = 'horizontal';\n                        parent.activeObj.activePoint.height = 0;\n                        if (parent.currObjType.shape.toLowerCase() === 'arrow') {\n                            parent.activeObj.activePoint.width += 50;\n                            parent.activeObj.start = this.getArrowType(arrowStart);\n                            parent.activeObj.end = this.getArrowType(arrowEnd);\n                        }\n                    }\n                    else if (parent.currObjType.shape.toLowerCase() === 'rectangle') {\n                        parent.activeObj.activePoint.width += parent.activeObj.activePoint.width / 2;\n                    }\n                    this.setDimension(width, height);\n                    if (start) {\n                        parent.activeObj.activePoint.startX = start.x;\n                        parent.activeObj.activePoint.startY = start.y;\n                        parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX +\n                            parent.activeObj.activePoint.width;\n                        parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY +\n                            parent.activeObj.activePoint.height;\n                    }\n                    else {\n                        this.setCenterPoints();\n                    }\n                    this.setPointCollForLineAndArrow();\n                    if (parent.currObjType.shape.toLowerCase() === 'arrow') {\n                        parent.activeObj.triangleDirection = 'right';\n                    }\n                    parent.currObjType.isDragging = parent.currObjType.isCustomCrop = false;\n                    parent.activeObj.shapeDegree = parent.transform.degree;\n                    parent.activeObj.shapeFlip = parent.transform.currFlipState;\n                    parent.activeObj.textFlip = parent.transform.currFlipState;\n                    parent.activeObj.flipObjColl = [];\n                    var obj = { shapeSettingsObj: {} };\n                    parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n                    var shapeSettings = obj['shapeSettingsObj'];\n                    var shapeChangingArgs = { action: 'insert', previousShapeSettings: shapeSettings,\n                        currentShapeSettings: shapeSettings };\n                    if (isBlazor() && parent.events && parent.events.shapeChanging.hasDelegate === true) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        this.parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShape', shapeChangingArgs).then(function (shapeChangingArgs) {\n                            _this.updateShapeChangeEventArgs(shapeChangingArgs.currentShapeSettings);\n                            _this.setDimension(width, height);\n                            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n                            parent.updateToolbar(parent.element, 'quickAccessToolbar', 'shape');\n                            parent.notify('selection', { prop: 'isShapeInserted', onPropertyChange: false, value: { bool: true } });\n                            parent.notify('undo-redo', { prop: 'updateUrObj', onPropertyChange: false, value: { objColl: objColl_1 } });\n                            if (parent.isPublicMethod) {\n                                parent.notify('undo-redo', { prop: 'updateUndoRedo', onPropertyChange: false });\n                            }\n                            parent.isPublicMethod = false;\n                        });\n                    }\n                    else {\n                        parent.trigger('shapeChanging', shapeChangingArgs);\n                        this.updateShapeChangeEventArgs(shapeChangingArgs.currentShapeSettings);\n                        this.setDimension(width, height);\n                        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n                        if (!isBlazor()) {\n                            parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n                        }\n                        else {\n                            parent.updateToolbar(parent.element, 'quickAccessToolbar', 'shape');\n                        }\n                        parent.notify('selection', { prop: 'isShapeInserted', onPropertyChange: false, value: { bool: true } });\n                        parent.notify('undo-redo', { prop: 'updateUrObj', onPropertyChange: false, value: { objColl: objColl_1 } });\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                        if (parent.isPublicMethod) {\n                            parent.notify('undo-redo', { prop: 'updateUndoRedo', onPropertyChange: false });\n                        }\n                        parent.isPublicMethod = false;\n                    }\n                }\n            }\n        }\n    };\n    Shape.prototype.setPointCollForLineAndArrow = function () {\n        var parent = this.parent;\n        if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow') {\n            parent.activeObj.pointColl = this.getLinePoints(parent.activeObj.activePoint.startX, parent.activeObj.activePoint.startY, parent.activeObj.activePoint.endX, parent.activeObj.activePoint.endY);\n            if (parent.activeObj.pointColl) {\n                for (var i = 0, len = parent.activeObj.pointColl.length; i < len; i++) {\n                    parent.activeObj.pointColl[i].ratioX = (parent.activeObj.pointColl[i].x -\n                        parent.img.destLeft) / parent.img.destWidth;\n                    parent.activeObj.pointColl[i].ratioY = (parent.activeObj.pointColl[i].y -\n                        parent.img.destTop) / parent.img.destHeight;\n                }\n            }\n        }\n    };\n    Shape.prototype.drawShapeText = function (text, fontFamily, fontSize, bold, italic, strokeColor, x, y) {\n        var _this = this;\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (parent.currObjType.shape === 'freehanddraw') {\n                this.apply();\n                parent.upperCanvas.style.cursor = parent.cursor = 'default';\n                parent.currObjType.shape = '';\n            }\n            parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n            parent.togglePen = false;\n            this.redrawActObj();\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            this.prevObj = object['currObj'];\n            this.prevObj.objColl = extend([], parent.objColl, [], true);\n            this.prevObj.pointColl = extend([], parent.pointColl, [], true);\n            this.prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            this.prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            this.refreshActiveObj();\n            parent.activeObj.shape = parent.currObjType.shape = 'text';\n            parent.currObjType.isCustomCrop = false;\n            this.initializeTextShape(text, fontFamily, fontSize, bold, italic, strokeColor);\n            parent.currObjType.isText = parent.currObjType.isInitialText = true;\n            if (isNullOrUndefined(parent.activeObj.textSettings.fontSize)) {\n                if (parent.img.destWidth > parent.img.destHeight) {\n                    parent.activeObj.textSettings.fontSize = (parent.img.destWidth / 15);\n                }\n                else {\n                    parent.activeObj.textSettings.fontSize = (parent.img.destHeight / 15);\n                }\n                if (parent.activeObj.textSettings.fontSize < 20) {\n                    parent.activeObj.textSettings.fontSize = 20;\n                }\n            }\n            if (parent.img.destWidth < 100) {\n                parent.activeObj.textSettings.fontSize = Math.floor((parent.img.destWidth / 20));\n            }\n            else if (parent.img.destHeight < 100) {\n                parent.activeObj.textSettings.fontSize = Math.floor((parent.img.destHeight / 20));\n            }\n            parent.activeObj.shapeDegree = parent.transform.degree;\n            parent.activeObj.shapeFlip = parent.transform.currFlipState;\n            parent.activeObj.flipObjColl = [];\n            this.updateFontStyles();\n            var width = this.upperContext.measureText(parent.activeObj.textSettings.text).width +\n                parent.activeObj.textSettings.fontSize * 0.5;\n            var height = parent.activeObj.textSettings.fontSize + parent.activeObj.textSettings.fontSize * 0.25;\n            if (!isNullOrUndefined(x) && !isNullOrUndefined(y)) {\n                parent.activeObj.activePoint.startX = x;\n                parent.activeObj.activePoint.startY = y;\n                parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + width;\n                parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY + height;\n            }\n            else {\n                this.setCenterPoints(true, width, height);\n            }\n            var obj = { shapeSettingsObj: {} };\n            parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n            var shapeSettings = obj['shapeSettingsObj'];\n            var shapeChangingArgs = { action: 'insert', previousShapeSettings: shapeSettings,\n                currentShapeSettings: shapeSettings };\n            if (isBlazor() && parent.events && parent.events.shapeChanging.hasDelegate === true) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShape', shapeChangingArgs).then(function (shapeChangingArgs) {\n                    _this.drawShapeTextEvent(shapeChangingArgs);\n                    if (parent.isPublicMethod) {\n                        parent.notify('undo-redo', { prop: 'updateUndoRedo', onPropertyChange: false });\n                    }\n                    parent.isPublicMethod = false;\n                });\n            }\n            else {\n                parent.trigger('shapeChanging', shapeChangingArgs);\n                this.drawShapeTextEvent(shapeChangingArgs);\n                if (parent.isPublicMethod) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedo', onPropertyChange: false });\n                }\n                parent.isPublicMethod = false;\n            }\n        }\n    };\n    Shape.prototype.drawShapeTextEvent = function (shapeChangingArgs) {\n        var parent = this.parent;\n        this.updateShapeChangeEventArgs(shapeChangingArgs.currentShapeSettings);\n        this.addLetter(parent.activeObj.textSettings.text);\n        parent.activeObj.textFlip = parent.transform.currFlipState;\n        this.updateFontRatio(parent.activeObj);\n        parent.objColl.push(parent.activeObj);\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: 'shapeTransform', previousObj: this.prevObj, previousObjColl: this.prevObj.objColl,\n                previousPointColl: this.prevObj.pointColl, previousSelPointColl: this.prevObj.selPointColl,\n                previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: null, isCircleCrop: null } });\n        parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false,\n            value: { obj: parent.objColl[parent.objColl.length - 1] } });\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'quickAccessToolbar', 'text');\n        }\n        parent.notify('selection', { prop: 'isShapeInserted', onPropertyChange: false, value: { bool: true } });\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'text',\n                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n            parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n        }\n    };\n    Shape.prototype.initializeTextShape = function (text, fontFamily, fontSize, bold, italic, strokeColor) {\n        var parent = this.parent;\n        this.keyHistory = '';\n        parent.upperCanvas.style.display = 'block';\n        if (isNullOrUndefined(parent.activeObj.textSettings)) {\n            parent.activeObj.textSettings = this.textSettings;\n        }\n        if (isNullOrUndefined(parent.activeObj.strokeSettings)) {\n            parent.activeObj.strokeSettings = this.strokeSettings;\n        }\n        parent.activeObj.strokeSettings.strokeColor = strokeColor || parent.activeObj.strokeSettings.strokeColor;\n        parent.activeObj.textSettings.text = text || parent.activeObj.textSettings.text;\n        parent.activeObj.textSettings.fontFamily = fontFamily || parent.activeObj.textSettings.fontFamily;\n        parent.activeObj.textSettings.fontSize = fontSize || parent.activeObj.textSettings.fontSize;\n        parent.activeObj.textSettings.bold = bold || parent.activeObj.textSettings.bold;\n        parent.activeObj.textSettings.italic = italic || parent.activeObj.textSettings.italic;\n    };\n    Shape.prototype.redrawActObj = function (x, y, isMouseDown) {\n        var splitWords;\n        var parent = this.parent;\n        if (parent.activeObj.shape) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (parent.activeObj.horTopLine && (parent.activeObj.shape && splitWords[0] !== 'crop')) {\n            if (parent.textArea.style.display === 'block') {\n                parent.notify('selection', { prop: 'setTextBoxStylesToActObj', onPropertyChange: false });\n                this.updateFontRatio(parent.activeObj, true);\n                if (x && y) {\n                    if ((x !== parent.activeObj.activePoint.startX) && (y !== parent.activeObj.activePoint.startY)) {\n                        this.updateTextFromTextArea();\n                        this.applyActObj();\n                    }\n                }\n                else {\n                    this.updateTextFromTextArea();\n                    this.apply(parent.activeObj.shape, parent.activeObj);\n                    parent.objColl.push(parent.activeObj);\n                    this.refreshActiveObj();\n                    parent.textArea.style.transform = '';\n                    parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n                }\n            }\n            else {\n                this.applyActObj(isMouseDown);\n            }\n        }\n    };\n    Shape.prototype.apply = function (shape, obj, canvas) {\n        var parent = this.parent;\n        if (!parent.disabled) {\n            if (parent.togglePen && !parent.currObjType.isCustomCrop) {\n                var destLeft = parent.img.destLeft;\n                var destTop = parent.img.destTop;\n                var destWidth = parent.img.destWidth;\n                var destHeight = parent.img.destHeight;\n                parent.notify('draw', { prop: 'callUpdateCurrTransState', onPropertyChange: false });\n                var temp = this.lowerContext.filter;\n                this.lowerContext.filter = 'none';\n                parent.togglePen = false;\n                this.iterateObjColl();\n                parent.notify('freehandDraw', { prop: 'freehandRedraw', onPropertyChange: false,\n                    value: { context: this.lowerContext, points: null } });\n                parent.togglePen = false;\n                if (parent.isCircleCrop || (parent.currSelectionPoint &&\n                    parent.currSelectionPoint.shape === 'crop-circle')) {\n                    parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                        value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                }\n                parent.img.destLeft = destLeft;\n                parent.img.destTop = destTop;\n                parent.img.destWidth = destWidth;\n                parent.img.destHeight = destHeight;\n                this.lowerContext.filter = temp;\n            }\n            else {\n                canvas = canvas ? canvas : 'original';\n                if (isNullOrUndefined(parent.activeObj.shape) && isNullOrUndefined(shape)) {\n                    parent.currObjType.shape = '';\n                }\n                else {\n                    parent.currObjType.shape = shape || parent.currObjType.shape;\n                }\n                if (parent.currObjType.shape !== '') {\n                    this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                    if (parent.activeObj.shape === 'text') {\n                        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: canvas, obj: obj, isCropRatio: null,\n                                points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n                        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n                    }\n                    else {\n                        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: canvas, obj: obj } });\n                    }\n                    parent.activeObj.shape = parent.currObjType.shape.toLowerCase();\n                    if (!shape && parent.currObjType.shape !== '' && !parent.currObjType.isCustomCrop) {\n                        parent.objColl.push(extend({}, parent.activeObj, {}, true));\n                    }\n                    this.keyHistory = '';\n                }\n            }\n        }\n    };\n    Shape.prototype.setCenterPoints = function (text, width, height) {\n        var parent = this.parent;\n        var renderWidth;\n        var renderHeight;\n        if (text && width && height) {\n            renderWidth = width;\n            renderHeight = height;\n        }\n        else {\n            renderWidth = parent.activeObj.activePoint.width;\n            renderHeight = parent.activeObj.activePoint.height;\n        }\n        parent.activeObj.activePoint.startX = (parent.lowerCanvas.width / 2) - renderWidth / 2;\n        parent.activeObj.activePoint.startY = (parent.lowerCanvas.height / 2) - renderHeight / 2;\n        parent.activeObj.activePoint.endX = (parent.lowerCanvas.width / 2) + renderWidth / 2;\n        parent.activeObj.activePoint.endY = (parent.lowerCanvas.height / 2) + renderHeight / 2;\n    };\n    Shape.prototype.updSelChangeEventArgs = function (selectionSettings) {\n        var parent = this.parent;\n        parent.activeObj.activePoint.startX = selectionSettings.startX;\n        parent.activeObj.activePoint.startY = selectionSettings.startY;\n        parent.activeObj.activePoint.width = selectionSettings.width;\n        parent.activeObj.activePoint.height = selectionSettings.height;\n        parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + parent.activeObj.activePoint.width;\n        parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY + parent.activeObj.activePoint.height;\n    };\n    Shape.prototype.updateShapeChangeEventArgs = function (shapeSettings) {\n        var parent = this.parent;\n        parent.activeObj.currIndex = shapeSettings.id;\n        parent.activeObj.activePoint.startX = shapeSettings.startX;\n        parent.activeObj.activePoint.startY = shapeSettings.startY;\n        parent.activeObj.activePoint.width = shapeSettings.width;\n        parent.activeObj.activePoint.height = shapeSettings.height;\n        parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + parent.activeObj.activePoint.width;\n        parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY + parent.activeObj.activePoint.height;\n        parent.activeObj.strokeSettings.strokeColor = shapeSettings.strokeColor;\n        parent.activeObj.strokeSettings.fillColor = shapeSettings.fillColor;\n        switch (parent.activeObj.shape) {\n            case 'ellipse':\n                parent.activeObj.activePoint.width = shapeSettings.radius / 2;\n                break;\n            case 'line':\n            case 'arrow':\n                parent.activeObj.activePoint.width = shapeSettings.length;\n                break;\n            case 'text':\n                parent.activeObj.keyHistory = shapeSettings.text;\n                parent.activeObj.textSettings.fontSize = shapeSettings.fontSize;\n                parent.activeObj.strokeSettings.strokeColor = shapeSettings.color;\n                break;\n        }\n        if (parent.activeObj.shape === 'text' && parent.activeObj.textSettings) {\n            for (var i = 0; i < shapeSettings.fontStyle.length; i++) {\n                switch (shapeSettings.fontStyle[i]) {\n                    case 'bold':\n                        parent.activeObj.textSettings.bold = true;\n                        break;\n                    case 'italic':\n                        parent.activeObj.textSettings.italic = true;\n                        break;\n                    case 'underline':\n                        parent.activeObj.textSettings.underline = true;\n                        break;\n                }\n            }\n        }\n    };\n    Shape.prototype.addLetter = function (letter) {\n        var parent = this.parent;\n        if (parent.textArea.style.display === 'none' && (parent.currObjType.isText || parent.activeObj.shape === 'text')) {\n            if (letter === 'Backspace') {\n                this.keyHistory = this.keyHistory.slice(0, -1);\n            }\n            else {\n                this.keyHistory += letter;\n            }\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            this.updateFontStyles();\n            var width = this.upperContext.measureText(this.keyHistory).width\n                + parent.activeObj.textSettings.fontSize * 0.5;\n            var height = parent.activeObj.textSettings.fontSize + parent.activeObj.textSettings.fontSize * 0.25;\n            this.upperContext.fillText(this.keyHistory, parent.activeObj.activePoint.startX, parent.activeObj.activePoint.startY +\n                parent.activeObj.textSettings.fontSize);\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            parent.currObjType.isText = true;\n            parent.notify('selection', { prop: 'setActivePoint', onPropertyChange: false,\n                value: { startX: width, startY: height } });\n        }\n    };\n    Shape.prototype.redrawText = function () {\n        var parent = this.parent;\n        var fontStyle = '';\n        if (parent.activeObj.textSettings.bold) {\n            fontStyle += 'bold ';\n        }\n        if (parent.activeObj.textSettings.italic) {\n            fontStyle += 'italic ';\n        }\n        this.upperContext.font = fontStyle + parent.activeObj.textSettings.fontSize + 'px ' + parent.activeObj.textSettings.fontFamily;\n        var rows = parent.activeObj.keyHistory.split('\\n');\n        var text = parent.textArea.style.display === 'block' ? this.getMaxText(true) : this.getMaxText();\n        var width = this.upperContext.measureText(text).width + parent.activeObj.textSettings.fontSize * 0.5;\n        var height = rows.length * (parent.activeObj.textSettings.fontSize + parent.activeObj.textSettings.fontSize * 0.25);\n        parent.notify('selection', { prop: 'setTextSelection', onPropertyChange: false,\n            value: { width: width, height: height } });\n        parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: parent.activeObj.activePoint, obj: parent.activeObj,\n                isMouseMove: null, x: null, y: null } });\n        parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false,\n            value: { obj: parent.activeObj } });\n    };\n    Shape.prototype.updateTextFromTextArea = function () {\n        var parent = this.parent;\n        if (parent.activeObj.keyHistory !== parent.textArea.value) {\n            var prevCropObj = extend({}, parent.cropObj, {}, true);\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var prevObj = object['currObj'];\n            prevObj.objColl = extend([], parent.objColl, [], true);\n            prevObj.pointColl = extend([], parent.pointColl, [], true);\n            prevObj.afterCropActions = extend([], this.parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'text', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: parent.activeObj.keyHistory,\n                    currentText: parent.textArea.value, previousFilter: null, isCircleCrop: null } });\n        }\n        parent.activeObj.keyHistory = parent.textArea.value;\n        parent.textArea.style.display = 'none';\n        parent.textArea.value = '';\n        this.updateFontStyles();\n        var width = this.upperContext.measureText(parent.activeObj.keyHistory).width +\n            parent.activeObj.textSettings.fontSize * 0.5;\n        var height = parent.activeObj.textSettings.fontSize + this.parent.activeObj.textSettings.fontSize * 0.25;\n        var rows = parent.activeObj.keyHistory.split('\\n');\n        if (rows.length > 1) {\n            height *= rows.length;\n            var widthColl = [];\n            for (var i = 0, len = rows.length; i < len; i++) {\n                widthColl.push(this.upperContext.measureText(rows[i]).width +\n                    parent.activeObj.textSettings.fontSize * 0.5);\n            }\n            width = Math.max.apply(Math, widthColl);\n        }\n        parent.notify('selection', { prop: 'setTextSelection', onPropertyChange: false,\n            value: { width: width, height: height } });\n        parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: parent.activeObj.activePoint, obj: parent.activeObj,\n                isMouseMove: null, x: null, y: null } });\n        this.updImgRatioForActObj();\n    };\n    Shape.prototype.iterateObjColl = function () {\n        var parent = this.parent;\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            this.apply(parent.objColl[i].shape, parent.objColl[i]);\n            this.refreshActiveObj();\n        }\n    };\n    Shape.prototype.updImgRatioForActObj = function () {\n        var parent = this.parent;\n        parent.activeObj.imageRatio = { startX: ((parent.activeObj.activePoint.startX - parent.img.destLeft) /\n                parent.img.destWidth),\n            startY: ((parent.activeObj.activePoint.startY - parent.img.destTop) / parent.img.destHeight),\n            endX: ((parent.activeObj.activePoint.endX - parent.img.destLeft) / parent.img.destWidth),\n            endY: ((parent.activeObj.activePoint.endY - parent.img.destTop) / parent.img.destHeight),\n            width: parent.img.destWidth / parent.activeObj.activePoint.width, height: parent.img.destHeight /\n                parent.activeObj.activePoint.height };\n        if (parent.activeObj.rotationCirclePointColl) {\n            parent.activeObj.rotationCirclePointColl.ratioX = (parent.activeObj.rotationCirclePointColl.x -\n                parent.img.destLeft) / parent.img.destWidth;\n            parent.activeObj.rotationCirclePointColl.ratioY = (parent.activeObj.rotationCirclePointColl.y -\n                parent.img.destTop) / parent.img.destHeight;\n        }\n        if (parent.activeObj.shape === 'path') {\n            this.updatePathRatio(parent.activeObj);\n        }\n        else if (parent.activeObj.shape === 'arrow') {\n            this.updateArrowRatio(parent.activeObj);\n        }\n    };\n    Shape.prototype.zoomObjColl = function (preventApply) {\n        var parent = this.parent;\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            var currObj = parent.objColl[i];\n            currObj.activePoint.startX = (currObj.imageRatio.startX * parent.img.destWidth) + parent.img.destLeft;\n            currObj.activePoint.startY = (currObj.imageRatio.startY * parent.img.destHeight) + parent.img.destTop;\n            currObj.activePoint.endX = (currObj.imageRatio.endX * parent.img.destWidth) + parent.img.destLeft;\n            currObj.activePoint.endY = (currObj.imageRatio.endY * parent.img.destHeight) + parent.img.destTop;\n            currObj = this.updateWidthHeight(currObj);\n            if (currObj.shape === 'text') {\n                this.updateFontSize(currObj);\n            }\n            else if (currObj.shape === 'line' || currObj.shape === 'arrow') {\n                currObj.pointColl = this.getLinePoints(currObj.activePoint.startX, currObj.activePoint.startY, currObj.activePoint.endX, currObj.activePoint.endY);\n                for (var n = 0, len_1 = currObj.pointColl.length; n < len_1; n++) {\n                    currObj.pointColl[n].ratioX =\n                        (currObj.pointColl[n].x - parent.img.destLeft) / parent.img.destWidth;\n                    currObj.pointColl[n].ratioY =\n                        (currObj.pointColl[n].y - parent.img.destTop) / parent.img.destHeight;\n                }\n                if (currObj.shape === 'arrow') {\n                    this.updateArrowSize(currObj);\n                }\n            }\n            else if (currObj.shape === 'path') {\n                for (var l = 0, len_2 = currObj.pointColl.length; l < len_2; l++) {\n                    currObj.pointColl[l].x = (currObj.pointColl[l].ratioX * parent.img.destWidth)\n                        + parent.img.destLeft;\n                    currObj.pointColl[l].y = (currObj.pointColl[l].ratioY * parent.img.destHeight) +\n                        parent.img.destTop;\n                }\n                this.updatePathRatio(currObj);\n            }\n            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint,\n                    obj: currObj } });\n            if (isNullOrUndefined(preventApply)) {\n                var temp = this.lowerContext.filter;\n                this.lowerContext.filter = 'none';\n                this.apply(currObj.shape, currObj);\n                this.refreshActiveObj();\n                this.lowerContext.filter = temp;\n            }\n            if (currObj.shape !== 'line' && currObj.shape !== 'arrow' && currObj.shape !== 'path' && currObj.rotatedAngle !== 0) {\n                this.setPointCollForShapeRotation(currObj);\n                currObj.rotationCirclePoint.x =\n                    (currObj.rotationCirclePoint.ratioX * parent.img.destWidth) + parent.img.destLeft;\n                currObj.rotationCirclePoint.y =\n                    (currObj.rotationCirclePoint.ratioY * parent.img.destHeight) + parent.img.destTop;\n                currObj.rotationCirclePointColl.x =\n                    (currObj.rotationCirclePointColl.ratioX * parent.img.destWidth) +\n                        parent.img.destLeft;\n                currObj.rotationCirclePointColl.y =\n                    (currObj.rotationCirclePointColl.ratioY * parent.img.destHeight) +\n                        parent.img.destTop;\n            }\n        }\n    };\n    Shape.prototype.redrawObj = function (degree) {\n        var parent = this.parent;\n        if (this.parent.objColl.length > 0) {\n            if (degree === 'horizontal' || degree === 'vertical' || degree === 'Horizontal' || degree === 'Vertical' ||\n                degree === 'horizontalVertical' || degree === 'verticalHorizontal') {\n                this.updateCurrentActiveObjPoint(degree.toLowerCase());\n            }\n            else if (typeof (degree) === 'number') {\n                this.updateCurrentActiveObjPoint(degree);\n                var tempFilter = this.lowerContext.filter;\n                this.lowerContext.filter = 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n                    'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    var splitWords = parent.objColl[i].shape.split('-');\n                    if (splitWords[0] !== 'crop') {\n                        this.apply(parent.objColl[i].shape, parent.objColl[i]);\n                    }\n                }\n                this.lowerContext.filter = tempFilter;\n            }\n        }\n    };\n    Shape.prototype.updateCurrentActiveObjPoint = function (degree) {\n        var parent = this.parent;\n        var currActObjIndex;\n        for (var index = 0, len = parent.objColl.length; index < len; index++) {\n            var currObj = parent.objColl[index];\n            if (parent.activeObj.shape === currObj.shape &&\n                parent.activeObj.activePoint.startX === currObj.activePoint.startX &&\n                parent.activeObj.activePoint.startY === currObj.activePoint.startY &&\n                parent.activeObj.activePoint.endX === currObj.activePoint.endX &&\n                parent.activeObj.activePoint.endY === currObj.activePoint.endY &&\n                parent.activeObj.currIndex === currObj.currIndex) {\n                currActObjIndex = index;\n                break;\n            }\n        }\n        if (degree === 'horizontal' || degree === 'vertical' || degree === 'Horizontal' || degree === 'Vertical' ||\n            degree === 'horizontalvertical' || degree === 'verticalhorizontal') {\n            if (degree === 'horizontal' || degree === 'Horizontal') {\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    var currObj = parent.objColl[i];\n                    if (currObj.shapeFlip !== parent.transform.currFlipState) {\n                        if (currObj.activePoint.startX <= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                            currObj.activePoint.endX = (parent.img.destLeft + parent.img.destWidth) - (currObj.activePoint.startX -\n                                parent.img.destLeft);\n                            currObj.activePoint.startX = currObj.activePoint.endX - currObj.activePoint.width;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint, obj: currObj } });\n                        }\n                        else if (currObj.activePoint.startX >= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                            currObj.activePoint.startX = parent.img.destLeft + (parent.img.destLeft + parent.img.destWidth -\n                                currObj.activePoint.endX);\n                            currObj.activePoint.endX = currObj.activePoint.startX + currObj.activePoint.width;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint,\n                                    obj: currObj } });\n                        }\n                        if (currObj.shape === 'line' || currObj.shape === 'arrow' || currObj.shape === 'path') {\n                            this.flipLineArrowObj(currObj, 'horizontal');\n                        }\n                        else if (currObj.rotatedAngle !== 0) {\n                            currObj.rotatedAngle = currObj.rotatedAngle + (Math.PI - currObj.rotatedAngle) * 2;\n                            if (currObj.rotationCirclePointColl.x <= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                                currObj.rotationCirclePointColl.x = (parent.img.destLeft + parent.img.destWidth) -\n                                    (currObj.rotationCirclePointColl.x - parent.img.destLeft);\n                            }\n                            else if (currObj.rotationCirclePointColl.x >= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                                currObj.rotationCirclePointColl.x = parent.img.destLeft +\n                                    (parent.img.destLeft + parent.img.destWidth - currObj.rotationCirclePointColl.x);\n                            }\n                            currObj.rotationCirclePointColl.ratioX =\n                                (currObj.rotationCirclePointColl.x - parent.img.destLeft) / parent.img.destWidth;\n                        }\n                        currObj.shapeFlip = parent.transform.currFlipState;\n                        currObj.imageRatio = { startX: ((currObj.activePoint.startX - parent.img.destLeft) / parent.img.destWidth),\n                            startY: ((currObj.activePoint.startY - parent.img.destTop) / parent.img.destHeight),\n                            endX: ((currObj.activePoint.endX - parent.img.destLeft) / parent.img.destWidth),\n                            endY: ((currObj.activePoint.endY - parent.img.destTop) / parent.img.destHeight),\n                            width: parent.img.destWidth / currObj.activePoint.width,\n                            height: parent.img.destHeight / currObj.activePoint.height };\n                    }\n                }\n            }\n            else if (degree === 'vertical' || degree === 'Vertical') {\n                for (var i = 0; i < parent.objColl.length; i++) {\n                    var currObj = parent.objColl[i];\n                    if (currObj.shapeFlip !== parent.transform.currFlipState) {\n                        if (currObj.activePoint.startY <= parent.img.destTop + (parent.img.destHeight / 2)) {\n                            currObj.activePoint.endY = (parent.img.destTop + parent.img.destHeight) -\n                                (currObj.activePoint.startY - parent.img.destTop);\n                            currObj.activePoint.startY = currObj.activePoint.endY - currObj.activePoint.height;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint,\n                                    obj: currObj } });\n                        }\n                        else if (currObj.activePoint.startY >= this.parent.lowerCanvas.height / 2) {\n                            currObj.activePoint.startY = parent.img.destTop + (parent.img.destTop +\n                                parent.img.destHeight - currObj.activePoint.endY);\n                            currObj.activePoint.endY = currObj.activePoint.startY +\n                                currObj.activePoint.height;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint,\n                                    obj: currObj } });\n                        }\n                        if (currObj.shape === 'line' || currObj.shape === 'arrow' ||\n                            currObj.shape === 'path') {\n                            this.flipLineArrowObj(currObj, 'vertical');\n                        }\n                        else if (currObj.rotatedAngle !== 0) {\n                            currObj.rotatedAngle = -currObj.rotatedAngle;\n                            if (currObj.rotationCirclePointColl.y <= parent.img.destTop + (parent.img.destHeight / 2)) {\n                                currObj.rotationCirclePointColl.y = (parent.img.destTop + parent.img.destHeight) -\n                                    (currObj.rotationCirclePointColl.y - parent.img.destTop);\n                            }\n                            else if (currObj.rotationCirclePointColl.y >= parent.img.destTop +\n                                (parent.img.destHeight / 2)) {\n                                currObj.rotationCirclePointColl.y = parent.img.destTop + (parent.img.destTop +\n                                    parent.img.destHeight - currObj.rotationCirclePointColl.y);\n                            }\n                            currObj.rotationCirclePointColl.ratioY =\n                                (currObj.rotationCirclePointColl.y - parent.img.destTop) / parent.img.destHeight;\n                        }\n                        currObj.shapeFlip = parent.transform.currFlipState;\n                        currObj.imageRatio = { startX: ((currObj.activePoint.startX - parent.img.destLeft) / parent.img.destWidth),\n                            startY: ((currObj.activePoint.startY - parent.img.destTop) / parent.img.destHeight),\n                            endX: ((currObj.activePoint.endX - parent.img.destLeft) / parent.img.destWidth),\n                            endY: ((currObj.activePoint.endY - parent.img.destTop) / parent.img.destHeight),\n                            width: parent.img.destWidth / currObj.activePoint.width,\n                            height: parent.img.destHeight / currObj.activePoint.height };\n                    }\n                }\n            }\n            else if (degree === 'verticalhorizontal' || degree === 'horizontalvertical') {\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    var currObj = parent.objColl[i];\n                    if (currObj.shapeFlip !== parent.transform.currFlipState) {\n                        if (currObj.activePoint.startX <= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                            currObj.activePoint.endX = (parent.img.destLeft + parent.img.destWidth) - (currObj.activePoint.startX -\n                                parent.img.destLeft);\n                            currObj.activePoint.startX = currObj.activePoint.endX - currObj.activePoint.width;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint, obj: currObj } });\n                        }\n                        else if (currObj.activePoint.startX >= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                            currObj.activePoint.startX = parent.img.destLeft + (parent.img.destLeft +\n                                parent.img.destWidth - currObj.activePoint.endX);\n                            currObj.activePoint.endX = currObj.activePoint.startX + currObj.activePoint.width;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint, obj: currObj } });\n                        }\n                        if (currObj.activePoint.startY <= parent.img.destTop + (parent.img.destHeight / 2)) {\n                            currObj.activePoint.endY = (parent.img.destTop + parent.img.destHeight) -\n                                (currObj.activePoint.startY - parent.img.destTop);\n                            currObj.activePoint.startY = currObj.activePoint.endY -\n                                currObj.activePoint.height;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint, obj: currObj } });\n                        }\n                        else if (currObj.activePoint.startY >= this.parent.lowerCanvas.height / 2) {\n                            currObj.activePoint.startY = parent.img.destTop + (parent.img.destTop +\n                                parent.img.destHeight - currObj.activePoint.endY);\n                            currObj.activePoint.endY = currObj.activePoint.startY +\n                                currObj.activePoint.height;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint, obj: currObj } });\n                        }\n                        if (currObj.shape === 'line' || currObj.shape === 'arrow' || currObj.shape === 'path') {\n                            this.flipLineArrowObj(currObj, degree);\n                        }\n                        currObj.shapeFlip = parent.transform.currFlipState;\n                        currObj.imageRatio = { startX: ((currObj.activePoint.startX - parent.img.destLeft) / parent.img.destWidth),\n                            startY: ((currObj.activePoint.startY - parent.img.destTop) / parent.img.destHeight),\n                            endX: ((currObj.activePoint.endX - parent.img.destLeft) / parent.img.destWidth),\n                            endY: ((currObj.activePoint.endY - parent.img.destTop) / parent.img.destHeight),\n                            width: parent.img.destWidth / currObj.activePoint.width,\n                            height: parent.img.destHeight / currObj.activePoint.height };\n                    }\n                }\n            }\n            if (currActObjIndex !== undefined) {\n                parent.activeObj = extend({}, parent.objColl[currActObjIndex], {}, true);\n            }\n        }\n        else if (degree === 90) {\n            this.rotateObjColl();\n        }\n        else if (degree === -90) {\n            for (var i = 0; i < 3; i++) {\n                this.rotateObjColl();\n            }\n        }\n        else if (typeof (degree) === 'number') {\n            if (degree > 0) {\n                this.rotateObjColl();\n            }\n            else {\n                for (var i = 0; i < 3; i++) {\n                    this.rotateObjColl();\n                }\n            }\n        }\n    };\n    Shape.prototype.rotateObjColl = function () {\n        var parent = this.parent;\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            var currObj = parent.objColl[i];\n            currObj.activePoint.startY = parent.img.destTop + (parent.img.destHeight * currObj.imageRatio.startX);\n            currObj.activePoint.endY = parent.img.destTop + (parent.img.destHeight * currObj.imageRatio.endX);\n            currObj.activePoint.startX = (parent.img.destLeft + parent.img.destWidth) -\n                (parent.img.destWidth * currObj.imageRatio.endY);\n            currObj.activePoint.endX = (parent.img.destLeft + parent.img.destWidth) -\n                (parent.img.destWidth * currObj.imageRatio.startY);\n            currObj = this.updateWidthHeight(parent.objColl[i]);\n            this.updateFontSize(currObj);\n            if (currObj.shape === 'line' || currObj.shape === 'arrow' ||\n                currObj.shape === 'path') {\n                this.rotateLineArrowObj(currObj);\n                if (currObj.shape === 'arrow') {\n                    this.updateArrowSize(currObj);\n                }\n            }\n            else if (currObj.rotatedAngle !== 0) {\n                currObj.rotationCirclePointColl.y = parent.img.destTop + (parent.img.destHeight * currObj.rotationCirclePointColl.ratioX);\n                currObj.rotationCirclePointColl.x = (parent.img.destLeft + parent.img.destWidth) -\n                    (parent.img.destWidth * currObj.rotationCirclePointColl.ratioY);\n                currObj.rotationCirclePointColl.ratioX = (currObj.rotationCirclePointColl.x\n                    - parent.img.destLeft) / parent.img.destWidth;\n                currObj.rotationCirclePointColl.ratioY = (currObj.rotationCirclePointColl.y\n                    - parent.img.destTop) / parent.img.destHeight;\n            }\n        }\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: parent.objColl[i].activePoint, obj: parent.objColl[i] } });\n        }\n        // Update current image ratio for all objects\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            var currObj = parent.objColl[i];\n            currObj.imageRatio = { startX: ((currObj.activePoint.startX - parent.img.destLeft) / parent.img.destWidth),\n                startY: ((currObj.activePoint.startY - parent.img.destTop) / parent.img.destHeight),\n                endX: ((currObj.activePoint.endX - parent.img.destLeft) / parent.img.destWidth),\n                endY: ((currObj.activePoint.endY - parent.img.destTop) / parent.img.destHeight),\n                width: parent.img.destWidth / currObj.activePoint.width,\n                height: parent.img.destHeight / currObj.activePoint.height };\n        }\n    };\n    Shape.prototype.rotateLineArrowObj = function (obj) {\n        if (isNullOrUndefined(obj.pointColl)) {\n            return;\n        }\n        var parent = this.parent;\n        if (obj.pointColl.length > 0) {\n            for (var n = 0; n < obj.pointColl.length; n++) {\n                obj.pointColl[n].y = parent.img.destTop + (parent.img.destHeight * obj.pointColl[n].ratioX);\n                obj.pointColl[n].x = (parent.img.destLeft + parent.img.destWidth) - (parent.img.destWidth *\n                    obj.pointColl[n].ratioY);\n            }\n            for (var n = 0; n < obj.pointColl.length; n++) {\n                obj.pointColl[n].ratioX = (obj.pointColl[n].x - parent.img.destLeft) / parent.img.destWidth;\n                obj.pointColl[n].ratioY = (obj.pointColl[n].y - parent.img.destTop) / parent.img.destHeight;\n            }\n            var prevPoint = void 0;\n            if (isNullOrUndefined(obj.pointColl[obj.pointColl.length - 2])) {\n                prevPoint = { x: 0, y: 0 };\n            }\n            else {\n                prevPoint = { x: obj.pointColl[obj.pointColl.length - 2].x, y: obj.pointColl[obj.pointColl.length - 2].y };\n            }\n            var diffX = obj.pointColl[obj.pointColl.length - 1].x - prevPoint.x;\n            var diffY = obj.pointColl[obj.pointColl.length - 1].y - prevPoint.y;\n            obj.activePoint.startX = obj.pointColl[0].x;\n            obj.activePoint.startY = obj.pointColl[0].y;\n            obj.activePoint.endX = obj.pointColl[obj.pointColl.length - 1].x + (diffX / 2);\n            obj.activePoint.endY = obj.pointColl[obj.pointColl.length - 1].y + (diffY / 2);\n            obj = this.updateWidthHeight(obj);\n        }\n    };\n    Shape.prototype.flipLineArrowObj = function (obj, value) {\n        if (isNullOrUndefined(obj.pointColl)) {\n            return;\n        }\n        if (value.toLowerCase() === 'horizontal') {\n            this.lineArrowHorizontalFlip(obj);\n        }\n        else if (value.toLowerCase() === 'vertical') {\n            this.lineArrowVerticalFlip(obj);\n        }\n        else {\n            this.lineArrowHorizontalFlip(obj);\n            obj.shapeFlip = '';\n            this.lineArrowVerticalFlip(obj);\n        }\n        obj.activePoint.startX = obj.pointColl[0].x;\n        obj.activePoint.startY = obj.pointColl[0].y;\n        obj.activePoint.endX = obj.pointColl[obj.pointColl.length - 1].x;\n        obj.activePoint.endY = obj.pointColl[obj.pointColl.length - 1].y;\n        if (obj.activePoint.startX > obj.activePoint.endX) {\n            var temp = obj.activePoint.startX;\n            obj.activePoint.startX = obj.activePoint.endX;\n            obj.activePoint.endX = temp;\n            temp = obj.activePoint.startY;\n            obj.activePoint.startY = obj.activePoint.endY;\n            obj.activePoint.endY = temp;\n        }\n    };\n    Shape.prototype.lineArrowHorizontalFlip = function (obj) {\n        var parent = this.parent;\n        // Update flip value for point collection\n        if (obj.shapeFlip !== parent.transform.currFlipState) {\n            for (var l = 0, len = obj.pointColl.length; l < len; l++) {\n                var currPoint = obj.pointColl[l];\n                if (currPoint.x <= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                    currPoint.x = (parent.img.destLeft + parent.img.destWidth) - (currPoint.x\n                        - parent.img.destLeft);\n                }\n                else if (currPoint.x >= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                    currPoint.x = parent.img.destLeft + (parent.img.destLeft + parent.img.destWidth -\n                        currPoint.x);\n                }\n                currPoint.ratioX = (currPoint.x - parent.img.destLeft) / parent.img.destWidth;\n                currPoint.ratioY = (currPoint.y - parent.img.destTop) / parent.img.destHeight;\n            }\n            if (obj.shape === 'arrow') {\n                var value = obj.start;\n                obj.start = obj.end;\n                obj.end = value;\n            }\n            obj.shapeFlip = parent.transform.currFlipState;\n        }\n    };\n    Shape.prototype.lineArrowVerticalFlip = function (obj) {\n        var parent = this.parent;\n        // Update flip value for point collection\n        if (obj.shapeFlip !== parent.transform.currFlipState) {\n            for (var l = 0, len = obj.pointColl.length; l < len; l++) {\n                var currPoint = obj.pointColl[l];\n                if (currPoint.y <= parent.img.destTop + (parent.img.destHeight / 2)) {\n                    currPoint.y = (parent.img.destTop + parent.img.destHeight) -\n                        (currPoint.y - parent.img.destTop);\n                }\n                else if (currPoint.y >= parent.img.destTop + (parent.img.destHeight / 2)) {\n                    currPoint.y = parent.img.destTop + (parent.img.destTop + parent.img.destHeight -\n                        currPoint.y);\n                }\n                currPoint.ratioX = (currPoint.x - parent.img.destLeft) / parent.img.destWidth;\n                currPoint.ratioY = (currPoint.y - parent.img.destTop) / parent.img.destHeight;\n            }\n            obj.shapeFlip = parent.transform.currFlipState;\n        }\n    };\n    Shape.prototype.getRotDegOfShape = function (obj) {\n        var degree;\n        if (obj.shapeDegree === 0) {\n            degree = this.parent.transform.degree;\n        }\n        else {\n            degree = this.parent.transform.degree - obj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        return degree;\n    };\n    Shape.prototype.renderTextArea = function (x, y, actObj) {\n        var parent = this.parent;\n        var degree = this.getRotDegOfShape(parent.activeObj);\n        this.transformTextArea();\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'destroyQuickAccessToolbar');\n        }\n        if (parent.element.querySelector('#' + parent.element.id + '_duplicate')) {\n            parent.element.querySelector('#' + parent.element.id + '_duplicate').classList.add('e-disabled');\n        }\n        if (parent.element.querySelector('#' + parent.element.id + '_remove')) {\n            parent.element.querySelector('#' + parent.element.id + '_remove').classList.add('e-disabled');\n        }\n        if (parent.element.querySelector('#' + parent.element.id + '_editText')) {\n            parent.element.querySelector('#' + parent.element.id + '_editText').classList.add('e-disabled');\n        }\n        parent.textArea.style.display = 'block';\n        parent.textArea.style.left = x + 'px';\n        parent.textArea.style.top = y + 'px';\n        parent.textArea.style.fontFamily = actObj.textSettings.fontFamily;\n        parent.textArea.style.fontSize = actObj.textSettings.fontSize + 'px';\n        parent.textArea.style.color = actObj.strokeSettings.strokeColor;\n        parent.textArea.style.fontWeight = actObj.textSettings.bold ? 'bold' : 'normal';\n        parent.textArea.style.fontStyle = actObj.textSettings.italic ? 'italic' : 'normal';\n        parent.textArea.style.border = '2px solid ' + parent.themeColl[parent.theme]['primaryColor'];\n        parent.textArea.value = actObj.keyHistory;\n        parent.textArea.style.overflow = 'hidden';\n        parent.textArea.style.width = 'auto';\n        parent.textArea.style.height = 'auto';\n        parent.textArea.focus();\n        var zoomFactor = parent.transform.zoomFactor;\n        var _a = actObj.activePoint, width = _a.width, height = _a.height;\n        if (degree % 90 === 0 && degree % 180 !== 0 && degree !== 0) {\n            parent.textArea.style.width = (zoomFactor === 0 ? height : height) + 'px';\n            parent.textArea.style.height = (zoomFactor === 0 ? width : width) + 'px';\n        }\n        else {\n            parent.textArea.style.width = (zoomFactor === 0 ? width : width) + 'px';\n            parent.textArea.style.height = (zoomFactor === 0 ? height : height) + 'px';\n        }\n        this.setTextBoxWidth();\n        var obj = { flipColl: null };\n        parent.notify('transform', { prop: 'getFlipColl', onPropertyChange: false, value: { obj: obj } });\n        if (obj['flipColl'].length <= 1) {\n            this.setTextBoxHeight();\n        }\n        if (degree % 90 === 0 && degree % 180 !== 0) {\n            if (parseFloat(parent.textArea.style.left) + parseFloat(parent.textArea.style.width) > parent.img.destTop +\n                parent.img.destHeight) {\n                this.alignTextAreaIntoCanvas();\n            }\n        }\n        else {\n            if (parseFloat(parent.textArea.style.left) + parseFloat(parent.textArea.style.width) > parent.img.destLeft +\n                parent.img.destWidth) {\n                this.alignTextAreaIntoCanvas();\n            }\n        }\n        parent.notify('selection', { prop: 'clearUpperCanvas', onPropertyChange: false });\n    };\n    Shape.prototype.setTextBoxWidth = function (e) {\n        var parent = this.parent;\n        var text = this.getMaxText(true);\n        if (parent.textArea.style.display === 'block') {\n            this.updateFontStyles(true);\n        }\n        else {\n            this.updateFontStyles();\n        }\n        var textAreaWidth = (this.upperContext.measureText(text).width + (parseFloat(parent.textArea.style.fontSize) / 2));\n        var letterWidth = e ? this.upperContext.measureText(String.fromCharCode(e.which)).width : 0;\n        var actObj = extend({}, parent.activeObj, {}, true);\n        var flip = '';\n        var degree = this.getRotDegOfShape(actObj);\n        if (actObj.shapeFlip !== parent.transform.currFlipState) {\n            flip = '';\n        }\n        else {\n            flip = parent.transform.currFlipState;\n        }\n        if ((e && parseFloat(parent.textArea.style.width) < (textAreaWidth + letterWidth)) || isNullOrUndefined(e)) {\n            if (degree === 0) {\n                if (flip.toLowerCase() === 'horizontal') {\n                    if ((parseFloat(parent.textArea.style.left) - parent.img.destLeft) - textAreaWidth - letterWidth > 0) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n                else if ((parent.img.destWidth - (parseFloat(parent.textArea.style.left) -\n                    parent.img.destLeft)) > (textAreaWidth + letterWidth)) {\n                    parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                }\n            }\n            else if (degree === 90) {\n                if (flip.toLowerCase() === 'vertical') {\n                    if ((parseFloat(parent.textArea.style.top) - parent.img.destTop) - textAreaWidth - letterWidth > 0) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n                else if ((parent.img.destHeight - (parseFloat(parent.textArea.style.top) -\n                    parent.img.destTop)) > (textAreaWidth + letterWidth)) {\n                    parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                }\n            }\n            else if (degree === 180) {\n                var textAreaLeft = parseFloat(parent.textArea.style.left);\n                var destLeft = parent.img.destLeft;\n                if (flip.toLowerCase() === 'horizontal') {\n                    var remainingWidth = parent.img.destWidth - (textAreaLeft - destLeft);\n                    if (remainingWidth > textAreaWidth + letterWidth) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n                else {\n                    var distanceToLeft = textAreaLeft - destLeft;\n                    if (distanceToLeft - textAreaWidth - letterWidth > 0) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n            }\n            else if (degree === 270) {\n                var textAreaTop = parseFloat(parent.textArea.style.top);\n                var destTop = parent.img.destTop;\n                if (flip.toLowerCase() === 'vertical') {\n                    var remainingHeight = parent.img.destHeight - (textAreaTop - destTop);\n                    if (remainingHeight > textAreaWidth + letterWidth) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n                else {\n                    var distanceToTop = textAreaTop - destTop;\n                    if (distanceToTop - textAreaWidth - letterWidth > 0) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n            }\n        }\n    };\n    Shape.prototype.setTextBoxHeight = function () {\n        var parent = this.parent;\n        var textAreaTop;\n        var actObj = extend({}, parent.activeObj, {}, true);\n        var flip = '';\n        var degree = this.getRotDegOfShape(actObj);\n        if (actObj.textFlip === parent.transform.currFlipState) {\n            flip = '';\n        }\n        else if (actObj.textFlip === '') {\n            flip = parent.transform.currFlipState;\n        }\n        else {\n            flip = actObj.textFlip;\n        }\n        switch (degree) {\n            case 0:\n                if (flip.toLowerCase() === 'vertical') {\n                    parent.textArea.style.maxHeight = (parent.img.destHeight - (parent.img.destHeight -\n                        parseFloat(parent.textArea.style.top))) + 'px';\n                }\n                else {\n                    textAreaTop = parseFloat(parent.textArea.style.top) - parent.img.destTop;\n                    parent.textArea.style.maxHeight = (parent.img.destHeight - textAreaTop) + 'px';\n                }\n                break;\n            case 90:\n                if (flip.toLowerCase() === 'horizontal') {\n                    parent.textArea.style.maxHeight = (parent.img.destWidth - (parseFloat(parent.textArea.style.left) -\n                        parent.img.destLeft)) + 'px';\n                }\n                else {\n                    parent.textArea.style.maxHeight = (parseFloat(parent.textArea.style.left) - parent.img.destLeft) + 'px';\n                }\n                break;\n            case 180:\n                if (flip.toLowerCase() === 'vertical') {\n                    textAreaTop = parseFloat(parent.textArea.style.top) - parent.img.destTop;\n                    parent.textArea.style.maxHeight = (parent.img.destHeight - textAreaTop) + 'px';\n                }\n                else {\n                    parent.textArea.style.maxHeight = (parseFloat(parent.textArea.style.top) - parent.img.destTop) + 'px';\n                }\n                break;\n            case 270:\n                if (flip.toLowerCase() === 'horizontal') {\n                    parent.textArea.style.maxHeight = (parseFloat(parent.textArea.style.left) - parent.img.destLeft) + 'px';\n                }\n                else {\n                    parent.textArea.style.maxHeight = parent.img.destWidth - (parseFloat(parent.textArea.style.left)\n                        - parent.img.destLeft) + 'px';\n                }\n                break;\n        }\n    };\n    Shape.prototype.updatePathRatio = function (obj) {\n        var parent = this.parent;\n        for (var i = 0, len = obj.pointColl.length; i < len; i++) {\n            var currPoint = obj.pointColl[i];\n            currPoint.ratioX = (currPoint.x - parent.img.destLeft) / parent.img.destWidth;\n            currPoint.ratioY = (currPoint.y - parent.img.destTop) / parent.img.destHeight;\n        }\n    };\n    Shape.prototype.stopPathDrawing = function (e) {\n        var parent = this.parent;\n        if (parent.activeObj.shape === 'path') {\n            var obj = { shape: null };\n            parent.notify('selection', { prop: 'getCurrentDrawingShape', value: { obj: obj } });\n            if (obj['shape'] === 'path') {\n                var prevCropObj = extend({}, this.parent.cropObj, {}, true);\n                var object = { currObj: {} };\n                this.parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                var prevObj = object['currObj'];\n                prevObj.objColl = extend([], this.parent.objColl, [], true);\n                prevObj.pointColl = extend([], this.parent.pointColl, [], true);\n                prevObj.afterCropActions = extend([], this.parent.afterCropActions, [], true);\n                var selPointCollObj = { selPointColl: null };\n                this.parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                    value: { obj: selPointCollObj } });\n                prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n                parent.notify('selection', { prop: 'setCurrentDrawingShape', value: { value: '' } });\n                parent.currObjType.isDragging = false;\n                if (e.type !== 'touchstart') {\n                    parent.activeObj.pointColl.pop();\n                }\n                this.updatePathRatio(parent.activeObj);\n                parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                    value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                        previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                        previousCropObj: prevCropObj, previousText: null,\n                        currentText: null, previousFilter: null, isCircleCrop: null } });\n                parent.notify('selection', { prop: 'mouseUpEventHandler', value: { e: e } });\n                parent.notify('draw', { prop: 'setNewPath', value: { bool: true } });\n                if (parent.objColl[parent.objColl.length - 1]) {\n                    parent.selectShape(parent.objColl[parent.objColl.length - 1].currIndex);\n                }\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'quickAccessToolbar', parent.activeObj.shape);\n                }\n            }\n        }\n    };\n    Shape.prototype.findTextTarget = function (e) {\n        var parent = this.parent;\n        if (parent.activeObj.shape !== 'text') {\n            this.stopPathDrawing(e);\n            return;\n        }\n        var x;\n        var y;\n        if (e.type === 'dblclick') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else if (e.type === 'touchstart') {\n            x = e.touches[0].clientX;\n            y = e.touches[0].clientY;\n            parent.notify('selection', { prop: 'setTouchEndPoint', onPropertyChange: false,\n                value: { x: e.touches[0].clientX, y: e.touches[0].clientY } });\n        }\n        parent.notify('toolbar', { prop: 'setPreventZoomBtn', onPropertyChange: false, value: { isPrevent: true } });\n        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'text',\n                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n        parent.notify('toolbar', { prop: 'setPreventZoomBtn', onPropertyChange: false, value: { isPrevent: false } });\n        parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n        if (!isNullOrUndefined(x) && !isNullOrUndefined(y)) {\n            var bbox = this.parent.lowerCanvas.getBoundingClientRect();\n            x -= bbox.left;\n            y -= bbox.top;\n            var flip = '';\n            var degree = this.getRotDegOfShape(parent.activeObj);\n            if (parent.activeObj.textFlip === '') {\n                if (parent.activeObj.textFlip === parent.transform.currFlipState) {\n                    flip = '';\n                }\n                else {\n                    flip = parent.transform.currFlipState;\n                }\n            }\n            else {\n                if (parent.activeObj.textFlip === parent.transform.currFlipState) {\n                    flip = '';\n                }\n                else if (parent.transform.currFlipState === '') {\n                    flip = parent.activeObj.textFlip;\n                }\n                else {\n                    flip = parent.transform.currFlipState;\n                }\n            }\n            var temp = void 0;\n            if (parent.textArea.style.display === 'none') {\n                temp = extend({}, parent.activeObj, {}, true);\n                for (var i = 0; i < parent.objColl.length; i++) {\n                    if (JSON.stringify(parent.activeObj) === JSON.stringify(parent.objColl[i])) {\n                        parent.objColl.splice(i, 1);\n                    }\n                }\n                this.refreshActiveObj();\n                this.upperContext.clearRect(0, 0, this.parent.upperCanvas.width, this.parent.upperCanvas.height);\n                this.lowerContext.clearRect(0, 0, this.parent.upperCanvas.width, this.parent.upperCanvas.height);\n                parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n                if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n                    parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                        value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                }\n                parent.activeObj = temp;\n                this.updateFontStyles();\n                var actObj = extend({}, parent.activeObj, {}, true);\n                if (x >= (actObj.activePoint.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.activePoint.endX + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.activePoint.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.activePoint.endY + (actObj.topLeftCircle.radius * 2))) {\n                    this.upperContext.clearRect(0, 0, this.parent.upperCanvas.width, this.parent.upperCanvas.height);\n                    if (actObj.flipObjColl.length === 4) {\n                        actObj.flipObjColl = [];\n                        flip = '';\n                    }\n                    if (flip === '' && actObj.flipObjColl.length > 1) {\n                        flip = actObj.flipObjColl[actObj.flipObjColl.length - 1];\n                    }\n                    if (actObj.flipObjColl.length <= 1) {\n                        var points = this.setTextBoxPos(actObj, degree, flip, x, y);\n                        x = points.x;\n                        y = points.y;\n                    }\n                    else {\n                        var points = this.setTextBoxPoints(actObj, degree, flip, x, y);\n                        x = points.x;\n                        y = points.y;\n                    }\n                    if (parent.activeObj.rotatedAngle !== 0) {\n                        x = parent.activeObj.horTopLinePointColl[0].x;\n                        y = parent.activeObj.horTopLinePointColl[0].y;\n                    }\n                    this.renderTextArea(x, y, actObj);\n                }\n                else {\n                    this.applyActObj();\n                }\n            }\n        }\n        else if (parent.textArea.style.display === 'block' && this.selectedText() !== '' && e.type === 'mousedown') {\n            var temp = parent.textArea.value;\n            parent.textArea.value += 'a';\n            parent.textArea.value = temp;\n        }\n        else if (parent.textArea.style.display === 'none') {\n            parent.textArea.style.display = 'block';\n        }\n    };\n    Shape.prototype.setTextBoxPos = function (actObj, degree, flip, x, y) {\n        var point = { x: x, y: y };\n        switch (degree) {\n            case 0:\n                if (flip.toLowerCase() === 'horizontal') {\n                    point.x = actObj.activePoint.endX;\n                    point.y = actObj.activePoint.startY;\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    point.x = actObj.activePoint.startX;\n                    point.y = actObj.activePoint.endY;\n                }\n                else {\n                    point.x = actObj.activePoint.startX;\n                    point.y = actObj.activePoint.startY;\n                }\n                break;\n            case 90:\n                if (flip.toLowerCase() === 'horizontal') {\n                    point.x = actObj.activePoint.startX;\n                    point.y = actObj.activePoint.startY;\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    point.x = actObj.activePoint.endX;\n                    point.y = actObj.activePoint.endY;\n                }\n                else {\n                    point.x = actObj.activePoint.endX;\n                    point.y = actObj.activePoint.startY;\n                }\n                break;\n            case 180:\n                if (flip.toLowerCase() === 'horizontal') {\n                    point.x = actObj.activePoint.startX;\n                    point.y = actObj.activePoint.endY;\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    point.x = actObj.activePoint.endX;\n                    point.y = actObj.activePoint.startY;\n                }\n                else {\n                    point.x = actObj.activePoint.endX;\n                    point.y = actObj.activePoint.endY;\n                }\n                break;\n            case 270:\n                if (flip.toLowerCase() === 'horizontal') {\n                    point.x = actObj.activePoint.endX;\n                    point.y = actObj.activePoint.endY;\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    point.x = actObj.activePoint.startX;\n                    point.y = actObj.activePoint.startY;\n                }\n                else {\n                    point.x = actObj.activePoint.startX;\n                    point.y = actObj.activePoint.endY;\n                }\n                break;\n        }\n        return point;\n    };\n    Shape.prototype.setTextBoxPoints = function (actObj, degree, flip, x, y) {\n        var point = { x: x, y: y };\n        switch (degree) {\n            case 0:\n                if (actObj.flipObjColl[0] && actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                    if (flip.toLowerCase() === 'horizontal') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                    else if (flip.toLowerCase() === 'vertical') {\n                        point.x = (actObj.activePoint.endX);\n                        point.y = (actObj.activePoint.endY);\n                    }\n                }\n                else {\n                    if (flip.toLowerCase() === 'horizontal') {\n                        point.x = (actObj.activePoint.endX);\n                        point.y = (actObj.activePoint.endY);\n                    }\n                    else if (flip.toLowerCase() === 'vertical') {\n                        point.x = (actObj.activePoint.endX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                }\n                break;\n            case 90:\n                if (actObj.flipObjColl[0] && actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                    if (flip.toLowerCase() === 'horizontal') {\n                        point.x = (actObj.activePoint.endX);\n                        point.y = (actObj.activePoint.endY);\n                    }\n                    else if (flip.toLowerCase() === 'vertical') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.endY);\n                    }\n                }\n                else {\n                    if (flip.toLowerCase() === 'horizontal') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.endY);\n                    }\n                    else if (flip.toLowerCase() === 'vertical') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                }\n                break;\n            case 180:\n                if (actObj.flipObjColl[0] && actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                    if (flip.toLowerCase() === 'horizontal') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                    else if (flip.toLowerCase() === 'vertical') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                }\n                else {\n                    if (flip.toLowerCase() === 'horizontal') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                    else if (flip.toLowerCase() === 'vertical') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.endY);\n                    }\n                }\n                break;\n            case 270:\n                if (actObj.flipObjColl[0] && actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                    if (flip.toLowerCase() === 'horizontal') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                    else if (flip.toLowerCase() === 'vertical') {\n                        point.x = (actObj.activePoint.endX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                }\n                else {\n                    if (flip.toLowerCase() === 'horizontal') {\n                        point.x = (actObj.activePoint.endX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                    else if (flip.toLowerCase() === 'vertical') {\n                        point.x = (actObj.activePoint.endX);\n                        point.y = (actObj.activePoint.endY);\n                    }\n                }\n                break;\n        }\n        return point;\n    };\n    Shape.prototype.selectedText = function () {\n        var start = this.parent.textArea.selectionStart;\n        var finish = this.parent.textArea.selectionEnd;\n        return this.parent.textArea.value.substring(start, finish);\n    };\n    Shape.prototype.panObjColl = function (xDiff, yDiff, panRegion) {\n        var parent = this.parent;\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            var currObj = parent.objColl[i];\n            if (panRegion === '' || panRegion === 'vertical') {\n                currObj.activePoint.startX += xDiff;\n                currObj.activePoint.endX += xDiff;\n                if (currObj.rotationCirclePointColl) {\n                    currObj.rotationCirclePointColl.x += xDiff;\n                }\n                if (currObj.shape === 'path') {\n                    for (var l = 0, len_3 = currObj.pointColl.length; l < len_3; l++) {\n                        currObj.pointColl[l].x += xDiff;\n                    }\n                }\n            }\n            else {\n                currObj.activePoint.startX -= xDiff;\n                currObj.activePoint.endX -= xDiff;\n                if (currObj.rotationCirclePointColl) {\n                    currObj.rotationCirclePointColl.x -= xDiff;\n                }\n                if (currObj.shape === 'path') {\n                    for (var l = 0, len_4 = currObj.pointColl.length; l < len_4; l++) {\n                        currObj.pointColl[l].x -= xDiff;\n                    }\n                }\n            }\n            if (panRegion === '' || panRegion === 'horizontal') {\n                currObj.activePoint.startY += yDiff;\n                currObj.activePoint.endY += yDiff;\n                if (currObj.rotationCirclePointColl) {\n                    currObj.rotationCirclePointColl.y += yDiff;\n                }\n                if (currObj.shape === 'path') {\n                    for (var l = 0; l < currObj.pointColl.length; l++) {\n                        currObj.pointColl[l].y += yDiff;\n                    }\n                }\n            }\n            else {\n                currObj.activePoint.startY -= yDiff;\n                currObj.activePoint.endY -= yDiff;\n                if (currObj.rotationCirclePointColl) {\n                    currObj.rotationCirclePointColl.y -= yDiff;\n                }\n                if (currObj.shape === 'path') {\n                    for (var l = 0; l < currObj.pointColl.length; l++) {\n                        currObj.pointColl[l].y -= yDiff;\n                    }\n                }\n            }\n            currObj = this.updateWidthHeight(currObj);\n            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint,\n                    obj: currObj } });\n            if (currObj.shape === 'line' || currObj.shape === 'arrow') {\n                currObj.pointColl = this.getLinePoints(currObj.activePoint.startX, currObj.activePoint.startY, currObj.activePoint.endX, currObj.activePoint.endY);\n                for (var j = 0, len_5 = currObj.pointColl.length; j < len_5; j++) {\n                    currObj.pointColl[j].ratioX =\n                        (currObj.pointColl[j].x - parent.img.destLeft) / parent.img.destWidth;\n                    currObj.pointColl[j].ratioY =\n                        (currObj.pointColl[j].y - parent.img.destTop) / parent.img.destHeight;\n                }\n            }\n            var temp = this.lowerContext.filter;\n            this.lowerContext.filter = 'none';\n            this.apply(currObj.shape, currObj);\n            this.lowerContext.filter = temp;\n            this.refreshActiveObj();\n        }\n    };\n    Shape.prototype.updateFontStyles = function (isTextBox) {\n        var parent = this.parent;\n        this.upperContext.strokeStyle = parent.activeObj.strokeSettings.strokeColor;\n        this.upperContext.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n        var textStyle = '';\n        if (parent.activeObj.textSettings.bold) {\n            textStyle = 'bold ';\n        }\n        if (parent.activeObj.textSettings.italic) {\n            textStyle = 'italic ';\n        }\n        if (parent.activeObj.textSettings.bold && parent.activeObj.textSettings.italic) {\n            textStyle = 'italic bold ';\n        }\n        var fontSize = isTextBox ? parseFloat(parent.textArea.style.fontSize) : parent.activeObj.textSettings.fontSize;\n        var fontFamily = parent.textArea.style.display === 'block' ? parent.textArea.style.fontFamily : parent.activeObj.textSettings.fontFamily;\n        this.upperContext.font = textStyle + fontSize + 'px' + ' ' + fontFamily;\n    };\n    Shape.prototype.applyFontStyle = function (item) {\n        var parent = this.parent;\n        this.pushActItemIntoObj();\n        var objColl = extend([], parent.objColl, [], true);\n        parent.objColl.pop();\n        if (parent.textArea.style.display === 'none') {\n            this.updateFontRatio(parent.activeObj);\n        }\n        else {\n            this.updateFontRatio(parent.activeObj, true);\n        }\n        switch (item) {\n            case 'default':\n                this.updateFontStyle(item, objColl, 'normal', 'normal');\n                break;\n            case 'bold':\n                this.updateFontStyle(item, objColl, 'bold', 'normal');\n                break;\n            case 'italic':\n                this.updateFontStyle(item, objColl, 'normal', 'italic');\n                break;\n            case 'bolditalic':\n                this.updateFontStyle(item, objColl, 'bold', 'italic');\n                break;\n        }\n    };\n    Shape.prototype.updateFontStyle = function (item, objColl, fontWeight, fontStyle) {\n        var parent = this.parent;\n        if (parent.textArea.style.display === 'block') {\n            var width = this.getTextAreaWidth(item);\n            parent.textArea.style.width = width + 'px';\n            parent.textArea.style.fontWeight = fontWeight;\n            parent.textArea.style.fontStyle = fontStyle;\n            this.updateObjColl(item, objColl);\n        }\n        else {\n            this.textSettings.bold = parent.activeObj.textSettings.bold = fontWeight === 'normal' ? false : true;\n            this.textSettings.italic = parent.activeObj.textSettings.italic = fontStyle === 'normal' ? false : true;\n            this.redrawText();\n            parent.notify('undo-redo', { prop: 'updateUrObj', onPropertyChange: false, value: { objColl: objColl } });\n        }\n    };\n    Shape.prototype.updateArrowRatio = function (obj) {\n        var parent = this.parent;\n        var object = { arrowDimension: null };\n        parent.notify('draw', { prop: 'getArrowDimension', onPropertyChange: false, value: { obj: object } });\n        var length;\n        var degree = this.getRotDegOfShape(obj);\n        if (degree === 0 || degree === 180 || degree === -180) {\n            length = Math.abs(obj.activePoint.width);\n        }\n        else {\n            length = Math.abs(obj.activePoint.height);\n        }\n        var dimension;\n        var dimensions = ['bar', 'arrow', 'arrowSolid', 'circle', 'square'];\n        for (var _i = 0, dimensions_1 = dimensions; _i < dimensions_1.length; _i++) {\n            dimension = dimensions_1[_i];\n            var ratioX = length / object['arrowDimension'][dimension]['width'];\n            var ratioY = length / object['arrowDimension'][dimension]['height'];\n            object['arrowDimension'][dimension]['ratioX'] = ratioX;\n            object['arrowDimension'][dimension]['ratioY'] = ratioY;\n        }\n    };\n    Shape.prototype.updateArrowSize = function (obj) {\n        var object = { arrowDimension: null };\n        this.parent.notify('draw', { prop: 'getArrowDimension', onPropertyChange: false, value: { obj: object } });\n        var length;\n        var degree = this.getRotDegOfShape(obj);\n        if (degree === 0 || degree === 180 || degree === -180) {\n            length = Math.abs(obj.activePoint.width);\n        }\n        else {\n            length = Math.abs(obj.activePoint.height);\n        }\n        var dimension;\n        var dimensions = ['bar', 'arrow', 'arrowSolid', 'circle', 'square'];\n        for (var _i = 0, dimensions_2 = dimensions; _i < dimensions_2.length; _i++) {\n            dimension = dimensions_2[_i];\n            var ratioX = object['arrowDimension'][dimension]['ratioX'];\n            var ratioY = object['arrowDimension'][dimension]['ratioY'];\n            object['arrowDimension'][dimension]['width'] = length / ratioX;\n            object['arrowDimension'][dimension]['height'] = length / ratioY;\n        }\n    };\n    Shape.prototype.updateFontRatio = function (obj, isTextArea) {\n        var parent = this.parent;\n        var text = this.getMaxText(isTextArea);\n        var width = this.upperContext.measureText(text).width +\n            parent.activeObj.textSettings.fontSize * 0.5;\n        var height = (parent.activeObj.textSettings.fontSize + parent.activeObj.textSettings.fontSize * 0.25);\n        var degree = this.getRotDegOfShape(obj);\n        if (isNullOrUndefined(isTextArea)) {\n            if (degree === 0 || Math.abs(degree) === 180) {\n                obj.textSettings.fontRatio = width / obj.textSettings.fontSize;\n            }\n            else {\n                obj.textSettings.fontRatio = height / obj.textSettings.fontSize;\n            }\n        }\n        else if (isTextArea) {\n            obj.textSettings.fontRatio = width / parseFloat(parent.textArea.style.fontSize);\n        }\n    };\n    Shape.prototype.updateFontSize = function (obj) {\n        var degree = this.getRotDegOfShape(obj);\n        if (degree === 0 || Math.abs(degree) === 180) {\n            obj.textSettings.fontSize = (obj.activePoint.width / obj.textSettings.fontRatio);\n        }\n        else {\n            obj.textSettings.fontSize = (obj.activePoint.height / obj.textSettings.fontRatio);\n        }\n    };\n    Shape.prototype.updateObjColl = function (item, objColl) {\n        var parent = this.parent;\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = objColl;\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        var tempBold = parent.activeObj.textSettings.bold;\n        var tempItalic = parent.activeObj.textSettings.italic;\n        switch (item) {\n            case 'default':\n                parent.activeObj.textSettings.bold = false;\n                parent.activeObj.textSettings.italic = false;\n                break;\n            case 'bold':\n                parent.activeObj.textSettings.bold = true;\n                parent.activeObj.textSettings.italic = false;\n                break;\n            case 'italic':\n                parent.activeObj.textSettings.bold = false;\n                parent.activeObj.textSettings.italic = true;\n                break;\n            case 'bolditalic':\n                parent.activeObj.textSettings.bold = true;\n                parent.activeObj.textSettings.italic = true;\n                break;\n        }\n        parent.objColl.push(parent.activeObj);\n        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: 'textAreaCustomization', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: null, isCircleCrop: null } });\n        parent.objColl.pop();\n        parent.activeObj.textSettings.bold = tempBold;\n        parent.activeObj.textSettings.italic = tempItalic;\n    };\n    Shape.prototype.pushActItemIntoObj = function () {\n        if (this.parent.textArea.style.display === 'none') {\n            this.parent.objColl.push(this.parent.activeObj);\n        }\n        else {\n            var temp = extend({}, this.parent.activeObj, {}, true);\n            this.parent.notify('selection', { prop: 'setTextBoxStylesToActObj', onPropertyChange: false });\n            this.parent.objColl.push(this.parent.activeObj);\n            this.parent.activeObj = temp;\n        }\n    };\n    Shape.prototype.clearActObj = function () {\n        if (this.parent.textArea.style.display === 'none') {\n            this.refreshActiveObj();\n            this.applyActObj();\n            this.refreshActiveObj();\n            this.parent.currObjType.isCustomCrop = false;\n        }\n    };\n    Shape.prototype.refreshActiveObj = function () {\n        this.parent.activeObj = {};\n        this.parent.activeObj.activePoint = { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 };\n        this.parent.activeObj.triangle = [];\n        this.parent.activeObj.triangleRatio = [];\n        this.parent.activeObj.flipObjColl = [];\n        this.parent.activeObj.strokeSettings = this.strokeSettings;\n        this.parent.activeObj.textSettings = this.textSettings;\n        this.parent.activeObj.rotatedAngle = 0;\n    };\n    Shape.prototype.applyActObj = function (isMouseDown) {\n        var isActObj = false;\n        if (this.parent.activeObj.shape !== undefined && this.parent.activeObj.shape === 'text' && this.parent.activeObj.keyHistory === '') {\n            this.refreshActiveObj();\n            this.upperContext.clearRect(0, 0, this.parent.upperCanvas.width, this.parent.upperCanvas.height);\n        }\n        else {\n            var splitWords = void 0;\n            var isCropSelection = false;\n            if (this.parent.activeObj.shape !== undefined) {\n                splitWords = this.parent.activeObj.shape.split('-');\n            }\n            if (splitWords === undefined && this.parent.currObjType.isCustomCrop) {\n                isCropSelection = true;\n            }\n            else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                isCropSelection = true;\n            }\n            if (this.parent.activeObj.shape && !isCropSelection && this.parent.activeObj.shape !== 'shape') {\n                for (var i = 0; i < this.parent.objColl.length; i++) {\n                    if (JSON.stringify(this.parent.activeObj) === JSON.stringify(this.parent.objColl[i])) {\n                        isActObj = true;\n                        break;\n                    }\n                }\n                if (!isActObj) {\n                    if (isNullOrUndefined(this.parent.activeObj.currIndex)) {\n                        this.parent.activeObj.currIndex = 'shape_' + (this.parent.objColl.length + 1);\n                    }\n                    this.updImgRatioForActObj();\n                    var splitWords_1 = this.parent.activeObj.currIndex.split('_');\n                    var tempObjColl = this.parent.objColl.splice(0, parseInt(splitWords_1[1], 10) - 1);\n                    tempObjColl.push(extend({}, this.parent.activeObj, {}, true));\n                    for (var i = 0; i < this.parent.objColl.length; i++) {\n                        tempObjColl.push(this.parent.objColl[i]);\n                    }\n                    this.parent.objColl = tempObjColl;\n                    tempObjColl = [];\n                    this.refreshActiveObj();\n                    this.lowerContext.clearRect(0, 0, this.parent.lowerCanvas.width, this.parent.lowerCanvas.height);\n                    this.parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n                    this.parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n                    this.parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n                    this.parent.currObjType.shape = '';\n                    this.refreshActiveObj();\n                    if (this.parent.isCircleCrop) {\n                        this.parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                            value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                    }\n                    if (!isBlazor()) {\n                        this.parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                    }\n                    else {\n                        this.parent.updateToolbar(this.parent.element, 'destroyQuickAccessToolbar');\n                    }\n                    if (isNullOrUndefined(isMouseDown)) {\n                        this.parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                        this.parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false, value: { prevActObj: null } });\n                    }\n                }\n            }\n        }\n    };\n    Shape.prototype.alignTextAreaIntoCanvas = function () {\n        var parent = this.parent;\n        var letters = parent.textArea.value;\n        parent.textArea.value = '';\n        for (var i = 0, len = letters.length; i < len; i++) {\n            parent.textArea.value += letters[i];\n            parent.textArea.style.height = 'auto';\n            parent.textArea.style.height = parent.textArea.scrollHeight + 'px';\n            this.setTextBoxWidth();\n        }\n    };\n    Shape.prototype.transformTextArea = function () {\n        var parent = this.parent;\n        if (parent.activeObj.shape === 'text') {\n            parent.textArea.style.transformOrigin = '0 0';\n            var rotatedDegree = parent.activeObj.rotatedAngle * (180 / Math.PI);\n            var scale = '';\n            var degree = this.getRotDegOfShape(parent.activeObj);\n            if (parent.activeObj.flipObjColl.length > 0) {\n                // need to add scale value according to length.\n                for (var i = 0; i < parent.activeObj.flipObjColl.length; i++) {\n                    if (degree !== 0 && degree % 90 === 0 && degree !== 180) {\n                        scale += parent.activeObj.flipObjColl[i].toLowerCase() === 'horizontal' ? 'scale(1, -1)' :\n                            'scale(-1, 1)';\n                    }\n                    else {\n                        scale += parent.activeObj.flipObjColl[i].toLowerCase() === 'horizontal' ? 'scale(-1, 1)' :\n                            'scale(1, -1)';\n                    }\n                    degree += rotatedDegree;\n                    if (parent.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                        parent.textArea.style.transform = 'rotate(' + degree + 'deg)' + scale;\n                    }\n                    else if (parent.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                        parent.textArea.style.transform = 'rotate(' + degree + 'deg)' + scale;\n                    }\n                }\n            }\n            else {\n                degree += rotatedDegree;\n                parent.textArea.style.transform = 'rotate(' + degree + 'deg)';\n            }\n        }\n    };\n    Shape.prototype.getTextAreaWidth = function (item) {\n        var parent = this.parent;\n        var tempBold = parent.activeObj.textSettings.bold;\n        var tempItalic = parent.activeObj.textSettings.italic;\n        switch (item) {\n            case 'default':\n                parent.activeObj.textSettings.bold = false;\n                parent.activeObj.textSettings.italic = false;\n                break;\n            case 'bold':\n                parent.activeObj.textSettings.bold = true;\n                parent.activeObj.textSettings.italic = false;\n                break;\n            case 'italic':\n                parent.activeObj.textSettings.bold = false;\n                parent.activeObj.textSettings.italic = true;\n                break;\n            case 'bolditalic':\n                parent.activeObj.textSettings.bold = true;\n                parent.activeObj.textSettings.italic = true;\n                break;\n        }\n        this.updateFontStyles();\n        var width;\n        if (parent.textArea.style.display === 'none') {\n            width = this.upperContext.measureText(parent.activeObj.keyHistory).width +\n                parent.activeObj.textSettings.fontSize * 0.5;\n        }\n        else {\n            width = this.upperContext.measureText(parent.textArea.value).width +\n                parent.activeObj.textSettings.fontSize * 0.5;\n        }\n        parent.activeObj.textSettings.bold = tempBold;\n        parent.activeObj.textSettings.italic = tempItalic;\n        return width;\n    };\n    Shape.prototype.getObjDetails = function (obj) {\n        var parent = this.parent;\n        var shapeDetails = {};\n        shapeDetails.id = obj.currIndex;\n        shapeDetails.type = parent.toPascalCase(obj.shape);\n        shapeDetails.startX = obj.activePoint.startX;\n        shapeDetails.startY = obj.activePoint.startY;\n        switch (obj.shape) {\n            case 'rectangle':\n                shapeDetails.width = obj.activePoint.width;\n                shapeDetails.height = obj.activePoint.height;\n                shapeDetails.strokeColor = obj.strokeSettings.strokeColor;\n                shapeDetails.fillColor = obj.strokeSettings.fillColor;\n                shapeDetails.strokeWidth = obj.strokeSettings.strokeWidth;\n                break;\n            case 'ellipse':\n                shapeDetails.radius = obj.activePoint.width / 2;\n                shapeDetails.strokeColor = obj.strokeSettings.strokeColor;\n                shapeDetails.fillColor = obj.strokeSettings.fillColor;\n                shapeDetails.strokeWidth = obj.strokeSettings.strokeWidth;\n                break;\n            case 'line':\n            case 'arrow':\n                shapeDetails.length = obj.activePoint.width;\n                shapeDetails.strokeColor = obj.strokeSettings.strokeColor;\n                shapeDetails.strokeWidth = obj.strokeSettings.strokeWidth;\n                break;\n            case 'text':\n                shapeDetails.text = obj.keyHistory;\n                shapeDetails.fontSize = obj.textSettings.fontSize;\n                shapeDetails.color = obj.strokeSettings.strokeColor;\n                shapeDetails.fontStyle = [];\n                if (obj.textSettings.bold) {\n                    shapeDetails.fontStyle.push('bold');\n                }\n                if (obj.textSettings.italic) {\n                    shapeDetails.fontStyle.push('italic');\n                }\n                break;\n        }\n        return shapeDetails;\n    };\n    Shape.prototype.getFreehandDrawDetails = function (index) {\n        var parent = this.parent;\n        var shapeDetails = {};\n        shapeDetails.id = parent.pointColl[index].id;\n        shapeDetails.type = ShapeType.FreehandDraw;\n        shapeDetails.points = extend([], parent.pointColl[index].points);\n        shapeDetails.strokeColor = parent.pointColl[index].strokeColor;\n        shapeDetails.strokeWidth = parent.pointColl[index].strokeWidth;\n        return shapeDetails;\n    };\n    Shape.prototype.getShapeSetting = function (id, obj) {\n        var parent = this.parent;\n        var shapeDetails;\n        if (!parent.disabled && parent.isImageLoaded) {\n            this.applyActObj();\n            if (id.split('_')[0] === 'shape') {\n                var obj_1;\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    if (parent.objColl[i].currIndex === id) {\n                        obj_1 = extend({}, parent.objColl[i], {}, true);\n                        break;\n                    }\n                }\n                shapeDetails = this.getObjDetails(obj_1);\n            }\n            else if (id.split('_')[0] === 'pen') {\n                shapeDetails = this.getFreehandDrawDetails(parseInt(id.split('_')[1], 10) - 1);\n            }\n        }\n        obj['shapeDetails'] = shapeDetails;\n    };\n    Shape.prototype.getShapeSettings = function (obj) {\n        var parent = this.parent;\n        var shapeDetailsColl = [];\n        if (!parent.disabled && parent.isImageLoaded) {\n            this.applyActObj();\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                var shapeDetails = this.getObjDetails(parent.objColl[i]);\n                shapeDetailsColl.push(shapeDetails);\n            }\n            for (var i = 0; i < parent.freehandCounter; i++) {\n                var shapeDetails = this.getFreehandDrawDetails(i);\n                shapeDetailsColl.push(shapeDetails);\n            }\n        }\n        obj['shapeDetailsColl'] = shapeDetailsColl;\n    };\n    Shape.prototype.isPointsInRange = function (x, y, obj) {\n        var inRange = false;\n        if (!isNullOrUndefined(x) && !isNullOrUndefined(y) && x >= this.parent.img.destLeft && y >= this.parent.img.destTop &&\n            x <= this.parent.img.destLeft + this.parent.img.destWidth && y <= this.parent.img.destTop + this.parent.img.destHeight) {\n            inRange = true;\n        }\n        obj['inRange'] = inRange;\n    };\n    Shape.prototype.alignRotateFlipColl = function (collection, isRotateFlipCollection, obj) {\n        collection = this.popForDefaultTransformedState(collection);\n        collection = this.popForDefaultFlipState(collection);\n        collection = this.popForDefaultRotateState(collection);\n        if (collection.length === 0 && isRotateFlipCollection) {\n            this.parent.transform.degree = 0;\n            this.parent.transform.currFlipState = '';\n        }\n        obj['collection'] = collection;\n        return collection;\n    };\n    Shape.prototype.popForDefaultTransformedState = function (collection) {\n        var rotateRight = 0;\n        var rotateleft = 0;\n        var horizontal = 0;\n        var vertical = 0;\n        for (var i = 0; i < collection.length; i++) {\n            if (collection[i] === 90 || collection[i] === 'rotateRight') {\n                rotateRight++;\n                rotateleft = 0;\n                horizontal = 0;\n                vertical = 0;\n                if (rotateRight === 4) {\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n            else if (collection[i] === -90 || collection[i] === 'rotateLeft') {\n                rotateleft++;\n                rotateRight = 0;\n                horizontal = 0;\n                vertical = 0;\n                if (rotateleft === 4) {\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n            else if (collection[i] === 'horizontal' || collection[i] === 'Horizontal'\n                || collection[i] === 'horizontalflip') {\n                horizontal++;\n                rotateleft = 0;\n                rotateRight = 0;\n                vertical = 0;\n                if (horizontal === 2) {\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n            else if (collection[i] === 'vertical' || collection[i] === 'Vertical'\n                || collection[i] === 'verticalflip') {\n                vertical++;\n                horizontal = 0;\n                rotateleft = 0;\n                rotateRight = 0;\n                if (vertical === 2) {\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n        }\n        return collection;\n    };\n    Shape.prototype.popForDefaultFlipState = function (collection) {\n        for (var i = 0; i < collection.length; i++) {\n            if (!isNullOrUndefined(collection[i + 3])) {\n                if ((collection[i] === 'horizontal' || collection[i] === 'Horizontal'\n                    || collection[i] === 'horizontalFlip')\n                    && (collection[i + 1] === 'vertical' || collection[i + 1] === 'Vertical'\n                        || collection[i] === 'verticalFlip') &&\n                    (collection[i + 2] === 'horizontal' || collection[i + 2] === 'Horizontal'\n                        || collection[i] === 'horizontalFlip') &&\n                    (collection[i + 3] === 'vertical' || collection[i + 3] === 'Vertical'\n                        || collection[i] === 'verticalFlip')) {\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                }\n                else if ((collection[i] === 'vertical' || collection[i] === 'Vertical'\n                    || collection[i] === 'verticalFlip')\n                    && (collection[i + 1] === 'horizontal' || collection[i + 1] === 'Horizontal'\n                        || collection[i + 1] === 'horizontalFlip') &&\n                    (collection[i + 2] === 'vertical' || collection[i + 2] === 'Vertical' || collection[i] === 'verticalFlip') &&\n                    (collection[i + 3] === 'horizontal' || collection[i + 3] === 'Horizontal' || collection[i] === 'horizontalFlip')) {\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n        }\n        return collection;\n    };\n    Shape.prototype.popForDefaultRotateState = function (collection) {\n        for (var i = 0; i < collection.length; i++) {\n            if (!isNullOrUndefined(collection[i + 1])) {\n                if ((collection[i] === 90 || collection[i] === 'rotateRight') &&\n                    (collection[i + 1] === -90 || collection[i] === 'rotateLeft')) {\n                    collection.pop();\n                    collection.pop();\n                }\n                else if ((collection[i] === -90 || collection[i] === 'rotateLeft') &&\n                    (collection[i + 1] === 90 || collection[i] === 'rotateRight')) {\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n        }\n        return collection;\n    };\n    Shape.prototype.selectShape = function (id, obj) {\n        var parent = this.parent;\n        var isSelected = false;\n        if (!parent.disabled && parent.isImageLoaded) {\n            this.applyActObj();\n            if (id.split('_')[0] === 'shape') {\n                var obj_2;\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    if (parent.objColl[i].currIndex === id) {\n                        obj_2 = extend({}, parent.objColl[i], {}, true);\n                        break;\n                    }\n                }\n                if (isNullOrUndefined(obj_2)) {\n                    isSelected = false;\n                }\n                else {\n                    isSelected = true;\n                    parent.activeObj = obj_2;\n                    var object = { canvasFilter: null };\n                    parent.notify('toolbar', { prop: 'getCanvasFilter', onPropertyChange: false, value: { obj: object } });\n                    this.lowerContext.filter = object['canvasFilter'];\n                    parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false,\n                        value: { obj: parent.activeObj } });\n                    if (!isBlazor()) {\n                        if (parent.activeObj.shape === 'text') {\n                            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'text',\n                                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        }\n                        else if (parent.activeObj.shape === 'pen') {\n                            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'pen',\n                                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        }\n                        else {\n                            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        }\n                        parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                        parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n                    }\n                    else {\n                        parent.updateToolbar(parent.element, parent.activeObj.shape);\n                        if (parent.activeObj.shape === 'path') {\n                            parent.updateToolbar(this.parent.element, 'path', 'pathQuickAccessToolbar');\n                        }\n                        else {\n                            parent.updateToolbar(parent.element, 'quickAccessToolbar', parent.activeObj.shape);\n                        }\n                    }\n                }\n            }\n            else if (id.split('_')[0] === 'pen') {\n                var object = { bool: false };\n                parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: object } });\n                if (object['bool']) {\n                    parent.okBtn();\n                }\n                var obj_3 = { isIndex: false };\n                parent.notify('freehand-draw', { prop: 'isFHDIdx', value: { index: parseInt(id.split('_')[1], 10) - 1, obj: obj_3 } });\n                if (obj_3['isIndex']) {\n                    isSelected = true;\n                    parent.notify('freehand-draw', { prop: 'selectFhd', value: { id: id } });\n                    if (!isBlazor()) {\n                        parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: true } });\n                        parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                    }\n                    else {\n                        parent.updateToolbar(parent.element, 'pen');\n                        parent.updateToolbar(parent.element, 'quickAccessToolbar', 'pen');\n                    }\n                }\n                else {\n                    isSelected = false;\n                }\n            }\n        }\n        obj['isSelected'] = isSelected;\n    };\n    Shape.prototype.deleteShape = function (id) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            this.applyActObj();\n            if (id.split('_')[0] === 'shape') {\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    if (parent.objColl[i].currIndex === id) {\n                        parent.objColl.splice(i, 1);\n                        break;\n                    }\n                }\n            }\n            else if (id.split('_')[0] === 'pen') {\n                parent.notify('freehand-draw', { prop: 'handle-freehand-draw', value: { id: id } });\n            }\n            var object = { canvasFilter: null };\n            parent.notify('toolbar', { prop: 'getCanvasFilter', onPropertyChange: false, value: { obj: object } });\n            this.lowerContext.filter = object['canvasFilter'];\n            this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n            parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n        }\n    };\n    Shape.prototype.getMaxText = function (isTextBox, text, obj) {\n        if (isNullOrUndefined(text)) {\n            text = isTextBox ? this.parent.textArea.value : this.parent.activeObj.keyHistory;\n        }\n        var maxi;\n        var rows = text.split('\\n');\n        var maxStr = rows[0].length;\n        var maxText = rows[0];\n        for (var i = 1; i < rows.length; i++) {\n            maxi = rows[i].length;\n            if (maxi > maxStr) {\n                maxText = rows[i];\n                maxStr = maxi;\n            }\n        }\n        if (obj) {\n            obj['maxText'] = maxText;\n        }\n        return maxText;\n    };\n    Shape.prototype.getLinePoints = function (x1, y1, x2, y2) {\n        var points = [];\n        var i;\n        var j;\n        if (x1 === x2) {\n            if (y1 < y2) {\n                i = [x1, y1];\n                j = [x2, y2];\n            }\n            else {\n                j = [x1, y1];\n                i = [x2, y2];\n            }\n            var m = this.getSlope(i, j, true);\n            var b = this.getIntercept(i, m);\n            for (var y = i[1]; y <= j[1]; y++) {\n                var x = m * y + b;\n                points.push({ x: x, y: y });\n            }\n        }\n        else {\n            if (x1 < x2) {\n                i = [x1, y1];\n                j = [x2, y2];\n            }\n            else {\n                j = [x1, y1];\n                i = [x2, y2];\n            }\n            var m = this.getSlope(i, j, false);\n            var b = this.getIntercept(i, m);\n            for (var x = i[0]; x <= j[0]; x++) {\n                var y = m * x + b;\n                points.push({ x: x, y: y });\n            }\n        }\n        if (Math.floor(x1) === Math.floor(x2) || (points.length < 10 && (y2 - y1 > 10 || y1 - y2 > 10))) {\n            points = [];\n            var lesserY = Math.min(y1, y2);\n            for (var i_1 = 0; i_1 < Math.abs(Math.floor(y2) - Math.floor(y1)); i_1++) {\n                points.push({ x: x1, y: lesserY + i_1 });\n            }\n            if (points.length > 1) {\n                var prev = void 0;\n                if (isNullOrUndefined(points[points.length - 2])) {\n                    prev = { x: 0, y: 0 };\n                }\n                else {\n                    prev = points[points.length - 2];\n                }\n                var diffX = points[points.length - 1]['x'] - prev.x;\n                var diffY = points[points.length - 1]['y'] - prev.y;\n                points.push({ x: points[points.length - 1]['x'] + (diffX / 2), y: points[points.length - 1]['y'] + (diffY / 2) });\n            }\n        }\n        else if (Math.floor(y1) === Math.floor(y2) || (points.length < 10 && (x2 - x1 > 10 || x1 - x2 > 10))) {\n            points = [];\n            var lesserX = Math.min(x1, x2);\n            for (var i_2 = 0; i_2 < Math.abs(Math.floor(x2) - Math.floor(x1)); i_2++) {\n                points.push({ x: lesserX + i_2, y: y1 });\n            }\n            if (points.length > 1) {\n                var prev = void 0;\n                if (isNullOrUndefined(points[points.length - 2])) {\n                    prev = { x: 0, y: 0 };\n                }\n                else {\n                    prev = points[points.length - 2];\n                }\n                var diffX = points[points.length - 1]['x'] - prev.x;\n                var diffY = points[points.length - 1]['y'] - prev.y;\n                points.push({ x: points[points.length - 1]['x'] + (diffX / 2), y: points[points.length - 1]['y'] + (diffY / 2) });\n            }\n        }\n        return points;\n    };\n    Shape.prototype.getSlope = function (a, b, isSameAxis) {\n        var slope;\n        if (isSameAxis) {\n            if (a[1] === b[1]) {\n                return null;\n            }\n            slope = (b[0] - a[0]) / (b[1] - a[1]);\n        }\n        else {\n            if (a[0] === b[0]) {\n                return null;\n            }\n            slope = (b[1] - a[1]) / (b[0] - a[0]);\n        }\n        return slope;\n    };\n    Shape.prototype.getIntercept = function (point, getSlope) {\n        if (getSlope === null) {\n            return point[0];\n        }\n        return point[1] - getSlope * point[0];\n    };\n    Shape.prototype.setPointCollForShapeRotation = function (obj) {\n        var center = { x: obj.activePoint.startX + (obj.activePoint.width / 2), y: obj.activePoint.startY +\n                (obj.activePoint.height / 2) };\n        var p1 = { x: Math.cos(obj.rotatedAngle) * (obj.activePoint.startX - center.x) - Math.sin(obj.rotatedAngle) *\n                (obj.activePoint.startY - center.y) + center.x,\n            y: Math.sin(obj.rotatedAngle) * (obj.activePoint.startX - center.x) + Math.cos(obj.rotatedAngle) *\n                (obj.activePoint.startY - center.y) + center.y };\n        var p2 = { x: Math.cos(obj.rotatedAngle) * (obj.activePoint.endX - center.x) - Math.sin(obj.rotatedAngle) *\n                (obj.activePoint.startY - center.y) + center.x,\n            y: Math.sin(obj.rotatedAngle) * (obj.activePoint.endX - center.x) + Math.cos(obj.rotatedAngle) * (obj.activePoint.startY\n                - center.y) + center.y };\n        var p3 = { x: Math.cos(obj.rotatedAngle) * (obj.activePoint.startX - center.x) - Math.sin(obj.rotatedAngle) *\n                (obj.activePoint.endY - center.y) + center.x,\n            y: Math.sin(obj.rotatedAngle) * (obj.activePoint.startX - center.x) + Math.cos(obj.rotatedAngle) * (obj.activePoint.endY\n                - center.y) + center.y };\n        var p4 = { x: Math.cos(obj.rotatedAngle) * (obj.activePoint.endX - center.x) - Math.sin(obj.rotatedAngle) *\n                (obj.activePoint.endY - center.y) + center.x,\n            y: Math.sin(obj.rotatedAngle) * (obj.activePoint.endX - center.x) + Math.cos(obj.rotatedAngle) * (obj.activePoint.endY\n                - center.y) + center.y };\n        obj.horTopLinePointColl = this.getLinePoints(p1.x, p1.y, p2.x, p2.y);\n        obj.horBottomLinePointColl = this.getLinePoints(p3.x, p3.y, p4.x, p4.y);\n        obj.verLeftLinePointColl = this.getLinePoints(p1.x, p1.y, p3.x, p3.y);\n        obj.verRightLinePointColl = this.getLinePoints(p2.x, p2.y, p4.x, p4.y);\n        obj.verLeftLinePointColl.reverse();\n        obj.verRightLinePointColl.reverse();\n        // Updating ratio for point collection\n        for (var i = 0; i < obj.horTopLinePointColl.length; i++) {\n            obj.horTopLinePointColl[i].ratioX = (obj.horTopLinePointColl[i].x -\n                this.parent.img.destLeft) / this.parent.img.destWidth;\n            obj.horTopLinePointColl[i].ratioY = (obj.horTopLinePointColl[i].y -\n                this.parent.img.destTop) / this.parent.img.destHeight;\n        }\n        for (var i = 0; i < obj.horBottomLinePointColl.length; i++) {\n            obj.horBottomLinePointColl[i].ratioX = (obj.horBottomLinePointColl[i].x -\n                this.parent.img.destLeft) / this.parent.img.destWidth;\n            obj.horBottomLinePointColl[i].ratioY = (obj.horBottomLinePointColl[i].y -\n                this.parent.img.destTop) / this.parent.img.destHeight;\n        }\n        for (var i = 0; i < obj.verLeftLinePointColl.length; i++) {\n            obj.verLeftLinePointColl[i].ratioX = (obj.verLeftLinePointColl[i].x -\n                this.parent.img.destLeft) / this.parent.img.destWidth;\n            obj.verLeftLinePointColl[i].ratioY = (obj.verLeftLinePointColl[i].y -\n                this.parent.img.destTop) / this.parent.img.destHeight;\n        }\n        for (var i = 0; i < obj.verRightLinePointColl.length; i++) {\n            obj.verRightLinePointColl[i].ratioX = (obj.verRightLinePointColl[i].x -\n                this.parent.img.destLeft) / this.parent.img.destWidth;\n            obj.verRightLinePointColl[i].ratioY = (obj.verRightLinePointColl[i].y -\n                this.parent.img.destTop) / this.parent.img.destHeight;\n        }\n        if (this.parent.upperCanvas.style.cursor !== 'move') {\n            var object = { rotationCirclePoint: null };\n            this.parent.notify('selection', { prop: 'getTransRotationPoint', value: { obj: obj, object: object } });\n            var rotationCirclePoint = object['rotationCirclePoint'];\n            if (rotationCirclePoint) {\n                obj.rotationCirclePointColl = { x: Math.cos(obj.rotatedAngle) * (rotationCirclePoint.x - center.x) -\n                        Math.sin(obj.rotatedAngle) * (rotationCirclePoint.y - center.y) + center.x,\n                    y: Math.sin(obj.rotatedAngle) * (rotationCirclePoint.x - center.x) + Math.cos(obj.rotatedAngle)\n                        * (rotationCirclePoint.y - center.y) + center.y };\n                obj.rotationCirclePointColl.ratioX = (obj.rotationCirclePointColl.x - this.parent.img.destLeft) /\n                    this.parent.img.destWidth;\n                obj.rotationCirclePointColl.ratioY = (obj.rotationCirclePointColl.y - this.parent.img.destTop) /\n                    this.parent.img.destHeight;\n            }\n        }\n    };\n    Shape.prototype.getSquarePointForRotatedShape = function (obj, object) {\n        var point = { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 };\n        var center = { x: obj.activePoint.startX + (obj.activePoint.width / 2), y: obj.activePoint.startY +\n                (obj.activePoint.height / 2) };\n        var p1 = { x: Math.cos(obj.rotatedAngle) * (obj.activePoint.startX - center.x) - Math.sin(obj.rotatedAngle)\n                * (obj.activePoint.startY - center.y) + center.x,\n            y: Math.sin(obj.rotatedAngle) * (obj.activePoint.startX - center.x) + Math.cos(obj.rotatedAngle) * (obj.activePoint.startY\n                - center.y) + center.y };\n        var p2 = { x: Math.cos(obj.rotatedAngle) * (obj.activePoint.endX - center.x) - Math.sin(obj.rotatedAngle) *\n                (obj.activePoint.startY - center.y) + center.x,\n            y: Math.sin(obj.rotatedAngle) * (obj.activePoint.endX - center.x) + Math.cos(obj.rotatedAngle) * (obj.activePoint.startY\n                - center.y) + center.y };\n        var p3 = { x: Math.cos(obj.rotatedAngle) * (obj.activePoint.startX - center.x) - Math.sin(obj.rotatedAngle) *\n                (obj.activePoint.endY - center.y) + center.x,\n            y: Math.sin(obj.rotatedAngle) * (obj.activePoint.startX - center.x) + Math.cos(obj.rotatedAngle) * (obj.activePoint.endY\n                - center.y) + center.y };\n        var p4 = { x: Math.cos(obj.rotatedAngle) * (obj.activePoint.endX - center.x) - Math.sin(obj.rotatedAngle) *\n                (obj.activePoint.endY - center.y) + center.x,\n            y: Math.sin(obj.rotatedAngle) * (obj.activePoint.endX - center.x) + Math.cos(obj.rotatedAngle) *\n                (obj.activePoint.endY - center.y) + center.y };\n        point.startX = p1.x;\n        point.startY = p1.y;\n        point.endX = p1.x;\n        point.endY = p1.y;\n        if (point.startX > p2.x) {\n            point.startX = p2.x;\n        }\n        if (point.startX > p3.x) {\n            point.startX = p3.x;\n        }\n        if (point.startX > p4.x) {\n            point.startX = p4.x;\n        }\n        if (point.startY > p2.y) {\n            point.startY = p2.y;\n        }\n        if (point.startY > p3.y) {\n            point.startY = p3.y;\n        }\n        if (point.startY > p4.y) {\n            point.startY = p4.y;\n        }\n        if (point.endX < p2.x) {\n            point.endX = p2.x;\n        }\n        if (point.endX < p3.x) {\n            point.endX = p3.x;\n        }\n        if (point.endX < p4.x) {\n            point.endX = p4.x;\n        }\n        if (point.endY < p2.y) {\n            point.endY = p2.y;\n        }\n        if (point.endY < p3.y) {\n            point.endY = p3.y;\n        }\n        if (point.endY < p4.y) {\n            point.endY = p4.y;\n        }\n        point.width = point.endX - point.startX;\n        point.height = point.endY - point.startY;\n        if (object) {\n            object['activePoint'] = point;\n        }\n        return point;\n    };\n    return Shape;\n}());\nexport { Shape };\n","import { Browser, extend, getComponent, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Direction } from '../index';\nimport { hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nvar Transform = /** @class */ (function () {\n    function Transform(parent) {\n        this.isReverseFlip = false; // True when rotate method is called from iteration\n        this.disablePan = false; // auto enable / disable pan while zooming\n        this.isReverseRotate = false; // True when rotate method is called from iteration\n        this.flipColl = []; // To store flip order\n        this.prevZoomValue = 1;\n        this.cropDimension = { width: 0, height: 0 };\n        this.isPreventSelect = false;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Transform.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Transform.prototype.addEventListener = function () {\n        this.parent.on('transform', this.transform, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Transform.prototype.removeEventListener = function () {\n        this.parent.off('transform', this.transform);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Transform.prototype.transform = function (args) {\n        this.initTransformPvtVar();\n        switch (args.prop) {\n            case 'rotateImage':\n                this.rotateImage(args.value['degree']);\n                break;\n            case 'flipImage':\n                this.flipImage(args.value['direction']);\n                break;\n            case 'setDestPointsForFlipState':\n                this.setDestPointsForFlipState();\n                break;\n            case 'zoomAction':\n                this.zoomAction(args.value['zoomFactor'], args.value['zoomPoint']);\n                break;\n            case 'disableZoomOutBtn':\n                this.disableZoomOutBtn(args.value['isZoomOut']);\n                break;\n            case 'rotatedFlip':\n                this.rotatedFlip();\n                break;\n            case 'drawPannedImage':\n                this.drawPannedImage(args.value['xDiff'], args.value['yDiff']);\n                break;\n            case 'drawPannImage':\n                this.drawPannImage(args.value['point']);\n                break;\n            case 'performTransformation':\n                this.performTransformation(args.value['text']);\n                break;\n            case 'updateTransform':\n                this.updateTransform(args.value['text']);\n                break;\n            case 'rotatePan':\n                this.rotatePan(args.value['isCropSelection'], args.value['isDefaultZoom']);\n                break;\n            case 'drawRotatedImage':\n                this.drawRotatedImage(args.value['degree']);\n                break;\n            case 'limitPan':\n                this.limitPan();\n                break;\n            case 'updateFlipActiveObj':\n                this.updateFlipActiveObj(args.value['panRegion']);\n                break;\n            case 'resetZoom':\n                this.resetZoom();\n                break;\n            case 'pan':\n                this.pan(args.value['value']);\n                break;\n            case 'zoom':\n                this.zoom(args.value['zoomFactor'], args.value['zoomPoint']);\n                break;\n            case 'setCurrPanRegion':\n                this.setCurrPanRegion(args.value['region'], args.value['type'], args.value['obj']);\n                break;\n            case 'rotate':\n                this.rotate(args.value['degree'], args.value['obj']);\n                break;\n            case 'flip':\n                this.flip(args.value['direction']);\n                break;\n            case 'update':\n                this.update();\n                break;\n            case 'calcMaxDimension':\n                this.calcMaxDimension(args.value['width'], args.value['height'], args.value['obj']);\n                break;\n            case 'updatePanPoints':\n                this.updatePanPoints(args.value['panRegion'], args.value['obj']);\n                break;\n            case 'getPanMove':\n                args.value['obj']['panMove'] = this.panMove;\n                break;\n            case 'setPanMove':\n                this.panMove = args.value['point'];\n                break;\n            case 'getTempPanMove':\n                args.value['obj']['tempPanMove'] = this.tempPanMove;\n                break;\n            case 'setTempPanMove':\n                this.tempPanMove = args.value['point'];\n                break;\n            case 'setReverseFlip':\n                this.isReverseFlip = args.value['isReverseFlip'];\n                break;\n            case 'setDisablePan':\n                this.disablePan = args.value['bool'];\n                break;\n            case 'setCurrDestinationPoint':\n                this.currDestPoint = args.value['point'];\n                this.currDestPoint.startX -= this.parent.cropObj.totalPannedPoint.x;\n                this.currDestPoint.startY -= this.parent.cropObj.totalPannedPoint.y;\n                break;\n            case 'setReverseRotate':\n                this.isReverseRotate = args.value['bool'];\n                break;\n            case 'getFlipColl':\n                args.value['obj']['flipColl'] = this.flipColl;\n                break;\n            case 'setFlipColl':\n                this.flipColl = args.value['flipColl'];\n                break;\n            case 'getPreviousZoomValue':\n                args.value['obj']['previousZoomValue'] = this.prevZoomValue;\n                break;\n            case 'setPreviousZoomValue':\n                this.prevZoomValue = args.value['previousZoomValue'];\n                break;\n            case 'getCropDimension':\n                args.value['obj']['cropDimension'] = this.cropDimension;\n                break;\n            case 'setCropDimension':\n                this.cropDimension.width = args.value['width'];\n                this.cropDimension.height = args.value['height'];\n                break;\n            case 'reset':\n                this.reset();\n                break;\n        }\n    };\n    Transform.prototype.getModuleName = function () {\n        return 'transform';\n    };\n    Transform.prototype.initTransformPvtVar = function () {\n        if (this.parent.lowerCanvas) {\n            this.lowerContext = this.parent.lowerCanvas.getContext('2d');\n        }\n        if (this.parent.upperCanvas) {\n            this.upperContext = this.parent.upperCanvas.getContext('2d');\n        }\n    };\n    Transform.prototype.reset = function () {\n        this.zoomBtnHold = null;\n        this.tempPanMove = null;\n        this.panMove = null;\n        this.disablePan = false;\n        this.currDestPoint = null;\n        this.isReverseRotate = false;\n        this.flipColl = [];\n        this.transCurrObj = null;\n        this.prevZoomValue = 1;\n        this.isPreventSelect = false;\n    };\n    Transform.prototype.rotateImage = function (degree) {\n        var _this = this;\n        var parent = this.parent;\n        var transitionArgs = { cancel: false, previousDegree: parent.transform.degree,\n            currentDegree: Math.abs(parent.transform.degree + degree) === 360 ? 0 : parent.transform.degree + degree };\n        if (!this.isPreventSelect && isBlazor() && parent.events && parent.events.rotating.hasDelegate === true) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            parent.dotNetRef.invokeMethodAsync('RotateEventAsync', 'OnRotate', transitionArgs).then(function (args) {\n                _this.rotateEvent(args, degree);\n            });\n        }\n        else {\n            if (!this.isPreventSelect) {\n                parent.trigger('rotating', transitionArgs);\n            }\n            this.rotateEvent(transitionArgs, degree);\n        }\n    };\n    Transform.prototype.rotateEvent = function (transitionArgs, degree) {\n        var parent = this.parent;\n        if (!transitionArgs.cancel) {\n            var prevObj = void 0;\n            if (isNullOrUndefined(this.transCurrObj)) {\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                prevObj = object['currObj'];\n                prevObj.objColl = extend([], parent.objColl, null, true);\n                prevObj.pointColl = extend({}, parent.pointColl, null, true);\n                prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n                var selPointCollObj = { selPointColl: null };\n                parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                    value: { obj: selPointCollObj } });\n                prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            }\n            parent.afterCropActions.push(degree === 90 ? 'rotateRight' : 'rotateLeft');\n            var splitWords = [];\n            var activeObjShape = void 0;\n            if (parent.activeObj.activePoint && parent.activeObj.shape) {\n                if (parent.activeObj.shape !== undefined) {\n                    splitWords = parent.activeObj.shape.split('-');\n                }\n                if (parent.currObjType.isCustomCrop || splitWords[0] === 'crop') {\n                    activeObjShape = parent.currObjType.isCustomCrop ? 'custom' : splitWords[1];\n                    parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                    parent.objColl.push(parent.activeObj);\n                    parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                }\n            }\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: true } });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            this.drawRotatedImage(degree);\n            parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n            if (parent.isCircleCrop) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            }\n            if (activeObjShape) {\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n                parent.objColl.pop();\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n            }\n            parent.isUndoRedo = false;\n            var obj = { collection: parent.rotateFlipColl };\n            parent.notify('shape', { prop: 'alignRotateFlipColl', onPropertyChange: false,\n                value: { collection: parent.rotateFlipColl, isRotateFlipCollection: true, obj: obj } });\n            parent.rotateFlipColl = obj['collection'];\n            if (parent.cropObj.activeObj.shape && !this.isPreventSelect) {\n                this.isPreventSelect = true;\n                parent.select('custom');\n                this.isPreventSelect = false;\n                parent.setProperties({ zoomSettings: { zoomFactor: 1 } }, true);\n                this.prevZoomValue = parent.zoomSettings.zoomFactor;\n            }\n        }\n    };\n    Transform.prototype.drawRotatedImage = function (degree) {\n        var parent = this.parent;\n        if (degree === 0) {\n            parent.transform.degree = 0;\n        }\n        else {\n            parent.transform.degree += degree;\n        }\n        if (Math.abs(parent.transform.degree) === 360) {\n            parent.transform.degree = 0;\n        }\n        parent.notify('draw', { prop: 'setDestPoints', onPropertyChange: false });\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        parent.objColl = [];\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        if (!this.isReverseRotate) {\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n        }\n        this.rotateDegree(degree);\n        if (!this.isReverseRotate) {\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n            parent.rotateFlipColl.push(degree);\n        }\n        parent.objColl = extend([], tempObjColl, [], true);\n        parent.activeObj = extend({}, tempActiveObj, {}, true);\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        parent.notify('shape', { prop: 'redrawObj', onPropertyChange: false, value: { degree: degree } });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        if (degree > 0) {\n            parent.notify('freehand-draw', { prop: 'rotateFhdColl', onPropertyChange: false });\n        }\n        else {\n            for (var i = 0; i < 3; i++) {\n                parent.notify('freehand-draw', { prop: 'rotateFhdColl', onPropertyChange: false });\n            }\n        }\n        parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n            value: { context: this.lowerContext, points: null } });\n        this.updateCurrSelectionPoint(degree);\n    };\n    Transform.prototype.rotateDegree = function (degree) {\n        var parent = this.parent;\n        this.lowerContext.save();\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.lowerContext.translate(parent.lowerCanvas.width / 2, parent.lowerCanvas.height / 2);\n        this.lowerContext.rotate(Math.PI / 180 * degree);\n        this.lowerContext.translate(-parent.lowerCanvas.width / 2, -parent.lowerCanvas.height / 2);\n        var temp = this.lowerContext.filter;\n        this.parent.notify('filter', { prop: 'updateBrightFilter', onPropertyChange: false });\n        this.lowerContext.drawImage(this.parent.baseImg, this.parent.img.srcLeft, this.parent.img.srcTop, this.parent.img.srcWidth, this.parent.img.srcHeight, this.parent.img.destLeft, this.parent.img.destTop, this.parent.img.destWidth, this.parent.img.destHeight);\n        this.lowerContext.filter = temp;\n        this.lowerContext.translate(parent.lowerCanvas.width / 2, parent.lowerCanvas.height / 2);\n        this.lowerContext.rotate(Math.PI / 180 * -degree);\n        this.lowerContext.translate(-parent.lowerCanvas.width / 2, -parent.lowerCanvas.height / 2);\n        this.lowerContext.restore();\n    };\n    Transform.prototype.updateCurrSelectionPoint = function (degree) {\n        var parent = this.parent;\n        if (parent.currSelectionPoint && this.currDestPoint) {\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            var objColl = extend([], parent.objColl, [], true);\n            var srcPoints = { startX: parent.img.srcLeft, startY: parent.img.srcTop, width: parent.img.srcWidth,\n                height: parent.img.srcHeight };\n            var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                height: parent.img.destHeight };\n            parent.objColl = [];\n            parent.objColl.push(extend({}, parent.currSelectionPoint, {}, true));\n            if (isNullOrUndefined(parent.objColl[0].imageRatio)) {\n                parent.activeObj = parent.objColl[0];\n                parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                parent.objColl[0] = parent.activeObj;\n            }\n            parent.img.srcLeft = 0;\n            parent.img.srcTop = 0;\n            parent.img.srcWidth = parent.baseImg.width;\n            parent.img.srcHeight = parent.baseImg.height;\n            parent.img.destLeft = this.currDestPoint.startX;\n            parent.img.destTop = this.currDestPoint.startY;\n            parent.img.destWidth = this.currDestPoint.width;\n            parent.img.destHeight = this.currDestPoint.height;\n            if (typeof (degree) === 'number') {\n                parent.notify('draw', { prop: 'setDestPoints', onPropertyChange: false });\n                parent.notify('draw', { prop: 'setClientTransDim', onPropertyChange: false,\n                    value: { isPreventDimension: null } });\n            }\n            parent.notify('shape', { prop: 'redrawObj', onPropertyChange: false, value: { degree: degree } });\n            parent.currSelectionPoint = extend({}, parent.objColl[0], {}, true);\n            this.currDestPoint = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                height: parent.img.destHeight };\n            parent.objColl = objColl;\n            parent.activeObj = activeObj;\n            parent.img.srcLeft = srcPoints.startX;\n            parent.img.srcTop = srcPoints.startY;\n            parent.img.srcWidth = srcPoints.width;\n            parent.img.srcHeight = srcPoints.height;\n            parent.img.destLeft = destPoints.startX;\n            parent.img.destTop = destPoints.startY;\n            parent.img.destWidth = destPoints.width;\n            parent.img.destHeight = destPoints.height;\n        }\n    };\n    Transform.prototype.flipImage = function (direction) {\n        var _this = this;\n        var parent = this.parent;\n        var transitionArgs = { direction: direction, cancel: false,\n            previousDirection: parent.toPascalCase(parent.transform.currFlipState) };\n        if (!this.isPreventSelect && isBlazor() && parent.events && parent.events.flipping.hasDelegate === true) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            parent.dotNetRef.invokeMethodAsync('FlipEventAsync', 'OnFlip', transitionArgs).then(function (args) {\n                _this.flipEvent(args, direction);\n            });\n        }\n        else {\n            if (!this.isPreventSelect) {\n                parent.trigger('flipping', transitionArgs);\n            }\n            this.flipEvent(transitionArgs, direction);\n        }\n    };\n    Transform.prototype.flipEvent = function (transitionArgs, direction) {\n        var parent = this.parent;\n        if (transitionArgs.cancel) {\n            return;\n        }\n        var prevObj;\n        if (isNullOrUndefined(this.transCurrObj)) {\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            prevObj = object['currObj'];\n            prevObj.objColl = extend([], parent.objColl, null, true);\n            prevObj.pointColl = extend({}, parent.pointColl, null, true);\n            prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        }\n        parent.afterCropActions.push(direction.toLowerCase() === 'horizontal' ? 'horizontalflip' : 'verticalflip');\n        var splitWords = [];\n        var activeObjShape;\n        if (parent.activeObj.activePoint) {\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.currObjType.isCustomCrop || splitWords[0] === 'crop') {\n                activeObjShape = parent.currObjType.isCustomCrop ? 'custom' : splitWords[1];\n                parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                parent.objColl.push(parent.activeObj);\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            }\n        }\n        parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n            value: { x: null, y: null, isMouseDown: true } });\n        parent.clearContext(this.lowerContext);\n        parent.clearContext(this.upperContext);\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        parent.objColl = [];\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        if (!this.isReverseFlip) {\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n        }\n        var lowercaseDirection = direction.toLowerCase();\n        this.updateFlipState(lowercaseDirection);\n        if (lowercaseDirection === 'horizontal') {\n            parent.transform.currFlipState = (parent.transform.currFlipState.toLowerCase() === 'horizontal') ? '' : 'horizontal';\n        }\n        else {\n            parent.transform.currFlipState = (parent.transform.currFlipState.toLowerCase() === 'vertical') ? '' : 'vertical';\n        }\n        var selObj = { isSelected: null };\n        parent.notify('draw', { prop: 'getRotatedFlipCropSelection', onPropertyChange: false, value: { bool: selObj } });\n        if (selObj['isSelected']) {\n            parent.img.destLeft += parent.panPoint.totalPannedInternalPoint.x;\n            parent.img.destTop += parent.panPoint.totalPannedInternalPoint.y;\n        }\n        var temp = this.lowerContext.filter;\n        parent.notify('filter', { prop: 'updateBrightFilter', onPropertyChange: false });\n        this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n        this.updateFlipState(direction.toLowerCase());\n        if (!this.isReverseFlip) {\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n            this.updateFlipColl(direction.toLocaleLowerCase());\n            parent.rotateFlipColl.push(direction.toLowerCase());\n        }\n        if (parent.rotateFlipColl.length === 1) {\n            var panObj = { panRegion: '' };\n            parent.notify('crop', { prop: 'getCurrFlipState', onPropertyChange: false,\n                value: { panObj: panObj } });\n            if (panObj['panRegion'] === '') {\n                parent.notify('draw', { prop: 'setClientTransDim', onPropertyChange: false,\n                    value: { isPreventDimension: null } });\n            }\n            else {\n                this.setDestPointsForFlipState();\n            }\n        }\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        parent.objColl = extend([], tempObjColl, [], true);\n        parent.activeObj = extend({}, tempActiveObj, {}, true);\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            var flipObjColl = parent.objColl[i].flipObjColl;\n            if (flipObjColl.length === 0) {\n                flipObjColl.push(direction);\n            }\n            else if (flipObjColl[flipObjColl.length - 1] === direction) {\n                flipObjColl.pop();\n            }\n            else {\n                flipObjColl.push(direction);\n            }\n        }\n        parent.notify('shape', { prop: 'redrawObj', onPropertyChange: false, value: { degree: direction.toLowerCase() } });\n        var tempFilter = this.lowerContext.filter;\n        this.lowerContext.filter = 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n            'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n        parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n        if (direction.toLowerCase() === 'horizontal' || direction.toLowerCase() === 'vertical') {\n            parent.notify('freehand-draw', { prop: 'flipFHDColl', onPropertyChange: false,\n                value: { value: direction.toLowerCase() } });\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: this.lowerContext, points: null } });\n        }\n        else {\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: this.lowerContext, points: null } });\n        }\n        this.lowerContext.filter = tempFilter;\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        this.updateCurrSelectionPoint(direction.toLowerCase());\n        parent.isUndoRedo = false;\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        if (activeObjShape) {\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n            parent.objColl.pop();\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n        }\n        var obj = { collection: parent.rotateFlipColl };\n        parent.notify('shape', { prop: 'alignRotateFlipColl', onPropertyChange: false,\n            value: { collection: parent.rotateFlipColl, isRotateFlipCollection: true, obj: obj } });\n        parent.rotateFlipColl = obj['collection'];\n        if (parent.cropObj.activeObj.shape && !this.isPreventSelect) {\n            this.isPreventSelect = true;\n            parent.select('custom');\n            this.isPreventSelect = false;\n            parent.setProperties({ zoomSettings: { zoomFactor: 1 } }, true);\n            this.prevZoomValue = parent.zoomSettings.zoomFactor;\n        }\n    };\n    Transform.prototype.updateFlipState = function (direction) {\n        var degree = this.parent.transform.degree;\n        if (direction === 'horizontal') {\n            if (degree % 90 === 0 && degree % 180 !== 0) {\n                this.verticalFlip();\n            }\n            else {\n                this.horizontalFlip();\n            }\n        }\n        else if (direction === 'vertical') {\n            if (degree % 90 === 0 && degree % 180 !== 0) {\n                this.horizontalFlip();\n            }\n            else {\n                this.verticalFlip();\n            }\n        }\n    };\n    Transform.prototype.horizontalFlip = function () {\n        this.lowerContext.translate(this.lowerContext.canvas.width, 0);\n        this.lowerContext.scale(-1, 1);\n        this.upperContext.translate(this.upperContext.canvas.width, 0);\n        this.upperContext.scale(-1, 1);\n    };\n    Transform.prototype.verticalFlip = function () {\n        this.lowerContext.translate(0, this.lowerContext.canvas.height);\n        this.lowerContext.scale(1, -1);\n        this.upperContext.translate(0, this.upperContext.canvas.height);\n        this.upperContext.scale(1, -1);\n    };\n    Transform.prototype.updateFlipColl = function (direction) {\n        if (this.isPreventSelect) {\n            return;\n        }\n        if (this.flipColl.length === 0 || this.flipColl[this.flipColl.length - 1] !== direction) {\n            this.flipColl.push(direction);\n        }\n        else {\n            this.flipColl.pop();\n        }\n        if (this.flipColl.length >= 4) {\n            var lastFourItems = this.flipColl.slice(-4);\n            if ((lastFourItems[0] === 'horizontal' && lastFourItems[1] === 'vertical' &&\n                lastFourItems[2] === 'horizontal' && lastFourItems[3] === 'vertical') ||\n                (lastFourItems[0] === 'vertical' && lastFourItems[1] === 'horizontal' &&\n                    lastFourItems[2] === 'vertical' && lastFourItems[3] === 'horizontal')) {\n                this.flipColl.splice(-4);\n            }\n        }\n    };\n    Transform.prototype.setDestPointsForFlipState = function () {\n        var parent = this.parent;\n        var panObj = { panRegion: '' };\n        parent.notify('crop', { prop: 'getCurrFlipState', onPropertyChange: false,\n            value: { panObj: panObj } });\n        if (panObj['panRegion'] !== '') {\n            if (panObj['panRegion'] === 'horizontal') {\n                parent.img.destLeft = parent.lowerCanvas.clientWidth - (parent.img.destWidth + parent.img.destLeft);\n            }\n            else if (panObj['panRegion'] === 'vertical') {\n                parent.img.destTop = parent.lowerCanvas.clientHeight - (parent.img.destHeight + parent.img.destTop);\n            }\n            else {\n                parent.img.destLeft = parent.lowerCanvas.clientWidth - (parent.img.destWidth + parent.img.destLeft);\n                parent.img.destTop = parent.lowerCanvas.clientHeight - (parent.img.destHeight + parent.img.destTop);\n            }\n        }\n    };\n    Transform.prototype.zoomAction = function (zoomFactor, zoomPoint) {\n        var _this = this;\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (parent.zoomSettings.zoomFactor >= parent.zoomSettings.maxZoomFactor && zoomFactor > 0 ||\n                (parent.zoomSettings.zoomFactor > parent.zoomSettings.minZoomFactor && zoomFactor < 0 && this.disableZoomOutBtn(true)) ||\n                (parent.zoomSettings.zoomFactor <= parent.zoomSettings.minZoomFactor && zoomFactor < 0)) {\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'zoom-up-handler', onPropertyChange: false });\n                }\n                return;\n            }\n            parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n            var tempZoomFactor = zoomFactor;\n            zoomFactor = tempZoomFactor > 0 ? 0.1 : -0.1;\n            for (var i = 0; i < Math.abs(tempZoomFactor / 0.1); i++) {\n                if (this.prevZoomValue === 1) {\n                    this.prevZoomValue += zoomFactor > 0 ? zoomFactor * 10 : (zoomFactor * 10) / 10;\n                }\n                else if (this.prevZoomValue > 1) {\n                    this.prevZoomValue += (zoomFactor * 10);\n                }\n                else if (this.prevZoomValue < 1) {\n                    this.prevZoomValue += (zoomFactor * 10) / 10;\n                    var powerOften = Math.pow(10, 1);\n                    this.prevZoomValue = (Math.round(this.prevZoomValue * powerOften) / powerOften);\n                }\n            }\n            zoomFactor = tempZoomFactor;\n            parent.setProperties({ zoomSettings: { zoomFactor: this.prevZoomValue } }, true);\n            var splitWords = void 0;\n            this.tempActiveObj = null;\n            this.isShape = false;\n            if (parent.activeObj.shape !== undefined) {\n                if (parent.activeObj.shape === 'shape') {\n                    parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                }\n                else {\n                    splitWords = parent.activeObj.shape.split('-');\n                }\n            }\n            if (splitWords !== undefined && splitWords[0] === 'crop') {\n                this.tempActiveObj = extend({}, parent.activeObj, {}, true);\n                parent.isCropTab = true;\n            }\n            else if (parent.activeObj.shape && splitWords[0] !== 'crop') {\n                this.isShape = true;\n            }\n            var obj = { zoomType: null };\n            parent.notify('selection', { prop: 'getZoomType', onPropertyChange: false, value: { obj: obj } });\n            if (isNullOrUndefined(zoomPoint)) {\n                if (parent.isCropTab && this.tempActiveObj) {\n                    zoomPoint = { x: parent.activeObj.activePoint.startX + (parent.activeObj.activePoint.width / 2),\n                        y: parent.activeObj.activePoint.startY + (parent.activeObj.activePoint.height / 2) };\n                }\n                else {\n                    zoomPoint = { x: parent.lowerCanvas.clientWidth / 2, y: parent.lowerCanvas.clientHeight / 2 };\n                }\n                if (obj['zoomType'] === 'MouseWheel' || obj['zoomType'] === 'Pinch') {\n                    zoomPoint = { x: parent.zoomSettings.zoomPoint.x, y: parent.zoomSettings.zoomPoint.y };\n                }\n            }\n            var previousZoomFactor = parent.zoomSettings.zoomFactor - (zoomFactor * 10);\n            var zoomEventArgs = { zoomPoint: zoomPoint, cancel: false, previousZoomFactor: previousZoomFactor,\n                currentZoomFactor: parent.zoomSettings.zoomFactor, zoomTrigger: obj['zoomType'] };\n            if (!parent.isCropToolbar && isBlazor() && parent.events && parent.events.zooming.hasDelegate === true) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                parent.dotNetRef.invokeMethodAsync('ZoomEventAsync', 'OnZoom', zoomEventArgs).then(function (args) {\n                    _this.zoomEvent(args, zoomFactor);\n                });\n            }\n            else {\n                if (!parent.isCropToolbar) {\n                    parent.trigger('zooming', zoomEventArgs);\n                }\n                this.zoomEvent(zoomEventArgs, zoomFactor);\n            }\n        }\n    };\n    Transform.prototype.zoomEvent = function (zoomEventArgs, zoomFactor) {\n        var parent = this.parent;\n        if (zoomEventArgs.cancel) {\n            return;\n        }\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'close-contextual-toolbar', onPropertyChange: false });\n        }\n        else if (parent.element.querySelector('.e-contextual-toolbar-wrapper') && !parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.contains('e-hidden')) {\n            parent.updateToolbar(parent.element, 'closeContextualToolbar');\n        }\n        parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n            value: { x: null, y: null, isMouseDown: true } });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        this.upperContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        var object = { canvasFilter: this.parent.canvasFilter };\n        this.lowerContext.filter = object['canvasFilter'];\n        parent.upperCanvas.style.cursor = parent.cursor = 'default';\n        var objColl = extend([], parent.objColl, [], true);\n        if (!parent.isCropTab) {\n            if (parent.transform.degree !== 0) {\n                parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                    value: { x: null, y: null, isMouseDown: null } });\n                parent.panPoint.currentPannedPoint = { x: 0, y: 0 };\n                this.rotatePan(true, true);\n            }\n            else if (parent.transform.currFlipState !== '') {\n                parent.panPoint.totalPannedPoint = { x: 0, y: 0 };\n            }\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n        }\n        if (parent.transform.degree === 0) {\n            this.drawZoomImgToCanvas(zoomFactor, this.tempActiveObj);\n            var panObj_1 = { panRegion: '' };\n            parent.notify('crop', { prop: 'getCurrFlipState', onPropertyChange: false,\n                value: { panObj: panObj_1 } });\n            if (panObj_1['panRegion'] !== '') {\n                parent.notify('crop', { prop: 'setTempFlipPanPoint', onPropertyChange: false, value: { point: parent.panPoint.totalPannedPoint, isAdd: true } });\n                objColl = extend([], parent.objColl, [], true);\n                parent.objColl = [];\n                var destLeft = parent.img.destLeft;\n                var destTop = parent.img.destTop;\n                this.setDestPointsForFlipState();\n                this.rotatedFlip();\n                parent.img.destLeft = destLeft;\n                parent.img.destTop = destTop;\n                parent.objColl = objColl;\n                parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n                parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n                parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n            }\n            if (parent.zoomSettings.zoomFactor <= parent.zoomSettings.minZoomFactor && !parent.isCropTab) {\n                parent.panPoint.totalPannedPoint = { x: 0, y: 0 };\n            }\n        }\n        else {\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n            parent.panPoint.totalPannedClientPoint = { x: 0, y: 0 };\n            parent.panPoint.totalPannedInternalPoint = { x: 0, y: 0 };\n            this.rotateZoom(zoomFactor);\n            var panObj_2 = { panRegion: '' };\n            parent.notify('crop', { prop: 'getCurrFlipState', onPropertyChange: false,\n                value: { panObj: panObj_2 } });\n            if (panObj_2['panRegion'] !== '') {\n                var temp = this.lowerContext.filter;\n                this.lowerContext.filter = 'none';\n                parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n                parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n                this.lowerContext.filter = temp;\n            }\n        }\n        var powerOften = Math.pow(10, 1);\n        if (parent.zoomSettings.zoomFactor <= parent.zoomSettings.minZoomFactor ||\n            (Math.round(parent.transform.zoomFactor * powerOften) / powerOften) === 2) {\n            clearInterval(this.zoomBtnHold);\n            this.zoomBtnHold = 0;\n        }\n        var panObj = { panRegion: '' };\n        parent.notify('crop', { prop: 'getCurrFlipState', onPropertyChange: false,\n            value: { panObj: panObj } });\n        if (panObj['panRegion'] === '') {\n            var temp = this.lowerContext.filter;\n            this.lowerContext.filter = 'none';\n            parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n            this.lowerContext.filter = temp;\n        }\n        if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        if (this.tempActiveObj) {\n            parent.activeObj = extend({}, this.tempActiveObj, {}, true);\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n            if (parent.zoomSettings.zoomFactor <= parent.zoomSettings.minZoomFactor) {\n                parent.currSelectionPoint = null;\n            }\n        }\n        parent.isUndoRedo = false;\n        var zoomOut;\n        if (!isBlazor()) {\n            zoomOut = document.querySelector('#' + parent.element.id + '_zoomOut');\n            if (zoomOut && parent.zoomSettings.zoomFactor <= parent.zoomSettings.minZoomFactor) {\n                zoomOut.classList.add('e-disabled');\n                zoomOut.parentElement.classList.add('e-overlay');\n            }\n            else if (zoomOut) {\n                zoomOut.classList.remove('e-disabled');\n                zoomOut.parentElement.classList.remove('e-overlay');\n            }\n        }\n        else {\n            zoomOut = parent.element.querySelector('#zoomout');\n            if (zoomOut && parent.zoomSettings.zoomFactor <= parent.zoomSettings.minZoomFactor) {\n                zoomOut.classList.add('e-overlay');\n            }\n            else if (zoomOut) {\n                zoomOut.classList.remove('e-overlay');\n            }\n        }\n        this.autoEnablePan();\n        if (this.tempActiveObj) {\n            parent.activeObj = extend({}, this.tempActiveObj, {}, true);\n        }\n        if (parent.activeObj.shape === 'crop-custom') {\n            parent.currObjType.isCustomCrop = true;\n        }\n        var panBtn = parent.element.querySelector('.e-img-pan .e-btn');\n        if (panBtn && parent.togglePan) {\n            panBtn.classList.add('e-selected-btn');\n        }\n        else if (panBtn) {\n            panBtn.classList.remove('e-selected-btn');\n        }\n        if (this.isShape) {\n            parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n            parent.objColl.pop();\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj, isCropRatio: null,\n                    points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n            }\n        }\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'enable-disable-btns', onPropertyChange: false });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n        }\n        parent.notify('selection', { prop: 'setZoomType', onPropertyChange: false, value: { zoomType: 'Toolbar' } });\n    };\n    Transform.prototype.disableZoomOutBtn = function (isZoomOut) {\n        var parent = this.parent;\n        var isDisabled = false;\n        var zoomOut;\n        if (!isNullOrUndefined(isZoomOut)) {\n            parent.transform.zoomFactor -= 0.1;\n        }\n        if (!isBlazor()) {\n            zoomOut = document.querySelector('#' + parent.element.id + '_zoomOut');\n        }\n        else {\n            zoomOut = this.parent.element.querySelector('#zoomout');\n        }\n        var destLeft = parent.img.destLeft;\n        var destTop = parent.img.destTop;\n        var destWidth = parent.img.destWidth;\n        var destHeight = parent.img.destHeight;\n        if (parent.activeObj.shape) {\n            this.setZoomDimension(-0.1, parent.activeObj);\n            if (!isNullOrUndefined(zoomOut)) {\n                if (parent.img.destLeft > parent.activeObj.activePoint.startX || parent.img.destTop > parent.activeObj.activePoint.startY\n                    || parent.img.destLeft + parent.img.destWidth < parent.activeObj.activePoint.endX || parent.img.destTop +\n                    parent.img.destHeight < parent.activeObj.activePoint.endY || parent.zoomSettings.zoomFactor ===\n                    parent.zoomSettings.minZoomFactor) {\n                    if (!isBlazor()) {\n                        zoomOut.classList.add('e-disabled');\n                        zoomOut.parentElement.classList.add('e-overlay');\n                    }\n                    else {\n                        zoomOut.classList.add('e-overlay');\n                    }\n                    isDisabled = true;\n                }\n                else {\n                    if (!isBlazor()) {\n                        zoomOut.classList.remove('e-disabled');\n                        zoomOut.parentElement.classList.remove('e-overlay');\n                    }\n                    else {\n                        zoomOut.classList.remove('e-overlay');\n                    }\n                    isDisabled = false;\n                }\n            }\n        }\n        else {\n            this.setZoomDimension(-0.1, null);\n        }\n        if (!isNullOrUndefined(isZoomOut)) {\n            parent.transform.zoomFactor += 0.1;\n        }\n        parent.img.destLeft = destLeft;\n        parent.img.destTop = destTop;\n        parent.img.destWidth = destWidth;\n        parent.img.destHeight = destHeight;\n        return isDisabled;\n    };\n    Transform.prototype.drawZoomImgToCanvas = function (value, selectionObj) {\n        var parent = this.parent;\n        var powerOften = Math.pow(10, 1);\n        if ((Math.round(parent.transform.zoomFactor * powerOften) / powerOften) === 0.1 && value === -0.1) {\n            parent.transform.zoomFactor = 0;\n        }\n        else {\n            parent.transform.zoomFactor += value;\n        }\n        parent.transform[parent.isCropTab ? 'cropZoomFactor' : 'defaultZoomFactor'] = parent.transform.zoomFactor;\n        var maxDimension = { width: 0, height: 0 };\n        if (parent.isCropTab) {\n            maxDimension = this.cropZoom(value, selectionObj);\n        }\n        else {\n            maxDimension = this.calcMaxDimension(parent.img.srcWidth, parent.img.srcHeight);\n            maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n            maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n            parent.img.destLeft = (parent.lowerCanvas.clientWidth - maxDimension.width) / 2;\n            parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.height) / 2;\n        }\n        parent.notify('draw', { prop: 'draw-image-to-canvas', value: { dimension: maxDimension } });\n        maxDimension.width = this.cropDimension.width;\n        maxDimension.height = this.cropDimension.height;\n        maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n        maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n        parent.notify('draw', { prop: 'setZoomCropWidth', value: { width: maxDimension.width, height: maxDimension.height } });\n    };\n    Transform.prototype.rotatedFlip = function () {\n        var parent = this.parent;\n        this.isReverseFlip = true;\n        var tempCurrFlipState = parent.transform.currFlipState;\n        var tempFlipColl = this.flipColl;\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        this.flipColl = [];\n        parent.objColl = [];\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, context: null, isPreventCircleCrop: null } });\n        var temp = this.lowerContext.filter;\n        parent.notify('filter', { prop: 'updateBrightFilter', onPropertyChange: false });\n        this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: true, context: null, isPreventCircleCrop: null } });\n        if (tempCurrFlipState === '' && parent.transform.currFlipState !== '') {\n            tempCurrFlipState = parent.transform.currFlipState;\n        }\n        parent.transform.currFlipState = tempCurrFlipState;\n        this.flipColl = tempFlipColl;\n        parent.objColl = extend([], tempObjColl, [], true);\n        this.lowerContext.filter = 'none';\n        parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n        this.lowerContext.filter = temp;\n        if (tempActiveObj.activePoint.width !== 0) {\n            parent.activeObj = extend({}, tempActiveObj, {}, true);\n        }\n        this.isReverseFlip = false;\n    };\n    Transform.prototype.rotateZoom = function (value) {\n        var parent = this.parent;\n        var powerOften = Math.pow(10, 1);\n        if ((Math.round(parent.transform.zoomFactor * powerOften) / powerOften) === 0.1 && value === -0.1) {\n            parent.transform.zoomFactor = 0;\n        }\n        else {\n            parent.transform.zoomFactor += value;\n        }\n        if (parent.isCropTab) {\n            parent.transform.cropZoomFactor = parent.transform.zoomFactor;\n        }\n        else {\n            parent.transform.defaultZoomFactor = parent.transform.zoomFactor;\n        }\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        parent.objColl = [];\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n        parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: true } });\n        parent.notify('draw', { prop: 'setDestPoints', onPropertyChange: false });\n        var temp = this.lowerContext.filter;\n        parent.notify('filter', { prop: 'updateBrightFilter', onPropertyChange: false });\n        this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: false } });\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n        parent.objColl = tempObjColl;\n        parent.activeObj = tempActiveObj;\n        var maxDimension = { width: this.cropDimension.width, height: this.cropDimension.height };\n        maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n        maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n        parent.notify('draw', { prop: 'setZoomCropWidth', value: { width: maxDimension.width, height: maxDimension.height } });\n    };\n    Transform.prototype.autoEnablePan = function () {\n        if (this.parent.transform.zoomFactor <= 0) {\n            this.parent.togglePan = false;\n            this.parent.notify('selection', { prop: 'setDragCanvas', value: { bool: false } });\n            this.parent.pan(false);\n            this.disablePan = false;\n        }\n        else {\n            this.parent.pan(!this.disablePan);\n        }\n    };\n    Transform.prototype.cropZoom = function (value, selectionObj) {\n        var parent = this.parent;\n        var destLeft = parent.img.destLeft;\n        var destTop = parent.img.destTop;\n        var maxDimension = { width: 0, height: 0 };\n        if (parent.img.srcLeft === 0 || parent.img.srcTop === 0) {\n            if (isNullOrUndefined(selectionObj)) {\n                maxDimension = this.setZoomDimension(value, null);\n            }\n            else {\n                maxDimension = this.setZoomDimension(value, selectionObj);\n            }\n        }\n        else {\n            if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n                maxDimension = this.calcMaxDimension(parent.img.srcHeight, parent.img.srcWidth);\n            }\n            else {\n                maxDimension = this.calcMaxDimension(parent.img.srcWidth, parent.img.srcHeight);\n            }\n            maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n            maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n        }\n        parent.img.destLeft = destLeft - ((maxDimension.width - parent.img.destWidth) / 2);\n        parent.img.destTop = destTop - ((maxDimension.height - parent.img.destHeight) / 2);\n        destLeft = parent.img.destLeft;\n        destTop = parent.img.destTop;\n        if (selectionObj) {\n            if (parent.img.destLeft > selectionObj.activePoint.startX) {\n                parent.img.destLeft = selectionObj.activePoint.startX;\n                if (parent.transform.degree === 0) {\n                    parent.panPoint.totalPannedPoint.x -= (destLeft - parent.img.destLeft);\n                }\n            }\n            if (parent.img.destTop > selectionObj.activePoint.startY) {\n                parent.img.destTop = selectionObj.activePoint.startY;\n                if (parent.transform.degree === 0) {\n                    parent.panPoint.totalPannedPoint.y -= (destTop - parent.img.destTop);\n                }\n            }\n            if (parent.img.destLeft + maxDimension.width < selectionObj.activePoint.endX) {\n                parent.img.destLeft = selectionObj.activePoint.endX - maxDimension.width;\n                if (parent.transform.degree === 0) {\n                    parent.panPoint.totalPannedPoint.x -= (destLeft - parent.img.destLeft);\n                }\n            }\n            if (parent.img.destTop + maxDimension.height < selectionObj.activePoint.endY) {\n                parent.img.destTop = selectionObj.activePoint.endY - maxDimension.height;\n                if (parent.transform.degree === 0) {\n                    parent.panPoint.totalPannedPoint.y -= (destTop - parent.img.destTop);\n                }\n            }\n        }\n        return maxDimension;\n    };\n    Transform.prototype.setZoomDimension = function (value, selectionObj) {\n        var parent = this.parent;\n        var maxDimension = { width: 0, height: 0 };\n        if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            maxDimension = this.calcMaxDimension(parent.img.srcHeight, parent.img.srcWidth);\n        }\n        else {\n            maxDimension = this.calcMaxDimension(parent.img.srcWidth, parent.img.srcHeight);\n        }\n        maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n        maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n        parent.img.destLeft += ((parent.img.destWidth - maxDimension.width) / 2);\n        parent.img.destTop += ((parent.img.destHeight - maxDimension.height) / 2);\n        // While zoom out limit image to draw inside the selection range\n        if (value < 0 && selectionObj) {\n            var startX = selectionObj.activePoint.startX;\n            var startY = selectionObj.activePoint.startY;\n            var width = selectionObj.activePoint.width;\n            var height = selectionObj.activePoint.height;\n            var maxDestLeft = parent.img.destLeft + maxDimension.width;\n            var maxDestTop = parent.img.destTop + maxDimension.height;\n            if (parent.img.destLeft > startX) {\n                parent.img.destLeft = startX;\n            }\n            if (parent.img.destTop > startY) {\n                parent.img.destTop = startY;\n            }\n            if (maxDestLeft < startX + width) {\n                parent.img.destLeft = startX + width - maxDimension.width;\n            }\n            if (maxDestTop < startY + height) {\n                parent.img.destTop = startY + height - maxDimension.height;\n            }\n        }\n        else if (value < 0 && isNullOrUndefined(selectionObj)) {\n            if (parent.img.destLeft > 0) {\n                parent.img.destLeft = 0;\n            }\n            if (parent.img.destTop > 0) {\n                parent.img.destTop = 0;\n            }\n            if (parent.img.destLeft + maxDimension.width < parent.lowerCanvas.width) {\n                parent.img.destLeft = parent.lowerCanvas.width - parent.img.destWidth;\n            }\n            if (parent.img.destTop + maxDimension.height < parent.lowerCanvas.height) {\n                parent.img.destTop = parent.lowerCanvas.height - parent.img.destHeight;\n            }\n        }\n        return maxDimension;\n    };\n    Transform.prototype.drawPannedImage = function (xDiff, yDiff) {\n        var _this = this;\n        var parent = this.parent;\n        var obj = { panDown: null };\n        parent.notify('selection', { prop: 'getPanDown', onPropertyChange: false, value: { obj: obj } });\n        var panEventArgs = { startPoint: obj['panDown'], endPoint: this.panMove, cancel: false };\n        if (isBlazor() && isNullOrUndefined(this.parent.eventType) && parent.events && parent.events.onPanStart.hasDelegate === true) {\n            this.parent.eventType = 'pan';\n            this.parent.panEventArgs = panEventArgs;\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            parent.dotNetRef.invokeMethodAsync('PanEventAsync', 'OnPanStart', panEventArgs).then(function (args) {\n                _this.panEvent(args, xDiff, yDiff);\n            });\n        }\n        else {\n            parent.trigger('panning', panEventArgs);\n            this.panEvent(panEventArgs, xDiff, yDiff);\n        }\n    };\n    Transform.prototype.panEvent = function (panEventArgs, xDiff, yDiff) {\n        if (panEventArgs.cancel) {\n            return;\n        }\n        var parent = this.parent;\n        var isObjCreated = false;\n        if (parent.activeObj.shape && parent.activeObj.shape === 'shape') {\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        }\n        if (isNullOrUndefined(parent.activeObj.shape)) {\n            isObjCreated = true;\n            parent.activeObj.activePoint = { startX: parent.img.destLeft, startY: parent.img.destTop,\n                endX: parent.img.destLeft + parent.img.destWidth, endY: parent.img.destTop + parent.img.destHeight };\n            var startX = parent.activeObj.activePoint.startX;\n            var startY = parent.activeObj.activePoint.startY;\n            var endX = parent.activeObj.activePoint.endX;\n            var endY = parent.activeObj.activePoint.endY;\n            if (startX < 0) {\n                parent.activeObj.activePoint.startX = 0;\n            }\n            if (startY < 0) {\n                parent.activeObj.activePoint.startY = 0;\n            }\n            if (endX > parent.lowerCanvas.width) {\n                parent.activeObj.activePoint.endX =\n                    parent.lowerCanvas.width;\n            }\n            if (endY > parent.lowerCanvas.height) {\n                parent.activeObj.activePoint.endY =\n                    parent.lowerCanvas.height;\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            parent.activeObj.shape = 'crop-custom';\n            var obj = { strokeSettings: {} };\n            parent.notify('shape', { prop: 'getStrokeSettings', onPropertyChange: false,\n                value: { obj: obj } });\n            parent.activeObj.strokeSettings = obj['strokeSettings'];\n            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: parent.activeObj.activePoint, obj: parent.activeObj,\n                    isMouseMove: null, x: null, y: null } });\n            parent.isCropTab = true;\n        }\n        if (parent.transform.degree === 0) {\n            var point = void 0;\n            if (isNullOrUndefined(xDiff) && isNullOrUndefined(yDiff)) {\n                point = this.updatePanPoints('');\n            }\n            else {\n                point = { x: xDiff, y: yDiff };\n            }\n            parent.panPoint.totalPannedPoint.x += point.x;\n            parent.panPoint.totalPannedPoint.y += point.y;\n            var tempSelectionObj = extend({}, parent.activeObj, {}, true);\n            var temp = this.lowerContext.filter;\n            this.drawPannImage(point);\n            this.lowerContext.filter = temp;\n            this.tempPanMove = extend({}, this.panMove, {}, true);\n            parent.activeObj = extend({}, tempSelectionObj, {}, true);\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            if (parent.activeObj.shape) {\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n            }\n        }\n        else {\n            var tempFlipState = parent.transform.currFlipState;\n            parent.isCropTab = true;\n            if (isNullOrUndefined(xDiff) && isNullOrUndefined(yDiff)) {\n                parent.panPoint.currentPannedPoint = this.updatePanPoints('');\n            }\n            else {\n                parent.panPoint.currentPannedPoint = { x: xDiff, y: yDiff };\n            }\n            parent.transform.currFlipState = tempFlipState;\n            this.rotatePan();\n            parent.isCropTab = false;\n            this.tempPanMove = extend({}, this.panMove, {}, true);\n        }\n        if (isObjCreated) {\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.isCropTab = false;\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        }\n    };\n    Transform.prototype.drawPannImage = function (point) {\n        var parent = this.parent;\n        var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n            height: parent.img.destHeight };\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n        parent.img.destLeft = destPoints.startX;\n        parent.img.destTop = destPoints.startY;\n        parent.img.destWidth = destPoints.width;\n        parent.img.destHeight = destPoints.height;\n        this.setDestPointsForFlipState();\n        parent.notify('filter', { prop: 'updateBrightFilter', onPropertyChange: false });\n        this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n        if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: true } });\n        }\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n        parent.img.destLeft = destPoints.startX;\n        parent.img.destTop = destPoints.startY;\n        parent.img.destWidth = destPoints.width;\n        parent.img.destHeight = destPoints.height;\n        var temp = this.lowerContext.filter;\n        this.lowerContext.filter = 'none';\n        parent.notify('shape', { prop: 'panObjColl', onPropertyChange: false,\n            value: { xDiff: point.x, yDiff: point.y, panRegion: '' } });\n        parent.notify('freehand-draw', { prop: 'panFHDColl', onPropertyChange: false,\n            value: { xDiff: point.x, yDiff: point.y, panRegion: '' } });\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: true } });\n        }\n    };\n    Transform.prototype.resetZoom = function () {\n        var parent = this.parent;\n        if (parent.transform.defaultZoomFactor !== 0) {\n            var isUndoRedo = parent.isUndoRedo;\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            this.transCurrObj = object['currObj'];\n            this.transCurrObj.objColl = extend([], parent.objColl, null, true);\n            this.transCurrObj.pointColl = extend({}, parent.pointColl, null, true);\n            this.transCurrObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            this.transCurrObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            parent.isUndoRedo = parent.isCropToolbar = true;\n            if (parent.transform.defaultZoomFactor > 0) {\n                this.zoomAction(-parent.transform.defaultZoomFactor);\n            }\n            else {\n                this.zoomAction(Math.abs(parent.transform.defaultZoomFactor));\n            }\n            parent.isCropToolbar = false;\n            parent.isUndoRedo = isUndoRedo;\n        }\n    };\n    Transform.prototype.performTransformation = function (text) {\n        var parent = this.parent;\n        var tempZoomFactor = parent.transform.defaultZoomFactor;\n        var isUndoRedo = parent.isUndoRedo;\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        this.resetZoom();\n        this.updateTransform(text);\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            if (parent.objColl[i].flipObjColl.length > 0) {\n                var flipObjColl = { collection: parent.objColl[i].flipObjColl };\n                parent.notify('shape', { prop: 'alignRotateFlipColl', onPropertyChange: false,\n                    value: { collection: parent.objColl[i].flipObjColl, isRotateFlipCollection: null, obj: flipObjColl } });\n                parent.objColl[i].flipObjColl = flipObjColl['collection'];\n            }\n        }\n        if (tempZoomFactor !== 0) {\n            parent.isUndoRedo = true;\n            this.zoomAction(tempZoomFactor);\n            parent.isUndoRedo = isUndoRedo;\n            var state = '';\n            if (text === 'rotateleft' || text === 'rotateright') {\n                state = 'rotate';\n            }\n            else if (text === 'horizontalflip' || text === 'verticalflip') {\n                state = 'flip';\n            }\n            parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: state, previousObj: this.transCurrObj, previousObjColl: this.transCurrObj.objColl,\n                    previousPointColl: this.transCurrObj.pointColl, previousSelPointColl: this.transCurrObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.transCurrObj = null;\n        }\n    };\n    Transform.prototype.updateTransform = function (text) {\n        switch (text.toLowerCase()) {\n            case 'rotateleft':\n                this.rotateImage(-90);\n                break;\n            case 'rotateright':\n                this.rotateImage(90);\n                break;\n            case 'horizontalflip':\n                this.flipImage(Direction.Horizontal);\n                break;\n            case 'verticalflip':\n                this.flipImage(Direction.Vertical);\n                break;\n        }\n    };\n    Transform.prototype.rotatePan = function (isCropSelection, isDefaultZoom) {\n        var parent = this.parent;\n        this.isReverseRotate = true;\n        var tempDegree = parent.transform.degree;\n        var rotatePanActiveObj;\n        var object = { selPointColl: null };\n        if (parent.activeObj.activePoint && parent.activeObj.shape) {\n            rotatePanActiveObj = extend({}, parent.activeObj, {}, true);\n        }\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempPointColl = extend([], parent.pointColl, [], true);\n        parent.objColl = [];\n        parent.pointColl = [];\n        parent.freehandCounter = 0;\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: object } });\n        var cropSelPointColl = object['selPointColl'];\n        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n            value: { obj: { selPointColl: [] } } });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: true } });\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n        var initialDestLeft = parent.img.destLeft;\n        var initialDestTop = parent.img.destTop;\n        if (parent.isCropTab) {\n            parent.img.destLeft += parent.panPoint.totalPannedInternalPoint.x;\n            parent.img.destTop += parent.panPoint.totalPannedInternalPoint.y;\n        }\n        parent.notify('crop', { prop: 'updateRotatePan', onPropertyChange: false });\n        if (parent.isCropTab) {\n            parent.panPoint.totalPannedInternalPoint.x = parent.img.destLeft - initialDestLeft;\n            parent.panPoint.totalPannedInternalPoint.y = parent.img.destTop - initialDestTop;\n        }\n        var temp = this.lowerContext.filter;\n        parent.notify('filter', { prop: 'updateBrightFilter', onPropertyChange: false });\n        this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n        parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: false } });\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: true, isRotatePan: true } });\n        var destLeft = parent.img.destLeft;\n        var destTop = parent.img.destTop;\n        parent.img.destLeft += parent.panPoint.totalPannedClientPoint.x;\n        parent.img.destTop += parent.panPoint.totalPannedClientPoint.y;\n        parent.img.destLeft += parent.panPoint.currentPannedPoint.x;\n        parent.img.destTop += parent.panPoint.currentPannedPoint.y;\n        parent.panPoint.totalPannedClientPoint.x = parent.img.destLeft - destLeft;\n        parent.panPoint.totalPannedClientPoint.y =\n            parent.img.destTop - destTop;\n        parent.objColl = tempObjColl;\n        parent.pointColl = tempPointColl;\n        parent.freehandCounter = parent.pointColl.length;\n        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n            value: { obj: { selPointColl: cropSelPointColl } } });\n        parent.transform.degree = tempDegree;\n        this.lowerContext.filter = 'none';\n        if (isCropSelection) {\n            if (isDefaultZoom) {\n                parent.panPoint.totalPannedClientPoint.x = -parent.panPoint.totalPannedClientPoint.x;\n                parent.panPoint.totalPannedClientPoint.y = -parent.panPoint.totalPannedClientPoint.y;\n                parent.panPoint.currentPannedPoint = extend({}, parent.panPoint.totalPannedClientPoint, {}, true);\n                parent.panPoint.totalPannedClientPoint = { x: 0, y: 0 };\n                parent.img.destLeft += parent.panPoint.currentPannedPoint.x;\n                parent.img.destTop += parent.panPoint.currentPannedPoint.y;\n            }\n            else {\n                parent.panPoint.currentPannedPoint = extend({}, parent.panPoint.totalPannedClientPoint, {}, true);\n            }\n        }\n        parent.notify('shape', { prop: 'panObjColl', onPropertyChange: false,\n            value: { xDiff: parent.panPoint.currentPannedPoint.x, yDiff: parent.panPoint.currentPannedPoint.y, panRegion: '' } });\n        parent.notify('freehand-draw', { prop: 'panFHDColl', onPropertyChange: false,\n            value: { xDiff: parent.panPoint.currentPannedPoint.x, yDiff: parent.panPoint.currentPannedPoint.y, panRegion: '' } });\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.activeObj = extend({}, rotatePanActiveObj, {}, true);\n        if (parent.activeObj.activePoint) {\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj, isCropRatio: null,\n                    points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n        }\n        this.isReverseRotate = false;\n    };\n    Transform.prototype.limitPan = function () {\n        var parent = this.parent;\n        if (parent.activeObj.activePoint) {\n            if (parent.img.destLeft > parent.activeObj.activePoint.startX) {\n                parent.img.destLeft = parent.activeObj.activePoint.startX;\n            }\n            if (parent.img.destTop > parent.activeObj.activePoint.startY) {\n                parent.img.destTop = parent.activeObj.activePoint.startY;\n            }\n            if (parent.img.destLeft + parent.img.destWidth < parent.activeObj.activePoint.endX) {\n                parent.img.destLeft = parent.activeObj.activePoint.endX - parent.img.destWidth;\n            }\n            if (parent.img.destTop + parent.img.destHeight < parent.activeObj.activePoint.endY) {\n                parent.img.destTop = parent.activeObj.activePoint.endY - parent.img.destHeight;\n            }\n        }\n    };\n    Transform.prototype.updateFlipActiveObj = function (panRegion) {\n        var parent = this.parent;\n        if (panRegion === 'horizontal') {\n            if (parent.activeObj.activePoint.startX > parent.lowerCanvas.width / 2) {\n                parent.activeObj.activePoint.endX = (parent.lowerCanvas.width / 2) -\n                    (parent.activeObj.activePoint.startX - (parent.lowerCanvas.width / 2));\n            }\n            else {\n                parent.activeObj.activePoint.endX = (parent.lowerCanvas.width / 2) + ((parent.lowerCanvas.width / 2) -\n                    parent.activeObj.activePoint.startX);\n            }\n            parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.width;\n        }\n        else if (panRegion === 'vertical') {\n            if (parent.activeObj.activePoint.startX > parent.lowerCanvas.width / 2) {\n                parent.activeObj.activePoint.endY = (parent.lowerCanvas.height / 2) -\n                    (parent.activeObj.activePoint.startY - (parent.lowerCanvas.height / 2));\n            }\n            else {\n                parent.activeObj.activePoint.endY = (parent.lowerCanvas.height / 2) +\n                    ((parent.lowerCanvas.height / 2) - parent.activeObj.activePoint.startY);\n            }\n            parent.activeObj.activePoint.startY = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.height;\n        }\n        else if (panRegion === 'verticalHorizontal' || panRegion === 'horizontalVertical') {\n            if (parent.activeObj.activePoint.startX > parent.lowerCanvas.width / 2) {\n                parent.activeObj.activePoint.endX = (parent.lowerCanvas.width / 2) -\n                    (parent.activeObj.activePoint.startX - (parent.lowerCanvas.width / 2));\n                parent.activeObj.activePoint.endY = (parent.lowerCanvas.height / 2) -\n                    (parent.activeObj.activePoint.startY - (parent.lowerCanvas.height / 2));\n            }\n            else {\n                parent.activeObj.activePoint.endX = (parent.lowerCanvas.width / 2) + ((parent.lowerCanvas.width / 2) -\n                    parent.activeObj.activePoint.startX);\n                parent.activeObj.activePoint.endY = (parent.lowerCanvas.height / 2) +\n                    ((parent.lowerCanvas.height / 2) - parent.activeObj.activePoint.startY);\n            }\n            parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.width;\n            parent.activeObj.activePoint.startY = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.height;\n        }\n        parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: parent.activeObj.activePoint, obj: parent.activeObj,\n                isMouseMove: null, x: null, y: null } });\n    };\n    Transform.prototype.pan = function (value) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (value) {\n                parent.togglePan = true;\n                parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                    value: { x: null, y: null, isMouseDown: null } });\n                parent.notify('selection', { prop: 'setDragCanvas', value: { bool: true } });\n                parent.lowerCanvas.style.cursor = parent.upperCanvas.style.cursor = parent.cursor = 'grab';\n                parent.notify('selection', { prop: 'setPanDown', onPropertyChange: false, value: { panDown: null } });\n            }\n            else {\n                parent.togglePan = parent.currObjType.isCustomCrop = false;\n                parent.notify('selection', { prop: 'setDragCanvas', value: { bool: false } });\n                parent.lowerCanvas.style.cursor = parent.upperCanvas.style.cursor = parent.cursor = 'default';\n            }\n        }\n    };\n    Transform.prototype.zoom = function (zoomFactor, zoomPoint) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            var value = this.getCurrentZoomFactor(zoomFactor);\n            if (isNullOrUndefined(zoomPoint)) {\n                this.zoomAction(value, zoomPoint);\n            }\n            else {\n                var type = value > 0 ? 'zoomIn' : 'zoomOut';\n                for (var i = 0; i < (Math.abs(value) * 10); i++) {\n                    parent.notify('draw', { prop: 'performPointZoom', onPropertyChange: false,\n                        value: { x: zoomPoint.x, y: zoomPoint.y, type: type } });\n                }\n            }\n        }\n    };\n    Transform.prototype.getCurrentZoomFactor = function (zoomFactor) {\n        return (zoomFactor - this.prevZoomValue) * 0.1;\n    };\n    Transform.prototype.setCurrPanRegion = function (region, type, obj) {\n        var panRegion = region;\n        if (region === '') {\n            if (type === 'horizontal') {\n                panRegion = 'horizontal';\n            }\n            else if (type === 'vertical') {\n                panRegion = 'vertical';\n            }\n        }\n        else if (region === 'horizontal') {\n            if (type === 'horizontal') {\n                panRegion = 'horizontalVertical';\n            }\n            else if (type === 'vertical') {\n                panRegion = 'verticalHorizontal';\n            }\n            else if (type === 90) {\n                panRegion = 'vertical';\n            }\n            else if (type === -90) {\n                panRegion = 'horizontal';\n            }\n        }\n        else if (region === 'vertical') {\n            if (type === 'horizontal') {\n                panRegion = 'horizontalVertical';\n            }\n            else if (type === 'vertical') {\n                panRegion = 'verticalHorizontal';\n            }\n            else if (type === 90) {\n                panRegion = 'horizontal';\n            }\n            else if (type === -90) {\n                panRegion = 'vertical';\n            }\n        }\n        else {\n            if (type === 'horizontal') {\n                panRegion = 'vertical';\n            }\n            else if (type === 'vertical') {\n                panRegion = 'horizontal';\n            }\n        }\n        obj['panRegion'] = panRegion;\n    };\n    Transform.prototype.rotate = function (degree, obj) {\n        var parent = this.parent;\n        var isRotate = false;\n        if (!parent.disabled && parent.isImageLoaded && (degree % 90 === 0)) {\n            this.rotateImage(degree);\n        }\n        obj['isRotate'] = isRotate;\n    };\n    Transform.prototype.flip = function (direction) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            this.flipImage(direction);\n        }\n    };\n    Transform.prototype.update = function () {\n        var parent = this.parent;\n        var toolbarHeight = 0;\n        var isActiveObj = false;\n        var freehandObj = { bool: false };\n        if (parent.isImageLoaded) {\n            if ((parent.element.querySelector('#' + parent.element.id + '_contextualToolbar') &&\n                !parent.element.querySelector('#' + parent.element.id + '_contextualToolbar').parentElement.classList.contains('e-hide')) ||\n                (parent.element.querySelector('#' + parent.element.id + '_headWrapper')\n                    && !parent.element.querySelector('#' + parent.element.id + '_headWrapper').parentElement.classList.contains('e-hide'))) {\n                parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                parent.okBtn();\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n                    parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'imageLoaded');\n                }\n            }\n            parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: freehandObj } });\n            if (freehandObj['bool']) {\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'destroyQuickAccessToolbar');\n                }\n            }\n            if (parent.activeObj.shape !== undefined) {\n                isActiveObj = true;\n                if (parent.textArea.style.display === 'block') {\n                    parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                        value: { x: null, y: null, isMouseDown: null } });\n                    if (!isBlazor()) {\n                        parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                    }\n                    else {\n                        parent.updateToolbar(parent.element, 'destroyQuickAccessToolbar');\n                    }\n                }\n                else {\n                    parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                    parent.objColl.push(parent.activeObj);\n                }\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            }\n        }\n        var tempFilter = this.lowerContext.filter;\n        var canvasWrapper = document.querySelector('#' + parent.element.id + '_canvasWrapper');\n        if (canvasWrapper) {\n            canvasWrapper.style.width = parent.element.offsetWidth - 2 + 'px';\n        }\n        parent.lowerCanvas.width = parent.upperCanvas.width = parent.element.offsetWidth - 2;\n        if (parent.toolbarTemplate) {\n            toolbarHeight = parent.element.querySelector('#' + parent.element.id + '_toolbarArea').clientHeight;\n        }\n        else if (parent.element.querySelector('#' + parent.element.id + '_toolbar')) {\n            toolbarHeight = parent.element.querySelector('#' + parent.element.id + '_toolbar').clientHeight;\n        }\n        parent.notify('toolbar', { prop: 'setToolbarHeight', value: { height: toolbarHeight } });\n        if (Browser.isDevice) {\n            if (canvasWrapper) {\n                canvasWrapper.style.height = parent.element.offsetHeight - (2 * toolbarHeight) - 5 + 'px';\n            }\n            parent.lowerCanvas.height = parent.upperCanvas.height = parent.element.offsetHeight - (2 * toolbarHeight) - 5;\n        }\n        else {\n            if (canvasWrapper) {\n                canvasWrapper.style.height = parent.element.offsetHeight - toolbarHeight - 3 + 'px';\n            }\n            parent.lowerCanvas.height = parent.upperCanvas.height = parent.element.offsetHeight - toolbarHeight - 3;\n        }\n        this.lowerContext.filter =\n            'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n                'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n        parent.notify('filter', { prop: 'setAdjustmentValue', onPropertyChange: false, value: { adjustmentValue: this.lowerContext.filter } });\n        parent.canvasFilter = this.lowerContext.filter;\n        this.parent.initialAdjustmentValue = this.lowerContext.filter;\n        parent.clearContext(this.lowerContext);\n        this.parent.clearContext(this.upperContext);\n        if (parent.isImageLoaded) {\n            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: null } });\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.lowerContext.filter = tempFilter;\n            parent.initialAdjustmentValue = tempFilter;\n            if (parent.isImageLoaded) {\n                showSpinner(parent.element);\n                parent.element.style.opacity = '0.5';\n            }\n            this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            if (canvasWrapper) {\n                canvasWrapper.style.width = parent.element.offsetWidth - 2 + 'px';\n                canvasWrapper.style.height = parent.element.offsetHeight + 'px';\n                var obj_1 = { toolbarHeight: !isBlazor() ? 0 : parent.toolbarHeight };\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'getToolbarHeight', value: { obj: obj_1 } });\n                }\n                if (Browser.isDevice) {\n                    canvasWrapper.style.height = (parseFloat(canvasWrapper.style.height) - (2 * obj_1['toolbarHeight'])) - 3 + 'px';\n                }\n                else {\n                    canvasWrapper.style.height = (parseFloat(canvasWrapper.style.height) - obj_1['toolbarHeight']) - 3 + 'px';\n                }\n            }\n            var obj = { width: 0, height: 0 };\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n                value: { width: parent.img.srcWidth, height: parent.img.srcHeight, obj: obj } });\n            var maxDimension = obj;\n            if (parent.transform.defaultZoomFactor > 0) {\n                maxDimension.width += (maxDimension.width * parent.transform.defaultZoomFactor);\n                maxDimension.height += (maxDimension.height * parent.transform.defaultZoomFactor);\n            }\n            parent.img.destLeft = (parent.lowerCanvas.clientWidth - maxDimension.width) / 2;\n            parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.height) / 2;\n            if (parent.transform.degree === 0 && parent.transform.currFlipState === '') {\n                if (parent.transform.defaultZoomFactor > 0) {\n                    parent.img.destLeft += parent.panPoint.totalPannedPoint.x;\n                    parent.img.destTop += parent.panPoint.totalPannedPoint.y;\n                }\n                parent.notify('draw', { prop: 'draw-image-to-canvas', value: { dimension: maxDimension } });\n            }\n            else {\n                parent.notify('draw', { prop: 'draw-image-to-canvas', value: { dimension: maxDimension } });\n                parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                    value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n                var temp = this.lowerContext.filter;\n                parent.notify('filter', { prop: 'updateBrightFilter', onPropertyChange: false });\n                this.lowerContext.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n                this.lowerContext.filter = temp;\n                parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                    value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n            }\n            parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n            if (parent.isCircleCrop) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            }\n            hideSpinner(parent.element);\n            parent.element.style.opacity = '1';\n            var obj1 = { defToolbarItems: null };\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'getDefToolbarItems', value: { obj: obj1 } });\n                if (obj1['defToolbarItems'] && obj1['defToolbarItems'].length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    var toolbar_1 = getComponent(parent.element.id + '_toolbar', 'toolbar');\n                    toolbar_1.refreshOverflow();\n                    if (parent.element.querySelector('.e-contextual-toolbar-wrapper')) {\n                        parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                    }\n                }\n            }\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            if (isActiveObj) {\n                parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], null, true);\n                parent.objColl.pop();\n                if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n                    parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n                    if (parent.activeObj.shape === 'rectangle' || parent.activeObj.shape === 'ellipse' || parent.activeObj.shape === 'text' ||\n                        parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'path') {\n                        if (!isBlazor()) {\n                            parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n                        }\n                        else {\n                            parent.updateToolbar(parent.element, 'quickAccessToolbar', parent.activeObj.shape);\n                        }\n                    }\n                }\n            }\n            if (freehandObj['bool']) {\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: true } });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'quickAccessToolbar', 'pen');\n                }\n            }\n            if ((parent.transform.degree !== 0 || parent.transform.currFlipState !== '') && parent.transform.defaultZoomFactor > 0) {\n                var totalPannedPoint = extend({}, parent.panPoint.totalPannedPoint, null, true);\n                var totalPannedInternalPoint = extend({}, parent.panPoint.totalPannedInternalPoint, null, true);\n                var totalPannedClientPoint = extend({}, parent.panPoint.totalPannedClientPoint, null, true);\n                parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                    value: { zoomFactor: .1, zoomPoint: null } });\n                parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                    value: { zoomFactor: -.1, zoomPoint: null } });\n                if (parent.transform.degree === 0) {\n                    parent.img.destLeft += totalPannedPoint.x;\n                    parent.img.destTop += totalPannedPoint.y;\n                    parent.panPoint.totalPannedPoint = totalPannedPoint;\n                    parent.notify('draw', { prop: 'updateFlipPan', value: { tempSelectionObj: null } });\n                }\n                else {\n                    parent.panPoint.totalPannedInternalPoint = totalPannedInternalPoint;\n                    parent.panPoint.totalPannedClientPoint = totalPannedClientPoint;\n                    parent.panPoint.currentPannedPoint = { x: 0, y: 0 };\n                    parent.isCropTab = true;\n                    parent.notify('transform', { prop: 'rotatePan', onPropertyChange: false,\n                        value: { isCropSelection: null, isDefaultZoom: null } });\n                    parent.isCropTab = false;\n                }\n            }\n            else if (parent.transform.degree !== 0 && parent.transform.cropZoomFactor > 0) {\n                parent.transform.zoomFactor = 0;\n                parent.transform.cropZoomFactor = null;\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'enable-disable-btns', onPropertyChange: false });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n                }\n            }\n        }\n    };\n    Transform.prototype.calcMaxDimension = function (width, height, obj) {\n        var object = { toolbarHeight: 0 };\n        if (!isBlazor()) {\n            this.parent.notify('toolbar', { prop: 'getToolbarHeight', value: { obj: object } });\n        }\n        else {\n            object['toolbarHeight'] = this.parent.toolbarHeight;\n        }\n        var canvasMaxWidth = this.parent.element.clientWidth;\n        var canvasMaxHeight = this.parent.element.clientHeight - object['toolbarHeight'];\n        canvasMaxHeight = Browser.isDevice ? canvasMaxHeight - object['toolbarHeight'] : canvasMaxHeight;\n        if (canvasMaxWidth > 30) {\n            canvasMaxWidth -= 30;\n        }\n        if (canvasMaxHeight > 30) {\n            canvasMaxHeight -= 30;\n        }\n        var widthScale = canvasMaxWidth / width;\n        var heightScale = canvasMaxHeight / height;\n        var cssMaxWidth = Math.min(width, canvasMaxWidth);\n        var cssMaxHeight = Math.min(height, canvasMaxHeight);\n        if (widthScale < 1 && widthScale < heightScale) {\n            cssMaxWidth = width * widthScale;\n            cssMaxHeight = height * widthScale;\n        }\n        else if (heightScale < 1 && heightScale < widthScale) {\n            cssMaxWidth = width * heightScale;\n            cssMaxHeight = height * heightScale;\n        }\n        var cropObj = { bool: null };\n        this.parent.notify('crop', { prop: 'getPreventScaling', onPropertyChange: false,\n            value: { obj: cropObj } });\n        if (cropObj['bool'] && this.parent.cropObj.activeObj.activePoint &&\n            this.parent.cropObj.activeObj.activePoint.width !== 0 && this.parent.cropObj.activeObj.activePoint.height !== 0) {\n            cssMaxWidth = this.parent.cropObj.activeObj.activePoint.width;\n            cssMaxHeight = this.parent.cropObj.activeObj.activePoint.height;\n        }\n        if (obj) {\n            obj['width'] = cssMaxWidth;\n            obj['height'] = cssMaxHeight;\n        }\n        return { width: cssMaxWidth, height: cssMaxHeight };\n    };\n    Transform.prototype.updatePanPoints = function (panRegion, obj) {\n        var parent = this.parent;\n        var tempActObj = extend({}, parent.activeObj, {}, true);\n        var tempDestLeft = parent.img.destLeft;\n        var tempDestTop = parent.img.destTop;\n        if (isNullOrUndefined(this.tempPanMove)) {\n            this.tempPanMove = { x: this.panMove.x, y: this.panMove.y };\n        }\n        var xDiff = this.panMove.x - this.tempPanMove.x;\n        var yDiff = this.panMove.y - this.tempPanMove.y;\n        switch (panRegion) {\n            case '':\n                parent.img.destLeft += xDiff;\n                parent.img.destTop += yDiff;\n                break;\n            case 'horizontal':\n                this.updateFlipActiveObj(panRegion);\n                xDiff = this.tempPanMove.x - this.panMove.x;\n                parent.img.destLeft += xDiff;\n                parent.img.destTop += yDiff;\n                break;\n            case 'vertical':\n                this.updateFlipActiveObj(panRegion);\n                yDiff = this.tempPanMove.y - this.panMove.y;\n                parent.img.destLeft += xDiff;\n                parent.img.destTop += yDiff;\n                break;\n            case 'horizontalVertical':\n                this.updateFlipActiveObj(panRegion);\n                xDiff = this.tempPanMove.x - this.panMove.x;\n                parent.img.destLeft += xDiff;\n                parent.img.destTop -= yDiff;\n                break;\n            case 'verticalHorizontal':\n                this.updateFlipActiveObj(panRegion);\n                yDiff = this.tempPanMove.y - this.panMove.y;\n                parent.img.destLeft -= xDiff;\n                parent.img.destTop += yDiff;\n                break;\n        }\n        this.limitPan();\n        parent.activeObj = tempActObj;\n        if (obj) {\n            obj['x'] = parent.img.destLeft - tempDestLeft;\n            obj['y'] = parent.img.destTop - tempDestTop;\n        }\n        return { x: parent.img.destLeft - tempDestLeft, y: parent.img.destTop - tempDestTop };\n    };\n    return Transform;\n}());\nexport { Transform };\n","import { isNullOrUndefined, extend, isBlazor } from '@syncfusion/ej2-base';\nvar UndoRedo = /** @class */ (function () {\n    function UndoRedo(parent) {\n        this.undoRedoStep = 0;\n        this.undoRedoColl = [];\n        this.appliedUndoRedoColl = [];\n        this.tempUndoRedoColl = [];\n        this.tempUndoRedoStep = 0;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    UndoRedo.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    UndoRedo.prototype.addEventListener = function () {\n        this.parent.on('undo-redo', this.undoRedo, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    UndoRedo.prototype.removeEventListener = function () {\n        this.parent.off('undo-redo', this.undoRedo);\n        this.parent.off('destroyed', this.destroy);\n    };\n    UndoRedo.prototype.initializeUrPvtProp = function () {\n        if (this.parent.lowerCanvas) {\n            this.lowerContext = this.parent.lowerCanvas.getContext('2d');\n        }\n        if (this.parent.upperCanvas) {\n            this.upperContext = this.parent.upperCanvas.getContext('2d');\n        }\n    };\n    UndoRedo.prototype.undoRedo = function (args) {\n        this.initializeUrPvtProp();\n        switch (args.prop) {\n            case 'updateUndoRedoColl':\n                this.updateUrc(args.value['operation'], args.value['previousObj'], args.value['previousObjColl'], args.value['previousPointColl'], args.value['previousSelPointColl'], args.value['previousCropObj'], args.value['previousText'], args.value['currentText'], args.value['previousFilter'], args.value['isCircleCrop']);\n                break;\n            case 'refreshUrc':\n                this.refreshUrc(args.value['bool']);\n                break;\n            case 'updateCurrUrc':\n                this.updateCurrUrc(args.value['type']);\n                break;\n            case 'call-undo':\n                this.callUndo();\n                break;\n            case 'call-redo':\n                this.callRedo();\n                break;\n            case 'undo':\n                this.undo();\n                break;\n            case 'redo':\n                this.redo();\n                break;\n            case 'updateUrObj':\n                this.updateUrObj(args.value['objColl']);\n                break;\n            case 'updateUndoRedo':\n                this.updateUndoRedo();\n                break;\n            case 'getAppliedUndoRedoColl':\n                args.value['obj']['appliedUndoRedoColl'] = this.appliedUndoRedoColl;\n                break;\n            case 'getUndoRedoStep':\n                args.value['obj']['undoRedoStep'] = this.undoRedoStep;\n                break;\n            case 'setUndoRedoStep':\n                this.undoRedoStep = args.value['step'];\n                break;\n            case 'undoDefault':\n                this.undoDefault(args.value['obj']);\n                break;\n            case 'reset':\n                this.reset();\n                break;\n        }\n    };\n    UndoRedo.prototype.getModuleName = function () {\n        return 'undo-redo';\n    };\n    UndoRedo.prototype.reset = function () {\n        this.tempCurrSelPoint = null;\n        this.undoRedoStep = 0;\n        this.undoRedoColl = [];\n        this.appliedUndoRedoColl = [];\n        this.tempActObj = null;\n        this.tempUndoRedoColl = [];\n        this.tempUndoRedoStep = 0;\n    };\n    UndoRedo.prototype.refreshUrc = function (refreshToolbar) {\n        var parent = this.parent;\n        refreshToolbar = refreshToolbar ? refreshToolbar : false;\n        if (refreshToolbar) {\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'setEnableDisableUndoRedo', value: { isPrevent: true } });\n            }\n            this.tempUndoRedoColl = extend([], this.appliedUndoRedoColl, [], true);\n            this.tempUndoRedoStep = this.undoRedoStep;\n        }\n        else if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'setEnableDisableUndoRedo', value: { isPrevent: false } });\n        }\n        this.undoRedoColl = this.undoRedoColl.slice(0, this.undoRedoStep);\n        this.appliedUndoRedoColl = this.appliedUndoRedoColl.slice(0, this.undoRedoStep);\n        parent.isUndoRedo = parent.currObjType.isUndoAction = false;\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'enable-disable-btns' });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n        }\n    };\n    UndoRedo.prototype.updateCurrUrc = function (type) {\n        var parent = this.parent;\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'setEnableDisableUndoRedo', value: { isPrevent: false } });\n        }\n        if (type === 'ok') {\n            parent.notify('draw', { prop: 'setShapeTextInsert', onPropertyChange: false, value: { bool: false } });\n            var collection = this.tempUndoRedoColl.length > 0 ?\n                extend([], this.tempUndoRedoColl, [], true) :\n                extend([], this.undoRedoColl, [], true);\n            var prevObj = this.undoRedoColl[this.undoRedoColl.length - 1];\n            if (isNullOrUndefined(this.appliedUndoRedoColl[this.appliedUndoRedoColl.length - 1])) {\n                if (this.undoRedoColl[0]) {\n                    prevObj.previousCropObj = collection[0].previousCropObj;\n                    prevObj.previousObj = collection[0].previousObj;\n                    prevObj.previousObjColl = collection[0].previousObjColl;\n                    prevObj.previousPointColl = collection[0].previousPointColl;\n                    prevObj.previousText = collection[0].previousText;\n                }\n            }\n            else {\n                prevObj.previousCropObj = this.appliedUndoRedoColl[this.appliedUndoRedoColl.length - 1].currentCropObj;\n                prevObj.previousObj = this.appliedUndoRedoColl[this.appliedUndoRedoColl.length - 1].currentObj;\n                prevObj.previousObjColl = this.appliedUndoRedoColl[this.appliedUndoRedoColl.length - 1].currentObjColl;\n                prevObj.previousPointColl = this.appliedUndoRedoColl[this.appliedUndoRedoColl.length - 1].currentPointColl;\n                prevObj.previousText = this.appliedUndoRedoColl[this.appliedUndoRedoColl.length - 1].currentText;\n            }\n            if (prevObj) {\n                var obj = this.getZeroZoomObjPointValue(prevObj.currentObjColl, prevObj.currentPointColl);\n                prevObj.currentObjColl = obj['obj'];\n                prevObj.currentPointColl = obj['point'];\n                this.appliedUndoRedoColl.push(prevObj);\n            }\n            this.tempUndoRedoColl = [];\n            this.tempUndoRedoStep = 0;\n        }\n        else if (this.tempUndoRedoColl.length > 0) {\n            this.appliedUndoRedoColl = extend([], this.tempUndoRedoColl, [], true);\n            this.undoRedoStep = this.tempUndoRedoStep;\n            this.tempUndoRedoColl = [];\n            this.tempUndoRedoStep = 0;\n        }\n        if (this.appliedUndoRedoColl.length > 16) {\n            this.appliedUndoRedoColl.splice(0, 1);\n        }\n        this.undoRedoColl = [];\n        this.undoRedoColl = extend([], this.appliedUndoRedoColl, [], true);\n        if (type === 'ok') {\n            this.undoRedoStep = this.undoRedoColl.length;\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'enable-disable-btns' });\n            }\n            else {\n                parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n            }\n        }\n        if (parent.transform.zoomFactor > 0) {\n            parent.togglePan = true;\n            parent.notify('selection', { prop: 'setDragCanvas', value: { bool: true } });\n        }\n    };\n    UndoRedo.prototype.cancelCropSelection = function () {\n        var parent = this.parent;\n        var isCropSelection = false;\n        var splitWords;\n        if (parent.activeObj.shape) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (parent.currObjType.isCustomCrop || (splitWords && splitWords[0] === 'crop')) {\n            isCropSelection = true;\n        }\n        if (isCropSelection) {\n            parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n        }\n        if (this.tempUndoRedoColl.length !== 0 || this.tempUndoRedoStep !== 0) {\n            this.appliedUndoRedoColl = extend([], this.tempUndoRedoColl, [], true);\n            this.undoRedoColl = extend([], this.tempUndoRedoColl, [], true);\n            this.undoRedoStep = this.tempUndoRedoStep;\n            this.tempUndoRedoColl = [];\n            this.tempUndoRedoStep = 0;\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'setEnableDisableUndoRedo', value: { isPrevent: false } });\n            }\n        }\n    };\n    UndoRedo.prototype.refreshToolbarActions = function () {\n        var parent = this.parent;\n        if (!isBlazor()) {\n            if (parent.activeObj.shape) {\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                        isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n            }\n            else {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            }\n        }\n        else if (isNullOrUndefined(parent.activeObj.shape)) {\n            parent.updateToolbar(parent.element, 'imageLoaded');\n        }\n    };\n    UndoRedo.prototype.applyCurrentChanges = function () {\n        var parent = this.parent;\n        parent.currObjType.isFiltered = false;\n        if (parent.transform.zoomFactor === 0) {\n            parent.togglePan = false;\n            parent.notify('selection', { prop: 'setDragCanvas', value: { bool: false } });\n        }\n        if (parent.element.querySelector('.e-contextual-toolbar-wrapper') && !isBlazor()) {\n            parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n        }\n        if (parent.togglePen) {\n            parent.togglePen = false;\n            parent.upperCanvas.style.cursor = parent.cursor = 'default';\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        }\n        if (this.appliedUndoRedoColl.length > 0) {\n            this.undoRedoColl = extend([], this.appliedUndoRedoColl, [], true);\n        }\n    };\n    UndoRedo.prototype.callUndo = function () {\n        this.applyCurrentChanges();\n        this.undo();\n    };\n    UndoRedo.prototype.callRedo = function () {\n        this.applyCurrentChanges();\n        this.redo();\n    };\n    UndoRedo.prototype.undo = function () {\n        var parent = this.parent;\n        this.cancelCropSelection();\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (this.undoRedoStep > 0) {\n                this.refreshToolbarActions();\n                if (parent.activeObj.activePoint && parent.activeObj.activePoint.width !== 0) {\n                    this.tempActObj = parent.activeObj;\n                }\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                this.undoRedoStep--;\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'enable-disable-btns' });\n                    parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n                }\n                parent.isUndoRedo = true;\n                var obj = this.undoRedoColl[this.undoRedoStep];\n                if (this.undoRedoColl.length === this.undoRedoStep) {\n                    parent.currObjType.isUndoAction = false;\n                }\n                else {\n                    parent.currObjType.isUndoAction = true;\n                }\n                if (obj.operation !== 'textAreaCustomization' && parent.textArea.style.display === 'block') {\n                    parent.textArea.style.display = 'none';\n                }\n                parent.notify('draw', { prop: 'setCancelAction', onPropertyChange: false, value: { bool: true } });\n                var activeObj = void 0;\n                parent.cropObj = extend({}, obj.previousCropObj, {}, true);\n                parent.afterCropActions = obj.previousObj.afterCropActions;\n                this.lowerContext.filter = obj.previousObj.filter;\n                parent.canvasFilter = this.lowerContext.filter;\n                switch (obj.operation) {\n                    case 'shapeTransform':\n                        this.shapeTransform(obj.previousObjColl);\n                        break;\n                    case 'freehanddraw':\n                    case 'freehand-draw':\n                        this.updateFreehandDraw(obj.previousPointColl);\n                        break;\n                    case 'freehanddrawCustomized':\n                        this.updateFreehandDrawCustomized(obj.previousPointColl);\n                        break;\n                    case 'deleteFreehandDrawing':\n                    case 'deleteObj':\n                        this.updateDelete(obj.operation, obj.previousObjColl, obj.previousPointColl);\n                        break;\n                    case 'textAreaCustomization':\n                        this.updateTextAreaCustomization(activeObj, obj.previousObjColl);\n                        break;\n                    case 'text':\n                        this.updateText(obj.previousObjColl, true);\n                        break;\n                    default:\n                        this.undoDefault(obj);\n                        parent.notify('filter', { prop: 'set-adjustment', value: { operation: obj.operation } });\n                        parent.notify('filter', { prop: 'update-filter', value: { operation: obj.operation, filter: obj.filter } });\n                        break;\n                }\n                if (obj.operation === 'crop') {\n                    if (obj.previousObj.currSelectionPoint) {\n                        parent.currSelectionPoint = extend({}, obj.previousObj.currSelectionPoint, {}, true);\n                        if (parent.currSelectionPoint && isNullOrUndefined(parent.currSelectionPoint.shape)) {\n                            parent.currSelectionPoint = null;\n                        }\n                    }\n                    parent.updateCropTransformItems();\n                    parent.select('custom');\n                    if (parent.isCircleCrop) {\n                        parent.isCircleCrop = false;\n                        this.tempCurrSelPoint = extend({}, parent.currSelectionPoint, {}, true);\n                        parent.currSelectionPoint = null;\n                    }\n                    parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n                }\n                if ((this.undoRedoColl[this.undoRedoStep - 1]\n                    && this.undoRedoColl[this.undoRedoStep - 1].isCircleCrop)) {\n                    parent.isCircleCrop = true;\n                    parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                        value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                }\n                this.endUndoRedo(obj.operation, true);\n            }\n        }\n    };\n    UndoRedo.prototype.redo = function () {\n        var parent = this.parent;\n        this.cancelCropSelection();\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (this.undoRedoStep < this.appliedUndoRedoColl.length) {\n                this.refreshToolbarActions();\n                this.undoRedoStep++;\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'enable-disable-btns' });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n                }\n                parent.isUndoRedo = true;\n                var obj = this.undoRedoColl[this.undoRedoStep - 1];\n                if (this.undoRedoColl.length === this.undoRedoStep) {\n                    parent.currObjType.isUndoAction = false;\n                }\n                else {\n                    parent.currObjType.isUndoAction = true;\n                }\n                if (obj.operation !== 'textAreaCustomization' && parent.textArea.style.display === 'block') {\n                    parent.textArea.style.display = 'none';\n                }\n                parent.notify('draw', { prop: 'setCancelAction', onPropertyChange: false, value: { bool: true } });\n                parent.cropObj = extend({}, obj.currentCropObj, {}, true);\n                parent.afterCropActions = obj.currentObj.afterCropActions;\n                this.lowerContext.filter = obj.currentObj.filter;\n                if (!isBlazor()) {\n                    parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                }\n                parent.canvasFilter = this.lowerContext.filter;\n                var activeObj = void 0;\n                switch (obj.operation) {\n                    case 'shapeTransform':\n                        this.shapeTransform(obj.currentObjColl);\n                        break;\n                    case 'freehanddraw':\n                    case 'freehand-draw':\n                        this.updateFreehandDraw(obj.currentPointColl);\n                        break;\n                    case 'freehanddrawCustomized':\n                        this.updateFreehandDrawCustomized(obj.currentPointColl);\n                        break;\n                    case 'deleteFreehandDrawing':\n                    case 'deleteObj':\n                        this.updateDelete(obj.operation, obj.currentObjColl, obj.currentPointColl);\n                        break;\n                    case 'textAreaCustomization':\n                        this.updateTextAreaCustomization(activeObj, obj.currentObjColl);\n                        break;\n                    case 'text':\n                        this.updateText(obj.currentObjColl, false);\n                        break;\n                    default:\n                        parent.objColl = [];\n                        parent.pointColl = [];\n                        parent.freehandCounter = 0;\n                        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                            value: { obj: { selPointColl: [] } } });\n                        parent.notify('draw', { prop: 'setCurrentObj', onPropertyChange: false, value: { obj: obj.currentObj } });\n                        parent.img.destLeft = obj.currentObj.destPoints.startX;\n                        parent.img.destTop = obj.currentObj.destPoints.startY;\n                        activeObj = extend({}, parent.activeObj, {}, true);\n                        parent.objColl = extend([], obj.currentObjColl, [], true);\n                        parent.pointColl = extend([], obj.currentPointColl, [], true);\n                        parent.freehandCounter = parent.pointColl.length;\n                        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                            value: { obj: { selPointColl: extend([], obj.currentSelPointColl, [], true) } } });\n                        this.lowerContext.filter = 'none';\n                        parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n                        parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n                        this.lowerContext.filter = obj.currentObj.filter;\n                        parent.activeObj = activeObj;\n                        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                        if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n                            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n                        }\n                        parent.notify('filter', { prop: 'set-adjustment', value: { operation: obj.operation } });\n                        parent.notify('filter', { prop: 'update-filter', value: { operation: obj.operation } });\n                        break;\n                }\n                if (obj.operation === 'crop' && obj.isCircleCrop) {\n                    parent.isCircleCrop = true;\n                    parent.currSelectionPoint = extend({}, this.tempCurrSelPoint, {}, true);\n                    this.tempCurrSelPoint = null;\n                }\n                if (obj.operation === 'crop' && !obj.isCircleCrop) {\n                    parent.isCircleCrop = false;\n                }\n                if (obj.operation === 'crop' && obj.currentObj.currSelectionPoint) {\n                    parent.currSelectionPoint = extend({}, obj.currentObj.currSelectionPoint, {}, true);\n                }\n                if (parent.currSelectionPoint && isNullOrUndefined(parent.currSelectionPoint.shape)) {\n                    parent.currSelectionPoint = null;\n                }\n                this.endUndoRedo(obj.operation, false);\n            }\n        }\n    };\n    UndoRedo.prototype.shapeTransform = function (objColl) {\n        var parent = this.parent;\n        parent.objColl = extend([], objColl, [], true);\n        parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n    };\n    UndoRedo.prototype.updateFreehandDraw = function (pointColl) {\n        var parent = this.parent;\n        parent.pointColl = pointColl;\n        parent.freehandCounter = parent.pointColl.length;\n        parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n    };\n    UndoRedo.prototype.updateFreehandDrawCustomized = function (pointColl) {\n        var parent = this.parent;\n        parent.pointColl = pointColl;\n        parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n    };\n    UndoRedo.prototype.updateDelete = function (operation, objColl, pointColl) {\n        var parent = this.parent;\n        if (operation === 'deleteFreehandDrawing') {\n            parent.pointColl = pointColl;\n            parent.freehandCounter = parent.pointColl.length;\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        }\n        else if (operation === 'deleteObj') {\n            parent.objColl = objColl;\n            parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n        }\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n    };\n    UndoRedo.prototype.updateTextAreaCustomization = function (activeObj, objColl) {\n        var parent = this.parent;\n        parent.objColl = extend([], objColl, [], true);\n        parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: true } });\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n        for (var i = 0, len = objColl.length; i < len; i++) {\n            if (this.tempActObj) {\n                if (this.tempActObj.currIndex === objColl[i].currIndex) {\n                    activeObj = extend({}, objColl[i], {}, true);\n                    parent.objColl.splice(i, 1);\n                    break;\n                }\n            }\n            else {\n                activeObj = extend({}, objColl[objColl.length - 1], {}, true);\n                parent.objColl.splice(i, 1);\n                break;\n            }\n        }\n        if (activeObj) {\n            this.updateTextBox(activeObj);\n        }\n        if (parent.textArea.style.display === 'block') {\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n        }\n    };\n    UndoRedo.prototype.updateText = function (objColl, allowActiveObj) {\n        var parent = this.parent;\n        if (this.tempActObj) {\n            parent.activeObj = extend({}, this.tempActObj, {}, true);\n        }\n        if (objColl.length === 0 && parent.objColl.length === 1) {\n            this.tempActObj = extend({}, parent.objColl[0], {}, true);\n        }\n        else {\n            for (var i = 0; i < parent.objColl.length; i++) {\n                if (parent.objColl[i] && isNullOrUndefined(objColl[i])) {\n                    this.tempActObj = extend({}, parent.objColl[i], {}, true);\n                    break;\n                }\n                if (objColl[i].currIndex !== parent.objColl[i].currIndex) {\n                    this.tempActObj = extend({}, parent.objColl[i], {}, true);\n                    break;\n                }\n            }\n        }\n        if (allowActiveObj) {\n            parent.activeObj = extend({}, this.tempActObj, {}, true);\n        }\n        parent.objColl = extend([], objColl, [], true);\n        parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: true } });\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n    };\n    UndoRedo.prototype.updateTextBox = function (obj) {\n        var parent = this.parent;\n        this.upperContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'destroyQuickAccessToolbar');\n        }\n        parent.textArea.style.display = 'block';\n        parent.textArea.style.fontFamily = obj.textSettings.fontFamily;\n        parent.textArea.style.fontSize = obj.textSettings.fontSize + 'px';\n        parent.textArea.style.color = obj.strokeSettings.strokeColor;\n        parent.textArea.style.fontWeight = obj.textSettings.bold ? 'bold' : 'normal';\n        parent.textArea.style.fontStyle = obj.textSettings.italic ? 'italic' : 'normal';\n        parent.textArea.style.border = '2px solid ' + parent.themeColl[parent.theme]['primaryColor'];\n        parent.textArea.value = obj.keyHistory;\n        parent.activeObj = extend({}, obj, {}, true);\n        parent.notify('shape', { prop: 'updateFontStyles', onPropertyChange: false,\n            value: { isTextBox: null } });\n        parent.textArea.style.width = parent.activeObj.activePoint.width + 'px';\n    };\n    UndoRedo.prototype.undoDefault = function (obj) {\n        this.lowerContext.filter = obj.previousObj.filter;\n        var parent = this.parent;\n        parent.objColl = [];\n        parent.pointColl = [];\n        parent.freehandCounter = 0;\n        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n            value: { obj: { selPointColl: [] } } });\n        parent.notify('draw', { prop: 'setCurrentObj', onPropertyChange: false, value: { obj: obj.previousObj } });\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.img.destLeft = obj.previousObj.destPoints.startX;\n        parent.img.destTop = obj.previousObj.destPoints.startY;\n        var activeObj = extend({}, parent.activeObj, {}, true);\n        parent.objColl = extend([], obj.previousObjColl, [], true);\n        parent.pointColl = extend([], obj.previousPointColl, [], true);\n        parent.freehandCounter = parent.pointColl.length;\n        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n            value: { obj: { selPointColl: extend([], obj.previousSelPointColl, [], true) } } });\n        this.lowerContext.filter = 'none';\n        parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n        parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        this.lowerContext.filter = obj.previousObj.filter;\n        parent.activeObj = activeObj;\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        }\n    };\n    UndoRedo.prototype.endUndoRedo = function (operation, isUndo) {\n        var parent = this.parent;\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        if (parent.isCircleCrop && ((isUndo && operation !== 'crop') || !isUndo)) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        if (parent.transform.zoomFactor > 0) {\n            parent.notify('selection', { prop: 'setDragCanvas', value: { bool: true } });\n        }\n        parent.notify('draw', { prop: 'setCancelAction', onPropertyChange: false, value: { bool: false } });\n        if (!isBlazor()) {\n            if (parent.activeObj.shape && parent.activeObj.shape.split('-')[0] === 'crop') {\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                        isApplyBtn: true, isCropping: true, isZooming: null, cType: null } });\n            }\n            else {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            }\n            parent.notify('toolbar', { prop: 'enable-disable-btns' });\n        }\n        else if (isNullOrUndefined(parent.activeObj.shape) || parent.activeObj.shape.split('-')[0] !== 'crop') {\n            parent.updateToolbar(parent.element, 'imageLoaded');\n            parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n        }\n        if (document.getElementById(parent.element.id + '_quickAccessToolbarArea')) {\n            document.getElementById(parent.element.id + '_quickAccessToolbarArea').style.display = 'none';\n        }\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'enable-disable-btns' });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n        }\n        if (parent.transform.degree !== 0) {\n            parent.notify('transform', { prop: 'drawPannedImage', onPropertyChange: false,\n                value: { xDiff: 0, yDiff: 0 } });\n        }\n        parent.notify('filter', { prop: 'setAdjustmentValue', onPropertyChange: false, value: { adjustmentValue: this.lowerContext.filter } });\n        parent.currObjType.isCustomCrop = false;\n    };\n    UndoRedo.prototype.updateUrc = function (operation, previousObj, previousObjColl, previousPointColl, previousSelPointColl, previousCropObj, previousText, currentText, previousFilter, isCircleCrop) {\n        var parent = this.parent;\n        var obj = { isInitialLoaded: false };\n        if (parent.currObjType.isUndoAction) {\n            this.refreshUrc(true);\n        }\n        parent.notify('draw', { prop: 'isInitialLoaded', onPropertyChange: false, value: { object: obj } });\n        if (!obj['isInitialLoaded'] && parent.allowUndoRedo) {\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var currentObj = object['currObj'];\n            currentObj.objColl = extend([], parent.objColl, [], true);\n            currentObj.pointColl = extend([], parent.pointColl, [], true);\n            currentObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            currentObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            if (operation === 'crop') {\n                currentObj.currSelectionPoint = extend({}, parent.currSelectionPoint, {}, true);\n            }\n            this.undoRedoColl.push({ operation: operation, previousObj: previousObj, currentObj: currentObj,\n                previousObjColl: previousObjColl, currentObjColl: currentObj.objColl,\n                previousPointColl: previousPointColl, currentPointColl: currentObj.pointColl,\n                previousSelPointColl: previousSelPointColl, currentSelPointColl: currentObj.selPointColl,\n                previousCropObj: previousCropObj, currentCropObj: extend({}, parent.cropObj, {}, true),\n                previousText: previousText, currentText: currentText, filter: previousFilter, isCircleCrop: isCircleCrop });\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'enable-disable-btns', onPropertyChange: false });\n            }\n            else {\n                parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n            }\n        }\n    };\n    UndoRedo.prototype.updateUrObj = function (objColl) {\n        var parent = this.parent;\n        if (parent.allowUndoRedo) {\n            if (parent.currObjType.isUndoAction) {\n                this.refreshUrc(true);\n            }\n            parent.objColl.push(parent.activeObj);\n            var cropObj = extend({}, parent.cropObj, {}, true);\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var obj = object['currObj'];\n            obj.objColl = extend([], parent.objColl, [], true);\n            obj.pointColl = extend([], parent.pointColl, [], true);\n            obj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            obj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            this.undoRedoColl.push({ operation: 'shapeTransform', previousObj: obj, currentObj: obj,\n                previousObjColl: objColl, currentObjColl: obj.objColl,\n                previousPointColl: obj.pointColl, currentPointColl: obj.pointColl,\n                previousSelPointColl: obj.selPointColl, currentSelPointColl: obj.selPointColl,\n                previousCropObj: cropObj, currentCropObj: cropObj });\n            parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false,\n                value: { obj: parent.objColl[parent.objColl.length - 1] } });\n        }\n    };\n    UndoRedo.prototype.updateUndoRedo = function () {\n        var parent = this.parent;\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], parent.objColl, [], true);\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        parent.objColl.push(parent.activeObj);\n        this.updateUrc('shapeTransform', prevObj, prevObj.objColl, prevObj.pointColl, prevObj.selPointColl, prevCropObj);\n        parent.objColl.pop();\n        parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: null } });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'imageLoaded');\n        }\n    };\n    UndoRedo.prototype.getZeroZoomObjPointValue = function (obj, point) {\n        var parent = this.parent;\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var currentObj = object['currObj'];\n        currentObj.objColl = extend([], parent.objColl, [], true);\n        currentObj.pointColl = extend([], parent.pointColl, [], true);\n        currentObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        currentObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        var cropDimensionObj = { cropDimension: null };\n        parent.notify('transform', { prop: 'getCropDimension', onPropertyChange: false, value: { obj: cropDimensionObj } });\n        var getZeroZoomObjColl = extend([], parent.objColl, [], true);\n        var getZeroZoomPointColl = extend([], parent.pointColl, [], true);\n        var arrowObj = { arrowDimension: null };\n        this.parent.notify('draw', { prop: 'getArrowDimension', onPropertyChange: false, value: { obj: arrowObj } });\n        var tempArrowObj = extend({}, arrowObj['arrowDimension'], {}, true);\n        if (parent.transform.zoomFactor > 0 && (obj.length > 0 || point.length > 0)) {\n            parent.objColl = obj;\n            parent.pointColl = point;\n            var isUndoRedo = parent.isUndoRedo;\n            if (parent.transform.zoomFactor !== 0) {\n                parent.isUndoRedo = parent.isCropTab = true;\n                parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n                var zoomSettings = extend({}, parent.zoomSettings, null, true);\n                if (parent.transform.zoomFactor > 0) {\n                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: -parent.transform.zoomFactor, zoomPoint: null } });\n                }\n                else {\n                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: Math.abs(parent.transform.zoomFactor), zoomPoint: null } });\n                }\n                parent.zoomSettings = zoomSettings;\n                parent.isCropTab = false;\n                parent.isUndoRedo = isUndoRedo;\n                getZeroZoomObjColl = extend([], parent.objColl, [], true);\n                getZeroZoomPointColl = extend([], parent.pointColl, [], true);\n                parent.objColl = [];\n                parent.pointColl = [];\n                parent.freehandCounter = 0;\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: [] } } });\n                parent.notify('transform', { prop: 'setCropDimension', onPropertyChange: false,\n                    value: { width: cropDimensionObj['cropDimension']['width'], height: cropDimensionObj['cropDimension']['height'] } });\n                var maxDimension = { width: cropDimensionObj['cropDimension']['width'], height: cropDimensionObj['cropDimension']['height'] };\n                maxDimension.width += (maxDimension.width * currentObj.defaultZoom);\n                maxDimension.height += (maxDimension.height * currentObj.defaultZoom);\n                parent.notify('draw', { prop: 'setZoomCropWidth', value: { width: maxDimension.width, height: maxDimension.height } });\n                parent.notify('draw', { prop: 'setCurrentObj', onPropertyChange: false, value: { obj: currentObj } });\n                parent.img.destLeft = currentObj.destPoints.startX;\n                parent.img.destTop = currentObj.destPoints.startY;\n                parent.panPoint.totalPannedPoint = currentObj.totalPannedPoint;\n                parent.panPoint.totalPannedClientPoint = currentObj.totalPannedClientPoint;\n                parent.panPoint.totalPannedInternalPoint = currentObj.totalPannedInternalPoint;\n                parent.objColl = extend([], currentObj.objColl, [], true);\n                parent.pointColl = extend([], currentObj.pointColl, [], true);\n                parent.freehandCounter = parent.pointColl.length;\n                parent.notify('draw', { prop: 'setArrowDimension', onPropertyChange: false, value: { arrowDimension: tempArrowObj } });\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: extend([], currentObj.selPointColl, [], true) } } });\n                this.lowerContext.filter = 'none';\n                parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n                parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                    value: { context: this.lowerContext, points: null } });\n                parent.notify('freehand-draw', { prop: 'updateFHDCurPts', onPropertyChange: false });\n                this.lowerContext.filter = currentObj.filter;\n                if (parent.transform.degree !== 0) {\n                    parent.notify('transform', { prop: 'drawPannedImage', onPropertyChange: false,\n                        value: { xDiff: 0, yDiff: 0 } });\n                }\n            }\n        }\n        return { obj: getZeroZoomObjColl, point: getZeroZoomPointColl };\n    };\n    return UndoRedo;\n}());\nexport { UndoRedo };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, NotifyPropertyChanges, Property, addClass, removeClass, extend, isBlazor } from '@syncfusion/ej2-base';\nimport { Event, EventHandler, getComponent, isNullOrUndefined, getUniqueID } from '@syncfusion/ej2-base';\nimport { createSpinner } from '@syncfusion/ej2-popups';\nimport { Complex, Browser, ChildProperty, compile as templateCompiler, compile } from '@syncfusion/ej2-base';\nimport { ToolbarModule, Crop, Draw, Filter, FreehandDrawing, Selection, Shape, Transform, UndoRedo, Export } from './../index';\nimport { ZoomTrigger, ImageFinetuneOption } from './../index';\n/**\n * This interface is used to specify settings for finetuning operations on images, including brightness, contrast, hue, saturation, exposure, opacity, and blur. It includes properties for setting minimum and maximum values for each of these options, as well as a default value.\n */\nvar FinetuneSettings = /** @class */ (function (_super) {\n    __extends(FinetuneSettings, _super);\n    function FinetuneSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"brightness\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"contrast\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"hue\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"saturation\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"exposure\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"blur\", void 0);\n    return FinetuneSettings;\n}(ChildProperty));\nexport { FinetuneSettings };\n/**\n * An interface used to define the settings such as minimum, maximum, and default zoom factors, and the type of zooming which are available in the image editor control.\n */\nvar ZoomSettings = /** @class */ (function (_super) {\n    __extends(ZoomSettings, _super);\n    function ZoomSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], ZoomSettings.prototype, \"zoomTrigger\", void 0);\n    __decorate([\n        Property(1)\n    ], ZoomSettings.prototype, \"minZoomFactor\", void 0);\n    __decorate([\n        Property(10)\n    ], ZoomSettings.prototype, \"maxZoomFactor\", void 0);\n    __decorate([\n        Property(1)\n    ], ZoomSettings.prototype, \"zoomFactor\", void 0);\n    __decorate([\n        Property(null)\n    ], ZoomSettings.prototype, \"zoomPoint\", void 0);\n    return ZoomSettings;\n}(ChildProperty));\nexport { ZoomSettings };\n/**\n * This interface is used to specify settings for selection operations on images, including visibility, stroke color and fill color.\n */\nvar SelectionSettings = /** @class */ (function (_super) {\n    __extends(SelectionSettings, _super);\n    function SelectionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], SelectionSettings.prototype, \"showCircle\", void 0);\n    __decorate([\n        Property(null)\n    ], SelectionSettings.prototype, \"strokeColor\", void 0);\n    __decorate([\n        Property(null)\n    ], SelectionSettings.prototype, \"fillColor\", void 0);\n    return SelectionSettings;\n}(ChildProperty));\nexport { SelectionSettings };\n/**\n * The Image Editor is a graphical user interface for editing images.\n *\n * {% codeBlock src='image-editor/default/index.md' %}{% endcodeBlock %}\n *\n * @remarks\n * The Image Editor component provides various image editing features such as zooming, cropping, rotating, inserting text and shapes (rectangles, ellipses, and lines), drawing freehand on top of an image, undo/redo, and more.\n *\n */\nvar ImageEditor = /** @class */ (function (_super) {\n    __extends(ImageEditor, _super);\n    /**\n     *\n     * Constructor for creating the widget\n     *\n     * @param  {ImageEditorModel} options - Specifies the image editor model\n     * @param  {string|HTMLDivElement} element - Specifies the target element\n     */\n    function ImageEditor(options, element) {\n        var _this = _super.call(this, options) || this;\n        /**\n         *\n         * Image Editor Private Properties\n         */\n        /** @hidden */\n        _this.isImageLoaded = false;\n        /** @hidden */\n        _this.activeObj = { activePoint: { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 },\n            flipObjColl: [], triangle: [], triangleRatio: [], rotatedAngle: 0 };\n        // current object's ui interaction properties\n        /** @hidden */\n        _this.currObjType = { shape: '', isDragging: false, isActiveObj: false, isText: false, isInitialText: false, isLine: false, isInitialLine: false,\n            isCustomCrop: false, isZoomed: false, isUndoZoom: false, isUndoAction: false, isFiltered: false, isSave: false, isResize: false };\n        /** @hidden */\n        _this.objColl = [];\n        /** @hidden */\n        // eslint-disable-next-line\n        _this.pointColl = {};\n        /** @hidden */\n        _this.freehandCounter = 0;\n        /** @hidden */\n        _this.points = [];\n        /** @hidden */\n        _this.togglePen = false;\n        /** @hidden */\n        _this.togglePan = false;\n        /** @hidden */\n        _this.img = { destLeft: 0, destTop: 0, destWidth: 0, destHeight: 0, srcLeft: 0, srcTop: 0, srcWidth: 0, srcHeight: 0 };\n        /** @hidden */\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        _this.rotateFlipColl = [];\n        // All prop values saved while cropping (to restore the image to its original state)\n        /** @hidden */\n        _this.cropObj = { cropZoom: 0, defaultZoom: 0, totalPannedPoint: { x: 0, y: 0 }, totalPannedClientPoint: { x: 0, y: 0 },\n            totalPannedInternalPoint: { x: 0, y: 0 }, tempFlipPanPoint: { x: 0, y: 0 }, activeObj: {}, rotateFlipColl: [],\n            degree: 0, currFlipState: '', destPoints: { startX: 0, startY: 0, width: 0, height: 0 },\n            srcPoints: { startX: 0, startY: 0, width: 0, height: 0 }, filter: '', zoomFactor: 0, previousZoomValue: 0 };\n        // Stored transformations performed after cropping\n        /** @hidden */\n        _this.afterCropActions = [];\n        /** @hidden */\n        _this.transform = { degree: 0, currFlipState: '', zoomFactor: 0, cropZoomFactor: null, defaultZoomFactor: 0 };\n        /** @hidden */\n        _this.panPoint = { currentPannedPoint: { x: 0, y: 0 }, totalPannedPoint: { x: 0, y: 0 }, totalPannedInternalPoint: { x: 0, y: 0 },\n            totalPannedClientPoint: { x: 0, y: 0 } };\n        /** @hidden */\n        _this.isUndoRedo = false;\n        /** @hidden */\n        _this.isCropTab = false;\n        /** @hidden */\n        _this.isCircleCrop = false;\n        /** @hidden */\n        _this.fontSizeColl = [];\n        /** @hidden */\n        _this.initialAdjustmentValue = '';\n        /** @hidden */\n        _this.currentFilter = '';\n        /** @hidden */\n        _this.canvasFilter = 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n            'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n        /** @hidden */\n        _this.toolbarHeight = 0;\n        /** @hidden */\n        _this.isPublicMethod = false;\n        /** @hidden */\n        _this.isCropToolbar = false;\n        /** @hidden */\n        _this.cursor = 'default';\n        if (!isBlazor()) {\n            ImageEditor_1.Inject(Crop, Draw, Selection, Transform, Export, ToolbarModule);\n            ImageEditor_1.Inject(UndoRedo);\n            ImageEditor_1.Inject(Filter);\n            ImageEditor_1.Inject(Shape);\n            ImageEditor_1.Inject(FreehandDrawing);\n            if (element) {\n                _this.appendTo(element);\n            }\n        }\n        else {\n            new Crop(_this);\n            new Draw(_this);\n            new Filter(_this);\n            new FreehandDrawing(_this);\n            new Selection(_this);\n            new Shape(_this);\n            new Transform(_this);\n            new UndoRedo(_this);\n            new Export(_this);\n        }\n        return _this;\n    }\n    ImageEditor_1 = ImageEditor;\n    /**\n     * To provide the array of modules needed for component rendering.\n     *\n     * @returns {ModuleDeclaration[]} - To provide the array of modules needed for component rendering.\n     * @hidden\n     */\n    ImageEditor.prototype.requiredModules = function () {\n        var modules = [];\n        modules.push({ member: 'crop', args: [this] });\n        modules.push({ member: 'draw', args: [this] });\n        modules.push({ member: 'selection', args: [this] });\n        modules.push({ member: 'transform', args: [this] });\n        modules.push({ member: 'export', args: [this] });\n        modules.push({ member: 'toolbar-module', args: [this] });\n        modules.push({ member: 'undo-redo', args: [this] });\n        modules.push({ member: 'filter', args: [this] });\n        modules.push({ member: 'shape', args: [this] });\n        modules.push({ member: 'freehand-draw', args: [this] });\n        return modules;\n    };\n    ImageEditor.prototype.preRender = function () {\n        // pre render code snippets\n        this.element.id = this.element.id || getUniqueID('ej2-image-editor');\n        if (Browser.isDevice) {\n            this.element.classList.add('e-device');\n        }\n        this.initializeThemeColl();\n    };\n    /**\n     *\n     * To Initialize the component rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    ImageEditor.prototype.render = function () {\n        this.initialize();\n    };\n    /**\n     * To get component name.\n     *\n     * @returns {string} - Module Name\n     * @private\n     */\n    ImageEditor.prototype.getModuleName = function () {\n        return 'image-editor';\n    };\n    /**\n     *\n     * To get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Persist data\n     * @private\n     */\n    ImageEditor.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     *\n     * Called internally if any of the property value changed.\n     *\n     * @param {ImageEditorModel} newProperties - Specifies new properties\n     * @param {ImageEditorModel} oldProperties - Specifies old properties\n     * @returns {void}\n     * @private\n     */\n    ImageEditor.prototype.onPropertyChanged = function (newProperties, oldProperties) {\n        for (var _i = 0, _a = Object.keys(newProperties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'cssClass':\n                    if (oldProperties.cssClass) {\n                        removeClass([this.element], oldProperties.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n                    }\n                    if (newProperties.cssClass) {\n                        addClass([this.element], newProperties.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n                    }\n                    break;\n                case 'disabled':\n                    if (newProperties.disabled) {\n                        this.element.classList.add('e-disabled');\n                        this.unwireEvent();\n                    }\n                    else {\n                        this.element.classList.remove('e-disabled');\n                        this.wireEvent();\n                    }\n                    break;\n                case 'height':\n                    this.element.style.height = newProperties.height;\n                    break;\n                case 'width':\n                    this.element.style.width = newProperties.width;\n                    break;\n                case 'theme':\n                    if (newProperties.theme) {\n                        if (this.theme && this.theme !== '') {\n                            this.theme = this.toPascalCase(this.theme);\n                        }\n                        else {\n                            this.theme = 'Bootstrap5';\n                        }\n                        this.upperContext.strokeStyle = this.themeColl[this.theme]['primaryColor'];\n                        this.upperContext.fillStyle = this.themeColl[this.theme]['secondaryColor'];\n                    }\n                    break;\n                case 'finetuneSettings':\n                    if (newProperties.finetuneSettings) {\n                        this.finetuneSettings = newProperties.finetuneSettings;\n                        this.notify('filter', { prop: 'update-finetunes' });\n                    }\n                    break;\n                case 'locale':\n                    if (newProperties.locale) {\n                        this.notify('toolbar', { prop: 'setLocale', onPropertyChange: false, value: { locale: newProperties.locale } });\n                        this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    break;\n                case 'allowUndoRedo':\n                    if (newProperties.allowUndoRedo) {\n                        this.allowUndoRedo = true;\n                    }\n                    else {\n                        this.allowUndoRedo = false;\n                    }\n                    this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                            isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    break;\n                case 'showQuickAccessToolbar':\n                    if (newProperties.showQuickAccessToolbar) {\n                        this.showQuickAccessToolbar = true;\n                        this.notify('toolbar', { prop: 'create-qa-toolbar', onPropertyChange: false });\n                        this.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n                    }\n                    else {\n                        this.showQuickAccessToolbar = false;\n                        this.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                    }\n                    break;\n                case 'zoomSettings':\n                    if (newProperties.zoomSettings) {\n                        this.zoomSettings.zoomTrigger = newProperties.zoomSettings.zoomTrigger;\n                    }\n                    if (isNullOrUndefined(this.zoomSettings.zoomTrigger)) {\n                        this.zoomSettings.zoomTrigger = (ZoomTrigger.MouseWheel | ZoomTrigger.Pinch | ZoomTrigger.Toolbar |\n                            ZoomTrigger.Commands);\n                        this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    else if ((newProperties.zoomSettings.zoomTrigger & ZoomTrigger.Toolbar) === ZoomTrigger.Toolbar) {\n                        this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    break;\n                case 'selectionSettings':\n                    if (newProperties.selectionSettings) {\n                        this.selectionSettings = newProperties.selectionSettings;\n                        if (this.activeObj.shape) {\n                            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                            this.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: this.activeObj } });\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    ImageEditor.prototype.destroy = function () {\n        var classList = [];\n        this.element.removeAttribute('tabindex');\n        if (this.cssClass) {\n            classList = classList.concat(this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n        removeClass([this.element], classList);\n        if (!this.element.getAttribute('class')) {\n            this.element.removeAttribute('class');\n        }\n        if (!isBlazor()) {\n            this.notify('toolbar', { prop: 'destroySubComponents', onPropertyChange: false });\n            this.notify('destroyed', null);\n            _super.prototype.destroy.call(this);\n        }\n        else {\n            this.element.classList.remove('e-image-editor');\n        }\n        this.unwireEvent();\n        this.element.innerHTML = '';\n    };\n    ImageEditor.prototype.initialize = function () {\n        if (this.toolbarTemplate) {\n            this.element.appendChild(this.createElement('div', {\n                id: this.element.id + '_toolbarArea', className: 'e-toolbar-area'\n            }));\n            this.toolbarTemplateFn();\n        }\n        else {\n            this.notify('toolbar', { prop: 'create-toolbar', onPropertyChange: false });\n            this.notify('toolbar', { prop: 'create-contextual-toolbar', onPropertyChange: false });\n        }\n        this.createCanvas();\n        if (this.showQuickAccessToolbar) {\n            var canvasWrapper = document.querySelector('#' + this.element.id + '_canvasWrapper');\n            canvasWrapper.appendChild(this.createElement('div', {\n                id: this.element.id + '_quickAccessToolbarArea', className: 'e-quick-access-toolbar-area'\n            }));\n            var quickAccessToolbar = document.getElementById(this.element.id + '_quickAccessToolbarArea');\n            quickAccessToolbar.style.position = 'absolute';\n            quickAccessToolbar.style.display = 'none';\n            if (this.activeObj) {\n                quickAccessToolbar.style.left = this.activeObj.activePoint.startX + 'px';\n                quickAccessToolbar.style.top = this.activeObj.activePoint.startY + 'px';\n            }\n            quickAccessToolbar.style.width = '100%';\n        }\n        if (this.quickAccessToolbarTemplate) {\n            this.quickAccessToolbarTemplateFn();\n        }\n        else {\n            this.notify('toolbar', { prop: 'create-qa-toolbar', onPropertyChange: false });\n        }\n        this.wireEvent();\n        this.lowerContext = this.lowerCanvas.getContext('2d');\n        this.upperContext = this.upperCanvas.getContext('2d');\n        this.inMemoryContext = this.inMemoryCanvas.getContext('2d');\n        this.lowerContext.filter = this.getDefaultFilter();\n        this.notify('filter', { prop: 'setAdjustmentValue', onPropertyChange: false, value: { adjustmentValue: this.lowerContext.filter } });\n        this.notify('toolbar', { prop: 'setCanvasFilter', onPropertyChange: false, value: { filter: this.lowerContext.filter } });\n        this.notify('toolbar', { prop: 'setInitialAdjustmentValue', onPropertyChange: false, value: { value: this.lowerContext.filter } });\n        if (this.cssClass) {\n            addClass([this.element], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n        if (this.element) {\n            createSpinner({\n                target: this.element\n            });\n        }\n        this.initializeZoomSettings();\n    };\n    /**\n     *\n     * This Method will add events to component (element, event, method, current reference)\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.wireEvent = function () {\n        EventHandler.add(document, 'keydown', this.keyDownEventHandler, this);\n        EventHandler.add(document, 'keypress', this.keyUpEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'mousedown', this.mouseDownEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'mousemove', this.mouseMoveEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'mouseup', this.mouseUpEventHandler, this);\n        EventHandler.add(document, 'mouseup', this.mouseUpEventHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mousedown', this.canvasMouseDownHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mousemove', this.canvasMouseMoveHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mouseup', this.canvasMouseUpHandler, this);\n        EventHandler.add(document, 'mouseup', this.canvasMouseUpHandler, this);\n        EventHandler.add(this.upperCanvas, 'touchstart', this.touchStartHandler, this);\n        EventHandler.add(this.lowerCanvas, 'touchstart', this.touchStartHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mousewheel DOMMouseScroll', this.handleScroll, this);\n        EventHandler.add(this.upperCanvas, 'mousewheel DOMMouseScroll', this.handleScroll, this);\n        window.addEventListener('resize', this.windowResizeHandler.bind(this));\n        if ((!Browser.isIos && Browser.info.name !== 'safari')) {\n            screen.orientation.addEventListener('change', this.screenOrientation.bind(this));\n        }\n        this.notify('shape', { prop: 'wireEvent', onPropertyChange: false });\n    };\n    /**\n     *\n     * This Method will remove events from component\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.unwireEvent = function () {\n        EventHandler.remove(document, 'keydown', this.keyDownEventHandler);\n        EventHandler.remove(document, 'keypress', this.keyUpEventHandler);\n        EventHandler.remove(this.upperCanvas, 'mousedown', this.mouseDownEventHandler);\n        EventHandler.remove(this.upperCanvas, 'mousemove', this.mouseMoveEventHandler);\n        EventHandler.remove(this.upperCanvas, 'mouseup', this.mouseUpEventHandler);\n        EventHandler.remove(document, 'mouseup', this.mouseUpEventHandler);\n        EventHandler.remove(this.lowerCanvas, 'mousedown', this.canvasMouseDownHandler);\n        EventHandler.remove(this.lowerCanvas, 'mousemove', this.canvasMouseMoveHandler);\n        EventHandler.remove(this.lowerCanvas, 'mouseup', this.canvasMouseUpHandler);\n        EventHandler.remove(document, 'mouseup', this.canvasMouseUpHandler);\n        EventHandler.remove(this.upperCanvas, 'touchstart', this.touchStartHandler);\n        EventHandler.remove(this.lowerCanvas, 'touchstart', this.touchStartHandler);\n        EventHandler.remove(this.lowerCanvas, 'mousewheel DOMMouseScroll', this.handleScroll);\n        EventHandler.remove(this.upperCanvas, 'mousewheel DOMMouseScroll', this.handleScroll);\n        window.removeEventListener('resize', this.windowResizeHandler.bind(this));\n        if ((!Browser.isIos && Browser.info.name !== 'safari')) {\n            screen.orientation.removeEventListener('change', this.screenOrientation.bind(this));\n        }\n        this.notify('shape', { prop: 'unWireEvent', onPropertyChange: false });\n    };\n    ImageEditor.prototype.createCanvas = function () {\n        this.element.style.boxSizing = 'border-box';\n        var obj = { toolbarHeight: 0 };\n        this.notify('toolbar', { prop: 'getToolbarHeight', value: { obj: obj } });\n        var height = obj['toolbarHeight'];\n        this.element.style.width = this.width;\n        this.element.style.height = this.height;\n        var canvasWrapper = this.element.appendChild(this.createElement('div', { id: this.element.id + '_canvasWrapper',\n            className: 'e-canvas-wrapper', attrs: { style: 'height:' + (this.element.offsetHeight - height - 2) + 'px; width:' +\n                    (this.element.offsetWidth - 2)\n                    + 'px; position: relative; overflow: hidden; margin: 0 auto;' }\n        }));\n        this.lowerCanvas = canvasWrapper.appendChild(this.createElement('canvas', {\n            id: this.element.id + '_lowerCanvas', attrs: { name: 'canvasImage' }\n        }));\n        this.upperCanvas = canvasWrapper.appendChild(this.createElement('canvas', {\n            id: this.element.id + '_upperCanvas', attrs: { name: 'canvasImage' }\n        }));\n        this.inMemoryCanvas = this.createElement('canvas', {\n            id: this.element.id + '_inMemoryCanvas', attrs: { name: 'canvasImage' }\n        });\n        this.textArea = canvasWrapper.appendChild(this.createElement('textarea', {\n            id: this.element.id + '_textArea', className: 'e-textarea', attrs: { name: 'textArea' }\n        }));\n        var dialog = this.element.appendChild(this.createElement('div', {\n            id: this.element.id + '_dialog', className: 'e-dialog'\n        }));\n        dialog.style.display = 'none';\n        this.textArea.setAttribute('spellcheck', 'false');\n        this.textArea.style.lineHeight = 'normal';\n        this.lowerCanvas.style.width = this.upperCanvas.style.width = this.inMemoryCanvas.style.width = '100%';\n        this.lowerCanvas.style.height = this.upperCanvas.style.height = this.inMemoryCanvas.style.height = '100%';\n        this.upperCanvas.style.position = this.lowerCanvas.style.position = this.textArea.style.position = 'absolute';\n        this.textArea.style.backgroundColor = 'transparent';\n        this.textArea.style.display = 'none';\n        this.textArea.style.resize = 'none';\n        this.lowerContext = this.lowerCanvas.getContext('2d');\n        this.baseImg = this.createElement('img', {\n            id: this.element.id + '_orgImg', attrs: { name: 'Image', crossorigin: 'anonymous' }\n        });\n        this.upperCanvas.style.cursor = this.cursor = 'default';\n        this.upperCanvas.style.display = 'block';\n        this.upperContext = this.upperCanvas.getContext('2d');\n    };\n    ImageEditor.prototype.touchStartHandler = function (e) {\n        this.notify('selection', { prop: 'touchStartHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.mouseDownEventHandler = function (e) {\n        this.notify('selection', { prop: 'mouseDownEventHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.mouseMoveEventHandler = function (e) {\n        this.notify('selection', { prop: 'mouseMoveEventHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.mouseUpEventHandler = function (e) {\n        this.notify('selection', { prop: 'mouseUpEventHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.keyDownEventHandler = function (e) {\n        this.notify('selection', { prop: 'keyDownEventHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.keyUpEventHandler = function (e) {\n        // eslint-disable-next-line\n        if (this.textArea.style.display === 'block' && e.target.id === this.element.id + '_textArea') {\n            this.notify('selection', { prop: 'textKeyDown', value: { e: e } });\n        }\n    };\n    ImageEditor.prototype.canvasMouseDownHandler = function (e) {\n        this.notify('selection', { prop: 'canvasMouseDownHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.canvasMouseMoveHandler = function (e) {\n        this.notify('selection', { prop: 'canvasMouseMoveHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.canvasMouseUpHandler = function (e) {\n        this.notify('selection', { prop: 'canvasMouseUpHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.handleScroll = function (e) {\n        this.notify('selection', { prop: 'handleScroll', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.adjustToScreen = function () {\n        this.update();\n    };\n    ImageEditor.prototype.screenOrientation = function () {\n        if (Browser.isDevice) {\n            setTimeout(this.adjustToScreen.bind(this), 100);\n        }\n    };\n    ImageEditor.prototype.windowResizeHandler = function () {\n        if (!Browser.isDevice && this.element.classList.contains('e-image-editor')) {\n            this.adjustToScreen();\n        }\n    };\n    ImageEditor.prototype.notifyResetForAllModules = function () {\n        var modules = this.requiredModules();\n        for (var i = 0; i < modules.length; i++) {\n            this.notify(modules[i].member, { prop: 'reset', onPropertyChange: false });\n        }\n    };\n    ImageEditor.prototype.allowShape = function (x, y) {\n        this.isPublicMethod = true;\n        var obj = { inRange: false };\n        this.notify('shape', { prop: 'isPointsInRange', onPropertyChange: false,\n            value: { x: x, y: y, obj: obj } });\n        return obj['inRange'];\n    };\n    /**\n     * Clears the current selection performed in the image editor.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.clearSelection = function () {\n        this.notify('selection', { prop: 'clearSelection', onPropertyChange: false });\n    };\n    /**\n     * Crops an image based on the selection done in the image editor.\n     *\n     * {% codeBlock src='image-editor/crop/index.md' %}{% endcodeBlock %}\n     *\n     * @remarks\n     * The selection can be done through programmatically using the 'select' method or through UI interactions.\n     *\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.crop = function () {\n        var obj = { isCrop: false };\n        this.notify('crop', { prop: 'crop', onPropertyChange: false, value: { obj: obj } });\n        return obj['isCrop'];\n    };\n    /**\n     * Flips an image by horizontally or vertically in the image editor.\n     *\n     * {% codeBlock src='image-editor/zoom/index.md' %}{% endcodeBlock %}\n     *\n     * @param { Direction } direction - Specifies the direction to flip the image.\n     * A horizontal direction for horizontal flipping and vertical direction for vertical flipping.\n     *\n     * @remarks\n     * It flips the shapes including rectangle, circle, line, text, and freehand drawings.\n     *\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.flip = function (direction) {\n        this.notify('transform', { prop: 'flip', value: { direction: direction } });\n        this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n    };\n    /**\n     * Returns an image as ImageData to load it in to a canvas.\n     *\n     * @remarks\n     * The data returned from this method is directly drawn in a canvas using 'putImageData' method.\n     * And then the user can get the base64 string from the canvas using toDataURL method.\n     *\n     * @returns {ImageData}.\n     */\n    ImageEditor.prototype.getImageData = function () {\n        var obj = { canvas: null };\n        this.notify('export', { prop: 'exportToCanvas', value: { object: obj } });\n        return obj['canvas'].getContext('2d').getImageData(0, 0, obj['canvas'].width, obj['canvas'].height);\n    };\n    /**\n     *  Opens an image as URL or ImageData for editing in an image editor.\n     *\n     * @param {string | ImageData } data - Specifies url of the image or image data.\n     *\n     * @remarks\n     * The supported file types are JPG, JPEG, PNG, and SVG.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.open = function (data) {\n        this.notify('draw', { prop: 'open', value: { data: data } });\n    };\n    /**\n     * Reset all the changesdone in an image editor and revert to original image.\n     *\n     * @remarks\n     * The undo redo collection also cleared while resetting the image editor.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.reset = function () {\n        var obj = { isErrorImage: false };\n        this.notify('draw', { prop: 'getErrorImage', value: { obj: obj } });\n        if (!this.disabled && !obj['isErrorImage']) {\n            this.clearContext(this.inMemoryContext);\n            this.clearContext(this.lowerContext);\n            this.clearContext(this.upperContext);\n            this.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            if (!isBlazor()) {\n                this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                        isApplyBtn: false, isCropping: false, isZooming: null, cType: null } });\n                if (Browser.isDevice && document.getElementById(this.element.id + '_bottomToolbar')) {\n                    getComponent(document.getElementById(this.element.id + '_bottomToolbar'), 'toolbar').destroy();\n                    this.notify('toolbar', { prop: 'create-bottom-toolbar', onPropertyChange: false });\n                }\n            }\n            this.currObjType.isUndoAction = this.isUndoRedo = this.togglePan = this.togglePen = this.isImageLoaded = false;\n            this.isCircleCrop = this.isCropTab = false;\n            this.objColl = [];\n            this.transform.degree = 0;\n            this.upperCanvas.style.display = 'block';\n            this.transform.currFlipState = '';\n            this.upperCanvas.style.cursor = this.cursor = this.lowerCanvas.style.cursor = 'default';\n            this.lowerContext.lineWidth = this.upperContext.lineWidth = undefined;\n            this.textArea.value = this.textArea.textContent = '';\n            this.textArea.style.display = 'none';\n            this.lowerContext.filter = this.canvasFilter = this.getDefaultFilter();\n            this.img.destLeft = this.img.destTop = this.img.srcLeft = this.img.srcTop = 0;\n            this.img.destWidth = this.img.destHeight = this.img.srcWidth = this.img.srcHeight = null;\n            this.currSelectionPoint = null;\n            this.panPoint.currentPannedPoint = { x: 0, y: 0 };\n            this.rotateFlipColl = [];\n            this.points = [];\n            this.pointColl = {};\n            this.freehandCounter = 0;\n            this.notify('draw', { prop: 'resetPanPoints' });\n            this.lowerCanvas.style.left = this.upperCanvas.style.left = '';\n            this.fontSizeColl = [];\n            this.lowerCanvas.style.top = this.upperCanvas.style.top = '';\n            this.lowerCanvas.style.maxWidth = this.upperCanvas.style.maxWidth = '';\n            this.lowerCanvas.style.maxHeight = this.upperCanvas.style.maxHeight = '';\n            this.transform.defaultZoomFactor = this.transform.zoomFactor = 0;\n            this.transform.cropZoomFactor = null;\n            this.currObjType = { shape: '', isDragging: false, isActiveObj: false, isText: false, isInitialText: false, isLine: false,\n                isInitialLine: false, isCustomCrop: false, isZoomed: false, isUndoZoom: false,\n                isUndoAction: false, isFiltered: false, isSave: false, isResize: false };\n            this.cropObj = { cropZoom: 0, defaultZoom: 0, totalPannedPoint: { x: 0, y: 0 }, totalPannedClientPoint: { x: 0, y: 0 },\n                totalPannedInternalPoint: { x: 0, y: 0 }, tempFlipPanPoint: { x: 0, y: 0 }, activeObj: {},\n                rotateFlipColl: [], degree: 0, currFlipState: '', zoomFactor: 0, previousZoomValue: 0,\n                destPoints: { startX: 0, startY: 0, width: 0, height: 0 },\n                srcPoints: { startX: 0, startY: 0, width: 0, height: 0 }, filter: '' };\n            this.afterCropActions = [];\n            this.currentFilter = '';\n            var obj_1 = { initialZoomValue: false };\n            this.notify('draw', { prop: 'getInitialZoomValue', onPropertyChange: false, value: { obj: obj_1 } });\n            if (obj_1['initialZoomValue']) {\n                this.setProperties({ zoomSettings: { zoomFactor: obj_1['initialZoomValue'] } }, true);\n            }\n            if (document.getElementById(this.element.id + '_quickAccessToolbarArea')) {\n                document.getElementById(this.element.id + '_quickAccessToolbarArea').style.display = 'none';\n            }\n            this.notifyResetForAllModules();\n            this.notify('filter', { prop: 'update-finetunes' });\n            this.isImageLoaded = false;\n            this.notify('draw', { prop: 'update-canvas', onPropertyChange: false });\n            this.isImageLoaded = true;\n            if (!isBlazor()) {\n                if (this.element.querySelector('.e-contextual-toolbar-wrapper')) {\n                    this.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                }\n                this.notify('toolbar', { prop: 'refresh-dropdown-btn', value: { isDisabled: false } });\n                this.notify('toolbar', { prop: 'enable-disable-btns' });\n            }\n        }\n    };\n    /**\n     * Rotate an image to clockwise and anti-clockwise.\n     *\n     * {% codeBlock src='image-editor/rotate/index.md' %}{% endcodeBlock %}\n     *\n     * @param {number} degree - Specifies a degree to rotate an image.\n     * A positive integer value for clockwise and negative integer value for anti-clockwise rotation.\n     *\n     * @remarks\n     * It rotated the shapes including rectangle, circle, line, text, and freehand drawings.\n     *\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.rotate = function (degree) {\n        var obj = { isRotate: false };\n        this.notify('transform', { prop: 'rotate', value: { degree: degree, obj: obj } });\n        this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n        return obj['isRotate'];\n    };\n    /**\n     * Export an image using the specified file name and the extension.\n     *\n     * @param {string} type - Specifies a format of image to be saved.\n     * @param {string} fileName  Specifies a file name to be saved\n     *\n     * @remarks\n     * The supported file types are JPG, JPEG, PNG, and SVG.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.export = function (type, fileName) {\n        this.notify('export', { prop: 'export', onPropertyChange: false, value: { type: type, fileName: fileName } });\n    };\n    /**\n     * Perform selection in an image editor. The selection helps to crop an image.\n     *\n     * {% codeBlock src='image-editor/select/index.md' %}{% endcodeBlock %}\n     *\n     * @param {string} type - Specifies the shape - circle / square / custom selection / pre-defined ratios.\n     * @param {number} startX  Specifies the start x-coordinate point of the selection.\n     * @param {number} startY  Specifies the start y-coordinate point of the selection.\n     * @param {number} width - Specifies the width of the selection area.\n     * @param {number} height - Specifies the height of the selection area.\n     *\n     * @remarks\n     * The selection UI is based on the 'theme' property.\n     *\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.select = function (type, startX, startY, width, height) {\n        this.notify('draw', { prop: 'select', onPropertyChange: false,\n            value: { type: type, startX: startX, startY: startY, width: width, height: height } });\n    };\n    /**\n     * Enable or disable a freehand drawing option in an Image Editor.\n     *\n     * @param {boolean} value - Specifies a value whether to enable or disable freehand drawing.\n     *\n     * @returns {void}.\n     * @private\n     */\n    ImageEditor.prototype.freeHandDraw = function (value) {\n        this.notify('freehand-draw', { prop: 'freeHandDraw', onPropertyChange: false, value: { value: value } });\n    };\n    /**\n     * Enable or disable a freehand drawing in an Image Editor.\n     *\n     * @param {boolean} value - Specifies a value whether to enable or disable freehand drawing.\n     *\n     * @remarks\n     * User can directly drawing on a canvas after enabling this option.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.freehandDraw = function (value) {\n        if (!this.disabled && this.isImageLoaded) {\n            this.freeHandDraw(value);\n        }\n    };\n    /**\n     * Enable or disable a panning on the Image Editor.\n     *\n     * @param {boolean} value - Specifies a value whether enable or disable panning.\n     *\n     * @remarks\n     * This option will take into effect once the image's visibility is hidden when zooming an image or selection has been performed.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.pan = function (value) {\n        this.notify('transform', { prop: 'pan', onPropertyChange: false, value: { value: value } });\n    };\n    /**\n     * Zoom in or out on a point in the image editor.\n     *\n     * @param {number} zoomFactor - The percentage-based zoom factor to use (e.g. 20 for 2x zoom).\n     * @param {Point} zoomPoint - The point in the image editor to zoom in/out on.\n     *\n     * @remarks\n     * Zooming directly enables the panning option when the image's visibility is hidden.\n     * User can disable it by using 'Pan' method.\n     * @returns {void}\n     *\n     */\n    ImageEditor.prototype.zoom = function (zoomFactor, zoomPoint) {\n        this.notify('transform', { prop: 'zoom', onPropertyChange: false,\n            value: { zoomFactor: zoomFactor, zoomPoint: zoomPoint } });\n    };\n    /**\n     * Draw ellipse on an image.\n     *\n     * {% codeBlock src='image-editor/ellipse/index.md' %}{% endcodeBlock %}\n     *\n     * @param {number} x - Specifies x-coordinate of ellipse.\n     * @param {number} y - Specifies y-coordinate of ellipse.\n     * @param {number} radiusX - Specifies the radius x point for the ellipse.\n     * @param {number} radiusY - Specifies the radius y point for the ellipse.\n     * @param {number} strokeWidth - Specifies the stroke width of ellipse.\n     * @param {string} strokeColor - Specifies the stroke color of ellipse.\n     * @param {string} fillColor - Specifies the fill color of the ellipse.\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.drawEllipse = function (x, y, radiusX, radiusY, strokeWidth, strokeColor, fillColor) {\n        var isEllipse = false;\n        var isPointsInRange = this.allowShape(x, y);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(x) && isNullOrUndefined(y)))) {\n            isEllipse = true;\n            this.notify('shape', { prop: 'drawEllipse', onPropertyChange: false, value: { x: x, y: y, radiusX: radiusX, radiusY: radiusY,\n                    strokeWidth: strokeWidth, strokeColor: strokeColor, fillColor: fillColor } });\n        }\n        return isEllipse;\n    };\n    /**\n     * Draw line on an image.\n     *\n     * @param {number} startX  Specifies start point x-coordinate of line.\n     * @param {number} startY  Specifies start point y-coordinate of line.\n     * @param {number} endX - Specifies end point x-coordinates of line.\n     * @param {number} endY - Specifies end point y-coordinates of the line.\n     * @param {number} strokeWidth - Specifies the stroke width of line.\n     * @param {string} strokeColor - Specifies the stroke color of line.\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.drawLine = function (startX, startY, endX, endY, strokeWidth, strokeColor) {\n        var isLine = false;\n        var isPointsInRange = this.allowShape(startX, startY);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(startX) && isNullOrUndefined(startY)))) {\n            isLine = true;\n            this.notify('shape', { prop: 'drawLine', onPropertyChange: false, value: { startX: startX, startY: startY, endX: endX,\n                    endY: endY, strokeWidth: strokeWidth, strokeColor: strokeColor } });\n        }\n        return isLine;\n    };\n    /**\n     * Draw arrow on an image.\n     *\n     * @param {number} startX  Specifies start point x-coordinate of arrow.\n     * @param {number} startY  Specifies start point y-coordinate of arrow.\n     * @param {number} endX - Specifies end point x-coordinates of arrow.\n     * @param {number} endY - Specifies end point y-coordinates of the arrow.\n     * @param {number} strokeWidth - Specifies the stroke width of arrow.\n     * @param {string} strokeColor - Specifies the stroke color of arrow.\n     * @param {ArrowheadType} arrowStart  Specifies the type of arrowhead for start position. The default value is None.\n     * @param {ArrowheadType} arrowEnd  Specifies the type of arrowhead for end position. The default value is SolidArrow.\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.drawArrow = function (startX, startY, endX, endY, strokeWidth, strokeColor, arrowStart, arrowEnd) {\n        var isArrow = false;\n        var isPointsInRange = this.allowShape(startX, startY);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(startX) && isNullOrUndefined(startY)))) {\n            isArrow = true;\n            this.notify('shape', { prop: 'drawArrow', onPropertyChange: false, value: { startX: startX, startY: startY, endX: endX,\n                    endY: endY, strokeWidth: strokeWidth, strokeColor: strokeColor, arrowStart: arrowStart, arrowEnd: arrowEnd } });\n        }\n        return isArrow;\n    };\n    /**\n     * Draw path on an image.\n     *\n     * @param {Point[]} pointColl  Specifies collection of start and end x, y-coordinates of path.\n     * @param {number} strokeWidth - Specifies the stroke width of path.\n     * @param {string} strokeColor - Specifies the stroke color of path.\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.drawPath = function (pointColl, strokeWidth, strokeColor) {\n        this.isPublicMethod = true;\n        var obj = { inRange: false };\n        var isPath = false;\n        if (pointColl && pointColl.length > 0) {\n            for (var i = 0; i < pointColl.length; i++) {\n                if (obj['inRange']) {\n                    break;\n                }\n                this.notify('shape', { prop: 'isPointsInRange', onPropertyChange: false,\n                    value: { x: pointColl[i].x, y: pointColl[i].y, obj: obj } });\n            }\n        }\n        if (!this.disabled && this.isImageLoaded && (obj['inRange'] || isNullOrUndefined(pointColl))) {\n            isPath = true;\n            this.notify('shape', { prop: 'drawPath', onPropertyChange: false, value: { pointColl: pointColl,\n                    strokeWidth: strokeWidth, strokeColor: strokeColor } });\n        }\n        return isPath;\n    };\n    /**\n     * Draw a rectangle on an image.\n     *\n     * @param {number} x - Specifies x-coordinate of rectangle.\n     * @param {number} y - Specifies y-coordinate of rectangle.\n     * @param {number} width - Specifies the width of the rectangle.\n     * @param {number} height - Specifies the height of the rectangle.\n     * @param {number} strokeWidth - Specifies the stroke width of rectangle.\n     * @param {string} strokeColor - Specifies the stroke color of rectangle.\n     * @param {string} fillColor - Specifies the fill color of the rectangle.\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.drawRectangle = function (x, y, width, height, strokeWidth, strokeColor, fillColor) {\n        var isRectangle = false;\n        var isPointsInRange = this.allowShape(x, y);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(x) && isNullOrUndefined(y)))) {\n            isRectangle = true;\n            this.notify('shape', { prop: 'drawRectangle', onPropertyChange: false, value: { x: x, y: y, width: width, height: height,\n                    strokeWidth: strokeWidth, strokeColor: strokeColor, fillColor: fillColor } });\n        }\n        return isRectangle;\n    };\n    /**\n     * Draw a text on an image.\n     *\n     * {% codeBlock src='image-editor/text/index.md' %}{% endcodeBlock %}\n     *\n     * @param {number} x - Specifies x-coordinate of text.\n     * @param {number} y - Specifies y-coordinate of text.\n     * @param {string} text - Specifies the text to add on an image.\n     * @param {string} fontFamily - Specifies the font family of the text.\n     * @param {number} fontSize - Specifies the font size of the text.\n     * @param {boolean} bold - Specifies whether the text is bold or not.\n     * @param {boolean} italic - Specifies whether the text is italic or not.\n     * @param {string} color - Specifies font color of the text.\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.drawText = function (x, y, text, fontFamily, fontSize, bold, italic, color) {\n        var isText = false;\n        var isPointsInRange = this.allowShape(x, y);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(x) && isNullOrUndefined(y)))) {\n            isText = true;\n            this.notify('shape', { prop: 'drawText', onPropertyChange: false, value: { x: x, y: y, text: text, fontFamily: fontFamily,\n                    fontSize: fontSize, bold: bold, italic: italic, color: color } });\n        }\n        return isText;\n    };\n    /**\n     * Select a shape based on the given shape id.\n     * Use 'getShapeSettings' method to get the shape id which is then passed to perform selection.\n     *\n     * {% codeBlock src='image-editor/selectShape/index.md' %}{% endcodeBlock %}\n     *\n     * @param {string} id - Specifies the shape id to select a shape on an image.\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.selectShape = function (id) {\n        var obj = { isSelected: false };\n        this.notify('shape', { prop: 'selectShape', onPropertyChange: false, value: { id: id, obj: obj } });\n        return obj['isSelected'];\n    };\n    /**\n     * Deletes a shape based on the given shape id.\n     * Use 'getShapeSettings' method to get the shape id which is then passed to perform selection.\n     *\n     * {% codeBlock src='image-editor/deleteShape/index.md' %}{% endcodeBlock %}\n     *\n     * @param {string} id - Specifies the shape id to delete the shape on an image.\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.deleteShape = function (id) {\n        this.notify('shape', { prop: 'deleteShape', onPropertyChange: false, value: { id: id } });\n    };\n    /**\n     * Get particular shapes details based on id of the shape which is drawn on an image editor.\n     *\n     * {% codeBlock src='image-editor/getShapeSetting/index.md' %}{% endcodeBlock %}\n     *\n     * @param {string} id - Specifies the shape id on an image.\n     * @returns {ShapeSettings}.\n     *\n     */\n    ImageEditor.prototype.getShapeSetting = function (id) {\n        var shapeDetails = {};\n        this.notify('shape', { prop: 'getShapeSetting', onPropertyChange: false,\n            value: { id: id, obj: shapeDetails } });\n        return shapeDetails;\n    };\n    /**\n     * Get all the shapes details which is drawn on an image editor.\n     *\n     * @returns {ShapeSettings[]}.\n     */\n    ImageEditor.prototype.getShapeSettings = function () {\n        var obj = { shapeDetailsColl: [] };\n        this.notify('shape', { prop: 'getShapeSettings', onPropertyChange: false, value: { obj: obj } });\n        return obj['shapeDetailsColl'];\n    };\n    /**\n     * To refresh the Canvas Wrapper.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.update = function () {\n        this.notify('transform', { prop: 'update' });\n    };\n    /**\n     * Finetuning an image with the given type of finetune and its value in the image editor.\n     *\n     * @param {ImageFinetuneOption } finetuneOption - Specifies the finetune options to be performed in the image.\n     * @param {number } value - Specifies the value for finetuning the image.\n     *\n     * @remarks\n     * The finetuning will not affect the shapes background and border color.\n     *\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.finetuneImage = function (finetuneOption, value) {\n        if (!this.disabled && this.isImageLoaded) {\n            this.notify('filter', { prop: 'finetuneImage', value: { value: value, option: finetuneOption } });\n        }\n    };\n    /**\n     * Filtering an image with the given type of filters.\n     *\n     * @param {ImageFilterOption } filterOption - Specifies the filter options to the image.\n     *\n     * @remarks\n     * The filtering will not affect the shape's background and border color.\n     * @returns {void}.\n     */\n    ImageEditor.prototype.applyImageFilter = function (filterOption) {\n        if (!this.disabled && this.isImageLoaded) {\n            this.notify('filter', { prop: 'applyImageFilter', value: { option: filterOption.toString() } });\n            this.canvasFilter = this.lowerContext.filter;\n            this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n        }\n    };\n    /**\n     * Reverse the last action which performed by the user in the Image Editor.\n     *\n     * @remarks\n     * This method will take into effect once the 'allowUndoRedo' property is enabled.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.undo = function () {\n        this.notify('undo-redo', { prop: 'undo', onPropertyChange: false });\n    };\n    /**\n     * Redo the last user action that was undone by the user or `undo` method.\n     *\n     * @remarks\n     * This method will take into effect once the 'allowUndoRedo' property is enabled.\n     * @returns {void}.\n     */\n    ImageEditor.prototype.redo = function () {\n        this.notify('undo-redo', { prop: 'redo', onPropertyChange: false });\n    };\n    /**\n     * Get the dimension of an image in the image editor such as x, y, width, and height.\n     * The method helps to get dimension after cropped an image.\n     *\n     * @returns {Dimension}.\n     * A Dimension object containing the x, y, width, and height of an image.\n     */\n    ImageEditor.prototype.getImageDimension = function () {\n        return { x: this.img.destLeft, y: this.img.destTop, width: this.img.destWidth, height: this.img.destHeight };\n    };\n    // Toolbar related codes\n    ImageEditor.prototype.toolbarTemplateFn = function () {\n        var template;\n        var templateID = this.element.id + '_toolbar';\n        var toolbarArea = this.element.querySelector('#' + this.element.id + '_toolbarArea');\n        if (this.toolbarTemplate) {\n            this.toolbarFn = this.templateParser(this.toolbarTemplate);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (this.isReact) {\n                template = this.toolbarFn({ type: 'toolbar' }, this, 'Template', templateID)[0];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            }\n            else if (this.isAngular) {\n                var templateColl = this.toolbarFn({ type: 'toolbar' }, this, 'Template', templateID);\n                template = (templateColl[0].nodeType === 3) ? templateColl[1] : templateColl[0];\n            }\n            else {\n                template = this.toolbarFn({ type: 'toolbar' }, this, 'Template', templateID)[0];\n            }\n            toolbarArea.appendChild(template);\n            this.toolbarHeight = toolbarArea.clientHeight;\n            this.notify('toolbar', { prop: 'setToolbarHeight', value: { height: this.toolbarHeight } });\n            this['renderReactTemplates']();\n        }\n    };\n    ImageEditor.prototype.quickAccessToolbarTemplateFn = function () {\n        var template;\n        var templateID = this.element.id + '_quickAccessToolbar';\n        var toolbarArea = this.element.querySelector('#' + this.element.id + '_quickAccessToolbarArea');\n        if (this.quickAccessToolbarTemplate) {\n            this.qatFn = this.templateParser(this.quickAccessToolbarTemplate);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (this.isReact) {\n                template = this.qatFn({ type: 'toolbar' }, this, 'Template', templateID)[0];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            }\n            else if (this.isAngular) {\n                var templateColl = this.qatFn({ type: 'toolbar' }, this, 'Template', templateID);\n                template = (templateColl[0].nodeType === 3) ? templateColl[1] : templateColl[0];\n            }\n            else {\n                template = this.qatFn({ type: 'toolbar' }, this, 'Template', templateID)[0];\n            }\n            toolbarArea.appendChild(template);\n            this['renderReactTemplates']();\n        }\n    };\n    ImageEditor.prototype.templateParser = function (template) {\n        if (template) {\n            try {\n                if (typeof template !== 'function' && document.querySelectorAll(template).length) {\n                    return templateCompiler(document.querySelector(template).innerHTML.trim());\n                }\n                else {\n                    return compile(template);\n                }\n            }\n            catch (error) {\n                return templateCompiler(template);\n            }\n        }\n        return undefined;\n    };\n    // Common codes for EJ2 and Blazor\n    ImageEditor.prototype.getTextFromId = function (id) {\n        var idToValue = { '1': 'none', '2': 'bar', '3': 'arrow', '4': 'arrowSolid',\n            '5': 'circle', '6': 'circleSolid', '7': 'square', '8': 'squareSolid' };\n        return idToValue[\"\" + id];\n    };\n    ImageEditor.prototype.getFinetuneOption = function (type) {\n        var typeToOption = { 'brightness': ImageFinetuneOption.Brightness, 'contrast': ImageFinetuneOption.Contrast,\n            'hue': ImageFinetuneOption.Hue, 'saturation': ImageFinetuneOption.Saturation, 'opacity': ImageFinetuneOption.Opacity,\n            'blur': ImageFinetuneOption.Blur, 'exposure': ImageFinetuneOption.Exposure };\n        return typeToOption[\"\" + type];\n    };\n    ImageEditor.prototype.setPenStroke = function (args) {\n        this.notify('freehand-draw', { prop: 'setPenStrokeWidth', onPropertyChange: false, value: { value: parseInt(args, 10) } });\n    };\n    ImageEditor.prototype.updateFreehandDrawColorChange = function () {\n        var obj = { tempFreeHandDrawEditingStyles: null };\n        this.notify('freehand-draw', { prop: 'getTempFreeHandDrawEditingStyles', value: { obj: obj } });\n        this.notify('freehand-draw', { prop: 'color-change', value: { color: obj['tempFreeHandDrawEditingStyles'].strokeColor } });\n    };\n    ImageEditor.prototype.setInitialZoomState = function () {\n        this.objColl.push(this.activeObj);\n        this.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        var isUndoRedo = this.isUndoRedo;\n        this.isCropTab = false;\n        this.isUndoRedo = true;\n        if (this.transform.cropZoomFactor && this.transform.cropZoomFactor > 0) {\n            this.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: -this.transform.cropZoomFactor, zoomPoint: null } });\n        }\n        else {\n            this.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: Math.abs(this.transform.cropZoomFactor), zoomPoint: null } });\n        }\n        this.isUndoRedo = isUndoRedo;\n        this.panPoint.totalPannedPoint = { x: 0, y: 0 };\n        this.transform.cropZoomFactor = 0;\n        this.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n        this.activeObj = extend({}, this.objColl[this.objColl.length - 1], {}, true);\n        this.objColl.pop();\n        this.isCropTab = true;\n        this.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: this.activeObj } });\n    };\n    /**\n     * Set the old item Transform item state.\n     *\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateCropTransformItems = function () {\n        this.prevCurrSelectionPoint = extend({}, this.currSelectionPoint, {}, true);\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var currentObj = object['currObj'];\n        currentObj.objColl = extend([], this.objColl, [], true);\n        currentObj.pointColl = extend([], this.pointColl, [], true);\n        currentObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        currentObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.cancelCropSelection = { operation: 'cropTransform', previousObj: currentObj, currentObj: currentObj,\n            previousObjColl: currentObj.objColl, currentObjColl: currentObj.objColl,\n            previousPointColl: currentObj.pointColl, currentPointColl: currentObj.pointColl,\n            previousSelPointColl: currentObj.selPointColl, currentSelPointColl: currentObj.selPointColl,\n            previousCropObj: extend({}, this.cropObj, {}, true),\n            currentCropObj: extend({}, this.cropObj, {}, true),\n            previousText: null, currentText: null, filter: null, isCircleCrop: this.isCircleCrop };\n    };\n    /**\n     * Get the pascal case.\n     *\n     * @param { string } str - Specifies the string to convert to pascal case.\n     * @param { Object } obj - Specifies the string to convert to pascal case.\n     * @hidden\n     * @returns {string}.\n     * A pascal case string.\n     */\n    ImageEditor.prototype.toPascalCase = function (str, obj) {\n        var strArr = [];\n        if (!isNullOrUndefined(str)) {\n            strArr = str.toLowerCase().split('-');\n        }\n        for (var i = 0; i < strArr.length; i++) {\n            strArr[i] = strArr[i].charAt(0).toUpperCase() + strArr[i].slice(1);\n        }\n        if (obj) {\n            obj['maxText'] = strArr.join('');\n        }\n        return strArr.join('');\n    };\n    /**\n     * Get the font sizes.\n     *\n     * @hidden\n     * @returns {DropDownButtonItemModel[]}.\n     * A font size collections.\n     */\n    ImageEditor.prototype.getFontSizes = function () {\n        var items = [];\n        this.fontSizeColl = [];\n        var fontSize;\n        if (this.transform.degree === 0 || this.transform.degree % 180 === 0) {\n            fontSize = this.img.destWidth / 25;\n        }\n        else {\n            fontSize = this.img.destHeight / 25;\n        }\n        for (var i = 1; i <= 10; i++) {\n            this.fontSizeColl.push({ text: (i * (Math.round(fontSize / 2))).toString() });\n            items.push({ text: (i.toString()) });\n        }\n        return items;\n    };\n    /**\n     * Handles the OK button operation\n     *\n     * @param { boolean } isMouseDown - Specifies whether it is a mouse down.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.okBtn = function (isMouseDown) {\n        var isCropSelection = false;\n        var splitWords;\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (splitWords === undefined && this.currObjType.isCustomCrop) {\n            isCropSelection = true;\n        }\n        else if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        var selElem = this.element.querySelector('.e-contextual-toolbar-wrapper .e-toolbar-item.e-selected');\n        var obj = { bool: false };\n        this.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n        if (selElem) {\n            this.currentFilter = selElem.children[0].children[0].id.replace('Canvas', '');\n        }\n        if (isCropSelection) {\n            this.crop();\n        }\n        else if (this.togglePen) {\n            this.freeHandDraw(false);\n            this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n        }\n        else if (this.textArea.style.display === 'block') {\n            this.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n            if (isNullOrUndefined(isMouseDown)) {\n                this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n        }\n        else if ((!isBlazor() && document.querySelector('#' + this.element.id + '_sliderWrapper')) || (isBlazor() && !this.element.querySelector('.e-ie-contextual-slider').classList.contains('e-hidden')) ||\n            this.currObjType.isFiltered) {\n            this.initialAdjustmentValue = this.canvasFilter = this.lowerContext.filter;\n            this.currObjType.isFiltered = false;\n            var obj_2 = { value: null };\n            this.notify('draw', { prop: 'getTempAdjustmentValue', value: { obj: obj_2 } });\n            if (obj_2['value'] !== this.lowerContext.filter) {\n                this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n        }\n        else if (obj['bool']) {\n            this.notify('freehand-draw', { prop: 'applyFhd', onPropertyChange: false });\n            this.notify('selection', { prop: 'setFreehandDrawCustomized', value: { isFreehandDrawCustomized: false } });\n            if (!isBlazor()) {\n                this.notify('toolbar', { prop: 'destroy-qa-toolbar' });\n            }\n            else {\n                this.updateToolbar(this.element, 'destroyQuickAccessToolbar');\n            }\n            this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n        }\n        else if ((this.activeObj.activePoint.width !== 0 && this.activeObj.activePoint.height !== 0) ||\n            (this.activeObj.shape === 'path' && this.activeObj.pointColl.length > 0)) {\n            this.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: isMouseDown } });\n        }\n        if (!isBlazor() && !obj['isCropToolbar']) {\n            this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                    isApplyBtn: false, isCropping: null, isZooming: null, cType: null } });\n        }\n        this.notify('draw', { prop: 'setNewPath', value: { bool: false } });\n        this.isCropTab = false;\n        this.transform.zoomFactor = this.transform.defaultZoomFactor;\n        this.notify('selection', { prop: 'setCurrentDrawingShape', onPropertyChange: false, value: { value: '' } });\n    };\n    /**\n     * Set the temporary filter properties.\n     *\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.setTempFilterProperties = function () {\n        this.upperCanvas.style.display = 'block';\n        this.cropSelectedState();\n        var obj = { adjustmentLevel: null };\n        this.notify('filter', { prop: 'getAdjustmentLevel', onPropertyChange: false,\n            value: { obj: obj } });\n        this.lowerContext.filter = this.initialAdjustmentValue;\n        this.notify('draw', { prop: 'setTempAdjustmentValue', value: { tempAdjustmentValue: this.lowerContext.filter } });\n        this.notify('filter', { prop: 'setTempAdjustmentLevel', onPropertyChange: false,\n            value: { tempAdjustmentLevel: extend({}, obj['adjustmentLevel'], {}, true) } });\n        this.notify('draw', { prop: 'setTempFilter', value: { tempFilter: this.currentFilter } });\n        var undoRedoObj = { undoRedoStep: null };\n        this.notify('undo-redo', { prop: 'getUndoRedoStep', value: { obj: undoRedoObj } });\n        this.notify('draw', { prop: 'setTempUndoRedoStep', value: { tempUndoRedoStep: undoRedoObj['undoRedoStep'] } });\n    };\n    /**\n     * To crop the selection.\n     *\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.cropSelectedState = function () {\n        if (this.activeObj.shape && this.activeObj.shape.split('-')[0] === 'crop') {\n            this.okBtn();\n        }\n    };\n    /**\n     * Get the current canvas data.\n     *\n     * @hidden\n     * @returns {ImageData}.\n     * An ImageData returns the current canvas image data object.\n     */\n    ImageEditor.prototype.getCurrentCanvasData = function () {\n        var tempFilter = this.lowerContext.filter;\n        this.lowerContext.filter = this.canvasFilter = 'none';\n        var objColl = extend([], this.objColl, null, true);\n        var pointColl = extend([], this.pointColl, null, true);\n        this.objColl = [];\n        this.pointColl = [];\n        this.freehandCounter = 0;\n        this.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n        var data = this.getImageData();\n        if (!isBlazor()) {\n            this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                    isApplyBtn: true, isCropping: false } });\n            this.element.querySelector('#' + this.element.id + '_contextualToolbarArea').classList.remove('e-hide');\n        }\n        this.objColl = objColl;\n        this.pointColl = pointColl;\n        this.freehandCounter = pointColl.length;\n        this.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n        this.lowerContext.filter = this.canvasFilter = tempFilter;\n        return data;\n    };\n    /**\n     * To set current adjustment value\n     *\n     * @param { string } type - Specifies the type of adjustment.\n     * @param { number } value - Specifies the value to adjust.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.setCurrAdjustmentValue = function (type, value) {\n        var _this = this;\n        var finetuneValueChanging = { finetune: this.getFinetuneOption(type),\n            value: value, cancel: false };\n        if (isBlazor() && this.events && this.events.finetuneValueChanging.hasDelegate === true) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            this.dotNetRef.invokeMethodAsync('OnFinetuneValueChangeAsync', finetuneValueChanging).then(function (finetuneValueChanging) {\n                if (finetuneValueChanging.cancel) {\n                    return;\n                }\n                _this.notify('filter', { prop: 'setCurrAdjValue', value: { type: type.toLowerCase(), value: value } });\n            });\n        }\n        else {\n            this.trigger('finetuneValueChanging', finetuneValueChanging);\n            if (finetuneValueChanging.cancel) {\n                return;\n            }\n            this.notify('filter', { prop: 'setCurrAdjValue', value: { type: type.toLowerCase(), value: value } });\n        }\n    };\n    /**\n     * Get the square point for path.\n     *\n     * @param { SelectionPoint } obj - Specifies the points of path.\n     * @hidden\n     * @returns {ActivePoint}.\n     * An ActivePoint object which returns the square point.\n     */\n    ImageEditor.prototype.getSquarePointForPath = function (obj) {\n        var point = { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 };\n        if (obj.pointColl.length > 0) {\n            point = { startX: obj.pointColl[0].x, startY: obj.pointColl[0].y, endX: obj.pointColl[0].x, endY: obj.pointColl[0].y };\n            for (var i = 1; i < obj.pointColl.length; i++) {\n                if (obj.pointColl[i].x < point.startX) {\n                    point.startX = obj.pointColl[i].x;\n                }\n                if (obj.pointColl[i].y < point.startY) {\n                    point.startY = obj.pointColl[i].y;\n                }\n                if (obj.pointColl[i].x > point.endX) {\n                    point.endX = obj.pointColl[i].x;\n                }\n                if (obj.pointColl[i].y > point.endY) {\n                    point.endY = obj.pointColl[i].y;\n                }\n            }\n            point.width = point.endX - point.startX;\n            point.height = point.endY - point.startY;\n        }\n        return point;\n    };\n    /**\n     * Get the SelectionType.\n     *\n     * @param { string } type - Specifies the SelectionType.\n     * @hidden\n     * @returns {string}.\n     * An string which returns the SelectionType.\n     */\n    ImageEditor.prototype.getSelectionType = function (type) {\n        var typeToSelectionType = { 'CropCustom': 'Custom', 'CropSquare': 'Square', 'CropCircle': 'Circle',\n            'Crop3:2': '3:2', 'Crop4:3': '4:3', 'Crop5:4': '5:4', 'Crop7:5': '7:5', 'Crop16:9': '16:9' };\n        return typeToSelectionType[\"\" + type];\n    };\n    /** Clears the context.\n     *\n     * @param { CanvasRenderingContext2D } ctx - Specifies the canvas context.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.clearContext = function (ctx) {\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        ctx.clearRect(0, 0, ctx.canvas.height, ctx.canvas.width);\n    };\n    /**\n     * Apply Arrow for start and end.\n     *\n     * @param { string } type - Specifies the start arrow or end arrow.\n     * @param { string } id - Specifies the start arrow or end arrow item id.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateArrow = function (type, id) {\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        this.objColl.pop();\n        if (type === 'startArrow') {\n            this.activeObj.start = this.getTextFromId(id);\n        }\n        else if (type === 'endArrow') {\n            this.activeObj.end = this.getTextFromId(id);\n        }\n        this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: null, fillColor: null,\n                strokeWidth: this.activeObj.strokeSettings.strokeWidth } });\n        this.objColl.push(this.activeObj);\n        this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                previousPointColl: prevObj.pointColl, previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: null, isCircleCrop: null } });\n        this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        if (!isBlazor()) {\n            if (Browser.isDevice) {\n                if (document.getElementById(this.element.id + '_bottomToolbar')) {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    var toolbar_1 = getComponent(this.element.id + '_bottomToolbar', 'toolbar');\n                    toolbar_1.refreshOverflow();\n                }\n            }\n            else {\n                if (document.getElementById(this.element.id + '_toolbar')) {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    var toolbar_2 = getComponent(this.element.id + '_toolbar', 'toolbar');\n                    toolbar_2.refreshOverflow();\n                }\n            }\n        }\n    };\n    /**\n     * Apply Font style for text.\n     *\n     * @param { string } id - Specifies the selected item id.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateFontFamily = function (id) {\n        this.notify('selection', { prop: 'setInitialTextEdit', value: { bool: false } });\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        var objColl = extend([], this.objColl, [], true);\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.objColl.pop();\n        if (this.textArea.style.display === 'block') {\n            this.notify('shape', { prop: 'updateFontRatio', onPropertyChange: false,\n                value: { obj: this.activeObj, isTextArea: true } });\n            var temp = this.activeObj.textSettings.fontFamily;\n            this.activeObj.textSettings.fontFamily = this.toPascalCase(id);\n            this.notify('shape', { prop: 'redraw-text' });\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'textAreaCustomization', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.objColl.pop();\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            var width = this.activeObj.activePoint.width +\n                this.activeObj.textSettings.fontSize * 0.25;\n            this.textArea.style.width = width + 'px';\n            this.textArea.style.fontFamily = this.toPascalCase(id);\n            this.activeObj.textSettings.fontFamily = temp;\n            this.notify('shape', { prop: 'updateFontStyles', onPropertyChange: false,\n                value: { isTextBox: null } });\n        }\n        else {\n            this.notify('shape', { prop: 'updateFontRatio', onPropertyChange: false,\n                value: { obj: this.activeObj, isTextArea: null } });\n            var fontFamily = this.activeObj.textSettings.fontFamily = this.toPascalCase(id);\n            this.notify('shape', { prop: 'setTextSettings', onPropertyChange: false,\n                value: { textSettings: null, fontFamily: fontFamily, fontSize: null } });\n            this.notify('shape', { prop: 'redraw-text' });\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: objColl,\n                    previousPointColl: extend([], this.pointColl, [], true),\n                    previousSelPointColl: prevObj.selPointColl, previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        }\n    };\n    /**\n     * Apply Font size for text.\n     *\n     * @param { string } text - Specifies the selected item text.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateFontSize = function (text) {\n        var itemText = text;\n        this.notify('selection', { prop: 'setInitialTextEdit', value: { bool: false } });\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.objColl.pop();\n        if (this.textArea.style.display === 'block') {\n            this.notify('shape', { prop: 'updateFontRatio', onPropertyChange: false,\n                value: { obj: this.activeObj, isTextArea: true } });\n            var temp = this.activeObj.textSettings.fontSize;\n            this.activeObj.textSettings.fontSize = parseInt(this.fontSizeColl[(parseInt(itemText, 10) - 1)].text, 10);\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'textAreaCustomization', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.objColl.pop();\n            var textStyle = '';\n            if (this.textArea.style.fontWeight === 'bold') {\n                textStyle = 'bold ';\n            }\n            if (this.textArea.style.fontStyle === 'italic') {\n                textStyle = 'italic ';\n            }\n            if (this.textArea.style.fontWeight === 'bold' && this.textArea.style.fontStyle === 'italic') {\n                textStyle = 'italic bold ';\n            }\n            this.upperContext.font = textStyle + this.activeObj.textSettings.fontSize + 'px' + ' ' + this.textArea.style.fontFamily;\n            var rows = this.textArea.value.split('\\n');\n            var obj = { maxText: '' };\n            this.notify('shape', { prop: 'getMaxText', onPropertyChange: false,\n                value: { isTextBox: true, text: null, obj: obj } });\n            var text_1 = obj['maxText'];\n            var width = this.upperContext.measureText(text_1).width +\n                this.activeObj.textSettings.fontSize * 0.5;\n            this.textArea.style.width = width + 'px';\n            this.textArea.style.height = rows.length * (this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.25) + 'px';\n            this.activeObj.textSettings.fontSize = temp;\n            this.upperContext.font = this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n            this.textArea.style.fontSize = parseInt(this.fontSizeColl[(parseInt(itemText, 10) - 1)].text, 10) + 'px';\n            if (this.textArea.style.fontFamily === 'georgia') {\n                this.textArea.style.width = parseFloat(this.textArea.style.width) + parseFloat(this.textArea.style.fontSize) + 'px';\n            }\n        }\n        else {\n            this.notify('shape', { prop: 'updateFontRatio', onPropertyChange: false,\n                value: { obj: this.activeObj, isTextArea: null } });\n            var fontSize = this.activeObj.textSettings.fontSize = parseInt(this.fontSizeColl[(parseInt(itemText, 10) - 1)].text, 10);\n            this.notify('shape', { prop: 'setTextSettings', onPropertyChange: false,\n                value: { textSettings: null, fontFamily: null, fontSize: fontSize } });\n            this.upperContext.font = this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n            var rows = this.activeObj.keyHistory.split('\\n');\n            var obj = { maxText: '' };\n            this.notify('shape', { prop: 'getMaxText', onPropertyChange: false,\n                value: { isTextBox: null, text: null, obj: obj } });\n            var text_2 = obj['maxText'];\n            var width = this.upperContext.measureText(text_2).width +\n                this.activeObj.textSettings.fontSize * 0.5;\n            var height = rows.length * (this.activeObj.textSettings.fontSize +\n                this.activeObj.textSettings.fontSize * 0.25);\n            this.notify('selection', { prop: 'setTextSelection', onPropertyChange: false,\n                value: { width: width, height: height } });\n            this.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: this.activeObj.activePoint, obj: this.activeObj,\n                    isMouseMove: null, x: null, y: null } });\n            this.notify('shape', { prop: 'redraw-text' });\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        }\n    };\n    /**\n     * Apply Font color for text.\n     *\n     * @param { string } value - Specifies the selected color item value.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateFontColor = function (value) {\n        this.notify('selection', { prop: 'setInitialTextEdit', value: { bool: false } });\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.objColl.pop();\n        if (this.textArea.style.display === 'none') {\n            this.activeObj.strokeSettings.strokeColor = value;\n            this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null,\n                    strokeColor: this.activeObj.strokeSettings.strokeColor, fillColor: null, strokeWidth: null } });\n            if (!this.togglePen) {\n                this.objColl.push(this.activeObj);\n                this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                    value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                        previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                        previousCropObj: prevCropObj, previousText: null,\n                        currentText: null, previousFilter: null, isCircleCrop: null } });\n                this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n            }\n        }\n        else if (this.textArea.style.display === 'block') {\n            this.textArea.style.color = value;\n            var temp = this.activeObj.strokeSettings.strokeColor;\n            this.activeObj.strokeSettings.strokeColor = value;\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'textAreaCustomization', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.objColl.pop();\n            this.activeObj.strokeSettings.strokeColor = temp;\n        }\n        else if (!this.togglePen) {\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        }\n    };\n    /**\n     * Apply Pen stroke width.\n     *\n     * @param { string } id - Specifies the selected item id.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updatePenStrokeWidth = function (id) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var temp = extend([], this.pointColl, [], true);\n        this.updateFreehandDrawColorChange();\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.pointColl = temp;\n        this.notify('selection', { prop: 'setFreehandDrawCustomized', value: { isFreehandDrawCustomized: true } });\n        this.setPenStroke(id);\n        var obj = { bool: false };\n        this.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n        if (obj['bool']) {\n            var obj_3 = { penStrokeWidth: null };\n            this.notify('freehand-draw', { prop: 'getPenStrokeWidth', onPropertyChange: false, value: { obj: obj_3 } });\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                value: { strokeColor: null, strokeWidth: obj_3['penStrokeWidth'] } });\n            var indexObj = { freehandSelectedIndex: null };\n            this.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n            this.pointColl[indexObj['freehandSelectedIndex']].strokeWidth = obj_3['penStrokeWidth'];\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'freehanddrawCustomized', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n        }\n    };\n    /**\n     * Apply Pen stroke color.\n     *\n     * @param { string } value - Specifies the selected color item value.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updatePenStrokeColor = function (value) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var temp = extend([], this.pointColl, [], true);\n        this.updateFreehandDrawColorChange();\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.pointColl = temp;\n        this.notify('selection', { prop: 'setFreehandDrawCustomized', value: { isFreehandDrawCustomized: true } });\n        this.activeObj.strokeSettings.strokeColor = value;\n        var obj = { bool: false };\n        this.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n        if (obj['bool']) {\n            var indexObj = { freehandSelectedIndex: null };\n            this.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.pointColl[indexObj['freehandSelectedIndex']].strokeColor = value;\n            this.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                value: { strokeColor: value } });\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'freehanddrawCustomized', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n        }\n        else if (!this.togglePen) {\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.activeObj } });\n        }\n    };\n    /**\n     * Apply Shape stroke width.\n     *\n     * @param { string } id - Specifies the selected item id.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateStrokeWidth = function (id) {\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.objColl.pop();\n        this.activeObj.strokeSettings.strokeWidth = parseInt(id, 10);\n        this.activeObj.strokeSettings.strokeWidth *= 2;\n        this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: null, fillColor: null,\n                strokeWidth: this.activeObj.strokeSettings.strokeWidth } });\n        this.objColl.push(this.activeObj);\n        this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: null, isCircleCrop: null } });\n        this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n    };\n    /**\n     * Apply Shape stroke color.\n     *\n     * @param { string } value - Specifies the selected color item value.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateStrokeColor = function (value) {\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.objColl.pop();\n        this.activeObj.strokeSettings.strokeColor = value;\n        this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: this.activeObj.strokeSettings.strokeColor, fillColor: null, strokeWidth: null } });\n        if (!this.togglePen) {\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        }\n    };\n    /**\n     * Apply Shape fill color.\n     *\n     * @param { string } value - Specifies the selected color item value.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateFillColor = function (value) {\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.objColl.pop();\n        this.activeObj.strokeSettings.fillColor = value;\n        this.notify('shape', { prop: 'setStrokeSettings',\n            value: { strokeSettings: null, strokeColor: null, fillColor: this.activeObj.strokeSettings.fillColor,\n                strokeWidth: null } });\n        this.objColl.push(this.activeObj);\n        this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: null, isCircleCrop: null } });\n        this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n    };\n    /**\n     * Get pascalToSplitWords from string.\n     *\n     * @param { string } str - Specifies the word.\n     * @hidden\n     * @returns {string}.\n     */\n    ImageEditor.prototype.pascalToSplitWords = function (str) {\n        str = str.charAt(0).toUpperCase() + str.slice(1);\n        var splitStr = str.match(/[A-Z][a-z]+/g);\n        if (isNullOrUndefined(splitStr)) {\n            return str;\n        }\n        else {\n            return splitStr.map(function (word) { return word.charAt(0).toUpperCase() + word.slice(1); }).join(' ');\n        }\n    };\n    /**\n     * Get Slider Value.\n     *\n     * @param { string } type - Finetune type.\n     * @hidden\n     * @returns {number}.\n     */\n    ImageEditor.prototype.getCurrAdjustmentValue = function (type) {\n        var obj = { adjustmentLevel: null };\n        this.notify('filter', { prop: 'getAdjustmentLevel', onPropertyChange: false,\n            value: { obj: obj } });\n        var typeToAdjustmentLevel = { 'brightness': obj['adjustmentLevel'].brightness,\n            'contrast': obj['adjustmentLevel'].contrast, 'hue': obj['adjustmentLevel'].hue,\n            'saturation': obj['adjustmentLevel'].saturation, 'opacity': obj['adjustmentLevel'].opacity,\n            'blur': obj['adjustmentLevel'].blur, 'exposure': obj['adjustmentLevel'].exposure };\n        return typeToAdjustmentLevel[\"\" + type];\n    };\n    /**\n     * Apply transformSelect.\n     *\n     * @param { string } type - Specifies the selected item text.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.transformSelect = function (type) {\n        this.isCropToolbar = true;\n        this.setInitialZoomState();\n        var activeObj = extend({}, this.activeObj, {}, true);\n        this.cropSelectedState();\n        this.notify('draw', { prop: 'resetCurrentSelectionPoint' });\n        this.notify('transform', { prop: 'performTransformation', value: { text: type } });\n        this.notify('draw', { prop: 'moveToSelectionRange', value: { type: type, activeObj: activeObj } });\n        this.isCropToolbar = false;\n    };\n    /**\n     * Returns default filter.\n     *\n     * @hidden\n     * @returns {string}.\n     */\n    ImageEditor.prototype.getDefaultFilter = function () {\n        return 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n            'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' +\n            'grayscale(0%) ' + 'invert(0%)';\n    };\n    // Blazor codes\n    /**\n     * To Initialize the component rendering\n     *\n     * @private\n     * @param {HTMLCanvasElement} element - Specifies the canvas element.\n     * @param {BlazorDotnetObject} dotnetRef - Specifies for blazor client to server communication.\n     * @returns {void}\n     */\n    ImageEditor.prototype.initializeImageEditor = function (element, dotnetRef) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        this.element = element;\n        var canvasWrapper = this.element.querySelector('.e-canvas-wrapper');\n        if (this.element.querySelector('#' + this.element.id + '_toolbar')) {\n            this.toolbarHeight = this.element.querySelector('#' + this.element.id + '_toolbar').clientHeight;\n        }\n        else {\n            this.toolbarHeight = 0;\n        }\n        canvasWrapper.style.height = (this.element.offsetHeight - this.toolbarHeight - 2) + 'px';\n        canvasWrapper.style.width = (this.element.offsetWidth - 2) + 'px';\n        this.lowerCanvas = this.element.querySelector('.e-lower-canvas');\n        this.upperCanvas = this.element.querySelector('.e-upper-canvas');\n        this.lowerCanvas.id = this.element.id + '_lowerCanvas';\n        this.upperCanvas.id = this.element.id + '_upperCanvas';\n        this.textArea = this.element.querySelector('.e-textbox');\n        this.inMemoryCanvas = this.createElement('canvas', {\n            id: this.element.id + '_inMemoryCanvas', attrs: { name: 'canvasImage' }\n        });\n        this.upperCanvas.width = this.lowerCanvas.width = this.inMemoryCanvas.width = this.element.offsetWidth;\n        this.upperCanvas.height = this.lowerCanvas.height = this.inMemoryCanvas.height = (this.element.offsetHeight - this.toolbarHeight);\n        this.baseImg = this.createElement('img', {\n            id: this.element.id + '_orgImg', attrs: { name: 'Image', crossorigin: 'anonymous' }\n        });\n        this.lowerContext = this.lowerCanvas.getContext('2d');\n        this.baseImg = this.createElement('img', {\n            id: this.element.id + '_orgImg', attrs: { name: 'Image', crossorigin: 'anonymous' }\n        });\n        this.upperContext = this.upperCanvas.getContext('2d');\n        this.inMemoryContext = this.inMemoryCanvas.getContext('2d');\n        if (dotnetRef) {\n            this.dotNetRef = dotnetRef;\n        }\n        this.prerender();\n        this.wireEvent();\n        this.lowerContext.filter = this.getDefaultFilter();\n        this.notify('filter', { prop: 'setAdjustmentValue', onPropertyChange: false, value: { adjustmentValue: this.lowerContext.filter } });\n        this.canvasFilter = this.initialAdjustmentValue = this.lowerContext.filter;\n        if (this.cssClass) {\n            addClass([this.element], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n        if (this.element) {\n            createSpinner({\n                target: this.element\n            });\n        }\n        this.initializeZoomSettings();\n    };\n    ImageEditor.prototype.prerender = function () {\n        // pre render code snippets\n        this.element.id = this.element.id || getUniqueID('ej2-image-editor');\n        if (Browser.isDevice) {\n            this.element.classList.add('e-device');\n        }\n        this.initializeThemeColl();\n    };\n    ImageEditor.prototype.initializeZoomSettings = function () {\n        if (isNullOrUndefined(this.zoomSettings.zoomTrigger)) {\n            this.zoomSettings.zoomTrigger = (ZoomTrigger.MouseWheel | ZoomTrigger.Pinch | ZoomTrigger.Toolbar | ZoomTrigger.Commands);\n        }\n        if (isNullOrUndefined(this.selectionSettings.strokeColor)) {\n            this.selectionSettings.strokeColor = this.themeColl[this.theme]['primaryColor'];\n        }\n        if (isNullOrUndefined(this.selectionSettings.fillColor)) {\n            this.selectionSettings.fillColor = this.themeColl[this.theme]['secondaryColor'];\n        }\n    };\n    ImageEditor.prototype.initializeThemeColl = function () {\n        this.themeColl = {\n            Bootstrap5: { primaryColor: '#0d6efd', secondaryColor: '#fff' },\n            Bootstrap5Dark: { primaryColor: '#0d6efd', secondaryColor: '#fff' },\n            Tailwind: { primaryColor: '#4f46e5', secondaryColor: '#fff' },\n            TailwindDark: { primaryColor: '#22d3ee', secondaryColor: '#fff' },\n            Fluent: { primaryColor: '#0078d4', secondaryColor: '#fff' },\n            FluentDark: { primaryColor: '#0078d4', secondaryColor: '#fff' },\n            Bootstrap4: { primaryColor: '#007bff', secondaryColor: '#fff' },\n            Bootstrap: { primaryColor: '#317ab9', secondaryColor: '#fff' },\n            BootstrapDark: { primaryColor: '#317ab9', secondaryColor: '#fff' },\n            Material: { primaryColor: '#e3165b', secondaryColor: '#fff' },\n            MaterialDark: { primaryColor: '#00b0ff', secondaryColor: '#fff' },\n            Fabric: { primaryColor: '#0078d6', secondaryColor: '#fff' },\n            FabricDark: { primaryColor: '#0074cc', secondaryColor: '#fff' },\n            Highcontrast: { primaryColor: '#000000', secondaryColor: '#fff' },\n            Material3: { primaryColor: '#6750a4', secondaryColor: '#fff' },\n            Material3Dark: { primaryColor: '#d0bcff', secondaryColor: '#fff' }\n        };\n    };\n    /**\n     * Get the square point for path.\n     *\n     * @param { HTMLDivElement } element - Specifies element.\n     * @param { string } type - Specifies the type.\n     * @param { string } value - Specifies the value.\n     * @hidden\n     * @private\n     * @returns {void}.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-empty-function\n    ImageEditor.prototype.updateToolbar = function (element, type, value) {\n    };\n    var ImageEditor_1;\n    __decorate([\n        Property('')\n    ], ImageEditor.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageEditor.prototype, \"disabled\", void 0);\n    __decorate([\n        Property('100%')\n    ], ImageEditor.prototype, \"height\", void 0);\n    __decorate([\n        Property('Bootstrap5')\n    ], ImageEditor.prototype, \"theme\", void 0);\n    __decorate([\n        Property()\n    ], ImageEditor.prototype, \"toolbar\", void 0);\n    __decorate([\n        Property()\n    ], ImageEditor.prototype, \"toolbarTemplate\", void 0);\n    __decorate([\n        Property('100%')\n    ], ImageEditor.prototype, \"width\", void 0);\n    __decorate([\n        Property(true)\n    ], ImageEditor.prototype, \"allowUndoRedo\", void 0);\n    __decorate([\n        Property(true)\n    ], ImageEditor.prototype, \"showQuickAccessToolbar\", void 0);\n    __decorate([\n        Property()\n    ], ImageEditor.prototype, \"quickAccessToolbarTemplate\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageEditor.prototype, \"isReadOnly\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageEditor.prototype, \"enableRtl\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageEditor.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Complex({}, FinetuneSettings)\n    ], ImageEditor.prototype, \"finetuneSettings\", void 0);\n    __decorate([\n        Complex({}, ZoomSettings)\n    ], ImageEditor.prototype, \"zoomSettings\", void 0);\n    __decorate([\n        Complex({}, SelectionSettings)\n    ], ImageEditor.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"beforeSave\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"zooming\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"panning\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"cropping\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"rotating\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"flipping\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"shapeChanging\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"selectionChanging\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"fileOpened\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"saved\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"toolbarCreated\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"toolbarUpdating\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"toolbarItemClicked\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"imageFiltering\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"finetuneValueChanging\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"click\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"quickAccessToolbarOpen\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"quickAccessToolbarItemClick\", void 0);\n    ImageEditor = ImageEditor_1 = __decorate([\n        NotifyPropertyChanges\n    ], ImageEditor);\n    return ImageEditor;\n}(Component));\nexport { ImageEditor };\n","/**\n * An enum representing the file types supported by the image editor.\n *\n * @enum {string}\n */\nexport var FileType;\n(function (FileType) {\n    /** The PNG file type. */\n    FileType[\"Png\"] = \"Png\";\n    /** The JPEG file type. */\n    FileType[\"Jpeg\"] = \"Jpeg\";\n    /** The SVG file type. */\n    FileType[\"Svg\"] = \"Svg\";\n})(FileType || (FileType = {}));\n/**\n * An enumeration representing the direction of an image editor operation.\n *\n * @enum {string}\n */\nexport var Direction;\n(function (Direction) {\n    /** The horizontal direction. */\n    Direction[\"Horizontal\"] = \"Horizontal\";\n    /** The vertical direction. */\n    Direction[\"Vertical\"] = \"Vertical\";\n})(Direction || (Direction = {}));\n/**\n * An enumeration representing the type of shape to be added in the image editor.\n *\n * @enum {string}\n */\nexport var ShapeType;\n(function (ShapeType) {\n    /** A rectangle shape. */\n    ShapeType[\"Rectangle\"] = \"Rectangle\";\n    /** An ellipse shape. */\n    ShapeType[\"Ellipse\"] = \"Ellipse\";\n    /** A line shape. */\n    ShapeType[\"Line\"] = \"Line\";\n    /** An arrow shape. */\n    ShapeType[\"Arrow\"] = \"Arrow\";\n    /** A path shape. */\n    ShapeType[\"Path\"] = \"Path\";\n    /** A text shape. */\n    ShapeType[\"Text\"] = \"Text\";\n    /** A freehand drawing shape. */\n    ShapeType[\"FreehandDraw\"] = \"FreehandDraw\";\n})(ShapeType || (ShapeType = {}));\n/**\n * An enumeration representing the different ways to trigger zooming in the image editor.\n *\n * @aspNumberEnum\n */\nexport var ZoomTrigger;\n(function (ZoomTrigger) {\n    /** Zooming triggered by mouse wheel. */\n    ZoomTrigger[ZoomTrigger[\"MouseWheel\"] = 1] = \"MouseWheel\";\n    /** Zooming triggered by pinch gesture. */\n    ZoomTrigger[ZoomTrigger[\"Pinch\"] = 2] = \"Pinch\";\n    /** Zooming triggered by command keys. */\n    ZoomTrigger[ZoomTrigger[\"Commands\"] = 4] = \"Commands\";\n    /** Zooming triggered by toolbar button click. */\n    ZoomTrigger[ZoomTrigger[\"Toolbar\"] = 8] = \"Toolbar\";\n})(ZoomTrigger || (ZoomTrigger = {}));\n/**\n * * An enum representing the available themes in the image editor.\n */\nexport var Theme;\n(function (Theme) {\n    /** The Bootstrap 5 theme. */\n    Theme[\"Bootstrap5\"] = \"Bootstrap5\";\n    /** The dark variant of the Bootstrap 5 theme. */\n    Theme[\"Bootstrap5Dark\"] = \"Bootstrap5Dark\";\n    /** The Tailwind CSS theme. */\n    Theme[\"Tailwind\"] = \"Tailwind\";\n    /** The dark variant of the Tailwind CSS theme. */\n    Theme[\"TailwindDark\"] = \"TailwindDark\";\n    /** The Fluent UI theme. */\n    Theme[\"Fluent\"] = \"Fluent\";\n    /** The dark variant of the Fluent UI theme. */\n    Theme[\"FluentDark\"] = \"FluentDark\";\n    /** The Bootstrap 4 theme. */\n    Theme[\"Bootstrap4\"] = \"Bootstrap4\";\n    /** The Bootstrap theme. */\n    Theme[\"Bootstrap\"] = \"Bootstrap\";\n    /** The dark variant of the Bootstrap theme. */\n    Theme[\"BootstrapDark\"] = \"BootstrapDark\";\n    /** The Material Design theme. */\n    Theme[\"Material\"] = \"Material\";\n    /** The dark variant of the Material Design theme. */\n    Theme[\"MaterialDark\"] = \"MaterialDark\";\n    /** The Fabric theme. */\n    Theme[\"Fabric\"] = \"Fabric\";\n    /** The dark variant of the Fabric theme. */\n    Theme[\"FabricDark\"] = \"FabricDark\";\n    /** The high contrast theme. */\n    Theme[\"Highcontrast\"] = \"Highcontrast\";\n})(Theme || (Theme = {}));\n/**\n * An enum representing the available toolbar commands in the image editor.\n */\nexport var ImageEditorCommand;\n(function (ImageEditorCommand) {\n    ImageEditorCommand[\"Crop\"] = \"Crop\";\n    ImageEditorCommand[\"Transform\"] = \"Transform\";\n    ImageEditorCommand[\"Annotate\"] = \"Annotate\";\n    ImageEditorCommand[\"ZoomIn\"] = \"ZoomIn\";\n    ImageEditorCommand[\"ZoomOut\"] = \"ZoomOut\";\n    ImageEditorCommand[\"Open\"] = \"Open\";\n    ImageEditorCommand[\"Reset\"] = \"Reset\";\n    ImageEditorCommand[\"Save\"] = \"Save\";\n    ImageEditorCommand[\"Pan\"] = \"Pan\";\n    ImageEditorCommand[\"Move\"] = \"Move\";\n    ImageEditorCommand[\"Pen\"] = \"Pen\";\n    ImageEditorCommand[\"Line\"] = \"Line\";\n    ImageEditorCommand[\"Arrow\"] = \"Arrow\";\n    ImageEditorCommand[\"Path\"] = \"Path\";\n    ImageEditorCommand[\"Rectangle\"] = \"Rectangle\";\n    ImageEditorCommand[\"Ellipse\"] = \"Ellipse\";\n    ImageEditorCommand[\"Text\"] = \"Text\";\n    ImageEditorCommand[\"CustomSelection\"] = \"CustomSelection\";\n    ImageEditorCommand[\"CircleSelection\"] = \"CircleSelection\";\n    ImageEditorCommand[\"SquareSelection\"] = \"SquareSelection\";\n    ImageEditorCommand[\"RatioSelection\"] = \"RatioSelection\";\n    ImageEditorCommand[\"RotateLeft\"] = \"RotateLeft\";\n    ImageEditorCommand[\"RotateRight\"] = \"RotateRight\";\n    ImageEditorCommand[\"FlipHorizontal\"] = \"FlipHorizontal\";\n    ImageEditorCommand[\"FlipVertical\"] = \"FlipVertical\";\n})(ImageEditorCommand || (ImageEditorCommand = {}));\n/**\n * An enumeration of available image filter options.\n *\n * @remarks\n * These options can be used with the `applyImageFilter` method of the image editor control to apply filters to an image.\n */\nexport var ImageFilterOption;\n(function (ImageFilterOption) {\n    /** Default filter */\n    ImageFilterOption[\"Default\"] = \"Default\";\n    /** Chrome filter */\n    ImageFilterOption[\"Chrome\"] = \"Chrome\";\n    /** Cold filter */\n    ImageFilterOption[\"Cold\"] = \"Cold\";\n    /** Warm filter */\n    ImageFilterOption[\"Warm\"] = \"Warm\";\n    /** Grayscale filter */\n    ImageFilterOption[\"Grayscale\"] = \"Grayscale\";\n    /** Sepia filter */\n    ImageFilterOption[\"Sepia\"] = \"Sepia\";\n    /** Invert filter */\n    ImageFilterOption[\"Invert\"] = \"Invert\";\n})(ImageFilterOption || (ImageFilterOption = {}));\n/**\n * An enumeration of available image finetune options.\n *\n * @remarks\n * These options can be used with the `finetuneImage` method of the image editor control to apply finetuning to an image.\n */\nexport var ImageFinetuneOption;\n(function (ImageFinetuneOption) {\n    /** Adjust the brightness of the image */\n    ImageFinetuneOption[\"Brightness\"] = \"Brightness\";\n    /** Adjust the contrast of the image */\n    ImageFinetuneOption[\"Contrast\"] = \"Contrast\";\n    /** Adjust the hue of the image */\n    ImageFinetuneOption[\"Hue\"] = \"Hue\";\n    /** Adjust the saturation of the image */\n    ImageFinetuneOption[\"Saturation\"] = \"Saturation\";\n    /** Adjust the exposure of the image */\n    ImageFinetuneOption[\"Exposure\"] = \"Exposure\";\n    /** Adjust the opacity of the image */\n    ImageFinetuneOption[\"Opacity\"] = \"Opacity\";\n    /** Adjust the blur of the image */\n    ImageFinetuneOption[\"Blur\"] = \"Blur\";\n})(ImageFinetuneOption || (ImageFinetuneOption = {}));\n/**\n * Specifies the type of arrowhead should be drawn.\n *\n */\nexport var ArrowheadType;\n(function (ArrowheadType) {\n    /** Indicates no arrowhead should be drawn. */\n    ArrowheadType[\"None\"] = \"None\";\n    /** Indicates a normal triangle-shaped arrowhead should be drawn. */\n    ArrowheadType[\"Arrow\"] = \"Arrow\";\n    /** Indicates a solid triangle-shaped arrowhead should be drawn. */\n    ArrowheadType[\"SolidArrow\"] = \"SolidArrow\";\n    /** Indicates a circular-shaped arrowhead should be drawn. */\n    ArrowheadType[\"Circle\"] = \"Circle\";\n    /** Indicates a solid circular-shaped arrowhead should be drawn. */\n    ArrowheadType[\"SolidCircle\"] = \"SolidCircle\";\n    /** Indicates a square-shaped arrowhead should be drawn. */\n    ArrowheadType[\"Square\"] = \"Square\";\n    /** Indicates a solid square-shaped arrowhead should be drawn. */\n    ArrowheadType[\"SolidSquare\"] = \"SolidSquare\";\n    /** Indicates a bar shaped arrowhead should be drawn. */\n    ArrowheadType[\"Bar\"] = \"Bar\";\n})(ArrowheadType || (ArrowheadType = {}));\n","import { extend, Browser, detach, select } from '@syncfusion/ej2-base';\nimport { EventHandler, getComponent, isNullOrUndefined, L10n } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { ColorPicker, Uploader, Slider } from '@syncfusion/ej2-inputs';\nimport { ZoomTrigger } from '../index';\nimport { hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nvar ToolbarModule = /** @class */ (function () {\n    function ToolbarModule(parent) {\n        this.defToolbarItems = [];\n        this.toolbarHeight = 46;\n        this.currToolbar = '';\n        this.preventZoomBtn = false;\n        this.currentToolbar = 'main';\n        this.selFhdColor = '#42a5f5';\n        this.preventEnableDisableUr = false;\n        this.parent = parent;\n        this.addEventListener();\n        this.initLocale();\n    }\n    ToolbarModule.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    ToolbarModule.prototype.addEventListener = function () {\n        this.parent.on('toolbar', this.toolbar, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    ToolbarModule.prototype.removeEventListener = function () {\n        this.parent.off('toolbar', this.toolbar);\n        this.parent.off('destroyed', this.destroy);\n    };\n    ToolbarModule.prototype.initLocale = function () {\n        this.defaultLocale = {\n            Crop: 'Crop',\n            ZoomIn: 'Zoom In',\n            ZoomOut: 'Zoom Out',\n            Undo: 'Undo',\n            Redo: 'Redo',\n            Transform: 'Transform',\n            Annotation: 'Annotation',\n            Finetune: 'Finetune',\n            Brightness: 'Brightness',\n            Contrast: 'Contrast',\n            Hue: 'Hue',\n            Saturation: 'Saturation',\n            Opacity: 'Opacity',\n            Blur: 'Blur',\n            Sharpen: 'Sharpen',\n            Exposure: 'Exposure',\n            Filter: 'Filter',\n            Default: 'Default',\n            Chrome: 'Chrome',\n            Cold: 'Cold',\n            Warm: 'Warm',\n            Grayscale: 'Grayscale',\n            BlackAndWhite: 'Black and White',\n            Sepia: 'Sepia',\n            Invert: 'Invert',\n            Text: 'Add Text',\n            Pen: 'Pen',\n            Reset: 'Reset',\n            Save: 'Save',\n            Select: 'Select',\n            RotateLeft: 'Rotate Left',\n            RotateRight: 'Rotate Right',\n            HorizontalFlip: 'Horizontal Flip',\n            VerticalFlip: 'Vertical Flip',\n            OK: 'OK',\n            Cancel: 'Cancel',\n            FillColor: 'Fill Color',\n            StrokeColor: 'Stroke Color',\n            StrokeWidth: 'Stroke Width',\n            FontFamily: 'Font Family',\n            FontStyle: 'Font Style',\n            FontSize: 'Font Size',\n            FontColor: 'Font Color',\n            Pan: 'Pan',\n            Move: 'Move',\n            Load: 'Load',\n            Custom: 'Custom',\n            Square: 'Square',\n            Circle: 'Circle',\n            Ellipse: 'Ellipse',\n            Rectangle: 'Rectangle',\n            Line: 'Line',\n            Arrow: 'Arrow',\n            Path: 'Path',\n            Bold: 'Bold',\n            Italic: 'Italic',\n            BoldItalic: 'Bold Italic',\n            XSmall: 'X-Small',\n            Small: 'Small',\n            Medium: 'Medium',\n            Large: 'Large',\n            XLarge: 'X-Large',\n            ABC: 'ABC',\n            Browse: 'Browse',\n            Duplicate: 'Duplicate',\n            Remove: 'Remove',\n            EditText: 'Edit Text',\n            Start: 'Start',\n            End: 'End',\n            Bar: 'Bar',\n            ArrowSolid: 'Arrow Solid',\n            CircleSolid: 'Circle Solid',\n            SquareSolid: 'Square Solid',\n            None: 'None',\n            CropAndTransform: 'Crop and Transform',\n            CropSelection: 'Crop Selection'\n        };\n        this.l10n = new L10n('image-editor', this.defaultLocale, this.parent.locale);\n    };\n    ToolbarModule.prototype.toolbar = function (args) {\n        var parent = this.parent;\n        this.updatePrivateVariables();\n        switch (args.prop) {\n            case 'create-toolbar':\n                this.createToolbar();\n                break;\n            case 'create-contextual-toolbar':\n                this.createContextualToolbar();\n                break;\n            case 'update-toolbar-items':\n                this.updateToolbarItems();\n                break;\n            case 'refresh-toolbar':\n                this.refreshToolbar(args.value['type'], args.value['isApplyBtn'], args.value['isCropping'], args.value['isZooming'], args.value['cType']);\n                break;\n            case 'renderQAT':\n                this.renderQAT(args.value['isPenEdit']);\n                break;\n            case 'enable-disable-btns':\n                this.enableDisableTbrBtn();\n                break;\n            case 'init-main-toolbar':\n                this.initMainToolbar(args.value['isApplyBtn'], args.value['isDevice'], args.value['isOkBtn']);\n                break;\n            case 'create-bottom-toolbar':\n                this.createBottomToolbar();\n                break;\n            case 'refresh-main-toolbar':\n                this.refreshMainToolbar();\n                break;\n            case 'create-qa-toolbar':\n                this.createQuickAccessToolbar();\n                break;\n            case 'destroy-qa-toolbar':\n                this.destroyQuickAccessToolbar();\n                break;\n            case 'zoom-up-handler':\n                this.zoomBtnMouseUpHandler();\n                break;\n            case 'refresh-dropdown-btn':\n                this.refreshDropDownBtn(args.value['isDisabled']);\n                break;\n            case 'close-contextual-toolbar':\n                this.closeContextualToolbar();\n                break;\n            case 'destroy-bottom-toolbar':\n                this.destroyBottomToolbar();\n                break;\n            case 'destroy-top-toolbar':\n                this.destroyTopToolbar();\n                break;\n            case 'destroySubComponents':\n                this.destroySubComponents();\n                break;\n            case 'setLocale':\n                this.l10n.setLocale(args.value['locale']);\n                break;\n            case 'setPreventZoomBtn':\n                this.preventZoomBtn = args.value['isPrevent'];\n                break;\n            case 'getToolbarHeight':\n                args.value['obj']['toolbarHeight'] = this.toolbarHeight;\n                break;\n            case 'setToolbarHeight':\n                this.toolbarHeight = args.value['height'];\n                break;\n            case 'setCurrentToolbar':\n                this.currentToolbar = args.value['type'];\n                break;\n            case 'setSelectedFreehandColor':\n                this.selFhdColor = args.value['color'];\n                break;\n            case 'getCurrentFilter':\n                args.value['obj']['currentFilter'] = parent.currentFilter;\n                break;\n            case 'setCurrentFilter':\n                parent.currentFilter = args.value['filter'];\n                break;\n            case 'setInitialAdjustmentValue':\n                parent.initialAdjustmentValue = args.value['value'];\n                break;\n            case 'getCanvasFilter':\n                args.value['obj']['canvasFilter'] = parent.canvasFilter;\n                break;\n            case 'setCanvasFilter':\n                parent.canvasFilter = args.value['filter'];\n                break;\n            case 'getDefToolbarItems':\n                args.value['obj']['defToolbarItems'] = this.defToolbarItems;\n                break;\n            case 'getPenStroke':\n                this.getPenStroke(args.value['value']);\n                break;\n            case 'performDefToolbarClickAction':\n                this.performDefTbrClick(args.value['type'], args.value['isContextualToolbar'], args.value['isDisabledAdjustment'], args.value['isDisabledFilter'], args.value['isFilterFinetune']);\n                break;\n            case 'setTempFilterProperties':\n                parent.setTempFilterProperties();\n                break;\n            case 'refreshSlider':\n                this.refreshSlider();\n                break;\n            case 'renderSlider':\n                this.renderSlider(args.value['type']);\n                break;\n            case 'getCurrAdjustmentValue':\n                parent.getCurrAdjustmentValue(args.value['type']);\n                break;\n            case 'setCurrAdjustmentValue':\n                parent.setCurrAdjustmentValue(args.value['type'], args.value['value']);\n                break;\n            case 'refreshShapeDrawing':\n                this.refreshShapeDrawing();\n                break;\n            case 'getCropToolbar':\n                args.value['obj']['isCropToolbar'] = parent.isCropToolbar;\n                break;\n            case 'getPrevCurrSelectionPoint':\n                args.value['obj']['prevCurrSelectionPoint'] = parent.prevCurrSelectionPoint;\n                break;\n            case 'setPrevCurrSelectionPoint':\n                parent.prevCurrSelectionPoint = args.value['point'];\n                break;\n            case 'updateCropTransformItems':\n                parent.updateCropTransformItems();\n                break;\n            case 'setEnableDisableUndoRedo':\n                this.preventEnableDisableUr = args.value['isPrevent'];\n                break;\n            case 'reset':\n                this.reset();\n                break;\n        }\n    };\n    ToolbarModule.prototype.updatePrivateVariables = function () {\n        var parent = this.parent;\n        this.inMemoryCanvas = parent.inMemoryCanvas;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n        if (parent.upperCanvas) {\n            this.upperContext = parent.upperCanvas.getContext('2d');\n        }\n        if (this.inMemoryCanvas) {\n            this.inMemoryContext = this.inMemoryCanvas.getContext('2d');\n        }\n    };\n    ToolbarModule.prototype.reset = function () {\n        var parent = this.parent;\n        this.defToolbarItems = [];\n        this.toolbarHeight = 46;\n        parent.prevCurrSelectionPoint = null;\n        this.zoomBtnHold = null;\n        this.currToolbar = '';\n        this.currentToolbar = 'main';\n        this.selFhdColor = '#42a5f5';\n        parent.currentFilter = '';\n        this.preventZoomBtn = parent.isCropToolbar = this.preventEnableDisableUr = false;\n        parent.initialAdjustmentValue = parent.canvasFilter =\n            'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n                'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n    };\n    ToolbarModule.prototype.destroyTopToolbar = function () {\n        var parent = this.parent;\n        var toolbar = document.getElementById(parent.element.id + '_toolbar');\n        if (this.isToolbar() && toolbar && toolbar.classList.contains('e-control')) {\n            getComponent(document.getElementById(parent.element.id + '_toolbar'), 'toolbar').destroy();\n        }\n    };\n    ToolbarModule.prototype.destroyBottomToolbar = function () {\n        var parent = this.parent;\n        var toolbar = document.getElementById(parent.element.id + '_bottomToolbar');\n        if (toolbar && toolbar.classList.contains('e-control')) {\n            getComponent(document.getElementById(parent.element.id + '_bottomToolbar'), 'toolbar').destroy();\n        }\n    };\n    ToolbarModule.prototype.isToolbar = function () {\n        var parent = this.parent;\n        return (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.length > 0)\n            || !isNullOrUndefined(parent.toolbarTemplate));\n    };\n    ToolbarModule.prototype.createToolbar = function () {\n        var _this = this;\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.length > 0)) {\n            parent.element.appendChild(parent.createElement('div', {\n                id: parent.element.id + '_toolbarArea', className: 'e-toolbar-area'\n            }));\n            var toolbarItems = { cssClass: 'e-image-upload', align: 'Left', type: 'Input',\n                tooltipText: this.l10n.getConstant('Browse'), template: new Uploader({ allowedExtensions: '.jpg, .jpeg, .png,.svg' }) };\n            if (isNullOrUndefined(this.defToolbarItems)) {\n                this.defToolbarItems = [];\n            }\n            this.defToolbarItems.push(toolbarItems);\n            var toolbarArea = document.getElementById(parent.element.id + '_toolbarArea');\n            var toolbar_1 = parent.createElement('div', {\n                id: parent.element.id + '_toolbar'\n            });\n            toolbarArea.appendChild(toolbar_1);\n            var uploadItems = [\n                {\n                    cssClass: 'e-image-upload',\n                    align: 'Left', type: 'Input',\n                    tooltipText: this.l10n.getConstant('Browse'),\n                    template: new Uploader({\n                        allowedExtensions: '.jpg, .jpeg, .png,.svg',\n                        selected: function () {\n                            if (!parent.disabled) {\n                                if (Browser.isDevice) {\n                                    if (_this.defToolbarItems.length > 0 &&\n                                        document.getElementById(parent.element.id + '_toolbar')) {\n                                        getComponent(document.getElementById(parent.element.id + '_toolbar'), 'toolbar').destroy();\n                                    }\n                                    if (document.getElementById(parent.element.id + '_bottomToolbar')) {\n                                        getComponent(document.getElementById(parent.element.id + '_bottomToolbar'), 'toolbar').destroy();\n                                    }\n                                    _this.initMainToolbar(false, Browser.isDevice, null);\n                                    _this.createBottomToolbar();\n                                }\n                                else {\n                                    if (_this.defToolbarItems.length > 0 &&\n                                        document.getElementById(parent.element.id + '_toolbar')) {\n                                        getComponent(document.getElementById(parent.element.id + '_toolbar'), 'toolbar').destroy();\n                                    }\n                                    _this.initMainToolbar(false, false, null);\n                                }\n                            }\n                        }\n                    })\n                }\n            ];\n            var toolbarObj = new Toolbar({ items: uploadItems, width: '100%',\n                created: function () {\n                    parent.trigger('toolbarCreated', { toolbarType: 'main' });\n                },\n                clicked: this.defToolbarClicked.bind(this) });\n            toolbarObj.appendTo('#' + parent.element.id + '_toolbar');\n            this.createLeftToolbarControls();\n            if (document.getElementById(parent.element.id + '_toolbar')) {\n                this.toolbarHeight = document.getElementById(parent.element.id + '_toolbar').clientHeight;\n            }\n        }\n        else {\n            this.toolbarHeight = 0;\n        }\n    };\n    ToolbarModule.prototype.createContextualToolbar = function () {\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.length > 0)) {\n            parent.element.appendChild(parent.createElement('div', { id: parent.element.id + '_contextualToolbarArea',\n                className: 'e-contextual-toolbar-wrapper e-hide', attrs: { style: 'position: absolute;' }\n            }));\n            var toolbarArea = document.getElementById(parent.element.id + '_contextualToolbarArea');\n            var toolbar_2 = parent.createElement('div', { id: parent.element.id + '_contextualToolbar' });\n            toolbarArea.appendChild(toolbar_2);\n        }\n    };\n    ToolbarModule.prototype.createBottomToolbar = function () {\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.length > 0)) {\n            parent.element.appendChild(parent.createElement('div', {\n                id: parent.element.id + '_bottomToolbarArea', className: 'e-bottom-toolbar'\n            }));\n            if (!parent.toolbarTemplate) {\n                document.getElementById(parent.element.id + '_canvasWrapper').style.height = (parent.element.offsetHeight\n                    - this.toolbarHeight * 2) - 3 + 'px';\n                var toolbarArea = document.getElementById(parent.element.id + '_bottomToolbarArea');\n                var toolbarElem = parent.createElement('div', {\n                    id: parent.element.id + '_bottomToolbar'\n                });\n                toolbarArea.appendChild(toolbarElem);\n            }\n            this.initBottomToolbar();\n        }\n    };\n    ToolbarModule.prototype.createQuickAccessToolbar = function () {\n        var parent = this.parent;\n        if (parent.showQuickAccessToolbar) {\n            var toolbarItems = { cssClass: 'e-image-upload', align: 'Left', type: 'Input',\n                tooltipText: this.l10n.getConstant('Browse'), template: new Uploader({ allowedExtensions: '.jpg, .jpeg, .png,.svg' }) };\n            if (isNullOrUndefined(this.defToolbarItems)) {\n                this.defToolbarItems = [];\n            }\n            this.defToolbarItems.push(toolbarItems);\n            var toolbarArea = document.getElementById(parent.element.id + '_quickAccessToolbarArea');\n            var toolbar_3 = parent.createElement('div', {\n                id: parent.element.id + '_quickAccessToolbar'\n            });\n            toolbarArea.appendChild(toolbar_3);\n            var toolbarObj = new Toolbar({ clicked: this.defToolbarClicked.bind(this) });\n            toolbarObj.appendTo('#' + parent.element.id + '_quickAccessToolbar');\n        }\n    };\n    ToolbarModule.prototype.initMainToolbar = function (isApplyOption, isDevice, isOkBtn) {\n        var _this = this;\n        var parent = this.parent;\n        if (this.isToolbar()) {\n            var leftItem = this.getLeftToolbarItem(isOkBtn);\n            var rightItem = this.getRightToolbarItem(isOkBtn);\n            var mainItem = this.getMainToolbarItem(isApplyOption);\n            var zoomItem = this.getZoomToolbarItem();\n            if (isDevice) {\n                this.defToolbarItems = leftItem.concat(rightItem);\n            }\n            else {\n                this.defToolbarItems = leftItem.concat(mainItem, rightItem, zoomItem);\n            }\n            var toolbarObj = new Toolbar({\n                width: '100%',\n                items: this.defToolbarItems,\n                clicked: this.defToolbarClicked.bind(this),\n                created: function () {\n                    if (!isDevice) {\n                        _this.renderAnnotationBtn();\n                    }\n                    _this.wireZoomBtnEvents();\n                    _this.renderSaveBtn();\n                    parent.trigger('toolbarCreated', { toolbarType: 'main' });\n                }\n            });\n            toolbarObj.appendTo('#' + parent.element.id + '_toolbar');\n            this.createLeftToolbarControls();\n            this.enableDisableTbrBtn();\n            if (this.isToolbar() && document.getElementById(parent.element.id + '_toolbar')) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                var toolbar_4 = getComponent(parent.element.id + '_toolbar', 'toolbar');\n                toolbar_4.refreshOverflow();\n            }\n        }\n    };\n    ToolbarModule.prototype.initBottomToolbar = function () {\n        var _this = this;\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.length > 0)) {\n            var items = this.getMainToolbarItem();\n            var toolbarObj = new Toolbar({ items: items, width: '100%',\n                created: function () {\n                    _this.renderAnnotationBtn();\n                    _this.renderCropBtn();\n                    _this.renderTransformBtn();\n                    parent.trigger('toolbarCreated', { toolbarType: 'main' });\n                },\n                clicked: this.defToolbarClicked.bind(this)\n            });\n            toolbarObj.appendTo('#' + parent.element.id + '_bottomToolbar');\n            if (this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_bottomToolbar')) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                var toolbar_5 = getComponent(parent.element.id + '_bottomToolbar', 'toolbar');\n                toolbar_5.refreshOverflow();\n            }\n        }\n    };\n    ToolbarModule.prototype.getLeftToolbarItem = function (isOkBtn) {\n        var parent = this.parent;\n        var toolbarItems = [];\n        if (!isOkBtn) {\n            toolbarItems.push({ id: parent.element.id + '_upload', cssClass: 'e-image-upload', align: 'Left', type: 'Input', template: new Uploader({ allowedExtensions: '.jpg, .jpeg, .png,.svg' }) });\n            toolbarItems.push({ visible: false, cssClass: 'e-image-position e-btn e-flat', tooltipText: this.l10n.getConstant('Browse'), align: 'Left' });\n        }\n        if (parent.allowUndoRedo) {\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Undo') > -1)) {\n                toolbarItems.push({ id: parent.element.id + '_undo', prefixIcon: 'e-icons e-undo', cssClass: 'top-icon e-undo',\n                    tooltipText: this.l10n.getConstant('Undo'), align: 'Left' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Redo') > -1)) {\n                toolbarItems.push({ id: parent.element.id + '_redo', prefixIcon: 'e-icons e-redo', cssClass: 'top-icon e-redo',\n                    tooltipText: this.l10n.getConstant('Redo'), align: 'Left' });\n            }\n        }\n        if (!this.preventZoomBtn && (parent.zoomSettings.zoomTrigger & ZoomTrigger.Toolbar) === ZoomTrigger.Toolbar) {\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('ZoomOut') > -1)) {\n                toolbarItems.push({ id: parent.element.id + '_zoomOut', prefixIcon: 'e-icons e-zoom-out', cssClass: 'top-icon e-dec-zoom',\n                    tooltipText: this.l10n.getConstant('ZoomOut'), align: 'Left' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('ZoomIn') > -1)) {\n                toolbarItems.push({ id: parent.element.id + '_zoomIn', prefixIcon: 'e-icons e-zoom-in', cssClass: 'top-icon e-inc-zoom',\n                    tooltipText: this.l10n.getConstant('ZoomIn'), align: 'Left' });\n            }\n        }\n        var tempToolbarItems = this.processToolbar('left');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getRightToolbarItem = function (isOkBtn) {\n        var parent = this.parent;\n        var toolbarItems = [];\n        if (isOkBtn) {\n            toolbarItems.push({ id: parent.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: parent.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Reset') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_reset', prefixIcon: 'e-icons e-btn-reset', cssClass: 'top-icon e-img-reset',\n                tooltipText: this.l10n.getConstant('Reset'), align: 'Right' });\n        }\n        if (!isOkBtn) {\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Save') > -1)) {\n                toolbarItems.push({ id: parent.element.id + '_save', prefixIcon: 'e-icons e-btn-save', cssClass: 'top-icon e-save',\n                    tooltipText: this.l10n.getConstant('Save'), align: 'Right', template: '<button id=\"' + parent.element.id + '_saveBtn\"></button>' });\n            }\n        }\n        var tempToolbarItems = this.processToolbar('right');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getMainToolbarItem = function (isApplyOption) {\n        var parent = this.parent;\n        var toolbarItems = [];\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Crop') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_cropTransform', prefixIcon: 'e-icons e-crop', cssClass: 'top-icon e-crop',\n                tooltipText: this.l10n.getConstant('CropAndTransform'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Annotate') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_annotation', tooltipText: this.l10n.getConstant('Annotation'), align: 'Center',\n                template: '<button id=\"' + parent.element.id + '_annotationBtn\"></button>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Finetune') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_adjustment', prefixIcon: 'e-icons e-adjustment', cssClass: 'top-icon e-adjustment',\n                tooltipText: this.l10n.getConstant('Finetune'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Filter') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_filter', prefixIcon: 'e-icons e-filters', cssClass: 'top-icon e-filters',\n                tooltipText: this.l10n.getConstant('Filter'), align: 'Center' });\n        }\n        var tempToolbarItems = this.processToolbar('center');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (isApplyOption) {\n            toolbarItems.push({ id: parent.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: parent.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getZoomToolbarItem = function () {\n        var toolbarItems = [];\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.updateContextualToolbar = function (type, cType) {\n        var parent = this.parent;\n        var toolbarArea = parent.element.querySelector('#' + parent.element.id + '_toolbarArea');\n        var contextualToolbarArea = parent.element.querySelector('#' + parent.element.id + '_contextualToolbarArea');\n        contextualToolbarArea.classList.remove('e-hide');\n        contextualToolbarArea.style.left = toolbarArea.offsetLeft + 'px';\n        if (type === 'filter') {\n            if (document.getElementById(parent.element.id + '_toolbar') && this.defToolbarItems.length > 0) {\n                getComponent(document.getElementById(parent.element.id + '_toolbar'), 'toolbar').destroy();\n            }\n            if (Browser.isDevice) {\n                this.initMainToolbar(false, true, true);\n            }\n            else {\n                this.initMainToolbar(true, null, null);\n            }\n            this.refreshSlider();\n            this.initFilterToolbarItem();\n        }\n        else {\n            if (document.querySelector('#' + parent.element.id + '_contextualToolbar').classList.contains('e-control')) {\n                getComponent(document.getElementById(parent.element.id + '_contextualToolbar'), 'toolbar').destroy();\n            }\n            this.refreshSlider();\n            this.renderSlider(cType);\n        }\n        if (Browser.isDevice) {\n            var cHt = contextualToolbarArea.offsetHeight;\n            var ht = parent.element.querySelector('#' + parent.element.id + '_canvasWrapper').offsetHeight;\n            contextualToolbarArea.style.top = this.toolbarHeight + ht - cHt + 'px';\n        }\n        else {\n            contextualToolbarArea.style.top = this.toolbarHeight + 'px';\n        }\n    };\n    ToolbarModule.prototype.processToolbar = function (position) {\n        var parent = this.parent;\n        var toolbarItems = [];\n        if (parent.toolbar) {\n            for (var i = 0, len = parent.toolbar.length; i < len; i++) {\n                if (typeof (parent.toolbar[i]) === 'object') {\n                    if (isNullOrUndefined(parent.toolbar[i].align)) {\n                        if (position === 'left') {\n                            toolbarItems.push(parent.toolbar[i]);\n                        }\n                    }\n                    else if (parent.toolbar[i].align.toLowerCase() === position) {\n                        toolbarItems.push(parent.toolbar[i]);\n                    }\n                }\n            }\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.processSubToolbar = function (items) {\n        var toolbarItems = [];\n        if (items) {\n            for (var i = 0, len = items.length; i < len; i++) {\n                if (typeof (items[i]) === 'object') {\n                    items[i].align = 'Center';\n                    toolbarItems.push(items[i]);\n                }\n            }\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.wireZoomBtnEvents = function () {\n        var zoomIn = document.querySelector('#' + this.parent.element.id + '_zoomIn');\n        var zoomOut = document.querySelector('#' + this.parent.element.id + '_zoomOut');\n        if (zoomIn) {\n            zoomIn.addEventListener('mousedown', this.zoomInBtnMouseDownHandler.bind(this));\n            zoomIn.addEventListener('mouseup', this.zoomBtnMouseUpHandler.bind(this));\n            zoomIn.addEventListener('click', this.zoomInBtnClickHandler.bind(this));\n            zoomIn.addEventListener('touchstart', this.zoomInBtnClickHandler.bind(this));\n        }\n        if (zoomOut) {\n            zoomOut.addEventListener('mousedown', this.zoomOutBtnMouseDownHandler.bind(this));\n            zoomOut.addEventListener('mouseup', this.zoomBtnMouseUpHandler.bind(this));\n            zoomOut.addEventListener('click', this.zoomOutBtnClickHandler.bind(this));\n            zoomIn.addEventListener('touchstart', this.zoomInBtnClickHandler.bind(this));\n        }\n    };\n    ToolbarModule.prototype.enableDisableTbrBtn = function () {\n        var parent = this.parent;\n        if (!this.preventEnableDisableUr) {\n            var object = { appliedUndoRedoColl: [] };\n            parent.notify('undo-redo', { prop: 'getAppliedUndoRedoColl', value: { obj: object } });\n            var undoRedoObj = { undoRedoStep: null };\n            parent.notify('undo-redo', { prop: 'getUndoRedoStep', value: { obj: undoRedoObj } });\n            var undo = document.querySelector('#' + parent.element.id + '_undo');\n            if (undo && undoRedoObj['undoRedoStep'] === 0) {\n                undo.classList.add('e-disabled');\n                undo.parentElement.classList.add('e-overlay');\n            }\n            else if (undo && undoRedoObj['undoRedoStep'] > 0) {\n                undo.classList.remove('e-disabled');\n                undo.parentElement.classList.remove('e-overlay');\n            }\n            var redo = document.querySelector('#' + parent.element.id + '_redo');\n            if (redo && (undoRedoObj['undoRedoStep'] === object['appliedUndoRedoColl'].length)) {\n                redo.classList.add('e-disabled');\n                redo.parentElement.classList.add('e-overlay');\n            }\n            else if (redo && (undoRedoObj['undoRedoStep'] === 0 && object['appliedUndoRedoColl'].length > 0)) {\n                redo.classList.remove('e-disabled');\n                redo.parentElement.classList.remove('e-overlay');\n            }\n            else if (redo && undoRedoObj['undoRedoStep'] > 0) {\n                redo.classList.remove('e-disabled');\n                redo.parentElement.classList.remove('e-overlay');\n            }\n        }\n        var zoomIn = document.querySelector('#' + parent.element.id + '_zoomIn');\n        if (zoomIn && parent.zoomSettings.zoomFactor >= parent.zoomSettings.maxZoomFactor) {\n            zoomIn.classList.add('e-disabled');\n            zoomIn.parentElement.classList.add('e-overlay');\n        }\n        else if (zoomIn) {\n            zoomIn.classList.remove('e-disabled');\n            zoomIn.parentElement.classList.remove('e-overlay');\n        }\n        var zoomOut = document.querySelector('#' + parent.element.id + '_zoomOut');\n        if (zoomOut && parent.zoomSettings.zoomFactor <= parent.zoomSettings.minZoomFactor) {\n            zoomOut.classList.add('e-disabled');\n            zoomOut.parentElement.classList.add('e-overlay');\n        }\n        else if (zoomOut) {\n            zoomOut.classList.remove('e-disabled');\n            zoomOut.parentElement.classList.remove('e-overlay');\n        }\n        var pan = document.querySelector('#' + parent.element.id + '_pan');\n        if (pan && parent.zoomSettings.zoomFactor <= parent.zoomSettings.minZoomFactor) {\n            pan.style.display = 'none';\n        }\n        else if (pan) {\n            pan.style.display = 'block';\n        }\n    };\n    ToolbarModule.prototype.createLeftToolbarControls = function () {\n        var parent = this.parent;\n        if (this.defToolbarItems !== undefined && this.defToolbarItems.length > 0 &&\n            (document.getElementById(parent.element.id + '_toolbar'))) {\n            var uploadDiv = document.getElementById(parent.element.id + '_toolbar')\n                .querySelector('.e-image-upload');\n            if (uploadDiv) {\n                var uploadElem = uploadDiv.getElementsByTagName('input')[0];\n                var uploadBtnElem = uploadDiv.getElementsByTagName('button')[0];\n                uploadBtnElem.className = 'e-tbar-btn e-tbtn-txt top-icon';\n                uploadBtnElem.innerHTML = '';\n                uploadBtnElem.appendChild(parent.createElement('span', {\n                    className: 'e-btn-icon e-icons e-upload-icon e-icon-left'\n                }));\n                uploadElem.onchange = this.fileSelect.bind(this, uploadElem);\n            }\n        }\n    };\n    ToolbarModule.prototype.fileSelect = function (inputElement, args) {\n        this.parent.notify('draw', { prop: 'fileSelect', value: { inputElement: inputElement, args: args } });\n    };\n    ToolbarModule.prototype.renderAnnotationBtn = function (isContextualToolbar) {\n        var _this = this;\n        var parent = this.parent;\n        var items = [];\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Pen') > -1)) {\n            items.push({ text: this.l10n.getConstant('Pen'), id: 'pen', iconCss: 'e-icons e-free-pen' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Line') > -1)) {\n            items.push({ text: this.l10n.getConstant('Line'), id: 'line', iconCss: 'e-icons e-line' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Rectangle') > -1)) {\n            items.push({ text: this.l10n.getConstant('Rectangle'), id: 'rectangle', iconCss: 'e-icons e-rectangle' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Ellipse') > -1)) {\n            items.push({ text: this.l10n.getConstant('Ellipse'), id: 'ellipse', iconCss: 'e-icons e-circle' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Arrow') > -1)) {\n            items.push({ text: this.l10n.getConstant('Arrow'), id: 'arrow', iconCss: 'e-icons e-arrow-right-up' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Path') > -1)) {\n            items.push({ text: this.l10n.getConstant('Path'), id: 'path', iconCss: 'e-icons e-critical-path' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Text') > -1)) {\n            items.push({ text: this.l10n.getConstant('Text'), id: 'text', iconCss: 'e-icons e-add-text' });\n        }\n        var obj = { freehandDrawSelectedId: null };\n        parent.notify('freehand-draw', { prop: 'getFreehandDrawSelectedId', onPropertyChange: false, value: { obj: obj } });\n        var duplicateElement = document.querySelector('#' + parent.element.id + '_duplicate');\n        var removeElement = document.querySelector('#' + parent.element.id + '_remove');\n        var editTextElement = document.querySelector('#' + parent.element.id + '_editText');\n        if ((parent.activeObj.activePoint.width === 0 && parent.activeObj.activePoint.height === 0) &&\n            (isNullOrUndefined(parent.activeObj.pointColl) || (parent.activeObj.pointColl\n                && parent.activeObj.pointColl.length === 0)) &&\n            isNullOrUndefined(obj['freehandDrawSelectedId'])) {\n            if (duplicateElement) {\n                duplicateElement.classList.add('e-disabled');\n            }\n            if (removeElement) {\n                removeElement.classList.add('e-disabled');\n            }\n            if (editTextElement) {\n                editTextElement.classList.add('e-disabled');\n            }\n        }\n        else {\n            if (duplicateElement) {\n                duplicateElement.classList.remove('e-disabled');\n            }\n            if (removeElement) {\n                removeElement.classList.remove('e-disabled');\n            }\n            if (editTextElement) {\n                editTextElement.classList.remove('e-disabled');\n            }\n        }\n        var iconCss = isContextualToolbar ? this.getCurrentShapeIcon(parent.activeObj.shape) : 'e-annotation';\n        var drpDownBtn = new DropDownButton({ items: items, iconCss: 'e-icons ' + iconCss,\n            cssClass: 'e-image-popup',\n            open: function (args) {\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                if (parent.activeObj.shape) {\n                    document.getElementById(parent.activeObj.shape).classList.add('e-selected');\n                }\n                else if (parent.togglePen) {\n                    document.getElementById('pen').classList.add('e-selected');\n                }\n            },\n            select: function (args) {\n                parent.okBtn();\n                var isCropSelection = false;\n                var splitWords;\n                if (parent.activeObj.shape !== undefined) {\n                    splitWords = parent.activeObj.shape.split('-');\n                }\n                if (splitWords === undefined && parent.currObjType.isCustomCrop) {\n                    isCropSelection = true;\n                }\n                else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                    isCropSelection = true;\n                }\n                parent.currObjType.isCustomCrop = false;\n                if (isCropSelection || parent.togglePan) {\n                    parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                    _this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                    _this.refreshToolbar('main');\n                }\n                var obj = { currentFreehandDrawIndex: null };\n                parent.notify('freehand-draw', { prop: 'getCurrentFreehandDrawIndex', value: { obj: obj } });\n                drpDownBtn.iconCss = 'e-icons ' + _this.getCurrentShapeIcon(args.item.id);\n                switch (args.item.id) {\n                    case 'pen':\n                        parent.notify('draw', { prop: 'setTempFreehandCounter', value: { tempFreehandCounter: parent.freehandCounter } });\n                        parent.notify('draw', { prop: 'setTempCurrentFreehandDrawIndex', value: { tempCurrentFreehandDrawIndex: obj['currentFreehandDrawIndex'] } });\n                        _this.currentToolbar = 'pen';\n                        parent.freeHandDraw(true);\n                        break;\n                    case 'text':\n                        _this.currentToolbar = 'text';\n                        parent.notify('shape', { prop: 'draw-shape-text' });\n                        // this.setInitialShapeSettings(args);\n                        // parent.activeObj.textFlip = parent.transform.currFlipState;\n                        // parent.notify('selection', {prop: 'annotate', value: {shape: args.item.id }});\n                        // parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: {type: 'text',\n                        //     isApplyBtn: null, isCropping: null, isZooming: null, cType: null}});\n                        break;\n                    default:\n                        _this.currentToolbar = 'shapes';\n                        /// parent.notify('shape', { prop: 'draw-shape', value: {obj: (args.item.id).toLowerCase()}});\n                        _this.setInitialShapeSettings(args);\n                        parent.notify('selection', { prop: 'annotate', value: { shape: args.item.id } });\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        break;\n                }\n                _this.updateToolbarItems();\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + parent.element.id + '_annotationBtn');\n    };\n    ToolbarModule.prototype.renderCropBtn = function () {\n        var _this = this;\n        var parent = this.parent;\n        var items = [];\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('CustomSelection') > -1)) {\n            items.push({ text: this.l10n.getConstant('Custom'), id: 'custom', iconCss: 'e-icons e-custom' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('CircleSelection') > -1)) {\n            items.push({ text: this.l10n.getConstant('Circle'), id: 'circle', iconCss: 'e-icons e-circle' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('SquareSelection') > -1)) {\n            items.push({ text: this.l10n.getConstant('Square'), id: 'square', iconCss: 'e-icons e-square' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('RatioSelection') > -1)) {\n            items.push({ text: '3:2', id: '3:2', iconCss: 'e-icons e-custom-a' });\n            items.push({ text: '4:3', id: '4:3', iconCss: 'e-icons e-custom-b' });\n            items.push({ text: '5:4', id: '5:4', iconCss: 'e-icons e-custom-c' });\n            items.push({ text: '7:5', id: '7:5', iconCss: 'e-icons e-custom-d' });\n            items.push({ text: '16:9', id: '16:9', iconCss: 'e-icons e-custom-e' });\n        }\n        var iconCss;\n        var shape;\n        if (parent.activeObj.shape) {\n            iconCss = this.getCurrentShapeIcon(parent.activeObj.shape);\n            shape = parent.activeObj.shape;\n        }\n        else if (parent.currSelectionPoint) {\n            iconCss = this.getCurrentShapeIcon(parent.currSelectionPoint.shape);\n            shape = parent.currSelectionPoint.shape;\n        }\n        else {\n            iconCss = 'e-custom';\n            shape = 'custom';\n        }\n        var drpDownBtn = new DropDownButton({\n            open: function (args) {\n                if (parent.togglePan) {\n                    _this.cancelPan();\n                }\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                if (parent.activeObj.shape && parent.activeObj.shape.split('-').length > 1) {\n                    document.getElementById(parent.activeObj.shape.split('-')[1]).classList.add('e-selected');\n                }\n                parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n            },\n            items: items,\n            select: function (args) {\n                _this.cropSelect(args);\n                drpDownBtn.iconCss = 'e-icons ' + _this.getCurrentShapeIcon('crop-' + args.item.id);\n                drpDownBtn.content = parent.toPascalCase(args.item.id);\n            },\n            iconCss: 'e-icons ' + iconCss, cssClass: 'e-image-popup',\n            content: parent.toPascalCase(shape.replace('crop-', ''))\n        });\n        drpDownBtn.appendTo('#' + parent.element.id + '_cropBtn');\n    };\n    ToolbarModule.prototype.renderTransformBtn = function () {\n        var parent = this.parent;\n        var items = [];\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('RotateLeft') > -1)) {\n            items.push({ text: this.l10n.getConstant('RotateLeft'), id: 'rotateleft', iconCss: 'e-icons e-anti-clock-wise' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('RotateRight') > -1)) {\n            items.push({ text: this.l10n.getConstant('RotateRight'), id: 'rotateright', iconCss: 'e-icons e-clock-wise' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('FlipHorizontal') > -1)) {\n            items.push({ text: this.l10n.getConstant('HorizontalFlip'), id: 'horizontalflip', iconCss: 'e-icons e-horizontal-flip' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('FlipVertical') > -1)) {\n            items.push({ text: this.l10n.getConstant('VerticalFlip'), id: 'verticalflip', iconCss: 'e-icons e-vertical-flip' });\n        }\n        var drpDownBtn = new DropDownButton({\n            open: function (args) {\n                if (Browser.isDevice) {\n                    var ht = args.element.parentElement.offsetHeight;\n                    args.element.parentElement.style.display = 'none';\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        ht + 'px';\n                    args.element.parentElement.style.display = 'block';\n                }\n            },\n            items: items, select: parent.transformSelect.bind(this),\n            iconCss: 'e-icons e-transform', cssClass: 'e-image-popup'\n        });\n        drpDownBtn.appendTo('#' + parent.element.id + '_transformBtn');\n    };\n    ToolbarModule.prototype.renderSaveBtn = function () {\n        var parent = this.parent;\n        var saveItems = [\n            { text: 'JPEG', id: 'jpeg' },\n            { text: 'PNG', id: 'png' },\n            { text: 'SVG', id: 'svg' }\n        ];\n        var ddbElem = document.getElementById(parent.element.id + '_saveBtn');\n        if (ddbElem) {\n            // Initialize the DropDownButton component.\n            var saveDrpDownBtn = new DropDownButton({ items: saveItems, cssClass: 'e-caret-hide e-image-popup', iconCss: 'e-icons e-save',\n                select: function (args) {\n                    parent.export(args.item.text);\n                }\n            });\n            saveDrpDownBtn.appendTo('#' + parent.element.id + '_saveBtn');\n        }\n    };\n    ToolbarModule.prototype.getCropTransformToolbarItem = function () {\n        var parent = this.parent;\n        var toolbarItems = [];\n        toolbarItems.push({ id: parent.element.id + '_crop', tooltipText: this.l10n.getConstant('CropSelection'), align: 'Center',\n            template: '<button id=\"' + parent.element.id + '_cropBtn\"></button>'\n        });\n        toolbarItems.push({ align: 'Center', type: 'Separator' });\n        toolbarItems.push({ id: parent.element.id + '_rotateLeft', prefixIcon: 'e-icons e-anti-clock-wise',\n            tooltipText: this.l10n.getConstant('RotateLeft'), align: 'Center' });\n        toolbarItems.push({ id: parent.element.id + '_rotateRight', prefixIcon: 'e-icons e-clock-wise',\n            tooltipText: this.l10n.getConstant('RotateRight'), align: 'Center' });\n        toolbarItems.push({ align: 'Center', type: 'Separator' });\n        toolbarItems.push({ id: parent.element.id + '_horizontalFlip', prefixIcon: 'e-icons e-horizontal-flip',\n            tooltipText: this.l10n.getConstant('HorizontalFlip'), align: 'Center' });\n        toolbarItems.push({ id: parent.element.id + '_verticalFlip', prefixIcon: 'e-icons e-vertical-flip',\n            tooltipText: this.l10n.getConstant('VerticalFlip'), align: 'Center' });\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: parent.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: parent.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getShapesToolbarItem = function (items) {\n        var parent = this.parent;\n        var toolbarItems = [];\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar)) {\n            toolbarItems.push({ id: parent.element.id + '_annotation', tooltipText: this.l10n.getConstant('Annotation'), align: 'Center',\n                template: '<button id=\"' + parent.element.id + '_annotationBtn\"></button>' });\n        }\n        if (items.indexOf('fillColor') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: parent.element.id + '_fillcolor',\n                cssClass: 'top-icon e-fill', tooltipText: this.l10n.getConstant('FillColor'), align: 'Center', type: 'Input',\n                template: '<button id=\"' + parent.element.id + '_fillColorBtn\"></button>' });\n        }\n        if (items.indexOf('strokeColor') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: parent.element.id + '_strokecolor',\n                cssClass: 'top-icon e-stroke', tooltipText: this.l10n.getConstant('StrokeColor'), align: 'Center', type: 'Input',\n                template: '<button id=\"' + parent.element.id + '_borderColorBtn\"></button>' });\n        }\n        if (items.indexOf('strokeWidth') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_strokeWidth', cssClass: 'top-icon e-size', tooltipText: 'Stroke Width', align: 'Center',\n                type: 'Input', template: '<button id=\"' + parent.element.id + '_borderWidthBtn\"></button>' });\n        }\n        if (items.indexOf('start') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_start', cssClass: 'top-icon e-size', tooltipText: 'Start', align: 'Center',\n                type: 'Input', template: '<button id=\"' + parent.element.id + '_startBtn\"></button>' });\n        }\n        if (items.indexOf('end') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_end', cssClass: 'top-icon e-size', tooltipText: 'End', align: 'Center',\n                type: 'Input', template: '<button id=\"' + parent.element.id + '_endBtn\"></button>' });\n        }\n        toolbarItems.push({ align: 'Center', type: 'Separator' });\n        if (items.indexOf('duplicate') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_duplicate', prefixIcon: 'e-icons e-order', cssClass: 'top-icon e-order',\n                tooltipText: this.l10n.getConstant('Duplicate'), align: 'Center' });\n        }\n        if (items.indexOf('remove') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_remove', prefixIcon: 'e-icons e-trash', cssClass: 'top-icon e-trash',\n                tooltipText: this.l10n.getConstant('Remove'), align: 'Center' });\n        }\n        if (items.indexOf('text') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_editText', prefixIcon: 'e-icons e-annotation-edit', cssClass: 'top-icon e-annotation-edit',\n                tooltipText: this.l10n.getConstant('EditText'), align: 'Center' });\n        }\n        var tempToolbarItems = this.processSubToolbar(items);\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            var obj = { shape: null };\n            parent.notify('selection', { prop: 'getCurrentDrawingShape', value: { obj: obj } });\n            if (obj['shape'] !== 'path') {\n                toolbarItems.push({ id: parent.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                    tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n                toolbarItems.push({ id: parent.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                    tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n            }\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.initCropTransformToolbar = function () {\n        var _this = this;\n        var parent = this.parent;\n        var leftItem = this.getLeftToolbarItem();\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getCropTransformToolbarItem();\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.renderCropBtn();\n                _this.wireZoomBtnEvents();\n                if (!Browser.isDevice) {\n                    _this.renderSaveBtn();\n                }\n                parent.trigger('toolbarCreated', { toolbarType: 'shapes' });\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n                parent.select('custom');\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + parent.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + parent.element.id + '_toolbar');\n        }\n        this.enableDisableTbrBtn();\n        parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n    };\n    ToolbarModule.prototype.getCurrentShapeIcon = function (shape) {\n        var icon = '';\n        switch (shape) {\n            case 'rectangle':\n                icon = 'e-rectangle';\n                break;\n            case 'ellipse':\n                icon = 'e-circle';\n                break;\n            case 'line':\n                icon = 'e-line';\n                break;\n            case 'arrow':\n                icon = 'e-arrow-right-up';\n                break;\n            case 'path':\n                icon = 'e-critical-path';\n                break;\n            case 'text':\n                icon = 'e-add-text';\n                break;\n            case 'pen':\n                icon = 'e-free-pen';\n                break;\n            case 'crop-custom':\n                icon = 'e-custom';\n                break;\n            case 'crop-circle':\n                icon = 'e-circle';\n                break;\n            case 'crop-square':\n                icon = 'e-square';\n                break;\n            case 'crop-3:2':\n                icon = 'e-custom-a';\n                break;\n            case 'crop-4:3':\n                icon = 'e-custom-b';\n                break;\n            case 'crop-5:4':\n                icon = 'e-custom-c';\n                break;\n            case 'crop-7:5':\n                icon = 'e-custom-d';\n                break;\n            case 'crop-16:9':\n                icon = 'e-custom-e';\n                break;\n            default:\n                icon = 'e-free-pen';\n                break;\n        }\n        return icon;\n    };\n    ToolbarModule.prototype.initShapesToolbarItem = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var leftItem = this.getLeftToolbarItem();\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getShapesToolbarItem(items);\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.renderAnnotationBtn(true);\n                _this.createShapeColor(items);\n                _this.createShapeBtn(items);\n                if (parent.activeObj.shape === 'arrow') {\n                    _this.createStartBtn();\n                    _this.createEndBtn();\n                }\n                _this.wireZoomBtnEvents();\n                if (!Browser.isDevice) {\n                    _this.renderSaveBtn();\n                }\n                parent.trigger('toolbarCreated', { toolbarType: 'shapes' });\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + parent.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + parent.element.id + '_toolbar');\n        }\n        this.enableDisableTbrBtn();\n    };\n    ToolbarModule.prototype.createShapeColor = function (items) {\n        var parent = this.parent;\n        if (items.indexOf('fillColor') > -1) {\n            parent.element.querySelector('.e-template.e-fill').appendChild(parent.createElement('input', {\n                id: parent.element.id + '_shape_fill'\n            }));\n            var fillColor = new ColorPicker({\n                modeSwitcher: false, noColor: true, value: '',\n                showButtons: false, mode: 'Palette', cssClass: 'e-shape-fill-color',\n                change: function (args) {\n                    parent.updateFillColor(args.currentValue.hex);\n                    if (args.currentValue.rgba === '') {\n                        fillDDB_1.element.children[0].classList.add('e-nocolor-item');\n                    }\n                    else {\n                        fillDDB_1.element.children[0].classList.remove('e-nocolor-item');\n                        fillDDB_1.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    }\n                    fillDDB_1.toggle();\n                }\n            }, '#' + parent.element.id + '_shape_fill');\n            var fillDDB_1 = new DropDownButton({\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = fillDDB_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                        args.element.parentElement.style.left = parent.element.offsetLeft + 'px';\n                    }\n                },\n                target: '.e-shape-fill-color',\n                iconCss: 'e-dropdownbtn-preview'\n            }, '#' + parent.element.id + '_fillColorBtn');\n            fillColor.inline = true;\n            parent.element.querySelector('.e-fill.e-template .e-dropdownbtn-preview').classList.add('e-nocolor-item');\n        }\n        if (items.indexOf('strokeColor') > -1) {\n            parent.element.querySelector('.e-template.e-stroke').appendChild(parent.createElement('input', {\n                id: parent.element.id + '_shape_stroke'\n            }));\n            var strokeColor = new ColorPicker({\n                modeSwitcher: false, noColor: false, value: '#fff',\n                showButtons: false, mode: 'Palette', cssClass: 'e-shape-stroke-color',\n                change: function (args) {\n                    parent.updateStrokeColor(args.currentValue.hex);\n                    strokeDDB_1.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    strokeDDB_1.toggle();\n                }\n            }, '#' + parent.element.id + '_shape_stroke');\n            var strokeDDB_1 = new DropDownButton({\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = strokeDDB_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                        args.element.parentElement.style.left = parent.element.offsetLeft + 'px';\n                    }\n                },\n                target: '.e-shape-stroke-color',\n                iconCss: 'e-dropdownbtn-preview'\n            }, '#' + parent.element.id + '_borderColorBtn');\n            strokeColor.inline = true;\n            parent.element.querySelector('.e-stroke.e-template .e-dropdownbtn-preview').style.background = '#fff';\n        }\n    };\n    ToolbarModule.prototype.createShapeBtn = function (items) {\n        var parent = this.parent;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('XSmall') },\n            { id: '2', text: this.l10n.getConstant('Small') },\n            { id: '3', text: this.l10n.getConstant('Medium') },\n            { id: '4', text: this.l10n.getConstant('Large') },\n            { id: '5', text: this.l10n.getConstant('XLarge') }\n        ];\n        if (items.indexOf('strokeWidth') > -1) {\n            var strokeWidthBtn = document.getElementById(parent.element.id + '_borderWidthBtn');\n            var spanElem_1 = document.createElement('span');\n            spanElem_1.innerHTML = this.l10n.getConstant('XSmall');\n            spanElem_1.className = 'e-shape-stroke-width';\n            strokeWidthBtn.appendChild(spanElem_1);\n            // Initialize the DropDownButton component.\n            var drpDownBtn_1 = new DropDownButton({ items: strokeWidthItems,\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = drpDownBtn_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    var activeBtn = spanElem_1.innerHTML;\n                    if (activeBtn !== '') {\n                        args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                    }\n                },\n                select: function (args) {\n                    spanElem_1.textContent = args.item.text;\n                    parent.updateStrokeWidth(args.item.id);\n                    if (Browser.isDevice) {\n                        if (document.getElementById(parent.element.id + '_bottomToolbar')) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_6 = getComponent(parent.element.id + '_bottomToolbar', 'toolbar');\n                            toolbar_6.refreshOverflow();\n                        }\n                    }\n                    else {\n                        if (document.getElementById(parent.element.id + '_toolbar')) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_7 = getComponent(parent.element.id + '_toolbar', 'toolbar');\n                            toolbar_7.refreshOverflow();\n                        }\n                    }\n                }\n            });\n            // Render initialized DropDownButton.\n            drpDownBtn_1.appendTo('#' + parent.element.id + '_borderWidthBtn');\n        }\n    };\n    ToolbarModule.prototype.createStartBtn = function () {\n        var parent = this.parent;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('None') },\n            { id: '2', text: this.l10n.getConstant('Bar') },\n            { id: '3', text: this.l10n.getConstant('Arrow') },\n            { id: '4', text: this.l10n.getConstant('ArrowSolid') },\n            { id: '5', text: this.l10n.getConstant('Circle') },\n            { id: '6', text: this.l10n.getConstant('CircleSolid') },\n            { id: '7', text: this.l10n.getConstant('Square') },\n            { id: '8', text: this.l10n.getConstant('SquareSolid') }\n        ];\n        var strokeWidthBtn = document.getElementById(parent.element.id + '_startBtn');\n        var spanElem = document.createElement('span');\n        if (isNullOrUndefined(parent.activeObj.start)) {\n            parent.activeObj.start = 'none';\n        }\n        spanElem.innerHTML = parent.pascalToSplitWords(parent.activeObj.start);\n        spanElem.className = 'e-shape-start';\n        strokeWidthBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                var activeBtn = spanElem.innerHTML;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                spanElem.textContent = args.item.text;\n                parent.updateArrow('startArrow', args.item.id);\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + parent.element.id + '_startBtn');\n    };\n    ToolbarModule.prototype.createEndBtn = function () {\n        var parent = this.parent;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('None') },\n            { id: '2', text: this.l10n.getConstant('Bar') },\n            { id: '3', text: this.l10n.getConstant('Arrow') },\n            { id: '4', text: this.l10n.getConstant('ArrowSolid') },\n            { id: '5', text: this.l10n.getConstant('Circle') },\n            { id: '6', text: this.l10n.getConstant('CircleSolid') },\n            { id: '7', text: this.l10n.getConstant('Square') },\n            { id: '8', text: this.l10n.getConstant('SquareSolid') }\n        ];\n        var strokeEndBtn = document.getElementById(parent.element.id + '_endBtn');\n        var spanElem = document.createElement('span');\n        if (isNullOrUndefined(parent.activeObj.end)) {\n            parent.activeObj.end = 'arrowSolid';\n        }\n        spanElem.innerHTML = parent.pascalToSplitWords(parent.activeObj.end);\n        spanElem.className = 'e-shape-end';\n        strokeEndBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                var activeBtn = spanElem.innerHTML;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                spanElem.textContent = args.item.text;\n                parent.updateArrow('endArrow', args.item.id);\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + parent.element.id + '_endBtn');\n    };\n    ToolbarModule.prototype.getTextToolbarItem = function (items) {\n        var parent = this.parent;\n        var toolbarItems = [];\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar)) {\n            toolbarItems.push({ id: parent.element.id + '_annotation', tooltipText: this.l10n.getConstant('Annotation'), align: 'Center',\n                template: '<button id=\"' + parent.element.id + '_annotationBtn\"></button>' });\n        }\n        if (items.indexOf('fontFamily') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_fontFamily', cssClass: 'top-icon e-img-font-family',\n                tooltipText: this.l10n.getConstant('FontFamily'), align: 'Center',\n                template: '<button id=\"' + parent.element.id + '_fontFamilyBtn\"></button>' });\n        }\n        if (items.indexOf('fontSize') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_fontSize', cssClass: 'top-icon e-img-font-size',\n                tooltipText: this.l10n.getConstant('FontSize'), align: 'Center',\n                template: '<button id=\"' + parent.element.id + '_fontSizeBtn\"></button>' });\n        }\n        if (items.indexOf('fontColor') > -1) {\n            toolbarItems.push({ cssClass: 'top-icon e-text-font-color', id: parent.element.id + '_text_strokecolor',\n                tooltipText: this.l10n.getConstant('FontColor'), align: 'Center',\n                type: 'Input', template: '<button id=\"' + parent.element.id + '_fontColorBtn\"></button>' });\n        }\n        if (items.indexOf('bold') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_bold', prefixIcon: 'e-icons e-bold', cssClass: 'top-icon e-bold',\n                tooltipText: this.l10n.getConstant('Bold'), align: 'Center' });\n        }\n        if (items.indexOf('italic') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_italic', prefixIcon: 'e-icons e-italic', cssClass: 'top-icon e-italic',\n                tooltipText: this.l10n.getConstant('Italic'), align: 'Center' });\n        }\n        toolbarItems.push({ align: 'Center', type: 'Separator' });\n        if (items.indexOf('duplicate') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_duplicate', prefixIcon: 'e-icons e-order', cssClass: 'top-icon e-order',\n                tooltipText: this.l10n.getConstant('Duplicate'), align: 'Center' });\n        }\n        if (items.indexOf('remove') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_remove', prefixIcon: 'e-icons e-trash', cssClass: 'top-icon e-trash',\n                tooltipText: this.l10n.getConstant('Remove'), align: 'Center' });\n        }\n        if (items.indexOf('text') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_editText', prefixIcon: 'e-icons e-annotation-edit', cssClass: 'top-icon e-annotation-edit',\n                tooltipText: this.l10n.getConstant('EditText'), align: 'Center' });\n        }\n        var tempToolbarItems = this.processSubToolbar(items);\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: parent.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: parent.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getFontFamilyItems = function () {\n        if (Browser.isDevice) {\n            return [{ id: 'arial', text: 'ABC' }, { id: 'calibri', text: 'ABC' }, { id: 'georgia', text: 'ABC' },\n                { id: 'roboto', text: 'ABC' }, { id: 'tahoma', text: 'ABC' }];\n        }\n        return [{ id: 'arial', text: 'Arial' }, { id: 'calibri', text: 'Calibri' }, { id: 'georgia', text: 'Georgia' },\n            { id: 'roboto', text: 'Roboto' }, { id: 'tahoma', text: 'Tahoma' }];\n    };\n    ToolbarModule.prototype.initTextToolbarItem = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var leftItem = this.getLeftToolbarItem();\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getTextToolbarItem(items);\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.renderAnnotationBtn(true);\n                _this.createTextColor(items);\n                _this.createTextBtn(items);\n                _this.wireZoomBtnEvents();\n                if (!Browser.isDevice) {\n                    _this.renderSaveBtn();\n                }\n                parent.trigger('toolbarCreated', { toolbarType: 'text' });\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + parent.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + parent.element.id + '_toolbar');\n        }\n        this.enableDisableTbrBtn();\n    };\n    ToolbarModule.prototype.createTextColor = function (items) {\n        var parent = this.parent;\n        if (items.indexOf('fontColor') > -1 && parent.element.querySelector('.e-template.e-text-font-color')) {\n            parent.element.querySelector('.e-template.e-text-font-color').appendChild(parent.createElement('input', {\n                id: parent.element.id + '_text_font'\n            }));\n            var fontColor = new ColorPicker({\n                modeSwitcher: false, value: '#fff',\n                showButtons: false, mode: 'Palette', cssClass: 'e-text-fontt-color',\n                change: function (args) {\n                    parent.updateFontColor(args.currentValue.hex);\n                    strokeDDB_2.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    strokeDDB_2.toggle();\n                }\n            }, '#' + parent.element.id + '_text_font');\n            var strokeDDB_2 = new DropDownButton({\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = strokeDDB_2.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                        args.element.parentElement.style.left = parent.element.offsetLeft + 'px';\n                    }\n                },\n                target: '.e-text-fontt-color',\n                iconCss: 'e-dropdownbtn-preview'\n            }, '#' + parent.element.id + '_fontColorBtn');\n            fontColor.inline = true;\n            parent.element.querySelector('.e-text-font-color.e-template .e-dropdownbtn-preview').style.background\n                = '#fff';\n        }\n    };\n    ToolbarModule.prototype.createTextBtn = function (items) {\n        var parent = this.parent;\n        if (items.indexOf('fontFamily') > -1) {\n            var fontNameBtn = document.getElementById(parent.element.id + '_fontFamilyBtn');\n            var spanElem_2 = document.createElement('span');\n            if (Browser.isDevice) {\n                spanElem_2.innerHTML = 'ABC';\n                spanElem_2.setAttribute('style', 'font-family: arial');\n            }\n            else {\n                spanElem_2.innerHTML = 'Arial';\n            }\n            spanElem_2.className = 'e-text-font-family';\n            if (fontNameBtn) {\n                fontNameBtn.appendChild(spanElem_2);\n            }\n            var fontFamilyBtn_1 = new DropDownButton({ items: this.getFontFamilyItems(),\n                cssClass: 'e-font-family',\n                createPopupOnClick: true,\n                beforeItemRender: function (args) {\n                    args.element.setAttribute('style', 'font-family:' + args.element.id);\n                },\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = fontFamilyBtn_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    var fontFamily;\n                    if (parent.textArea.style.display === 'block') {\n                        fontFamily = parent.textArea.style.fontFamily;\n                    }\n                    else {\n                        fontFamily = parent.activeObj.textSettings.fontFamily;\n                    }\n                    args.element.querySelector('[id *= ' + '\"' + fontFamily.toLowerCase()\n                        + '\"' + ']').classList.add('e-selected-btn');\n                },\n                select: function (args) {\n                    spanElem_2.textContent = args.item.text;\n                    if (Browser.isDevice) {\n                        spanElem_2.setAttribute('style', 'font-family:' + args.item.id);\n                    }\n                    parent.updateFontFamily(args.item.id);\n                }\n            });\n            fontFamilyBtn_1.appendTo('#' + parent.element.id + '_fontFamilyBtn');\n        }\n        if (items.indexOf('fontSize') > -1) {\n            var fontSizeBtnElem = document.getElementById(parent.element.id + '_fontSizeBtn');\n            var fontSizeSpanElem_1 = document.createElement('span');\n            var fontSizes = parent.getFontSizes();\n            fontSizeSpanElem_1.innerHTML = fontSizes[0].text;\n            fontSizeSpanElem_1.className = 'e-text-font-size';\n            fontSizeBtnElem.appendChild(fontSizeSpanElem_1);\n            var fontSizeBtn_1 = new DropDownButton({\n                cssClass: 'e-font-size',\n                items: fontSizes,\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = fontSizeBtn_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    var activeBtn = fontSizeSpanElem_1.innerHTML;\n                    args.element.querySelector('[aria-label *= ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                },\n                select: function (args) {\n                    fontSizeSpanElem_1.textContent = args.item.text;\n                    parent.updateFontSize(args.item.text);\n                }\n            });\n            fontSizeBtn_1.appendTo('#' + parent.element.id + '_fontSizeBtn');\n        }\n    };\n    ToolbarModule.prototype.refreshToolbar = function (type, isApplyBtn, isCropping, isZooming, cType) {\n        var parent = this.parent;\n        if (!parent.isImageLoaded || parent.isCropToolbar) {\n            return;\n        }\n        var args = { toolbarType: type };\n        if (type !== 'filter' && type !== 'color') {\n            if (document.getElementById(parent.element.id + '_toolbar') && this.defToolbarItems.length > 0) {\n                getComponent(document.getElementById(parent.element.id + '_toolbar'), 'toolbar').destroy();\n                document.getElementById(parent.element.id + '_toolbar').innerHTML = '';\n            }\n            if (document.getElementById(parent.element.id + '_bottomToolbar') && this.defToolbarItems.length > 0) {\n                if (document.getElementById(parent.element.id + '_bottomToolbar').className.indexOf('e-control') > -1) {\n                    getComponent(document.getElementById(parent.element.id + '_bottomToolbar'), 'toolbar').destroy();\n                    document.getElementById(parent.element.id + '_bottomToolbar').innerHTML = '';\n                }\n            }\n        }\n        this.refreshSlider();\n        parent.isCropTab = false;\n        switch (type) {\n            case 'main':\n                if (Browser.isDevice) {\n                    if (isCropping) {\n                        this.initMainToolbar(false, true, true);\n                    }\n                    else {\n                        this.initMainToolbar(false, true, null);\n                    }\n                }\n                else if (!Browser.isDevice || isZooming) {\n                    if (isZooming) {\n                        this.initMainToolbar(isApplyBtn, Browser.isDevice, null);\n                    }\n                    else {\n                        this.initMainToolbar(isApplyBtn, Browser.isDevice, null);\n                    }\n                }\n                if (Browser.isDevice) {\n                    this.initBottomToolbar();\n                }\n                break;\n            case 'shapes':\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                }\n                if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'path') {\n                    args.toolbarItems = ['strokeColor', 'strokeWidth', 'duplicate', 'remove'];\n                }\n                else if (parent.activeObj.shape === 'arrow') {\n                    args.toolbarItems = ['strokeColor', 'strokeWidth', 'start', 'end', 'duplicate', 'remove'];\n                }\n                else {\n                    args.toolbarItems = ['fillColor', 'strokeColor', 'strokeWidth', 'duplicate', 'remove'];\n                }\n                parent.trigger('toolbarUpdating', args);\n                this.initShapesToolbarItem(args.toolbarItems);\n                break;\n            case 'text':\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                }\n                args.toolbarItems = ['fontFamily', 'fontSize', 'fontColor', 'bold', 'italic', 'duplicate', 'remove', 'text'];\n                parent.trigger('toolbarUpdating', args);\n                this.initTextToolbarItem(args.toolbarItems);\n                break;\n            case 'pen':\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                }\n                args.toolbarItems = ['strokeColor', 'strokeWidth', 'remove'];\n                parent.trigger('toolbarUpdating', args);\n                this.initPenToolbarItem(args.toolbarItems);\n                break;\n            case 'adjustment':\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                }\n                this.initAdjustmentToolbarItem();\n                break;\n            case 'filter':\n                this.updateContextualToolbar(type);\n                break;\n            case 'color':\n                this.updateContextualToolbar(type, cType);\n                break;\n            case 'croptransform':\n                parent.isCropTab = true;\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                }\n                parent.updateCropTransformItems();\n                this.initCropTransformToolbar();\n                break;\n        }\n        this.currToolbar = type;\n        this.refreshDropDownBtn(isCropping);\n    };\n    ToolbarModule.prototype.getAdjustmentToolbarItem = function () {\n        var toolbarItems = [];\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Brightness') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_brightness', prefixIcon: 'e-icons e-brightness', cssClass: 'top-icon e-brightness',\n                tooltipText: this.l10n.getConstant('Brightness'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Contrast') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_contrast', prefixIcon: 'e-icons e-contrast', cssClass: 'top-icon e-contrast',\n                tooltipText: this.l10n.getConstant('Contrast'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Hue') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_hue', prefixIcon: 'e-icons e-fade', cssClass: 'top-icon e-fade',\n                tooltipText: this.l10n.getConstant('Hue'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Saturation') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_saturation', prefixIcon: 'e-icons e-saturation', cssClass: 'top-icon e-saturation',\n                tooltipText: this.l10n.getConstant('Saturation'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Exposure') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_exposure', prefixIcon: 'e-icons e-grain', cssClass: 'top-icon e-grain',\n                tooltipText: this.l10n.getConstant('Exposure'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Opacity') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_opacity', prefixIcon: 'e-icons e-opacity', cssClass: 'top-icon e-opacity',\n                tooltipText: this.l10n.getConstant('Opacity'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Blur') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_blur', prefixIcon: 'e-icons e-tint', cssClass: 'top-icon e-tint',\n                tooltipText: this.l10n.getConstant('Blur'), align: 'Center' });\n        }\n        var tempToolbarItems = this.processToolbar('center');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: parent.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: parent.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getFilterToolbarItem = function () {\n        var toolbarItems = [];\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Default') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_default', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Default'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + parent.element.id + '_defaultCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Default') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Chrome') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_chrome', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Chrome'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + parent.element.id + '_chromeCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Chrome') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Cold') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_cold', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Cold'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + parent.element.id + '_coldCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Cold') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Warm') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_warm', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Warm'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + parent.element.id + '_warmCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Warm') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Grayscale') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_grayscale', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Grayscale'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + parent.element.id + '_grayscaleCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Grayscale') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Sepia') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_sepia', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Sepia'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + parent.element.id + '_sepiaCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Sepia') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Invert') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_invert', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Invert'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + parent.element.id + '_invertCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Invert') + '</span></div></div>' });\n        }\n        var tempToolbarItems = this.processToolbar('center');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getPenToolbarItem = function (items) {\n        var parent = this.parent;\n        var toolbarItems = [];\n        if (isNullOrUndefined(parent.toolbar) || parent.toolbar) {\n            toolbarItems.push({ id: parent.element.id + '_annotation', tooltipText: this.l10n.getConstant('Annotation'), align: 'Center',\n                template: '<button id=\"' + parent.element.id + '_annotationBtn\"></button>' });\n        }\n        if (items.indexOf('strokeColor') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: parent.element.id + '_pen_strokecolor',\n                cssClass: 'top-icon e-pen-stroke-color',\n                tooltipText: this.l10n.getConstant('StrokeColor'), align: 'Center', type: 'Input',\n                template: '<button id=\"' + parent.element.id + '_penColorBtn\"></button>' });\n        }\n        if (items.indexOf('strokeWidth') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', cssClass: 'top-icon e-size',\n                tooltipText: this.l10n.getConstant('StrokeWidth'),\n                align: 'Center', type: 'Input', template: '<button id=\"' + parent.element.id + '_penStrokeWidth\"></button>' });\n        }\n        toolbarItems.push({ align: 'Center', type: 'Separator' });\n        if (items.indexOf('remove') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_remove', prefixIcon: 'e-icons e-trash', cssClass: 'top-icon e-trash',\n                tooltipText: this.l10n.getConstant('Remove'), align: 'Center' });\n        }\n        var tempToolbarItems = this.processSubToolbar(items);\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: parent.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: parent.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.initPenToolbarItem = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var leftItem = this.getLeftToolbarItem();\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getPenToolbarItem(items);\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.renderAnnotationBtn(true);\n                _this.createPenColor(items);\n                _this.createPenBtn(items);\n                _this.wireZoomBtnEvents();\n                if (!Browser.isDevice) {\n                    _this.renderSaveBtn();\n                }\n                parent.trigger('toolbarCreated', { toolbarType: 'pen' });\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + parent.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + parent.element.id + '_toolbar');\n        }\n        this.enableDisableTbrBtn();\n    };\n    ToolbarModule.prototype.createPenColor = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        if (items.indexOf('strokeColor') > -1) {\n            parent.element.querySelector('.e-template.e-pen-stroke-color').appendChild(parent.createElement('input', {\n                id: parent.element.id + '_pen_stroke'\n            }));\n            var penColor = new ColorPicker({\n                modeSwitcher: false, value: '#fff',\n                showButtons: false, mode: 'Palette', cssClass: 'e-pen-color',\n                change: function (args) {\n                    parent.updatePenStrokeColor(args.currentValue.hex);\n                    _this.selFhdColor = args.currentValue.hex;\n                    strokeDDB_3.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    strokeDDB_3.toggle();\n                }\n            }, '#' + parent.element.id + '_pen_stroke');\n            var strokeDDB_3 = new DropDownButton({\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = strokeDDB_3.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                        args.element.parentElement.style.left = parent.element.offsetLeft + 'px';\n                    }\n                },\n                target: '.e-pen-color',\n                iconCss: 'e-dropdownbtn-preview'\n            }, '#' + parent.element.id + '_penColorBtn');\n            penColor.inline = true;\n            var obj = { tempFreeHandDrawEditingStyles: null };\n            parent.notify('freehand-draw', { prop: 'getTempFreeHandDrawEditingStyles', value: { obj: obj } });\n            var indexObj = { freehandSelectedIndex: null };\n            parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n            if (!isNullOrUndefined(indexObj['freehandSelectedIndex']) && indexObj['freehandSelectedIndex'] > -1) {\n                parent.element.querySelector('.e-pen-stroke-color.e-template .e-dropdownbtn-preview').style.background\n                    = this.selFhdColor === '#42a5f5' ? obj['tempFreeHandDrawEditingStyles'].strokeColor :\n                        parent.pointColl[indexObj['freehandSelectedIndex']].strokeColor;\n            }\n            else {\n                parent.element.querySelector('.e-pen-stroke-color.e-template .e-dropdownbtn-preview').style.background\n                    = '#fff';\n            }\n        }\n    };\n    ToolbarModule.prototype.createPenBtn = function (items) {\n        var parent = this.parent;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('XSmall') },\n            { id: '2', text: this.l10n.getConstant('Small') },\n            { id: '3', text: this.l10n.getConstant('Medium') },\n            { id: '4', text: this.l10n.getConstant('Large') },\n            { id: '5', text: this.l10n.getConstant('XLarge') }\n        ];\n        if (items.indexOf('strokeWidth') > -1) {\n            var strokeWidthBtn = document.getElementById(parent.element.id + '_penStrokeWidth');\n            var spanElem_3 = document.createElement('span');\n            var indexObj = { freehandSelectedIndex: null };\n            parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n            if (!isNullOrUndefined(indexObj['freehandSelectedIndex']) && indexObj['freehandSelectedIndex'] > -1) {\n                spanElem_3.innerHTML = this.getPenStroke(parent.pointColl[indexObj['freehandSelectedIndex']].strokeWidth);\n            }\n            else {\n                spanElem_3.innerHTML = this.l10n.getConstant('Small');\n            }\n            spanElem_3.className = 'e-pen-stroke-width';\n            strokeWidthBtn.appendChild(spanElem_3);\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            var drpDownBtn_2 = new DropDownButton({ items: strokeWidthItems,\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = drpDownBtn_2.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    var activeBtn = spanElem_3.innerHTML;\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                },\n                select: function (args) {\n                    spanElem_3.textContent = args.item.text;\n                    parent.updatePenStrokeWidth(args.item.id);\n                    if (Browser.isDevice) {\n                        if (document.getElementById(parent.element.id + '_bottomToolbar')) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_8 = getComponent(parent.element.id + '_bottomToolbar', 'toolbar');\n                            toolbar_8.refreshOverflow();\n                        }\n                    }\n                    else {\n                        if (document.getElementById(parent.element.id + '_toolbar')) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_9 = getComponent(parent.element.id + '_toolbar', 'toolbar');\n                            toolbar_9.refreshOverflow();\n                        }\n                    }\n                }\n            });\n            // Render initialized DropDownButton.\n            drpDownBtn_2.appendTo('#' + parent.element.id + '_penStrokeWidth');\n        }\n    };\n    ToolbarModule.prototype.getPenStroke = function (value) {\n        var textContent = '';\n        var valueToTextContent = {\n            1: this.l10n.getConstant('XSmall'),\n            2: this.l10n.getConstant('Small'),\n            3: this.l10n.getConstant('Medium'),\n            4: this.l10n.getConstant('Large'),\n            5: this.l10n.getConstant('XLarge')\n        };\n        if (value >= 1 && value <= 5) {\n            textContent = valueToTextContent[value];\n        }\n        return textContent;\n    };\n    ToolbarModule.prototype.initAdjustmentToolbarItem = function () {\n        var _this = this;\n        var parent = this.parent;\n        var leftItem = this.getLeftToolbarItem(null);\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getAdjustmentToolbarItem();\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.wireZoomBtnEvents();\n                if (!Browser.isDevice) {\n                    _this.renderSaveBtn();\n                }\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + parent.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + parent.element.id + '_toolbar');\n        }\n        this.enableDisableTbrBtn();\n    };\n    ToolbarModule.prototype.initFilterToolbarItem = function () {\n        var _this = this;\n        var parent = this.parent;\n        var mainItem = this.getFilterToolbarItem();\n        if (document.querySelector('#' + parent.element.id + '_contextualToolbar').classList.contains('e-control')) {\n            getComponent(document.getElementById(parent.element.id + '_contextualToolbar'), 'toolbar').destroy();\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: mainItem,\n            clicked: this.contextualToolbarClicked.bind(this),\n            created: function () {\n                _this.updatePrivateVariables();\n                _this.createCanvasFilter();\n                if (parent.currentFilter === '') {\n                    parent.currentFilter = parent.element.id + '_default';\n                }\n                var hdrWrapper = document.querySelector('#' + parent.element.id + '_headWrapper');\n                if (hdrWrapper) {\n                    hdrWrapper.style.display = 'none';\n                }\n                document.getElementById(parent.currentFilter + 'Canvas').parentElement.parentElement.classList.add('e-selected');\n                _this.enableDisableTbrBtn();\n                toolbar.refreshOverflow();\n            }\n        });\n        toolbar.appendTo('#' + parent.element.id + '_contextualToolbar');\n    };\n    ToolbarModule.prototype.createCanvasFilter = function () {\n        var parent = this.parent;\n        showSpinner(parent.element);\n        parent.element.style.opacity = '0.5';\n        var imageData = parent.getCurrentCanvasData();\n        this.inMemoryCanvas.width = imageData.width;\n        this.inMemoryCanvas.height = imageData.height;\n        this.inMemoryContext.putImageData(imageData, 0, 0);\n        this.updateFilterCanvas('_defaultCanvas', 'default');\n        this.updateFilterCanvas('_chromeCanvas', 'chrome');\n        this.updateFilterCanvas('_coldCanvas', 'cold');\n        this.updateFilterCanvas('_warmCanvas', 'warm');\n        this.updateFilterCanvas('_grayscaleCanvas', 'grayscale');\n        this.updateFilterCanvas('_sepiaCanvas', 'sepia');\n        this.updateFilterCanvas('_invertCanvas', 'invert');\n        hideSpinner(parent.element);\n        parent.element.style.opacity = '1';\n        parent.initialAdjustmentValue = this.lowerContext.filter;\n    };\n    ToolbarModule.prototype.updateFilterCanvas = function (selector, type) {\n        var parent = this.parent;\n        var filter = parent.element.querySelector('#' + parent.element.id + selector);\n        if (filter) {\n            var ctx = filter.getContext('2d');\n            ctx = filter.getContext('2d');\n            filter.style.width = '100px';\n            filter.style.height = '100px';\n            parent.notify('filter', { prop: 'updateAdj', value: { type: type, value: null, isPreview: true, ctx: ctx } });\n            ctx.drawImage(this.inMemoryCanvas, 0, 0, 300, 150);\n        }\n    };\n    ToolbarModule.prototype.getQuickAccessToolbarItem = function (isPenEdit) {\n        var parent = this.parent;\n        var args = { cancel: false, toolbarItems: [] };\n        var toolbarItems = [];\n        if (isNullOrUndefined(isPenEdit)) {\n            toolbarItems.push('Clone');\n            toolbarItems.push('Delete');\n            if (parent.activeObj.shape === 'text') {\n                toolbarItems.push('EditText');\n            }\n            args.shape = parent.toPascalCase(parent.activeObj.shape);\n        }\n        else if (isPenEdit) {\n            toolbarItems.push('Delete');\n            args.shape = 'Freehand draw';\n        }\n        args.toolbarItems = extend([], toolbarItems, null, true);\n        parent.trigger('quickAccessToolbarOpen', args);\n        var orgToolbarItems = [];\n        if (args.cancel) {\n            orgToolbarItems = [];\n        }\n        else {\n            for (var i = 0; i < args.toolbarItems.length; i++) {\n                switch (args.toolbarItems[i]) {\n                    case 'Clone':\n                        orgToolbarItems.push({ id: parent.element.id + '_duplicate', prefixIcon: 'e-icons e-order', cssClass: 'top-icon e-order',\n                            tooltipText: this.l10n.getConstant('Duplicate'), align: 'Left' });\n                        break;\n                    case 'Delete':\n                        orgToolbarItems.push({ id: parent.element.id + '_remove', prefixIcon: 'e-icons e-trash', cssClass: 'top-icon e-trash',\n                            tooltipText: this.l10n.getConstant('Remove'), align: 'Left' });\n                        break;\n                    case 'EditText':\n                        orgToolbarItems.push({ id: parent.element.id + '_editText', prefixIcon: 'e-icons e-annotation-edit', cssClass: 'top-icon e-annotation-edit',\n                            tooltipText: this.l10n.getConstant('EditText'), align: 'Left' });\n                        break;\n                    default:\n                        orgToolbarItems.push(args.toolbarItems[i]);\n                        break;\n                }\n            }\n        }\n        return orgToolbarItems;\n    };\n    ToolbarModule.prototype.renderQAT = function (isPenEdit) {\n        var parent = this.parent;\n        if (parent.activeObj && parent.showQuickAccessToolbar) {\n            var qtArea = document.getElementById(parent.element.id + '_quickAccessToolbarArea');\n            if (qtArea) {\n                this.destroyQuickAccessToolbar();\n                qtArea.style.display = 'block';\n            }\n            var items = this.getQuickAccessToolbarItem(isPenEdit);\n            if (items.length === 0) {\n                return;\n            }\n            if (isNullOrUndefined(parent.quickAccessToolbarTemplate)) {\n                var toolbarObj = new Toolbar({\n                    items: items,\n                    clicked: this.quickAccessToolbarClicked.bind(this)\n                });\n                toolbarObj.appendTo('#' + parent.element.id + '_quickAccessToolbar');\n            }\n            if (isNullOrUndefined(isPenEdit)) {\n                qtArea.style.width = 'auto';\n                parent.activeObj.activePoint.width = Math.abs(parent.activeObj.activePoint.width);\n                parent.activeObj.activePoint.height = Math.abs(parent.activeObj.activePoint.height);\n                var x = parent.activeObj.activePoint.startX < parent.activeObj.activePoint.endX ?\n                    parent.activeObj.activePoint.startX : parent.activeObj.activePoint.endX;\n                var y = parent.activeObj.activePoint.startY < parent.activeObj.activePoint.endY ?\n                    parent.activeObj.activePoint.startY : parent.activeObj.activePoint.endY;\n                var width = parent.activeObj.activePoint.width;\n                if (parent.activeObj.rotatedAngle !== 0 && parent.activeObj.shape !== 'arrow') {\n                    var object = { activePoint: null };\n                    parent.notify('shape', { prop: 'getSquarePointForRotatedShape', onPropertyChange: false,\n                        value: { obj: parent.activeObj, object: object } });\n                    var point = object['activePoint'];\n                    x = point.startX;\n                    y = point.startY;\n                    width = point.width;\n                }\n                else if (parent.activeObj.shape === 'path') {\n                    var path = parent.getSquarePointForPath(parent.activeObj);\n                    x = path.startX;\n                    y = path.startY;\n                    width = path.width;\n                }\n                qtArea.style.left = (x + (width / 2)) - (items.length * 25) + 'px';\n                if (y - 60 < parent.img.destTop) {\n                    qtArea.style.top = parent.img.destTop + 'px';\n                }\n                else {\n                    qtArea.style.top = y - 60 + 'px';\n                }\n            }\n            else if (isPenEdit) {\n                var obj = { activePoint: null };\n                var indexObj = { freehandSelectedIndex: null };\n                parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n                parent.notify('freehand-draw', { prop: 'getSqPtFD',\n                    value: { idx: indexObj['freehandSelectedIndex'], obj: obj } });\n                var point = obj['activePoint'];\n                qtArea.style.width = 'auto';\n                qtArea.style.left = (point.startX + (point.width / 2)) - (items.length * 27) + 'px';\n                if (point.startY - 60 < parent.img.destTop) {\n                    qtArea.style.top = parent.img.destTop + 'px';\n                }\n                else {\n                    qtArea.style.top = point.startY - 60 + 'px';\n                }\n            }\n        }\n    };\n    ToolbarModule.prototype.refreshDropDownBtn = function (isDisabled) {\n        if (isNullOrUndefined(isDisabled)) {\n            return;\n        }\n        var parent = this.parent;\n        var annotation = document.querySelector('#' + parent.element.id + '_annotationBtn');\n        if (annotation) {\n            if (isDisabled) {\n                annotation.classList.add('e-disabled');\n                annotation.parentElement.classList.add('e-overlay');\n            }\n            else {\n                annotation.classList.remove('e-disabled');\n                annotation.parentElement.classList.remove('e-overlay');\n            }\n            getComponent(annotation, 'dropdown-btn').disabled = isDisabled;\n        }\n        var transform = document.querySelector('#' + parent.element.id + '_transformBtn');\n        if (transform) {\n            if (isDisabled) {\n                transform.classList.add('e-disabled');\n                transform.parentElement.classList.add('e-overlay');\n            }\n            else {\n                transform.classList.remove('e-disabled');\n                transform.parentElement.classList.remove('e-overlay');\n            }\n            getComponent(transform, 'dropdown-btn').disabled = isDisabled;\n        }\n        var adjustment = document.querySelector('#' + parent.element.id + '_adjustment');\n        if (adjustment) {\n            if (isDisabled) {\n                adjustment.classList.add('e-disabled');\n                adjustment.parentElement.classList.add('e-overlay');\n            }\n            else {\n                adjustment.classList.remove('e-disabled');\n                adjustment.parentElement.classList.remove('e-overlay');\n            }\n            getComponent(adjustment, 'btn').disabled = isDisabled;\n        }\n        var filter = document.querySelector('#' + parent.element.id + '_filter');\n        if (filter) {\n            if (isDisabled) {\n                filter.classList.add('e-disabled');\n                filter.parentElement.classList.add('e-overlay');\n            }\n            else {\n                filter.classList.remove('e-disabled');\n                filter.parentElement.classList.remove('e-overlay');\n            }\n            getComponent(filter, 'btn').disabled = isDisabled;\n        }\n    };\n    ToolbarModule.prototype.cropSelect = function (args) {\n        var parent = this.parent;\n        parent.isCropTab = true;\n        if (isNullOrUndefined(parent.transform.cropZoomFactor)) {\n            parent.transform.cropZoomFactor = parent.transform.zoomFactor;\n            parent.notify('draw', { prop: 'setTempZoomFactor', onPropertyChange: false, value: { tempZoomFactor: parent.transform.zoomFactor } });\n        }\n        parent.transform.zoomFactor = parent.transform.cropZoomFactor;\n        var text = args.item.id;\n        this.currentToolbar = 'crop';\n        parent.currSelectionPoint = null;\n        parent.select(text);\n        this.enableDisableTbrBtn();\n        parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n    };\n    ToolbarModule.prototype.quickAccessToolbarClicked = function (args, isContextualToolbar) {\n        var parent = this.parent;\n        var points = { x: parent.activeObj.activePoint.startX, y: parent.activeObj.activePoint.startY };\n        if (args.item) {\n            var duplicateObj = void 0;\n            var objColl = void 0;\n            var isPreventUndoRedo = null;\n            var obj = { prevActObj: null };\n            var object = { tempObj: null };\n            parent.notify('draw', { prop: 'getPrevActObj', onPropertyChange: false, value: { obj: obj } });\n            parent.notify('selection', { prop: 'getTempActObj', onPropertyChange: false, value: { obj: object } });\n            object['tempObj']['activePoint']['height'] = Math.abs(object['tempObj']['activePoint']['height']);\n            var pathObject = { isNewPath: null };\n            parent.notify('draw', { prop: 'getNewPath', value: { obj: pathObject } });\n            switch (args.item.id.replace(parent.element.id + '_', '').toLowerCase()) {\n                case 'duplicate':\n                    if (!parent.element.querySelector('#' + parent.element.id + '_duplicate').classList.contains('e-disabled')) {\n                        if (!pathObject['isNewPath'] && JSON.stringify(object['tempObj']) === JSON.stringify(parent.activeObj)) {\n                            isPreventUndoRedo = true;\n                        }\n                        duplicateObj = extend({}, parent.activeObj, {}, true);\n                        if (isNullOrUndefined(parent.activeObj.currIndex)) {\n                            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: isPreventUndoRedo } });\n                        }\n                        else if (obj['prevActObj']) {\n                            parent.activeObj.currIndex = null;\n                            duplicateObj.currIndex = null;\n                            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: isPreventUndoRedo } });\n                        }\n                        else {\n                            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n                        }\n                        if (pathObject['isNewPath']) {\n                            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                        }\n                        objColl = extend([], parent.objColl, [], true);\n                        duplicateObj.activePoint.startX += 10;\n                        duplicateObj.activePoint.startY -= 10;\n                        duplicateObj.activePoint.endX += 10;\n                        duplicateObj.activePoint.endY -= 10;\n                        if (duplicateObj.shape === 'path') {\n                            for (var i = 0; i < duplicateObj.pointColl.length; i++) {\n                                duplicateObj.pointColl[i].x += 10;\n                                duplicateObj.pointColl[i].y -= 10;\n                            }\n                        }\n                        parent.activeObj = duplicateObj;\n                        if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow') {\n                            parent.notify('shape', { prop: 'setPointCollForLineArrow', onPropertyChange: false,\n                                value: { obj: parent.activeObj } });\n                        }\n                        // parent.updateTrianglePoints(parent.activeObj); Invoke\n                        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n                        parent.notify('undo-redo', { prop: 'updateUrObj', onPropertyChange: false, value: { objColl: objColl } });\n                        this.renderQAT();\n                    }\n                    break;\n                case 'remove':\n                    if (!parent.element.querySelector('#' + parent.element.id + '_remove').classList.contains('e-disabled')) {\n                        parent.notify('selection', { prop: 'deleteItem', onPropertyChange: false });\n                    }\n                    break;\n                case 'edittext':\n                    if (!parent.element.querySelector('#' + parent.element.id + '_editText').classList.contains('e-disabled')) {\n                        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                        parent.notify('selection', { prop: 'setTempActObj', onPropertyChange: false,\n                            value: { obj: extend({}, parent.activeObj, {}, true) } });\n                        parent.notify('selection', { prop: 'setInitialTextEdit', onPropertyChange: false,\n                            value: { bool: true } });\n                        parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false,\n                            value: { prevActObj: extend({}, parent.activeObj, {}, true) } });\n                        if (parent.activeObj.rotatedAngle !== 0) {\n                            points.x = parent.activeObj.horTopLinePointColl[0].x;\n                            points.y = parent.activeObj.horTopLinePointColl[0].y;\n                        }\n                        parent.notify('shape', { prop: 'renderTextArea', onPropertyChange: false,\n                            value: { x: points.x, y: points.y, actObj: parent.activeObj } });\n                        if (isNullOrUndefined(parent.activeObj.currIndex)) {\n                            parent.notify('draw', { prop: 'setShapeTextInsert', onPropertyChange: false, value: { bool: true } });\n                        }\n                        else if (obj['prevActObj']) {\n                            parent.notify('draw', { prop: 'setShapeTextInsert', onPropertyChange: false, value: { bool: true } });\n                        }\n                        if (document.getElementById(parent.element.id + '_quickAccessToolbarArea')) {\n                            document.getElementById(parent.element.id + '_quickAccessToolbarArea').style.display = 'none';\n                        }\n                    }\n                    break;\n            }\n        }\n        if (isNullOrUndefined(isContextualToolbar)) {\n            parent.trigger('quickAccessToolbarItemClick', args);\n        }\n    };\n    ToolbarModule.prototype.defToolbarClicked = function (args) {\n        var parent = this.parent;\n        var isContextualToolbar = false;\n        var isFilterFinetune = false;\n        if (parent.element.querySelector('.e-contextual-toolbar-wrapper')) {\n            if (!parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.contains('e-hide')) {\n                isContextualToolbar = isFilterFinetune = true;\n            }\n            parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n        }\n        if (args.item) {\n            var type = args.item.id.replace(parent.element.id + '_', '').toLowerCase();\n            if (type === 'duplicate' || type === 'remove' || type === 'edittext') {\n                this.quickAccessToolbarClicked(args, true);\n                parent.trigger('toolbarItemClicked', args);\n            }\n            else {\n                var isDisabledFilter = false;\n                var isDisabledAdjustment = false;\n                var adjustment = document.querySelector('#' + parent.element.id + '_adjustment');\n                if (adjustment && adjustment.classList.contains('e-disabled')) {\n                    isDisabledAdjustment = true;\n                }\n                var filter = document.querySelector('#' + parent.element.id + '_filter');\n                if (filter && filter.classList.contains('e-disabled')) {\n                    isDisabledFilter = true;\n                }\n                this.enableDisableTbrBtn();\n                this.performDefTbrClick(type, isContextualToolbar, isDisabledAdjustment, isDisabledFilter, isFilterFinetune);\n                parent.trigger('toolbarItemClicked', args);\n            }\n        }\n    };\n    ToolbarModule.prototype.performDefTbrClick = function (type, isContextualToolbar, isDisabledAdjustment, isDisabledFilter, isFilterFinetune) {\n        var parent = this.parent;\n        var zoomIn = parent.element.querySelector('#' + parent.element.id + '_zoomIn');\n        var isCropSelection = false;\n        var panBtn;\n        var splitWords;\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords === undefined && parent.currObjType.isCustomCrop) {\n            isCropSelection = true;\n        }\n        else if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (!parent.disabled) {\n            switch (type) {\n                case 'pan':\n                    parent.currObjType.isCustomCrop = parent.currObjType.isFiltered = false;\n                    if (parent.currObjType.isUndoAction) {\n                        parent.notify('undo-redo', { prop: 'refreshUrc', value: { bool: null } });\n                    }\n                    if (isCropSelection) {\n                        parent.currObjType.isCustomCrop = false;\n                        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                        this.refreshToolbar('main');\n                    }\n                    if (parent.togglePan) {\n                        this.cancelPan();\n                        parent.notify('transform', { prop: 'setDisablePan', onPropertyChange: false, value: { bool: true } });\n                        if (this.currentToolbar === 'pen') {\n                            parent.freehandDraw(true);\n                        }\n                    }\n                    else {\n                        panBtn = parent.element.querySelector('.e-img-pan .e-btn');\n                        if (panBtn) {\n                            panBtn.classList.add('e-selected-btn');\n                        }\n                        parent.pan(true);\n                        parent.notify('transform', { prop: 'setDisablePan', onPropertyChange: false, value: { bool: false } });\n                    }\n                    if (zoomIn && parent.zoomSettings.zoomFactor >= parent.zoomSettings.maxZoomFactor) {\n                        zoomIn.classList.add('e-disabled');\n                        zoomIn.parentElement.classList.add('e-overlay');\n                    }\n                    else if (zoomIn) {\n                        zoomIn.classList.remove('e-disabled');\n                        zoomIn.parentElement.classList.remove('e-overlay');\n                    }\n                    this.refreshToolbar('main');\n                    break;\n                case 'cancel':\n                    parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: isContextualToolbar } });\n                    break;\n                case 'ok':\n                    parent.okBtn();\n                    this.refreshDropDownBtn(false);\n                    this.currentToolbar = 'main';\n                    break;\n                case 'crop':\n                    parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n                    break;\n                case 'reset':\n                    parent.reset();\n                    this.currentToolbar = 'main';\n                    break;\n                case 'undo':\n                    parent.notify('undo-redo', { prop: 'call-undo' });\n                    break;\n                case 'redo':\n                    parent.notify('undo-redo', { prop: 'call-redo' });\n                    break;\n                case 'adjustment':\n                    if (!isDisabledAdjustment) {\n                        if (parent.currObjType.isFiltered) {\n                            parent.okBtn();\n                        }\n                        this.refreshToolbar('adjustment');\n                        parent.setTempFilterProperties();\n                        this.openSlider('brightness');\n                    }\n                    break;\n                case 'brightness':\n                case 'contrast':\n                case 'hue':\n                case 'saturation':\n                case 'opacity':\n                case 'blur':\n                case 'exposure':\n                    this.openSlider(type);\n                    break;\n                case 'filter':\n                    if (!isDisabledFilter) {\n                        showSpinner(parent.element);\n                        this.refreshToolbar('filter');\n                        parent.setTempFilterProperties();\n                        hideSpinner(parent.element);\n                    }\n                    break;\n                case 'default':\n                case 'chrome':\n                case 'cold':\n                case 'warm':\n                case 'grayscale':\n                case 'blackandwhite':\n                case 'sepia':\n                case 'invert':\n                case 'sharpen':\n                    parent.currObjType.isFiltered = true;\n                    parent.notify('filter', { prop: 'applyImageFilter', value: { option: type } });\n                    break;\n                case 'upload':\n                    if (isFilterFinetune) {\n                        parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.remove('e-hide');\n                    }\n                    break;\n                case 'bold':\n                    parent.notify('selection', { prop: 'setInitialTextEdit', value: { bool: false } });\n                    if (parent.activeObj.textSettings.bold && parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'italic' } });\n                    }\n                    else if (parent.activeObj.textSettings.bold && !parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'default' } });\n                    }\n                    else if (!parent.activeObj.textSettings.bold && parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'bolditalic' } });\n                    }\n                    else if (!parent.activeObj.textSettings.bold && !parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'bold' } });\n                    }\n                    if (parent.element.querySelector('#' + parent.element.id + '_bold').classList.contains('e-selected-btn')) {\n                        parent.element.querySelector('#' + parent.element.id + '_bold').classList.remove('e-selected-btn');\n                    }\n                    else {\n                        parent.element.querySelector('#' + parent.element.id + '_bold').classList.add('e-selected-btn');\n                    }\n                    break;\n                case 'italic':\n                    parent.notify('selection', { prop: 'setInitialTextEdit', value: { bool: false } });\n                    if (parent.activeObj.textSettings.bold && parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'bold' } });\n                    }\n                    else if (parent.activeObj.textSettings.bold && !parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'bolditalic' } });\n                    }\n                    else if (!parent.activeObj.textSettings.bold && parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'default' } });\n                    }\n                    else if (!parent.activeObj.textSettings.bold && !parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'italic' } });\n                    }\n                    if (parent.element.querySelector('#' + parent.element.id + '_italic').classList.contains('e-selected-btn')) {\n                        parent.element.querySelector('#' + parent.element.id + '_italic').classList.remove('e-selected-btn');\n                    }\n                    else {\n                        parent.element.querySelector('#' + parent.element.id + '_italic').classList.add('e-selected-btn');\n                    }\n                    break;\n                case 'croptransform':\n                    this.refreshToolbar('croptransform');\n                    break;\n                case 'rotateleft':\n                case 'rotateright':\n                case 'horizontalflip':\n                case 'verticalflip':\n                    parent.transformSelect(type);\n                    parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n                    break;\n                case 'save':\n                    if (parent.element.querySelector('#' + parent.element.id + '_saveBtn').classList.contains('e-hide')) {\n                        parent.element.querySelector('#' + parent.element.id + '_saveBtn').classList.remove('e-hide');\n                        break;\n                    }\n                    else {\n                        parent.okBtn();\n                    }\n                    parent.element.querySelector('#' + parent.element.id + '_saveBtn').classList.add('e-hide');\n                    parent.element.querySelector('#' + parent.element.id + '_saveBtn').click();\n                    break;\n            }\n        }\n    };\n    ToolbarModule.prototype.contextualToolbarClicked = function (args) {\n        var parent = this.parent;\n        var selEle = parent.element.querySelector('.e-contextual-toolbar-wrapper .e-toolbar-item.e-selected');\n        if (selEle) {\n            selEle.classList.remove('e-selected');\n        }\n        var type = args.item.id.replace(parent.element.id, '').split('_')[1];\n        var imageFiltering = { filter: parent.toPascalCase(type), cancel: false };\n        parent.trigger('imageFiltering', imageFiltering);\n        if (imageFiltering.cancel) {\n            return;\n        }\n        document.getElementById(args.item.id + 'Canvas').parentElement.parentElement.classList.add('e-selected');\n        parent.currObjType.isFiltered = true;\n        parent.notify('filter', { prop: 'applyImageFilter', value: { option: type.toLowerCase() } });\n        parent.currentFilter = args.item.id;\n        this.enableDisableTbrBtn();\n    };\n    ToolbarModule.prototype.refreshShapeDrawing = function () {\n        var parent = this.parent;\n        var object = { shape: '' };\n        parent.notify('selection', { prop: 'getCurrentDrawingShape', onPropertyChange: false, value: { obj: object } });\n        if (object['shape'] !== '') {\n            parent.notify('selection', { prop: 'setCurrentDrawingShape', onPropertyChange: false, value: { value: '' } });\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.refreshToolbar('main', false);\n        }\n    };\n    ToolbarModule.prototype.zoomInBtnClickHandler = function (e) {\n        var parent = this.parent;\n        if ((parent.zoomSettings.zoomTrigger & ZoomTrigger.Toolbar) === ZoomTrigger.Toolbar) {\n            this.refreshShapeDrawing();\n            if (Browser.isDevice && e.type === 'touchstart') {\n                if (!e.returnValue) {\n                    return;\n                }\n                e.preventDefault();\n            }\n            var zoomIn = document.querySelector('#' + parent.element.id + '_zoomIn');\n            EventHandler.trigger(zoomIn, 'click');\n            var obj = { bool: false };\n            parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n            if (obj['bool']) {\n                parent.notify('freehand-draw', { prop: 'applyFhd', onPropertyChange: false });\n                this.destroyQuickAccessToolbar();\n            }\n            this.applyPreviewFilter();\n            parent.currObjType.isFiltered = false;\n            if (parent.togglePen) {\n                parent.currObjType.isZoomed = true;\n                parent.freeHandDraw(false);\n                parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n            parent.notify('draw', { prop: 'resetCurrentSelectionPoint' });\n            parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: .1, zoomPoint: null } });\n        }\n    };\n    ToolbarModule.prototype.zoomOutBtnClickHandler = function (e) {\n        var parent = this.parent;\n        if ((parent.zoomSettings.zoomTrigger & ZoomTrigger.Toolbar) === ZoomTrigger.Toolbar) {\n            this.refreshShapeDrawing();\n            if (Browser.isDevice && e.type === 'touchstart') {\n                if (!e.returnValue) {\n                    return;\n                }\n                e.preventDefault();\n            }\n            var zoomOut = document.querySelector('#' + parent.element.id + '_zoomOut');\n            EventHandler.trigger(zoomOut, 'click');\n            var obj = { bool: false };\n            parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n            if (obj['bool']) {\n                parent.notify('freehand-draw', { prop: 'applyFhd', onPropertyChange: false });\n                this.destroyQuickAccessToolbar();\n            }\n            this.applyPreviewFilter();\n            parent.currObjType.isFiltered = false;\n            if (parent.togglePen) {\n                parent.currObjType.isZoomed = true;\n                parent.freeHandDraw(false);\n                parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n            parent.notify('draw', { prop: 'resetCurrentSelectionPoint' });\n            parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: -.1, zoomPoint: null } });\n        }\n    };\n    ToolbarModule.prototype.zoomInBtnMouseDownHandler = function (e) {\n        e.preventDefault();\n        this.zoomBtnHold = setInterval(this.zoomInBtnClickHandler.bind(this), 250);\n    };\n    ToolbarModule.prototype.zoomOutBtnMouseDownHandler = function (e) {\n        e.preventDefault();\n        this.zoomBtnHold = setInterval(this.zoomOutBtnClickHandler.bind(this), 250);\n    };\n    ToolbarModule.prototype.zoomBtnMouseUpHandler = function () {\n        clearInterval(this.zoomBtnHold);\n        this.zoomBtnHold = 0;\n    };\n    ToolbarModule.prototype.closeContextualToolbar = function () {\n        var parent = this.parent;\n        var isContextualToolbar = false;\n        if ((parent.element.querySelector('#' + parent.element.id + '_contextualToolbar') &&\n            !parent.element.querySelector('#' + parent.element.id + '_contextualToolbar').parentElement.classList.contains('e-hide')) ||\n            (parent.element.querySelector('#' + parent.element.id + '_headWrapper')\n                && !parent.element.querySelector('#' + parent.element.id + '_headWrapper').parentElement.classList.contains('e-hide'))) {\n            parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n            parent.okBtn();\n            this.refreshMainToolbar();\n            isContextualToolbar = true;\n        }\n        return isContextualToolbar;\n    };\n    ToolbarModule.prototype.destroyQuickAccessToolbar = function () {\n        var parent = this.parent;\n        var quickToolbar = document.getElementById(parent.element.id + '_quickAccessToolbar');\n        if (quickToolbar && quickToolbar.classList.contains('e-control')) {\n            getComponent(quickToolbar, 'toolbar').destroy();\n        }\n        var qatArea = document.getElementById(parent.element.id + '_quickAccessToolbarArea');\n        if (qatArea) {\n            qatArea.style.display = 'none';\n        }\n    };\n    ToolbarModule.prototype.renderSlider = function (type) {\n        var parent = this.parent;\n        var canvasWrapper = document.querySelector('#' + parent.element.id + '_contextualToolbarArea');\n        var hdrWrapper = document.querySelector('#' + parent.element.id + '_headWrapper');\n        var labelWrapper = document.querySelector('#' + parent.element.id + '_labelWrapper');\n        if (!hdrWrapper) {\n            hdrWrapper = canvasWrapper.appendChild(parent.createElement('div', {\n                id: parent.element.id + '_headWrapper',\n                styles: 'position: relative'\n            }));\n            labelWrapper = hdrWrapper.appendChild(parent.createElement('label', {\n                id: parent.element.id + '_labelWrapper',\n                styles: Browser.isDevice ? 'position: absolute; top: 25%; left: calc(50% - 150px); font-size: 15px; text-transform: capitalize; font-weight: 400;'\n                    : 'position: absolute; top: 25%; left: calc(50% - 226px); font-size: 15px; text-transform: capitalize; font-weight: 400;'\n            }));\n        }\n        else {\n            hdrWrapper.style.display = 'block';\n        }\n        labelWrapper.textContent = this.l10n.getConstant(parent.toPascalCase(type));\n        var sliderWrapper = hdrWrapper.appendChild(parent.createElement('div', {\n            id: parent.element.id + '_sliderWrapper',\n            styles: 'position: absolute'\n        }));\n        var value = parent.getCurrAdjustmentValue(type);\n        var min;\n        var max;\n        var slider;\n        if (type === 'brightness' || type === 'contrast' || type === 'saturation' || type === 'exposure') {\n            if (parent.finetuneSettings) {\n                if (type === 'brightness' && parent.finetuneSettings.brightness) {\n                    min = parent.finetuneSettings.brightness.min;\n                    max = parent.finetuneSettings.brightness.max;\n                }\n                else if (type === 'contrast' && parent.finetuneSettings.contrast) {\n                    min = parent.finetuneSettings.contrast.min;\n                    max = parent.finetuneSettings.contrast.max;\n                }\n                else if (type === 'saturation' && parent.finetuneSettings.saturation) {\n                    min = parent.finetuneSettings.saturation.min;\n                    max = parent.finetuneSettings.saturation.max;\n                }\n                else if (type === 'exposure' && parent.finetuneSettings.exposure) {\n                    min = parent.finetuneSettings.exposure.min;\n                    max = parent.finetuneSettings.exposure.max;\n                }\n                else {\n                    min = -100;\n                    max = 100;\n                }\n            }\n            else {\n                min = -100;\n                max = 100;\n            }\n            slider = this.createSlider(min, max, value, type);\n        }\n        else if (type === 'hue' || type === 'blur' || type === 'opacity') {\n            if (parent.finetuneSettings) {\n                if (type === 'hue' && parent.finetuneSettings.hue) {\n                    min = parent.finetuneSettings.hue.min;\n                    max = parent.finetuneSettings.hue.max;\n                }\n                else if (type === 'blur' && parent.finetuneSettings.blur) {\n                    min = parent.finetuneSettings.blur.min;\n                    max = parent.finetuneSettings.blur.max;\n                }\n                else if (type === 'opacity' && parent.finetuneSettings.opacity) {\n                    min = parent.finetuneSettings.opacity.min;\n                    max = parent.finetuneSettings.opacity.max;\n                }\n                else {\n                    min = 0;\n                    max = 100;\n                }\n            }\n            else {\n                min = 0;\n                max = 100;\n            }\n            slider = this.createSlider(min, max, value, type);\n        }\n        slider.appendTo('#' + parent.element.id + '_sliderWrapper');\n        sliderWrapper.style.left = (parseFloat(canvasWrapper.style.width) - parseFloat(slider.width)) / 2 + 'px';\n    };\n    ToolbarModule.prototype.createSlider = function (min, max, value, type) {\n        var _this = this;\n        var parent = this.parent;\n        return new Slider({\n            value: value,\n            tooltip: { isVisible: true, placement: 'Before', showOn: 'Always' },\n            type: 'MinRange',\n            min: min,\n            max: max,\n            step: 10,\n            width: Browser.isDevice ? '200px' : '300px',\n            cssClass: 'e-slider',\n            change: function (args) {\n                parent.setCurrAdjustmentValue(type, args.value);\n                _this.enableDisableTbrBtn();\n            }\n        });\n    };\n    ToolbarModule.prototype.applyPreviewFilter = function () {\n        var parent = this.parent;\n        if (document.querySelector('#' + parent.element.id + '_sliderWrapper') ||\n            parent.currObjType.isFiltered) {\n            parent.initialAdjustmentValue = parent.canvasFilter = this.lowerContext.filter;\n            parent.currObjType.isFiltered = false;\n        }\n    };\n    ToolbarModule.prototype.unselectBtn = function () {\n        var parent = this.parent;\n        var selectors = [\n            '#' + parent.element.id + '_brightness',\n            '#' + parent.element.id + '_contrast',\n            '#' + parent.element.id + '_hue',\n            '#' + parent.element.id + '_saturation',\n            '#' + parent.element.id + '_opacity',\n            '#' + parent.element.id + '_blur',\n            '#' + parent.element.id + '_exposure'\n        ];\n        for (var _i = 0, selectors_1 = selectors; _i < selectors_1.length; _i++) {\n            var selector = selectors_1[_i];\n            var element = document.querySelector(selector);\n            if (element.classList.contains('e-selected-btn')) {\n                element.classList.remove('e-selected-btn');\n                break;\n            }\n        }\n    };\n    ToolbarModule.prototype.openSlider = function (type) {\n        this.unselectBtn();\n        this.parent.currObjType.isFiltered = true;\n        this.refreshToolbar('color', null, null, null, type);\n        document.getElementById(this.parent.element.id + '_' + type).classList.add('e-selected-btn');\n    };\n    ToolbarModule.prototype.refreshSlider = function () {\n        var sliderWrapper = document.querySelector('#' + this.parent.element.id + '_sliderWrapper');\n        // eslint-disable-next-line\n        var slider = document.querySelector('.e-slider');\n        var hdrWrapper = document.querySelector('#' + this.parent.element.id + '_headWrapper');\n        if (hdrWrapper) {\n            hdrWrapper.style.display = 'none';\n        }\n        if (sliderWrapper && slider) {\n            slider.ej2_instances[0].destroy();\n            sliderWrapper.remove();\n        }\n    };\n    ToolbarModule.prototype.updateToolbarItems = function () {\n        var parent = this.parent;\n        var selFillElem = parent.element.querySelector('.e-fill.e-template .e-dropdownbtn-preview');\n        var selStrokeElem = parent.element.querySelector('.e-stroke.e-template .e-dropdownbtn-preview');\n        var selTextStrokeElem = parent.element.querySelector('.e-text-font-color.e-template .e-dropdownbtn-preview');\n        var selPenStrokeElem = parent.element.querySelector('.e-pen-stroke-color.e-template .e-dropdownbtn-preview');\n        var strokeWidthElem = parent.element.querySelector('.e-shape-stroke-width');\n        var fontFamilyElem = parent.element.querySelector('.e-text-font-family');\n        var fontSizeElem = parent.element.querySelector('.e-text-font-size');\n        var boldBtn = parent.element.querySelector('#' + parent.element.id + '_bold');\n        var italicBtn = parent.element.querySelector('#' + parent.element.id + '_italic');\n        if (isNullOrUndefined(parent.activeObj.strokeSettings.strokeWidth)) {\n            parent.activeObj.strokeSettings.strokeWidth = 2;\n        }\n        if (selFillElem) {\n            if (parent.activeObj.strokeSettings.fillColor === '') {\n                selFillElem.classList.add('e-nocolor-item');\n            }\n            else {\n                selFillElem.classList.remove('e-nocolor-item');\n                selFillElem.style.background = parent.activeObj.strokeSettings.fillColor;\n            }\n            getComponent(parent.element.id + '_shape_fill', 'colorpicker').value\n                = parent.activeObj.strokeSettings.fillColor + 'ff';\n        }\n        if (selStrokeElem) {\n            selStrokeElem.style.background = parent.activeObj.strokeSettings.strokeColor;\n            getComponent(parent.element.id + '_shape_stroke', 'colorpicker').value\n                = parent.activeObj.strokeSettings.strokeColor + 'ff';\n        }\n        if (selTextStrokeElem) {\n            selTextStrokeElem.style.background = parent.activeObj.strokeSettings.strokeColor;\n            getComponent(parent.element.id + '_text_font', 'colorpicker').value\n                = parent.activeObj.strokeSettings.strokeColor + 'ff';\n        }\n        if (selPenStrokeElem) {\n            selPenStrokeElem.style.background = parent.activeObj.strokeSettings.strokeColor;\n            getComponent(parent.element.id + '_pen_stroke', 'colorpicker').value\n                = parent.activeObj.strokeSettings.strokeColor + 'ff';\n        }\n        if (fontFamilyElem) {\n            if (Browser.isDevice) {\n                fontFamilyElem.setAttribute('style', 'font-family:' + parent.activeObj.textSettings.fontFamily.toLowerCase());\n            }\n            else {\n                fontFamilyElem.textContent = parent.activeObj.textSettings.fontFamily;\n            }\n        }\n        if (fontSizeElem) {\n            for (var i = 0; i < parent.fontSizeColl.length; i++) {\n                if (parseInt(parent.fontSizeColl[i].text, 10) >= Math.round(parent.activeObj.textSettings.fontSize)) {\n                    fontSizeElem.textContent = (i + 1).toString();\n                    break;\n                }\n            }\n        }\n        if (boldBtn) {\n            if (parent.activeObj.textSettings.bold) {\n                boldBtn.classList.add('e-selected-btn');\n            }\n            else {\n                boldBtn.classList.remove('e-selected-btn');\n            }\n        }\n        if (italicBtn) {\n            if (parent.activeObj.textSettings.italic) {\n                italicBtn.classList.add('e-selected-btn');\n            }\n            else {\n                italicBtn.classList.remove('e-selected-btn');\n            }\n        }\n        if (strokeWidthElem) {\n            var strokeWidth = Math.round((parent.activeObj.strokeSettings.strokeWidth)).toString();\n            strokeWidthElem.textContent = this.getStrokeWidth(strokeWidth);\n        }\n    };\n    ToolbarModule.prototype.getStrokeWidth = function (text) {\n        var strokeWidth;\n        var currentWidth = parseInt(text, 10) / 2;\n        switch (currentWidth) {\n            case 1:\n                strokeWidth = this.l10n.getConstant('XSmall');\n                break;\n            case 2:\n                strokeWidth = this.l10n.getConstant('Small');\n                break;\n            case 3:\n                strokeWidth = this.l10n.getConstant('Medium');\n                break;\n            case 4:\n                strokeWidth = this.l10n.getConstant('Large');\n                break;\n            case 5:\n                strokeWidth = this.l10n.getConstant('XLarge');\n                break;\n        }\n        return strokeWidth;\n    };\n    ToolbarModule.prototype.cancelPan = function () {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n        var panBtn = parent.element.querySelector('.e-img-pan .e-btn');\n        if (panBtn) {\n            panBtn.classList.remove('e-selected-btn');\n        }\n        parent.pan(false);\n    };\n    ToolbarModule.prototype.refreshMainToolbar = function () {\n        if (this.currToolbar !== 'main') {\n            this.refreshToolbar('main');\n        }\n    };\n    ToolbarModule.prototype.destroySubComponents = function () {\n        var parent = this.parent;\n        var inputElement = parent.element.querySelectorAll('input.e-control');\n        var btnElement = parent.element.querySelectorAll('button.e-control');\n        for (var i = 0, len = inputElement.length; i < len; i++) {\n            if (inputElement[i].classList.contains('e-color-picker')) {\n                getComponent(inputElement[i], 'color-picker').destroy();\n                detach(select('input#' + inputElement[i].id, parent.element));\n            }\n        }\n        for (var i = 0, len = btnElement.length; i < len; i++) {\n            if (btnElement[i].classList.contains('e-dropdown-btn')) {\n                getComponent(btnElement[i], 'dropdown-btn').destroy();\n                detach(select('button#' + btnElement[i].id, parent.element));\n            }\n            else if (btnElement[i].classList.contains('e-btn')) {\n                getComponent(btnElement[i], 'btn').destroy();\n                detach(select('button#' + btnElement[i].id, parent.element));\n            }\n        }\n    };\n    ToolbarModule.prototype.setInitialShapeSettings = function (args) {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.currObjType.shape = args.item.id;\n        parent.activeObj.shape = parent.currObjType.shape.toLowerCase();\n        parent.currObjType.isDragging = parent.currObjType.isCustomCrop = false;\n        parent.activeObj.shapeDegree = parent.transform.degree;\n        parent.activeObj.shapeFlip = parent.transform.currFlipState;\n        parent.activeObj.textFlip = parent.transform.currFlipState;\n        parent.activeObj.flipObjColl = [];\n    };\n    ToolbarModule.prototype.getModuleName = function () {\n        return 'toolbar-module';\n    };\n    return ToolbarModule;\n}());\nexport { ToolbarModule };\n"],"names":["Crop","parent","this","croppedDegree","cropDestPoints","startX","startY","width","height","tempFlipPanPoint","x","y","isPreventScaling","addEventListener","prototype","destroy","isDestroyed","removeEventListener","on","cropping","off","crop","args","updateCropPvtVar","prop","cropImg","value","cropCircle","setCurrSelPoints","updateRotatePan","calcRatio","isObjInImage","getCurrFlipState","prevCropCurrObj","isNullOrUndefined","reset","getModuleName","lowerCanvas","lowerContext","getContext","upperCanvas","upperContext","isRotateCrop","isNullCrop","actPoint","activeObj","activePoint","notify","onPropertyChange","transform","degree","updateCropObj","point","img","destLeft","destTop","destWidth","destHeight","rotateCrop","currFlipState","flipCrop","tempZoomFactor","zoomFactor","ratio","currSelectionPoint","extend","obj","maxDimension","clearRect","srcLeft","srcTop","srcWidth","srcHeight","clientWidth","clientHeight","temp","filter","drawImage","baseImg","cropObjColl","isPreventApply","i","len","objColl","length","shape","canvas","cropFreehandDrawColl","context","isCircleCrop","currObjType","isCustomCrop","pan","defaultZoomFactor","afterCropActions","object","currObj","cropObj","tempDegree","push","setTransform","isPreventDimension","shapeFlip","freehandCounter","pointColl","flipState","getCurrCropState","pop","bool","type","isPreventDestination","isPreventCircleCrop","isReverseFlip","panPoint","totalPannedPoint","tempCurrFlipState","flipColl","tempFlipColl","isUndoRedo","zoomPoint","isRotateZoom","imageRatio","endX","endY","size","shapeDegree","Math","abs","textSettings","fontRatio","fontSize","cropPointCollection","selPoint","n","ratioX","ratioY","points","l","isSetDimension","destPoint","totalPannedInternalPoint","destPoints","cropPointColl","selPointColl","cropSelPointColl","isSave","isFlip","isReverse","globalCompositeOperation","beginPath","centerX","centerY","radius","arc","PI","closePath","fill","restore","isActiveObj","isAllowInvert","state","rotateFlipColl","isInitialRotate","isRotate","currentPannedPoint","panRegion","_this","disabled","isImageLoaded","object_1","isCropToolbar","isUndoAction","transitionArgs","cancel","startPoint","endPoint","preventScaling","isBlazor","events","hasDelegate","dotNetRef","invokeMethodAsync","then","cropEvent","trigger","splitWords","split","horTopLine","isCrop","prevCropObj","prevObj","zoomSettings","setProperties","previousZoomValue","currSelPtObj","prevCurrSelectionPoint","operation","previousObj","previousObjColl","previousPointColl","previousSelPointColl","previousCropObj","previousText","currentText","previousFilter","updateToolbar","element","isApplyBtn","isCropping","isZooming","cType","widthRatio","heightRatio","dummyObj","isInside","panObj","collection","isRotateFlipCollection","region","Draw","cancelObjColl","cancelPointColl","isInitialLoading","fileName","isErrorImage","isShapeTextInserted","tempStrokeSettings","strokeColor","fillColor","strokeWidth","tempTextSettings","text","fontFamily","bold","italic","underline","tempAdjValue","tempFilter","tempUndoRedoStep","tempFreehandCounter","tempCurrFhdIndex","isCancelAction","rotatedFlipCropSel","zoomCrop","isImageEdited","isFileChanged","isNewPath","arrowDimension","bar","arrow","arrowSolid","circle","square","draw","updatePrivateVariables","drawObject","updateActiveObject","clearOuterCanvas","setDestPoints","updateCurrTransState","currTransState","renderImage","drawImgToCanvas","updateCanvas","performCancel","updateFlipPan","select","callUpdateCurrTransState","resetPanPoints","setClientTransDim","redrawImgWithObj","setCurrentObj","performPointZoom","open","getInitialLoaded","fileSelect","fileType","initZoomValue","currSelPoint","prevActObj","dlgBtnClick","dlgCloseBtnClick","moveToSelectionRange","isCropRatio","isPreventDrag","saveContext","isPreventSelection","canvasDraw","toLowerCase","setDragLimit","drawCropRatio","strokeSettings","obj_1","isText","obj_2","keyHistory","fillStyle","fillRect","rotateContext","drawOuterSelection","drawShapeObj","undefined","ctx","rotationAngle","rotatedAngle","translate","rotate","updateWidthHeight","drawCustomSelection","imgWidth","imgHeight","updatePoints","diff","adjToCenter","diffX","diffY","isMouseMove","horCircleWidth","verCircleHeight","horBottomLine","verLeftLine","verRightLine","topLeftCircle","topCenterCircle","topRightCircle","centerLeftCircle","centerRightCircle","bottomLeftCircle","bottomCenterCircle","bottomRightCircle","rotationCirclePoint","isCropCircle","lineWidth","tempObj","strokeStyle","themeColl","theme","moveTo","lineTo","stroke","rect","selectionSettings","showCircle","drawCenterCircles","rotationCircleLine","drawArrowHead","isStartHead","start","end","arrowCircleSolid","arrowCircle","arrowBar","arrowSquareStart","arrowSquareEnd","currentShape","horLineWidth","verLineHeight","selectionWidth","selectionHeight","tempFillStyle","drawSquareLines","ellipse","shapeCircle","shapeLine","triangleDirection","nextPoint","shapeText","drawSelection","drawRotationArcLine","isHorizontalflip","isVerticalflip","flipObjColl","horTopInnerLine","horBottomInnerLine","verLeftInnerLine","verRightInnerLine","tempWidth","save","clip","x1","y1","x2","y2","tempLineWidth","dx","dy","angle","atan2","strokeRect","squareStartIntersectX1","cos","squareStartIntersectY1","sin","endCircleIntersectX1","endCircleIntersectY1","squareEndIntersectX1","squareEndIntersectY1","startCircleIntersectX1","startCircleIntersectY1","circleRadius","a","intersect","b","t2","sqrt","intersectionX1","intersectionY1","rows","lineHeight","yPoint","textStyle","font","j","scale","updateActPoint","rotateText","fillText","k","textFlipDegree","left","top_1","isRotatePan","totalPannedClientPoint","setTransformColl","isMouseWheel","isMouseDown","imageOnLoad","src","proxy","onload","hideSpinner","style","opacity","isUndoZoom","display","Browser","isDevice","querySelector","offsetHeight","toolbarHeight","eventargs","isOkBtn","onerror","errorLoading","fileOpened","isValidImage","direction","toPascalCase","setAttribute","zoom","isContextualToolbar","textArea","document","id","classList","contains","isFiltered","canvasFilter","adjustmentValue","initialAdjustmentValue","isBrightnessAdjusted","currentFilter","obj_3","tempAdjustmentLevel","adjustmentLevel","step","cursor","add","cancelItems","togglePan","isDisabled","isCropSelection","isCropTab","togglePen","cancelPen","cancelText","indexOf","cancelShape","cancelSelection","tempPointsColl","isFreehandDrawCustomized","currIndex","appliedUndoRedoColl","currentObjColl","clearSelection","isDragging","cancelCropSelection","tempSelectionObj","selPointCollObj","isPrevent","cropZoomFactor","drawNewSelection","cropShape","updateSelectionInsert","shapeSettingsObj","getSelectionType","selectionChangingArgs","action","previousSelectionSettings","currentSelectionSettings","onSelectionResizeStart","imgLeft_1","imgTop_1","imgWidth_1","imgHeight_1","lowerCanvasWidth_1","lowerCanvasHeight_1","activePoint_1","imgLeft_2","imgTop_2","imgWidth_2","imgHeight_2","lowerCanvasWidth_2","lowerCanvasHeight_2","activePoint_2","max","min","imgLeft","imgTop","lowerCanvasWidth","lowerCanvasHeight","tempObjColl","tempActiveObj","tempTogglePen","getDefaultFilter","isObj","cropZoom","defaultZoom","srcPoints","drawCropSelectionImage","isDefaultZoom","xDiff","yDiff","isAfterCropAction","clearContext","drawZoomPanImage","adjustPanning","openNewImage","inMemoryContext","inMemoryCanvas","showSpinner","toolbar","defToolbarItems","getElementById","update","openURL","getFileExtensionFromURL","putImageData","toDataURL","export","checkToolbarTemplate","inputElem","getComponent","baseImgSrc","showDialogPopup","Dialog","header","closeOnEscape","content","target","isModal","animationSettings","effect","close","bind","buttons","click","buttonModel","iconCss","isPrimary","appendTo","restoreOldImage","data","url","lastDotIndex","lastIndexOf","slice","inputElement","filesData","files","fileData","fileExtension","name","window","URL","createObjectURL","toolbarTemplate","toString","maxZoomFactor","isSelectionBiggerThanCanvas","isSelectionOutsideCanvas","panX","panY","isBigger","isOutside","Export","updatePvtVar","exportImg","exportToCanvas","imageName","isZoomed","beforeSave","saving","beforeSaveEvent","observableSaveArgs","lowerCaseType","toSVGImg","toBlobFn","saved","top","maxWidth","maxHeight","tempCanvas","dataUrl","svg","createElementNS","setAttributeNS","appendChild","innerHTML","svgDataUrl","btoa","downloadImg","toBlob","blob","blobUrl","tempContextFilter","parseFloat","join","createElement","attrs","tempContext","updateSaveContext","exportTransformedImage","tempPointColl","href","download","body","documentElement","parentNode","removeChild","flip","exportRotate","exportFlip","setMaxDim","flipHorizontal","flipVertical","imageData","getImageData","newWidth","newHeight","Filter","brightness","contrast","hue","saturation","blur","exposure","sharpen","bw","appliedFilter","finetuneImage","setFilter","updateFinetunes","updateBrightFilter","setAdjustment","updateFilter","initFilter","setCurrAdjValue","updateAdj","getCurrentObj","opacityValue","fs","finetuneSettings","defaultValue","setFilterAdj","isPreview","brightnessValue","values","getFilterValue","saturate","bright","saturatePercent","saturatePercentage","getSaturationFilterValue","getDefaultCurrentFilter","setTempFilterValue","tempSplitWords","prevFilter","valueArr","setFilterValue","setSaturationFilterValue","round","selEle","remove","filterCanvas","parentElement","finetuneOption","tempFlipPanPointObj","zoomObj","FreehandDrawing","fhdObj","lastWidth","lastVelocity","time","pointX","pointY","isFreehandDrawing","freehandDownPoint","isFreehandPointMoved","pointCounter","currFHDIdx","selPoints","tempFHDStyles","updateFhdPvtVar","hoverFhd","freehandDownHandler","freehandUpHandler","parseInt","isFHDIdx","deleteFhd","freehandRedraw","selectFhd","applyFhd","cancelFhd","updateFHDCurPts","rotateFhdColl","flipFHDColl","panFHDColl","updateFHDColl","zoomFHDColl","applyPenDraw","freeHandDraw","getSqPtFD","fhdHovIdx","penStrokeWidth","updateCropPtsForSel","fhdSelID","fhdSelIdx","idx","controlPoint1","controlPoint2","minStrokeWidth","maxStrokeWidth","startDraw","calcCurveCP","e","Date","getTime","clientX","clientY","touches","EventHandler","freehandMoveHandler","getBoundingClientRect","processPoint","fhCnt","mouseDown","lastPoint","isLastPointTooClose","distanceTo","p0","p1","p2","p3","dx1","dy1","dx2","dy2","m1","m2","l1","l2","cm","tx","ty","tempVelocity","pointVelocity","drawCurve","pow","startWidth","endWidth","t1","t3","u1","u2","u3","widthValue","bezierLength","drawSteps","ceil","drawArc","t","pointX1","pointY1","pointX2","pointY2","pointX3","pointY3","bezierPoint","cp1","cp2","sPoints","selectedPoint","color","isSelected","index","okBtn","isId","tempSelPointColl","count","zoomX","zoomY","lowercaseValue","pointsHorizontalFlip","pointsVerticalFlip","isIndex","Selection","diffPoint","oldPoint","isTouch","isObjSelected","isFhdPoint","dragPoint","isShapeInserted","triangle","triangleRatio","isFirstMove","startTouches","tempTouches","currMousePoint","cursorTargetId","isPreventDragging","dragElement","textRow","mouseDownPoint","previousPoint","zoomType","isInitialTextEdited","dragCanvas","isFhdCustomized","touchEndPoint","isFhdEditing","currentDrawingShape","initialPrevObj","touchTime","resizedElement","selection","selMouseUpEvent","setCursor","updateActivePoint","updateCursorStyles","setTextSelection","setActivePoint","calcShapeRatio","applyCurrShape","performTabAction","setDragDirection","setTimeout","redrawShape","setTextBoxStylesToActObj","mouseDownEventHandler","mouseMoveEventHandler","mouseUpEventHandler","canvasMouseDownHandler","canvasMouseMoveHandler","canvasMouseUpHandler","touchStartHandler","keyDownEventHandler","handleScroll","textKeyDown","deleteItem","updatePrevShapeSettings","panDown","adjustActObjForLineArrow","findTarget","getCurrentFlipState","setDragWidth","setDragHeight","getTransRotationPoint","adjustNEPoints","adjustRotationPoints","getResizeDirection","timer","pathAdjustedIndex","allowUndoRedoPush","getMouseCursor","actObj","isApply","setCursorForLineArrow","setCursorForPath","setCursorForRotatedObject","setCursorFromObj","isResize","setCursorForFreehandDrawing","isMove","horTopLinePointColl","verLeftLinePointColl","verRightLinePointColl","horBottomLinePointColl","rotationCirclePointColl","getRectanglePoints","adjustCursorStylesForRotatedState","floor","cursorMap","nw-resize","n-resize","ne-resize","w-resize","e-resize","sw-resize","s-resize","se-resize","getResizeElement","resizeMappings","positiveDegree","_i","resizeMappings_1","_a","startDegree","endDegree","resizeElement","isEntered","z1","z2","z3","z4","previousShapeSettings","shapeResizingArgs","shapeMovingArgs","isTextArea","updateNWPoints","rotatedDegree","triggerShapeChange","updateNPoints","updateNEPoints","updateWPoints","updateEPoints","updateSWPoints","updateSPoints","updateSEPoints","currentShapeSettings","eventType","onShapeResizeStart","shapeSettings","selectionResizingArgs","onShapeDragStart","tempHeight","limitDrag","isStart","preventDraggingInvertly","preventTextDraggingInvertly","isLimiting","preventInverseResize","getScaleRatio","newScale","percentage","prevDiffX","prevDiffY","adjustNWPoints","top_2","adjustSWPoints","adjustSEPoints","rectangle","cx","cy","rotatedC","rotatePoints","newCenter","newBottomRight","newTopLeft","rotatedD","newBottomLeft","newTopRight","rotatedB","rotatedA","setResizedValue","getResizedElement","resizeMappings_2","isLine","updateCursorStylesForLineArrow","updateCursorStylesForPath","textWidth","textHeight","selectInfo","currentTarget","isPan","imageEditorClickEventArgs","setXYPoints","clicked","clickEvent","getImagePoints","isShape","isShapeTouch","isFreehandDraw","isFreehandDrawTouch","isShapeClick","applyObj","isLineArrow","x_1","y_1","indexObj","freehandSelectedIndex","tempHoveredIndex","isPenEdit","canvasCursor","preventDefault","bbox","isZoomOut","targetTouches","pageX","offsetLeft","pageY","offsetTop","firstFingerX","firstFingerY","secondFingerX","secondFingerY","center","zoomTrigger","ZoomTrigger","Pinch","calculateScale","stopImmediatePropagation","onPanEnd","panEventArgs","onShapeResizeEnd","onSelectionResizeEnd","onShapeDragEnd","prevCropObj_1","updPtCollForShpRot","JSON","stringify","applyCurrActObj","splitWords_1","isCropSelection_1","isInitialLine","isAdjusted","getCurrentIndex","findTargetObj","splice","setTimer","rgbToHex","offsetX","offsetY","tempPanMoveObj","tempPanMove","panMove","panMoveObj","ctrlKey","key","allowUndoRedo","Commands","isKeyBoardCrop","isInsideCanvas","stopPropagation","MouseWheel","wheelDelta","String","fromCharCode","which","scrollHeight","originalWidth","originalHeight","standardSize","scaleWidth","getScale","snippetArray","scaleHeight","snippetArray1","originalValue","cursor_1","cursor_2","temp_1","shapeChangingArgs_1","shapeChanging","shapeChangingArgs","shapeEvent","endTouches","startDistance","getDistance","isMouseUp","clearTimeout","smallPoint","largePoint","fontWeight","fontStyle","r","g","componentToHex","rgb","hex","updateFreehandDrawColorChange","freehandDrawSelectedId","object_2","tempFreeHandDrawEditingStyles","rectX","rectY","rectWidth","rectHeight","rectAngle","angleRad","cosAngle","sinAngle","localX","localY","rotatedX","rotatedY","halfWidth","halfHeight","Shape","initShapePvtProps","drawEllipse","drawLine","drawArrow","drawPath","drawRectangle","drawText","redrawActObj","apply","updateShapeChangeEventArgs","updSelChangeEventArgs","iterateObjColl","updImgRatioForActObj","zoomObjColl","redrawObj","rotateObjColl","drawShapeText","redrawText","drawShape","renderTextArea","setTextBoxWidth","findTextTarget","panObjColl","updateFontStyles","applyFontStyle","updateFontRatio","updateFontSize","updateObjColl","pushActItemIntoObj","clearActObj","refreshActiveObj","applyActObj","getShapeSetting","getShapeSettings","isPointsInRange","alignRotateFlipColl","selectShape","deleteShape","getMaxText","getLinePoints","setPointCollForShapeRotation","setTextBoxPos","setTextBoxPoints","alignTextAreaIntoCanvas","initializeTextShape","stopPathDrawing","updateArrowRatio","getSquarePointForRotatedShape","radiusX","radiusY","initializeShape","lineDraw","arrowStart","arrowEnd","setDimension","getArrowType","arrowType","None","Arrow","SolidArrow","Circle","SolidCircle","Square","SolidSquare","Bar","objColl_1","setCenterPoints","setPointCollForLineAndArrow","textFlip","isPublicMethod","isInitialText","measureText","drawShapeTextEvent","addLetter","updateTextFromTextArea","renderWidth","renderHeight","letter","widthColl","updatePathRatio","preventApply","len_1","updateArrowSize","len_2","updateCurrentActiveObjPoint","currActObjIndex","flipLineArrowObj","rotateLineArrowObj","prevPoint","lineArrowHorizontalFlip","lineArrowVerticalFlip","currPoint","getRotDegOfShape","transformTextArea","border","overflow","focus","setTextBoxHeight","textAreaWidth","letterWidth","textAreaLeft","textAreaTop","selectedText","selectionStart","finish","selectionEnd","substring","len_3","len_4","len_5","isTextBox","item","updateFontStyle","getTextAreaWidth","dimension","dimensions_1","dimensions_2","tempBold","tempItalic","isActObj","letters","transformOrigin","getObjDetails","shapeDetails","getFreehandDrawDetails","ShapeType","FreehandDraw","shapeDetailsColl","inRange","popForDefaultTransformedState","popForDefaultFlipState","popForDefaultRotateState","rotateRight","rotateleft","horizontal","vertical","maxi","maxStr","maxText","m","getSlope","getIntercept","lesserY","i_1","prev","lesserX","i_2","isSameAxis","slope","p4","reverse","Transform","disablePan","isReverseRotate","prevZoomValue","cropDimension","isPreventSelect","initTransformPvtVar","rotateImage","flipImage","setDestPointsForFlipState","zoomAction","disableZoomOutBtn","rotatedFlip","drawPannedImage","drawPannImage","performTransformation","updateTransform","rotatePan","drawRotatedImage","limitPan","updateFlipActiveObj","resetZoom","setCurrPanRegion","calcMaxDimension","updatePanPoints","currDestPoint","zoomBtnHold","transCurrObj","previousDegree","currentDegree","rotating","rotateEvent","activeObjShape","rotateDegree","updateCurrSelectionPoint","previousDirection","flipping","flipEvent","lowercaseDirection","updateFlipState","selObj","updateFlipColl","toLocaleLowerCase","verticalFlip","horizontalFlip","lastFourItems","minZoomFactor","powerOften","zoomEventArgs","previousZoomFactor","currentZoomFactor","zooming","zoomEvent","drawZoomImgToCanvas","panObj_1","isAdd","rotateZoom","panObj_2","clearInterval","zoomOut","autoEnablePan","panBtn","setZoomDimension","selectionObj","maxDestLeft","maxDestTop","onPanStart","panEvent","isObjCreated","tempFlipState","Direction","Horizontal","Vertical","rotatePanActiveObj","initialDestLeft","initialDestTop","getCurrentZoomFactor","freehandObj","canvasWrapper","offsetWidth","obj1","refreshOverflow","canvasMaxWidth","canvasMaxHeight","widthScale","heightScale","cssMaxWidth","cssMaxHeight","tempActObj","tempDestLeft","tempDestTop","UndoRedo","undoRedoStep","undoRedoColl","tempUndoRedoColl","undoRedo","initializeUrPvtProp","updateUrc","refreshUrc","updateCurrUrc","callUndo","callRedo","undo","redo","updateUrObj","updateUndoRedo","undoDefault","tempCurrSelPoint","refreshToolbar","currentCropObj","currentObj","currentPointColl","getZeroZoomObjPointValue","refreshToolbarActions","applyCurrentChanges","shapeTransform","updateFreehandDraw","updateFreehandDrawCustomized","updateDelete","updateTextAreaCustomization","updateText","updateCropTransformItems","endUndoRedo","currentSelPointColl","updateTextBox","allowActiveObj","isUndo","isInitialLoaded","cropDimensionObj","getZeroZoomObjColl","getZeroZoomPointColl","arrowObj","tempArrowObj","__extends","extendStatics","d","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","__decorate","decorators","desc","c","arguments","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","FinetuneSettings","_super","Property","ChildProperty","ZoomSettings","SelectionSettings","ImageEditor","options","call","fontSizeColl","ImageEditor_1","Inject","ToolbarModule","requiredModules","modules","member","preRender","getUniqueID","initializeThemeColl","render","initialize","getPersistData","addOnPersist","onPropertyChanged","newProperties","oldProperties","keys","cssClass","removeClass","replace","trim","addClass","unwireEvent","wireEvent","locale","showQuickAccessToolbar","Toolbar","removeAttribute","concat","getAttribute","className","toolbarTemplateFn","createCanvas","quickAccessToolbar","position","quickAccessToolbarTemplate","quickAccessToolbarTemplateFn","createSpinner","initializeZoomSettings","keyUpEventHandler","windowResizeHandler","isIos","info","screen","orientation","screenOrientation","boxSizing","backgroundColor","resize","crossorigin","adjustToScreen","notifyResetForAllModules","allowShape","textContent","initialZoomValue","freehandDraw","isEllipse","isArrow","isPath","isRectangle","option","applyImageFilter","filterOption","getImageDimension","template","templateID","toolbarArea","toolbarFn","templateParser","isReact","isAngular","templateColl","nodeType","qatFn","querySelectorAll","templateCompiler","compile","error","getTextFromId","1","2","3","4","5","6","7","8","getFinetuneOption","ImageFinetuneOption","Brightness","Contrast","Hue","Saturation","Opacity","Blur","Exposure","setPenStroke","setInitialZoomState","str","strArr","charAt","toUpperCase","getFontSizes","items","selElem","children","setTempFilterProperties","cropSelectedState","tempAdjustmentValue","undoRedoObj","getCurrentCanvasData","setCurrAdjustmentValue","finetuneValueChanging","finetune","getSquarePointForPath","CropCustom","CropSquare","CropCircle","Crop3:2","Crop4:3","Crop5:4","Crop7:5","Crop16:9","updateArrow","updateFontFamily","itemText","text_1","text_2","updateFontColor","updatePenStrokeWidth","updatePenStrokeColor","updateStrokeWidth","updateStrokeColor","updateFillColor","pascalToSplitWords","splitStr","match","map","word","getCurrAdjustmentValue","transformSelect","initializeImageEditor","dotnetRef","prerender","Bootstrap5","primaryColor","secondaryColor","Bootstrap5Dark","Tailwind","TailwindDark","Fluent","FluentDark","Bootstrap4","Bootstrap","BootstrapDark","Material","MaterialDark","Fabric","FabricDark","Highcontrast","Material3","Material3Dark","Complex","Event","NotifyPropertyChanges","Component","FileType","Theme","ImageEditorCommand","ImageFilterOption","ArrowheadType","currToolbar","preventZoomBtn","currentToolbar","selFhdColor","preventEnableDisableUr","initLocale","defaultLocale","ZoomIn","ZoomOut","Undo","Redo","Annotation","Finetune","Sharpen","Default","Chrome","Cold","Warm","Grayscale","BlackAndWhite","Sepia","Invert","Text","Pen","Reset","Save","Select","RotateLeft","RotateRight","HorizontalFlip","VerticalFlip","OK","Cancel","FillColor","StrokeColor","StrokeWidth","FontFamily","FontStyle","FontSize","FontColor","Pan","Move","Load","Custom","Ellipse","Rectangle","Line","Path","Bold","Italic","BoldItalic","XSmall","Small","Medium","Large","XLarge","ABC","Browse","Duplicate","Remove","EditText","Start","End","ArrowSolid","CircleSolid","SquareSolid","CropAndTransform","CropSelection","l10n","L10n","createToolbar","createContextualToolbar","updateToolbarItems","renderQAT","enableDisableTbrBtn","initMainToolbar","createBottomToolbar","refreshMainToolbar","createQuickAccessToolbar","destroyQuickAccessToolbar","zoomBtnMouseUpHandler","refreshDropDownBtn","closeContextualToolbar","destroyBottomToolbar","destroyTopToolbar","destroySubComponents","setLocale","getPenStroke","performDefTbrClick","refreshSlider","renderSlider","refreshShapeDrawing","isToolbar","toolbarItems","align","tooltipText","getConstant","Uploader","allowedExtensions","toolbar_1","uploadItems","selected","created","toolbarType","defToolbarClicked","createLeftToolbarControls","toolbar_2","toolbarElem","initBottomToolbar","toolbar_3","isApplyOption","leftItem","getLeftToolbarItem","rightItem","getRightToolbarItem","mainItem","getMainToolbarItem","zoomItem","getZoomToolbarItem","renderAnnotationBtn","wireZoomBtnEvents","renderSaveBtn","renderCropBtn","renderTransformBtn","visible","prefixIcon","tempToolbarItems","processToolbar","updateContextualToolbar","contextualToolbarArea","initFilterToolbarItem","cHt","ht","processSubToolbar","zoomIn","zoomInBtnMouseDownHandler","zoomInBtnClickHandler","zoomOutBtnMouseDownHandler","zoomOutBtnClickHandler","uploadDiv","uploadElem","getElementsByTagName","uploadBtnElem","onchange","duplicateElement","removeElement","editTextElement","getCurrentShapeIcon","drpDownBtn","DropDownButton","currentFreehandDrawIndex","tempCurrentFreehandDrawIndex","setInitialShapeSettings","cancelPan","cropSelect","getCropTransformToolbarItem","getShapesToolbarItem","initCropTransformToolbar","icon","initShapesToolbarItem","createShapeColor","createShapeBtn","createStartBtn","createEndBtn","ColorPicker","modeSwitcher","noColor","showButtons","mode","change","currentValue","rgba","fillDDB_1","toggle","inline","strokeDDB_1","background","strokeWidthItems","strokeWidthBtn","spanElem_1","drpDownBtn_1","activeBtn","spanElem","strokeEndBtn","getTextToolbarItem","getFontFamilyItems","initTextToolbarItem","createTextColor","createTextBtn","fontColor","strokeDDB_2","fontNameBtn","spanElem_2","fontFamilyBtn_1","createPopupOnClick","beforeItemRender","fontSizeBtnElem","fontSizeSpanElem_1","fontSizes","fontSizeBtn_1","initPenToolbarItem","initAdjustmentToolbarItem","getAdjustmentToolbarItem","getFilterToolbarItem","getPenToolbarItem","createPenColor","createPenBtn","penColor","strokeDDB_3","spanElem_3","drpDownBtn_2","valueToTextContent","contextualToolbarClicked","createCanvasFilter","hdrWrapper","updateFilterCanvas","selector","getQuickAccessToolbarItem","orgToolbarItems","qtArea","quickAccessToolbarClicked","path","annotation","adjustment","duplicateObj","isPreventUndoRedo","pathObject","isFilterFinetune","isDisabledFilter","isDisabledAdjustment","openSlider","imageFiltering","returnValue","applyPreviewFilter","setInterval","quickToolbar","qatArea","labelWrapper","styles","slider","sliderWrapper","createSlider","Slider","tooltip","isVisible","placement","showOn","unselectBtn","selectors_1","ej2_instances","selFillElem","selStrokeElem","selTextStrokeElem","selPenStrokeElem","strokeWidthElem","fontFamilyElem","fontSizeElem","boldBtn","italicBtn","getStrokeWidth","btnElement","detach"],"mappings":"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"}